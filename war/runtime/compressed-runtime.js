<<<<<<< HEAD:war/runtime/compressed-runtime.js
(function(){if(!(window.google&&google.gears)){var f=null;if(typeof GearsFactory!="undefined")f=new GearsFactory;else try{f=new ActiveXObject("Gears.Factory");f.getBuildInfo().indexOf("ie_mobile")!=-1&&f.privateSetGlobalObject(this)}catch(w){if(typeof navigator.mimeTypes!="undefined"&&navigator.mimeTypes["application/x-googlegears"]){f=document.createElement("object");f.style.display="none";f.width=0;f.height=0;f.type="application/x-googlegears";document.documentElement.appendChild(f)}}if(f){window.google||
(google={});if(!google.gears)google.gears={factory:f}}}})();var plt={};plt.types={};
(function(){plt.types=plt.types||{};function f(c,e){c.appendChild(e)}function w(c){function e(){}e.prototype=c;return new e}var M=0;plt.types.makeEqHashCode=function(){M++;return M};plt.types.getEqHashCode=function(c){if(c&&c._eqHashCode)return c._eqHashCode;if(typeof c=="string")return c;return 0};function B(c,e){this._constructorName=c;this._fields=e;this._eqHashCode=plt.types.makeEqHashCode()}plt.types.Struct=B;B.prototype.toWrittenString=function(c){c.put(this,true);var e=[];e.push("(");e.push(this._constructorName);
for(var m=0;m<this._fields.length;m++){e.push(" ");e.push(plt.types.toWrittenString(this._fields[m],c))}e.push(")");return plt.types.String.makeInstance(e.join(""))};B.prototype.toDisplayedString=B.prototype.toWrittenString;B.prototype.toDomNode=function(c){c.put(this,true);var e=document.createElement("div");e.appendChild(document.createTextNode("("));e.appendChild(document.createTextNode(this._constructorName));for(var m=0;m<this._fields.length;m++){e.appendChild(document.createTextNode(" "));f(e,
plt.types.toDomNode(this._fields[m],c))}e.appendChild(document.createTextNode(")"));return e};B.prototype.isEqual=function(c,e){if(typeof c!="object")return false;if(!c._constructorName)return false;if(c._constructorName!=this._constructorName)return false;if(typeof c._fields==="undefined")return false;if(this._fields.length!=c._fields.length)return false;for(var m=0;m<this._fields.length;m++)if(!plt.types.isEqual(this._fields[m],c._fields[m],e))return false;return true};function S(c){plt.types.Struct.call(this,
"box",[c]);this._eqHashCode=plt.types.makeEqHashCode()}S.prototype=w(plt.types.Struct.prototype);S.prototype.unbox=function(){return this._fields[0]};S.prototype.set=function(c){this._fields[0]=c};plt.types.Logic={TRUE:true,FALSE:false};Boolean.prototype.toWrittenString=function(){if(this.valueOf())return"true";return"false"};Boolean.prototype.toDisplayedString=Boolean.prototype.toWrittenString;Boolean.prototype.isEqual=function(c){return this==c};plt.types.Char=function(c){this.val=c;this._eqHashCode=
plt.types.makeEqHashCode()};plt.types.Char.makeInstance=function(c){return new plt.types.Char(c)};plt.types.Char.prototype.toWrittenString=function(){return"#\\"+this.val};plt.types.Char.prototype.toDisplayedString=function(){return this.val};plt.types.Char.prototype.getValue=function(){return this.val};plt.types.Char.prototype.isEqual=function(c){return c instanceof plt.types.Char&&this.val==c.val};plt.types.Symbol=function(c){this.val=c;this._eqHashCode=plt.types.makeEqHashCode()};var A={};plt.types.Symbol.makeInstance=
function(c){c in A||(A[c]=new plt.types.Symbol(c));return A[c]};plt.types.Symbol.prototype.isEqual=function(c){return c instanceof plt.types.Symbol&&this.val==c.val};plt.types.Symbol.prototype.toString=function(){return this.val};plt.types.Symbol.prototype.toWrittenString=function(){return this.val};plt.types.Symbol.prototype.toDisplayedString=function(){return this.val};plt.types.Empty=function(){this._eqHashCode=plt.types.makeEqHashCode()};plt.types.Empty.EMPTY=new plt.types.Empty;plt.types.Empty.prototype.isEqual=
function(c){return c instanceof plt.types.Empty};plt.types.Empty.prototype.first=function(){throw new g("first can't be applied on empty.");};plt.types.Empty.prototype.rest=function(){throw new g("rest can't be applied on empty.");};plt.types.Empty.prototype.isEmpty=function(){return true};plt.types.Empty.prototype.toWrittenString=function(){return"empty"};plt.types.Empty.prototype.toDisplayedString=function(){return"empty"};plt.types.Empty.prototype.append=function(c){return c};plt.types.Cons=function(c,
e){this.f=c;this.r=e;this._eqHashCode=plt.types.makeEqHashCode()};plt.types.Cons.reverse=function(c){for(var e=plt.types.Empty.EMPTY;!c.isEmpty();){e=plt.types.Cons.makeInstance(c.first(),e);c=c.rest()}return e};plt.types.Cons.makeInstance=function(c,e){return new plt.types.Cons(c,e)};plt.types.Cons.prototype.isEqual=function(c,e){if(!(c instanceof plt.types.Cons))return plt.types.Logic.FALSE;return plt.types.isEqual(this.first(),c.first(),e)&&plt.types.isEqual(this.rest(),c.rest(),e)};plt.types.Cons.prototype.first=
function(){return this.f};plt.types.Cons.prototype.rest=function(){return this.r};plt.types.Cons.prototype.isEmpty=function(){return false};plt.types.Cons.prototype.append=function(c){if(c.isEmpty())return this;c=c;for(var e=plt.types.Cons.reverse(this);!e.isEmpty();){c=plt.types.Cons.makeInstance(e.first(),c);e=e.rest()}return c};plt.types.Cons.prototype.toWrittenString=function(c){c.put(this,true);for(var e=[],m=this;!m.isEmpty();){e.push(plt.types.toWrittenString(m.first(),c));m=m.rest()}return"("+
e.join(" ")+")"};plt.types.Cons.prototype.toDisplayedString=function(c){c.put(this,true);for(var e=[],m=this;!m.isEmpty();){e.push(plt.types.toDisplayedString(m.first(),c));m=m.rest()}return"("+e.join(" ")+")"};plt.types.Cons.prototype.toDomNode=function(c){c.put(this,true);var e=document.createElement("div");e.appendChild(document.createTextNode("("));for(var m=this;!m.isEmpty();){f(e,plt.types.toDomNode(m.first(),c));m=m.rest();m.isEmpty()||f(e,document.createTextNode(" "))}e.appendChild(document.createTextNode(")"));
return e};plt.types.Vector=function(c,e){this.elts=new Array(c);if(e)for(var m=0;m<c;m++)this.elts[m]=e[m];else for(m=0;m<c;m++)this.elts[m]=undefined;this._eqHashCode=plt.types.makeEqHashCode()};plt.types.Vector.makeInstance=function(c,e){return new plt.types.Vector(c,e)};plt.types.Vector.prototype.length=function(){return this.elts.length};plt.types.Vector.prototype.ref=function(c){return this.elts[c]};plt.types.Vector.prototype.set=function(c,e){this.elts[c]=e};plt.types.Vector.prototype.isEqual=
function(c,e){if(c!=null&&c!=undefined&&c instanceof plt.types.Vector){if(c.length()!=this.length())return false;for(var m=0;m<this.length();m++)if(!plt.types.isEqual(this.elts[m],c.elts[m],e))return false;return true}else return false};plt.types.Vector.prototype.toWrittenString=function(c){c.put(this,true);for(var e=[],m=0;m<this.length();m++)e.push(plt.types.toWrittenString(this.ref(m),c));return"#("+e.join(" ")+")"};plt.types.Vector.prototype.toDisplayedString=function(c){c.put(this,true);for(var e=
[],m=0;m<this.length();m++)e.push(plt.types.toDisplayedString(this.ref(m),c));return"#("+e.join(" ")+")"};plt.types.Vector.prototype.toDomNode=function(c){c.put(this,true);var e=document.createElement("div");e.appendChild(document.createTextNode("#("));for(var m=0;m<this.length();m++)f(e,plt.types.toDomNode(this.ref(m),c));e.appendChild(document.createTextNode(")"));return e};function C(c,e){for(;e!=0;){var m=c;c=e;e=m%e}return Math.abs(c)}function F(c,e){return Math.abs(c*e/C(c,e))}function J(c,
e){var m;if(isNaN(c)||!isFinite(c))throw new g("not a number: "+c);if(isNaN(e)||!isFinite(e))throw new g("not a number: "+e);for(;e!=0;){m=c;c=e;e=m%e}return c}plt.types.Rational=function(c,e){if(e==undefined)e=1;if(e==0)throw new g("cannot have zero denominator.");var m=J(Math.abs(c),Math.abs(e));this.n=c/m;this.d=e/m;this._eqHashCode=plt.types.makeEqHashCode()};plt.types.Rational.prototype.toWrittenString=function(){return this.d==1?this.n+"":this.n+"/"+this.d};plt.types.Rational.prototype.toDisplayedString=
plt.types.Rational.prototype.toWrittenString;plt.types.Rational.prototype.level=function(){return 0};plt.types.Rational.prototype.lift=function(c){if(c.level()==1)return q.makeInstance(this.n/this.d);if(c.level()==2)return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO);throw new g("invalid level of Number");};plt.types.Rational.prototype.isFinite=function(){return true};plt.types.Rational.prototype.isEqual=function(c){return this.equals(c)};plt.types.Rational.prototype.equals=function(c){return c instanceof
plt.types.Rational&&this.n==c.n&&this.d==c.d};plt.types.Rational.prototype.isInteger=function(){return this.d==1};plt.types.Rational.prototype.isRational=function(){return true};plt.types.Rational.prototype.isReal=function(){return true};plt.types.Rational.prototype.add=function(c){return plt.types.Rational.makeInstance(this.n*c.d+this.d*c.n,this.d*c.d)};plt.types.Rational.prototype.subtract=function(c){return plt.types.Rational.makeInstance(this.n*c.d-this.d*c.n,this.d*c.d)};plt.types.Rational.prototype.multiply=
function(c){return plt.types.Rational.makeInstance(this.n*c.n,this.d*c.d)};plt.types.Rational.prototype.divide=function(c){if(this.d*c.n==0)throw new g("division by zero");return plt.types.Rational.makeInstance(this.n*c.d,this.d*c.n)};plt.types.Rational.prototype.toExact=function(){return this};plt.types.Rational.prototype.isExact=function(){return true};plt.types.Rational.prototype.toFixnum=function(){return Math.floor(this.n/this.d)};plt.types.Rational.prototype.numerator=function(){return plt.types.Rational.makeInstance(this.n)};
plt.types.Rational.prototype.denominator=function(){return plt.types.Rational.makeInstance(this.d)};plt.types.Rational.prototype.toFloat=function(){return this.n/this.d};plt.types.Rational.prototype.toComplex=function(){return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO)};plt.types.Rational.prototype.greaterThan=function(c){return this.n*c.d>this.d*c.n};plt.types.Rational.prototype.greaterThanOrEqual=function(c){return this.n*c.d>=this.d*c.n};plt.types.Rational.prototype.lessThan=
function(c){return this.n*c.d<this.d*c.n};plt.types.Rational.prototype.lessThanOrEqual=function(c){return this.n*c.d<=this.d*c.n};plt.types.Rational.prototype.sqrt=function(){if(this.n>=0){var c=Math.sqrt(this.n),e=Math.sqrt(this.d);return Math.floor(c)==c&&Math.floor(e)==e?plt.types.Rational.makeInstance(c,e):q.makeInstance(c/e)}else{c=Math.sqrt(-this.n);e=Math.sqrt(this.d);return Math.floor(c)==c&&Math.floor(e)==e?plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.makeInstance(c,
e)):plt.types.Complex.makeInstance(plt.types.Rational.ZERO,q.makeInstance(c/e))}};plt.types.Rational.prototype.abs=function(){return plt.types.Rational.makeInstance(Math.abs(this.n),this.d)};plt.types.Rational.prototype.floor=function(){return plt.types.Rational.makeInstance(Math.floor(this.n/this.d),1)};plt.types.Rational.prototype.ceiling=function(){return plt.types.Rational.makeInstance(Math.ceil(this.n/this.d),1)};plt.types.Rational.prototype.conjugate=plt.types.Rational.prototype.abs;plt.types.Rational.prototype.magnitude=
plt.types.Rational.prototype.abs;plt.types.Rational.prototype.log=function(){return q.makeInstance(Math.log(this.n/this.d))};plt.types.Rational.prototype.angle=function(){if(0==this.n)return plt.types.Rational.ZERO;return this.n>0?plt.types.Rational.ZERO:q.pi};plt.types.Rational.prototype.atan=function(){return q.makeInstance(Math.atan(this.n/this.d))};plt.types.Rational.prototype.cos=function(){return q.makeInstance(Math.cos(this.n/this.d))};plt.types.Rational.prototype.sin=function(){return q.makeInstance(Math.sin(this.n/
this.d))};plt.types.Rational.prototype.expt=function(c){return q.makeInstance(Math.pow(this.n/this.d,c.n/c.d))};plt.types.Rational.prototype.exp=function(){return q.makeInstance(Math.exp(this.n/this.d))};plt.types.Rational.prototype.acos=function(){return q.makeInstance(Math.acos(this.n/this.d))};plt.types.Rational.prototype.asin=function(){return q.makeInstance(Math.asin(this.n/this.d))};plt.types.Rational.prototype.imag_dash_part=function(){return plt.types.Rational.ZERO};plt.types.Rational.prototype.real_dash_part=
function(){return this};plt.types.Rational.prototype.timesI=function(){return plt.types.Complex.makeInstance(plt.types.Rational.ZERO,this)};plt.types.Rational.prototype.round=function(){if(this.d==2){var c=this.n/this.d,e=Math.floor(c);c=Math.ceil(c);return e%2==0?plt.types.Rational.makeInstance(e):plt.types.Rational.makeInstance(c)}else return plt.types.Rational.makeInstance(Math.round(this.n/this.d))};plt.types.Rational.prototype.half=function(){return plt.types.Rational.makeInstance(this.n,this.d*
2)};plt.types.Rational.prototype.minus=function(){return plt.types.Rational.makeInstance(0-this.n,this.d)};var o={};plt.types.Rational.makeInstance=function(c,e){if(c==undefined)throw new g("n undefined");if(e==undefined)e=1;if(e<0){c=-c;e=-e}return e==1&&c in o?o[c]:new plt.types.Rational(c,e)};o={};(function(){var c;for(c=-500;c<500;c++)o[c]=new plt.types.Rational(c,1)})();plt.types.Rational.NEGATIVE_ONE=o[-1];plt.types.Rational.ZERO=o[0];plt.types.Rational.ONE=o[1];plt.types.Rational.TWO=o[2];
function q(c){this.n=c;this._eqHashCode=plt.types.makeEqHashCode()}plt.types.FloatPoint=q;q.makeInstance=function(c){return new q(c)};q.pi=q.makeInstance(Math.PI);q.e=q.makeInstance(Math.E);var P=q.makeInstance(Number.NaN),V=q.makeInstance(Number.POSITIVE_INFINITY),D=q.makeInstance(Number.NEGATIVE_INFINITY);q.prototype.isFinite=function(){return isFinite(this.n)};q.prototype.toExact=function(){return plt.types.Rational.makeInstance(Math.floor(this.n),1)};q.prototype.isExact=function(){return false};
q.prototype.level=function(){return 1};q.prototype.lift=function(){return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO)};q.prototype.toWrittenString=function(){return this.n==Number.POSITIVE_INFINITY?"+inf.0":this.n==Number.NEGATIVE_INFINITY?"-inf.0":this.n==Number.NaN?"+nan.0":this.n.toString()};q.prototype.toDisplayedString=q.prototype.toWrittenString;q.prototype.isEqual=function(c){return this.equals(c)};q.prototype.equals=function(c){return c instanceof q&&(this.n==c.n||isNaN(this.n)&&
isNaN(c.n))};q.prototype.isRational=function(){return this.isFinite()&&this.n==Math.floor(this.n)};q.prototype.isInteger=function(){return this.isFinite()&&this.n==Math.floor(this.n)};q.prototype.isReal=function(){return true};function I(c){return p.lessThan(c,plt.types.Rational.ZERO)?-1:p.greaterThan(c,plt.types.Rational.ZERO)?1:0}q.prototype.add=function(c){return this.isFinite()&&c.isFinite()?q.makeInstance(this.n+c.n):isNaN(this.n)||isNaN(c.n)?P:this.isFinite()&&!c.isFinite()?c:!this.isFinite()&&
c.isFinite()?this:I(this)*I(c)==1?this:P};q.prototype.subtract=function(c){return this.isFinite()&&c.isFinite()?q.makeInstance(this.n-c.n):isNaN(this.n)||isNaN(c.n)?P:!this.isFinite()&&!c.isFinite()?I(this)==I(c)?P:this:this.isFinite()?p.multiply(c,plt.types.Rational.NEGATIVE_ONE):this};q.prototype.multiply=function(c){if(this.n==0||c.n==0)return plt.types.Rational.ZERO;return this.isFinite()&&c.isFinite()?q.makeInstance(this.n*c.n):isNaN(this.n)||isNaN(c.n)?P:I(this)*I(c)==1?V:D};q.prototype.divide=
function(c){if(this.isFinite()&&c.isFinite()){if(c.n==0)throw new g("division by zero");return q.makeInstance(this.n/c.n)}else if(isNaN(this.n)||isNaN(c.n))return P;else if(!this.isFinite()&&!c.isFinite())return P;else if(this.isFinite()&&!c.isFinite())return q.makeInstance(0);else if(!this.isFinite()&&c.isFinite())return I(this)*I(c)==1?V:D};q.prototype.toFixnum=function(){return Math.floor(this.n)};q.prototype.numerator=function(){var c=this.n.toString();return(c=c.match(/^(.*)\.(.*)$/))?q.makeInstance(parseFloat(c[1]+
c[2])):this};q.prototype.denominator=function(){var c=this.n.toString();return(c=c.match(/^(.*)\.(.*)$/))?q.makeInstance(Math.pow(10,c[2].length)):q.makeInstance(1)};q.prototype.toFloat=function(){return this.n};q.prototype.toComplex=function(){return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO)};q.prototype.floor=function(){if(!isFinite(this.n))return this;return plt.types.Rational.makeInstance(Math.floor(this.n),1)};q.prototype.ceiling=function(){if(!isFinite(this.n))return this;
return plt.types.Rational.makeInstance(Math.ceil(this.n),1)};q.prototype.greaterThan=function(c){return this.n>c.n};q.prototype.greaterThanOrEqual=function(c){return this.n>=c.n};q.prototype.lessThan=function(c){return this.n<c.n};q.prototype.lessThanOrEqual=function(c){return this.n<=c.n};q.prototype.sqrt=function(){if(this.n<0){var c=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,q.makeInstance(Math.sqrt(-this.n)));return c}else return q.makeInstance(Math.sqrt(this.n))};q.prototype.abs=
function(){return q.makeInstance(Math.abs(this.n))};q.prototype.log=function(){return this.n<0?this.toComplex().log():q.makeInstance(Math.log(this.n))};q.prototype.angle=function(){if(0==this.n)return plt.types.Rational.ZERO;return this.n>0?plt.types.Rational.ZERO:q.pi};q.prototype.atan=function(){return q.makeInstance(Math.atan(this.n))};q.prototype.cos=function(){return q.makeInstance(Math.cos(this.n))};q.prototype.sin=function(){return q.makeInstance(Math.sin(this.n))};q.prototype.expt=function(c){if(this.n==
1){c.isFinite()||isNaN(c.n);return this}else return q.makeInstance(Math.pow(this.n,c.n))};q.prototype.exp=function(){return q.makeInstance(Math.exp(this.n))};q.prototype.acos=function(){return q.makeInstance(Math.acos(this.n))};q.prototype.asin=function(){return q.makeInstance(Math.asin(this.n))};q.prototype.imag_dash_part=function(){return plt.types.Rational.ZERO};q.prototype.real_dash_part=function(){return this};q.prototype.round=function(){if(isFinite(this.n))if(Math.abs(Math.floor(this.n)-this.n)==
0.5){if(Math.floor(this.n)%2==0)return plt.types.Rational.makeInstance(Math.floor(this.n));return plt.types.Rational.makeInstance(Math.ceil(this.n))}else return plt.types.Rational.makeInstance(Math.round(this.n));else return this};q.prototype.conjugate=q.prototype.abs;q.prototype.magnitude=q.prototype.abs;q.prototype.minus=function(){return q.makeInstance(0-this.n)};q.prototype.half=function(){return q.makeInstance(this.n/2)};q.prototype.timesI=function(){return plt.types.Complex.makeInstance(plt.types.Rational.ZERO,
this)};plt.types.Complex=function(c,e){this.r=c;this.i=e;this._eqHashCode=plt.types.makeEqHashCode()};plt.types.Complex.makeInstance=function(c,e){if(typeof c=="number")c=c==Math.floor(c)?plt.types.Rational.makeInstance(c):q.makeInstance(c);if(typeof e=="number")e=e==Math.floor(e)?plt.types.Rational.makeInstance(e):q.makeInstance(e);return c=new plt.types.Complex(c,e)};plt.types.Complex.prototype.toWrittenString=function(){return p.greaterThanOrEqual(this.i,plt.types.Rational.ZERO)?plt.types.toWrittenString(this.r)+
"+"+plt.types.toWrittenString(this.i)+"i":plt.types.toWrittenString(this.r)+plt.types.toWrittenString(this.i)+"i"};plt.types.Complex.prototype.toDisplayedString=plt.types.Complex.prototype.toWrittenString;plt.types.Complex.prototype.isFinite=function(){return this.r.isFinite()&&this.i.isFinite()};plt.types.Complex.prototype.isRational=function(){return this.r.isRational()&&p.equal(this.i,plt.types.Rational.ZERO)};plt.types.Complex.prototype.isInteger=function(){return this.r.isInteger()&&p.equal(this.i,
plt.types.Rational.ZERO)};plt.types.Complex.prototype.toExact=function(){if(!this.isReal())throw new g("inexact->exact: expects argument of type real number");return this.r.toExact()};plt.types.Complex.prototype.isExact=function(){return this.r.isExact()&&this.i.isExact()};plt.types.Complex.prototype.level=function(){return 2};plt.types.Complex.prototype.lift=function(){throw new g("Don't know how to lift Complex number");};plt.types.Complex.prototype.isEqual=function(c){return this.equals(c)};plt.types.Complex.prototype.equals=
function(c){return c=c instanceof plt.types.Complex&&p.equal(this.r,c.r)&&p.equal(this.i,c.i)};plt.types.Complex.prototype.greaterThan=function(c){if(!this.isReal()||!c.isReal())throw new g(">: expects argument of type real number");return p.greaterThan(this.r,c.r)};plt.types.Complex.prototype.greaterThanOrEqual=function(c){if(!this.isReal()||!c.isReal())throw new g(">: expects argument of type real number");return p.greaterThanOrEqual(this.r,c.r)};plt.types.Complex.prototype.lessThan=function(c){if(!this.isReal()||
!c.isReal())throw new g(">: expects argument of type real number");return p.lessThan(this.r,c.r)};plt.types.Complex.prototype.lessThanOrEqual=function(c){if(!this.isReal()||!c.isReal())throw new g(">: expects argument of type real number");return p.lessThanOrEqual(this.r,c.r)};plt.types.Complex.prototype.abs=function(){if(!p.equal(this.i,plt.types.Rational.ZERO).valueOf())throw new g("abs: expects argument of type real number");return this.r.abs()};plt.types.Complex.prototype.toFixnum=function(){if(!p.equal(this.i,
plt.types.Rational.ZERO).valueOf())throw new g("toFixnum: expects argument of type real number");return this.r.toFixnum()};plt.types.Complex.prototype.numerator=function(){if(!this.isReal())throw new g("numerator: can only be applied to real number");return this.n.numerator()};plt.types.Complex.prototype.denominator=function(){if(!this.isReal())throw new g("floor: can only be applied to real number");return this.n.denominator()};plt.types.Complex.prototype.toFloat=function(){if(!p.equal(this.i,plt.types.Rational.ZERO).valueOf())throw new g("toFloat: expects argument of type real number");
return this.r.toFloat()};plt.types.Complex.prototype.toComplex=function(){return this};plt.types.Complex.prototype.add=function(c){return plt.types.Complex.makeInstance(p.add(this.r,c.r),p.add(this.i,c.i))};plt.types.Complex.prototype.subtract=function(c){return plt.types.Complex.makeInstance(p.subtract(this.r,c.r),p.subtract(this.i,c.i))};plt.types.Complex.prototype.multiply=function(c){if(c.isReal())return plt.types.Complex.makeInstance(p.multiply(this.r,c.r),p.multiply(this.i,c.r));var e=p.subtract(p.multiply(this.r,
c.r),p.multiply(this.i,c.i));c=p.add(p.multiply(this.r,c.i),p.multiply(this.i,c.r));if(p.equal(c,plt.types.Rational.ZERO))return e;return plt.types.Complex.makeInstance(e,c)};plt.types.Complex.prototype.divide=function(c){if(c.isReal())return plt.types.Complex.makeInstance(p.divide(this.r,c.r),p.divide(this.i,c.r));var e=c.conjugate(),m=p.multiply(this,e).toComplex();c=p.multiply(c,e);return m=plt.types.Complex.makeInstance(p.divide(m.r,c),p.divide(m.i,c))};plt.types.Complex.prototype.conjugate=function(){var c=
plt.types.Complex.makeInstance(this.r,p.subtract(plt.types.Rational.ZERO,this.i));return c};plt.types.Complex.prototype.magnitude=function(){var c=p.add(p.multiply(this.r,this.r),p.multiply(this.i,this.i));return c.sqrt()};plt.types.Complex.prototype.isReal=function(){return p.equal(this.i,plt.types.Rational.ZERO)};plt.types.Complex.prototype.sqrt=function(){if(this.isReal())return this.r.sqrt();var c=p.add(this.magnitude(),this.r),e=c.half().sqrt();c=p.divide(this.i,p.multiply(c,q.makeInstance(2)).sqrt());
return plt.types.Complex.makeInstance(e,c)};plt.types.Complex.prototype.log=function(){var c=this.magnitude(),e=this.angle();return c=p.add(c.log(),e.timesI())};plt.types.Complex.prototype.angle=function(){if(this.isReal())return this.r.angle();if(p.equal(plt.types.Rational.ZERO,this.r)){var c=q.pi.half();return p.greaterThan(this.i,plt.types.Rational.ZERO)?c:c.minus()}else{c=p.divide(this.i.abs(),this.r.abs()).atan();return p.greaterThan(this.r,plt.types.Rational.ZERO)?p.greaterThan(this.i,plt.types.Rational.ZERO)?
c:c.minus():p.greaterThan(this.i,plt.types.Rational.ZERO)?q.pi.subtract(c):c.subtract(q.pi)}};var u=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.ONE),y=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.NEGATIVE_ONE);plt.types.Complex.prototype.atan=function(){if(p.equal(this,u)||p.equal(this,y))return q.makeInstance(Number.NEGATIVE_INFINITY);return p.multiply(u,p.multiply(q.makeInstance(0.5),p.divide(p.add(u,this),p.add(u,p.subtract(plt.types.Rational.ZERO,
this))).log()))};plt.types.Complex.prototype.cos=function(){if(this.isReal())return this.r.cos();var c=this.timesI(),e=c.minus();return p.add(c.exp(),e.exp()).half()};plt.types.Complex.prototype.sin=function(){if(this.isReal())return this.r.sin();var c=this.timesI(),e=c.minus(),m=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.TWO);c=p.subtract(c.exp(),e.exp());return m=p.divide(c,m)};plt.types.Complex.prototype.expt=function(c){c=p.multiply(c,this.log());return c.exp()};
plt.types.Complex.prototype.exp=function(){var c=this.r.exp(),e=this.i.cos(),m=this.i.sin();return p.multiply(c,p.add(e,m.timesI()))};plt.types.Complex.prototype.acos=function(){if(this.isReal())return this.r.acos();var c=q.pi.half(),e=this.timesI(),m=p.subtract(plt.types.Rational.ONE,this.multiply(this)).sqrt();e=p.add(e,m).log().timesI();return p.add(c,e)};plt.types.Complex.prototype.asin=function(){if(this.isReal())return this.r.asin();var c=p.subtract(plt.types.Rational.ONE,this.multiply(this));
c=c.sqrt();return p.multiply(plt.types.Rational.TWO,p.divide(this,p.add(plt.types.Rational.ONE,c)).atan())};plt.types.Complex.prototype.ceiling=function(){if(!this.isReal())throw new g("ceiling: can only be applied to real number");return this.r.ceiling()};plt.types.Complex.prototype.floor=function(){if(!this.isReal())throw new g("floor: can only be applied to real number");return this.r.floor()};plt.types.Complex.prototype.imag_dash_part=function(){return this.i};plt.types.Complex.prototype.real_dash_part=
function(){return this.r};plt.types.Complex.prototype.round=function(){return this.r.round()};plt.types.Complex.prototype.timesI=function(){return this.multiply(plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.ONE))};plt.types.Complex.prototype.minus=function(){return plt.types.Complex.makeInstance(p.subtract(plt.types.Rational.ZERO,this.r),p.subtract(plt.types.Rational.ZERO,this.i))};plt.types.Complex.prototype.half=function(){return plt.types.Complex.makeInstance(this.r.half(),
this.i.half())};var p={};plt.types.NumberTower=p;p.toFixnum=function(c){return c.toFixnum()};p.toFloat=function(c){return c.toFloat()};p.abs=function(c){return c.abs()};p.isFinite=function(c){return c.isFinite()};p.toExact=function(c){return c.toExact()};p.add=function(c,e){if(c.level()<e.level())c=c.lift(e);if(e.level()<c.level())e=e.lift(c);return c.add(e)};p.subtract=function(c,e){if(c.level()<e.level())c=c.lift(e);if(e.level()<c.level())e=e.lift(c);return c.subtract(e)};p.multiply=function(c,
e){if(c.level()<e.level())c=c.lift(e);if(e.level()<c.level())e=e.lift(c);return c.multiply(e)};p.divide=function(c,e){if(c.level()<e.level())c=c.lift(e);if(e.level()<c.level())e=e.lift(c);return c.divide(e)};p.equal=function(c,e){if(c.level()<e.level())c=c.lift(e);if(e.level()<c.level())e=e.lift(c);return c.equals(e)};p.approxEqual=function(c,e,m){return p.lessThan(p.abs(p.subtract(c,e)),m)};p.greaterThanOrEqual=function(c,e){if(c.level()<e.level())c=c.lift(e);if(e.level()<c.level())e=e.lift(c);if(!(c.isReal()&&
e.isReal()))throw new g("greaterThanOrEqual: couldn't be applied to complex number");return c.greaterThanOrEqual(e)};p.lessThanOrEqual=function(c,e){if(c.level()<e.level())c=c.lift(e);if(e.level()<c.level())e=e.lift(c);if(!(c.isReal()&&e.isReal()))throw new g("lessThanOrEqual: couldn't be applied to complex number");return c.lessThanOrEqual(e)};p.greaterThan=function(c,e){if(c.level()<e.level())c=c.lift(e);if(e.level()<c.level())e=e.lift(c);if(!(c.isReal()&&e.isReal()))throw new g("greaterThan: couldn't be applied to complex number");
return c.greaterThan(e)};p.lessThan=function(c,e){if(c.level()<e.level())c=c.lift(e);if(e.level()<c.level())e=e.lift(c);if(!(c.isReal()&&e.isReal()))throw new g("lessThan: couldn't be applied to complex number");return c.lessThan(e)};p.modulo=function(c,e){c=plt.types.Rational.makeInstance(c.toFixnum()%e.toFixnum(),1);if(p.lessThan(e,plt.types.Rational.ZERO)){if(p.lessThanOrEqual(c,plt.types.Rational.ZERO))return c;return p.add(c,e)}else{if(p.lessThan(c,plt.types.Rational.ZERO))return p.add(c,e);
return c}};p.sqr=function(c){return p.multiply(c,c)};p.expt=function(c,e){if(c.level()<e.level())c=c.lift(e);if(e.level()<c.level())e=e.lift(c);return c.expt(e)};p.gcd=function(c,e){c=Math.abs(c.toFixnum());for(var m=0;m<e.length;m++)c=C(c,e[m].toFixnum());return plt.types.Rational.makeInstance(c)};p.lcm=function(c,e){c=Math.abs(c.toFixnum());if(c==0)return plt.types.Rational.ZERO;for(var m=0;m<e.length;m++){if(e[m].toFixnum()==0)return plt.types.Rational.ZERO;c=F(c,e[m].toFixnum())}return plt.types.Rational.makeInstance(c)};
plt.types.String=String;plt.types.String.makeInstance=function(c){return c.valueOf()};plt.types.String.prototype.isEqual=function(c){return this==c};var H=new RegExp('["\\\\]',"g");plt.types.String.prototype.toWrittenString=function(){return'"'+this.replace(H,function(c){return"\\"+c})+'"'};plt.types.String.prototype.toDisplayedString=function(){return this};function Q(){return new plt._Hashtable(function(c){return plt.types.getEqHashCode(c)},function(c,e){return c===e})}plt.types.toWrittenString=
function(c,e){e||(e=Q());if(c&&e.containsKey(c))return"...";if(c==undefined||c==null)return"<undefined>";if(typeof c=="string")return c.toWrittenString();if(typeof c!="object"&&typeof c!="function")return c.toString();if(typeof c.toWrittenString!=="undefined")return c.toWrittenString(e);return typeof c.toDisplayedString!=="undefined"?c.toDisplayedString(e):c.toString()};plt.types.toDisplayedString=function(c,e){e||(e=Q());if(c&&e.containsKey(c))return"...";if(c==undefined||c==null)return"<undefined>";
if(typeof c=="string")return c.toDisplayedString();if(typeof c!="object"&&typeof c!="function")return c.toString();if(typeof c.toWrittenString!=="undefined")return c.toWrittenString(e);return typeof c.toDisplayedString!=="undefined"?c.toDisplayedString(e):c.toString()};plt.types.toDomNode=function(c,e){e||(e=Q());if(c&&e.containsKey(c))return document.createTextNode("...");if(c==undefined||c==null)return c=document.createTextNode("<undefined>");if(typeof c=="string")return c=document.createTextNode(c.toWrittenString());
if(typeof c!="object"&&typeof c!="function")return c=document.createTextNode(c.toString());if(c.nodeType)return c;if(typeof c.toDomNode!=="undefined")return c.toDomNode(e);if(typeof c.toWrittenString!=="undefined")return c=document.createTextNode(plt.types.toWrittenString(c,e));return c=typeof c.toDisplayedString!=="undefined"?document.createTextNode(plt.types.toDisplayedString(c,e)):document.createTextNode(c.toString())};function K(c){return c!=null&&c!=undefined&&(c instanceof plt.types.Rational||
c instanceof plt.types.FloatPoint||c instanceof plt.types.Complex)}plt.types.isNumber=K;plt.types.isEqual=function(c,e,m){if(c===e)return true;if(K(c)&&K(e))return p.equal(c,e);if(c==undefined||c==null)return e==undefined||e==null;if(typeof c=="object"&&typeof e=="object"&&m.find(c)===m.find(e))return true;else{typeof c=="object"&&typeof e=="object"&&m.merge(c,e);return c.isEqual(e,m)}};function L(c){this.msg=c}L.prototype.name="MobyError";L.prototype.toString=function(){return this.name+": "+this.msg};
function U(c,e){L.call(this,c);this.loc=e}U.prototype=w(L.prototype);U.prototype.name="MobyParserError";function Y(c,e){L.call(this,c);this.stx=e}Y.prototype=w(L.prototype);Y.prototype.name="MobySyntaxError";function k(c){L.call(this,c)}k.prototype=w(L.prototype);k.prototype.name="MobyTypeError";function g(c){L.call(this,c)}g.prototype=w(L.prototype);g.prototype.name="MobyRuntimeError";function i(c){L.call(this,c)}i.prototype=w(g.prototype);i.prototype.name="MobyTestingError";plt.types.MobyError=
L;plt.types.MobyParserError=U;plt.types.MobySyntaxError=Y;plt.types.MobyTypeError=k;plt.types.MobyRuntimeError=g;plt.types.MobyTestingError=i;plt.types.Box=S})();
plt._Hashtable=function(){function f(g){return typeof g==="undefined"}function w(g){return typeof g==="function"}function M(g){return typeof g==="string"}function B(g,i){return w(g[i])}function S(g){return B(g,"equals")}function A(g){return B(g,"hashCode")}function C(g){if(M(g))return g;else if(A(g)){var i=g.hashCode();if(!M(i))return C(i);return i}else return B(g,"toString")?g.toString():String(g)}function F(g,i){return g.equals(i)}function J(g,i){return S(i)?i.equals(g):g===i}function o(g,i){return g===
i}function q(g,i,c,e,m){for(var G,N=0,n=g.length;N<n;N++){G=g[N];if(m(i,c(G)))return e?[N,G]:true}return false}function P(g,i){if(B(g,"splice"))g.splice(i,1);else if(i===g.length-1)g.length=i;else{var c=g.slice(i+1);g.length=i;for(var e=0,m=c.length;e<m;e++)g[i+e]=c[e]}}function V(g,i){if(g===null)throw new Error("null is not a valid "+i);else if(f(g))throw new Error(i+" must not be undefined");}var D="key",I="value";function u(g){V(g,D)}function y(g){V(g,I)}function p(g,i,c){this.entries=[];this.addEntry(g,
i);if(c!==null)this.getEqualityFunction=function(){return c}}function H(g){return g[0]}function Q(g){return g[1]}p.prototype={getEqualityFunction:function(g){return S(g)?F:J},searchForEntry:function(g){return q(this.entries,g,H,true,this.getEqualityFunction(g))},getEntryForKey:function(g){return this.searchForEntry(g)[1]},getEntryIndexForKey:function(g){return this.searchForEntry(g)[0]},removeEntryForKey:function(g){var i=this.searchForEntry(g);if(i){P(this.entries,i[0]);return true}return false},
addEntry:function(g,i){this.entries[this.entries.length]=[g,i]},size:function(){return this.entries.length},keys:function(g){for(var i=g.length,c=0,e=this.entries.length;c<e;c++)g[i+c]=this.entries[c][0]},values:function(g){for(var i=g.length,c=0,e=this.entries.length;c<e;c++)g[i+c]=this.entries[c][1]},containsKey:function(g){return q(this.entries,g,H,false,this.getEqualityFunction(g))},containsValue:function(g){return q(this.entries,g,Q,false,o)}};function K(){}K.prototype=[];function L(g){return g[0]}
function U(g,i,c){return q(g,i,L,true,c)}function Y(g,i){var c=g[i];if(c&&c instanceof K)return c[1];return null}function k(g,i){var c=[],e={};g=w(g)?g:C;i=w(i)?i:null;this.put=function(m,G){u(m);y(G);var N=g(m),n=Y(e,N);if(n){var O=n.getEntryForKey(m);if(O)O[1]=G;else n.addEntry(m,G)}else{var ba=new K;ba[0]=N;ba[1]=new p(m,G,i);c[c.length]=ba;e[N]=ba}};this.get=function(m){u(m);var G=g(m),N=Y(e,G);if(N){var n=N.getEntryForKey(m);if(n)return n[1]}return null};this.containsKey=function(m){u(m);var G=
g(m),N=Y(e,G);if(N)return N.containsKey(m);return false};this.containsValue=function(m){y(m);for(var G=0,N=c.length;G<N;G++)if(c[G][1].containsValue(m))return true;return false};this.clear=function(){c.length=0;e={}};this.isEmpty=function(){return c.length===0};this.keys=function(){for(var m=[],G=0,N=c.length;G<N;G++)c[G][1].keys(m);return m};this.values=function(){for(var m=[],G=0,N=c.length;G<N;G++)c[G][1].values(m);return m};this.remove=function(m){u(m);var G=g(m),N=Y(e,G);if(N)if(N.removeEntryForKey(m))if(N.size()===
0){var n=U(c,G,N.getEqualityFunction(m));P(c,n[0]);delete e[G]}};this.size=function(){for(var m=0,G=0,N=c.length;G<N;G++)m+=c[G][1].size();return m}}return k}();plt.Kernel={};
(function(){var f=plt.types.NumberTower,w=plt.types.MobySyntaxError,M=plt.types.MobyTypeError,B=plt.types.MobyRuntimeError,S=plt.types.MobyTestingError;if(!Array.indexOf)Array.prototype.indexOf=function(b){for(var d=0;d<this.length;d++)if(this[d]==b)return d;return-1};function A(b,d,l){b.addEventListener?b.addEventListener(d,l,false):b.attachEvent("on"+d,l,false)}function C(b,d,l){b.addEventListener?b.removeEventListener(d,l,false):b.detachEvent("on"+d,l,false)}function F(b){function d(){}d.prototype=
b;return new d}function J(){this.parentMap=ma()}J.prototype.find=function(b){var d=this.parentMap.containsKey(b)?this.parentMap.get(b):b;if(d===b)return d;else{d=this.find(d);this.parentMap.put(b,d);return d}};J.prototype.merge=function(b,d){this.parentMap.put(this.find(b),this.find(d))};var o=plt.types.isNumber;function q(b){return b!=null&&b!=undefined&&b instanceof plt.types.Symbol}function P(b){return b!=null&&b!=undefined&&b instanceof plt.types.Char}function V(b){return stx_question_(b)}function D(b){return typeof b==
"string"}function I(b){return b==plt.types.Logic.TRUE||b==plt.types.Logic.FALSE}function u(b){return b!=null&&b!=undefined&&b instanceof plt.types.Cons}function y(b){return b!=null&&b!=undefined&&b instanceof plt.types.Empty}function p(b){return o(b)&&b.isReal()}function H(b){return o(b)&&b.isRational()}function Q(b){return o(b)}function K(b){return typeof b=="function"}function L(b){return o(b)&&b.isInteger()}function U(b){return o(b)&&b.isInteger()&&b.toFixnum()>=0}function Y(b){for(var d=0;d<b.length;d++)if(!(b[d]>=
"a"&&b[d]<="z"||b[d]>="A"&&b[d]<="Z"))return false;return true}var k=function(){var b=/^\s*$/;return function(d){return d.match(b)?true:false}}();function g(b){return b!=null&&b!=undefined&&b instanceof plt.types.Vector}function i(b,d){for(var l=0;l<b.length;l++)d.apply(b[l],[b[l],l])}function c(b,d,l,s){if(!b(d,l).valueOf())return false;if(s.length==0)return true;if(!b(l,s[0]).valueOf())return false;for(d=0;d<s.length-1;d++)if(!b(s[d],s[d+1]).valueOf())return false;return true}function e(b,d,l){var s=
d;for(d=0;d<l.length;d++)b(s,l[d]).valueOf()||(s=l[d]);return s}function m(b){return b!=null&&b!=undefined&&(b instanceof plt.types.Cons||b instanceof plt.types.Empty)}function G(b){var d=["th","st","nd","rd","th","th","th","th","th","th"];return Math.floor(b/10)%10==1?b+"th":b+d[b%10]}function N(b,d,l,s){return plt.Kernel.format("~a: expects type <~a> as ~a argument, given: ~s",[b,d,G(l),s])}function n(b,d,l,s,E){if(!d(b))throw new M(N(l,s,E,b));}function O(b,d,l){if(!m(b))throw new M(N(d,"list",
l,b));}function ba(b,d,l,s,E){if(!m(b))throw new M(N(l,"listof "+s,E,b));for(;!b.isEmpty();){if(!d(b.first()))throw new M(N(l,"listof "+s,E,b));b=b.rest()}}function ra(b,d,l,s){return function(E,W,$){n(E,b,s,d,1);n(W,b,s,d,2);i($,function(ea,la){n(ea,b,s,d,la+3)});return l(E,W,$)}}function fa(b,d){return ra(o,"number",function(l,s,E){return c(b,l,s,E)},d)}function da(b,d){return ra(P,"char",function(l,s,E){return c(b,l,s,E)},d)}function ga(b,d){return ra(D,"string",function(l,s,E){return c(b,l,s,
E)},d)}plt.Kernel={_heir:F,pi:plt.types.FloatPoint.pi,e:plt.types.FloatPoint.e,struct_question_:function(b){return b!=null&&b!=undefined&&b instanceof plt.types.Struct},number_question_:function(b){return o(b)},equal_question_:function(b,d){return plt.types.isEqual(b,d,new J)},equal_tilde__question_:function(b,d,l){n(l,o,"equal~?","number",3);return o(b)&&o(d)?f.approxEqual(b,d,l):plt.types.isEqual(b,d,new J)},eq_question_:function(b,d){return b==d},eqv_question_:function(b,d){if(o(b)&&o(d)&&b.level()==
d.level())return f.equal(b,d);else if(P(b)&&P(d))return b.getValue()==d.getValue();return b===d},identity:function(b){return b},cons:function(b,d){O(d,"cons",2);return plt.types.Cons.makeInstance(b,d)},first:function(b){O(b,"first",1);return b.first()},rest:function(b){O(b,"rest",1);return b.rest()},second:function(b){O(b,"second",1);return b.rest().first()},third:function(b){O(b,"third",1);return b.rest().rest().first()},fourth:function(b){O(b,"fourth",1);return b.rest().rest().rest().first()},fifth:function(b){O(b,
"fifth",1);return b.rest().rest().rest().rest().first()},random:function(b){n(b,L,"random","integer",1);return plt.types.Rational.makeInstance(Math.floor(f.toFixnum(b)*Math.random()),1)},current_dash_seconds:function(){return plt.types.Rational.makeInstance(Math.floor((new Date).getTime()/1000))},floor:function(b){n(b,o,"floor","number",1);return b.floor()},ceiling:function(b){n(b,o,"ceiling","number",1);return b.ceiling()},sqrt:function(b){n(b,o,"sqrt","number",1);return b.sqrt()},integer_dash_sqrt:function(b){n(b,
L,"integer-sqrt","integer",1);b=b.sqrt();return H(b)?plt.types.Rational.makeInstance(b.toFixnum()):p(b)?plt.types.Rational.makeInstance(b.toFixnum()):plt.types.Complex.makeInstance(plt.types.Rational.makeInstance(plt.Kernel.real_dash_part(b).toFixnum()),plt.types.Rational.makeInstance(plt.Kernel.imag_dash_part(b).toFixnum()))},sqr:function(b){n(b,o,"sqr","number",1);return f.sqr(b)},sin:function(b){n(b,o,"sin","number",1);return b.sin()},cos:function(b){n(b,o,"cos","number",1);return b.cos()},modulo:function(b,
d){n(b,o,"modulo","number",1);n(d,o,"modulo","number",2);return f.modulo(b,d)},zero_question_:function(b){n(b,o,"zero?","number",1);return f.equal(b,plt.types.Rational.ZERO)},_equal__tilde_:function(b,d,l){n(b,o,"=~","number",1);n(d,o,"=~","number",2);n(l,o,"=~","number",3);return f.approxEqual(b,d,l)},abs:function(b){n(b,o,"abs","number",1);return f.abs(b)},add1:function(b){n(b,o,"add1","number",1);return f.add(b,plt.types.Rational.ONE)},sub1:function(b){n(b,o,"sub1","number",1);return f.subtract(b,
plt.types.Rational.ONE)},_plus_:function(b){i(b,function(s,E){n(s,o,"+","number",E+1)});var d,l=plt.types.Rational.ZERO;for(d=0;d<b.length;d++)l=f.add(l,b[d]);return l},_dash_:function(b,d){n(b,o,"-","number",1);i(d,function(s,E){n(s,o,"-","number",E+2)});if(d.length==0)return f.subtract(plt.types.Rational.ZERO,b);var l=b;for(b=0;b<d.length;b++)l=f.subtract(l,d[b]);return l},_star_:function(b){i(b,function(s,E){n(s,o,"*","number",E+1)});var d,l=plt.types.Rational.ONE;for(d=0;d<b.length;d++)l=f.multiply(l,
b[d]);return l},_slash_:function(b,d){n(b,o,"/","number",1);i(d,function(s,E){n(s,o,"/","number",E+2)});var l=b;if(d.length==0)return f.divide(plt.types.Rational.ONE,l);else{for(b=0;b<d.length;b++)l=f.divide(l,d[b]);return l}},_equal_:fa(f.equal,"="),_greaterthan__equal_:fa(f.greaterThanOrEqual,">="),_lessthan__equal_:fa(f.lessThanOrEqual,"<="),_greaterthan_:fa(f.greaterThan,">"),_lessthan_:fa(f.lessThan,"<"),min:function(b,d){n(b,o,"min","number",1);i(d,function(l,s){n(this,o,"min","number",s+2)});
return e(f.lessThanOrEqual,b,d)},max:function(b,d){n(b,o,"max","number",1);i(d,function(l,s){n(this,o,"max","number",s+2)});return e(f.greaterThanOrEqual,b,d)},lcm:function(b,d){n(b,L,"lcm","number",1);i(d,function(l,s){n(this,L,"lcm","number",s+2)});return f.lcm(b,d)},gcd:function(b,d){n(b,L,"gcd","number",1);i(d,function(l,s){n(this,L,"gcd","number",s+2)});return f.gcd(b,d)},exact_dash__greaterthan_inexact:function(b){n(b,o,"exact->inexact","number",1);return plt.types.FloatPoint.makeInstance(b.toFloat())},
inexact_dash__greaterthan_exact:function(b){n(b,o,"inexact->exact","number",1);return f.toExact(b)},exact_question_:function(b){n(b,o,"exact?","number",1);return b.isExact()},inexact_question_:function(b){n(b,o,"inexact?","number",1);return!b.isExact()},rational_question_:function(b){return o(b)&&b.isRational()},number_dash__greaterthan_string:function(b){n(b,o,"number->string","number",1);return plt.types.String.makeInstance(plt.types.toWrittenString(b))},conjugate:function(b){n(b,o,"conjugate",
"number",1);return b.conjugate()},magnitude:function(b){n(b,o,"magnitude","number",1);return b.magnitude()},log:function(b){n(b,o,"log","number",1);return b.log()},angle:function(b){n(b,o,"angle","number",1);return b.angle()},atan:function(b,d){if(d.length==0){n(b,o,"atan","number",1);return b.atan()}else if(d.length==1){n(b,p,"atan","number",1);n(d[0],p,"atan","number",2);return plt.types.FloatPoint.makeInstance(Math.atan2(f.toFloat(b),f.toFloat(d[0])))}else throw new B(plt.Kernel.format("atan: expects 1 to 2 arguments, given ~a.",
[plt.types.Rational.makeInstance(d.length)]));},expt:function(b,d){n(b,o,"expt","number",1);n(d,o,"expt","number",2);return f.expt(b,d)},exp:function(b){n(b,o,"exp","number",1);return b.exp()},acos:function(b){n(b,o,"acos","number",1);return b.acos()},asin:function(b){n(b,o,"asin","number",1);return b.asin()},tan:function(b){n(b,o,"tan","number",1);return f.divide(b.sin(),b.cos())},complex_question_:function(b){return Q(b)},cosh:function(b){n(b,o,"cosh","number",1);return this._plus_([this.exp(b),
this.exp(b.minus())]).half()},sinh:function(b){n(b,o,"sinh","number",1);return f.subtract(this.exp(b),this.exp(b.minus())).half()},denominator:function(b){n(b,H,"denominator","rational",1);return b.denominator()},numerator:function(b){n(b,H,"numerator","rational",1);return b.numerator()},odd_question_:function(b){n(b,o,"odd?","number",1);return Math.abs(b.toFixnum()%2)==1},even_question_:function(b){n(b,o,"even?","number",1);return Math.abs(b.toFixnum()%2)==0},positive_question_:function(b){n(b,o,
"positive?","number",1);return this._greaterthan_(b,plt.types.Rational.ZERO,[])},negative_question_:function(b){n(b,o,"negative?","number",1);return this._lessthan_(b,plt.types.Rational.ZERO,[])},imag_dash_part:function(b){n(b,o,"imag-part","number",1);return b.imag_dash_part()},real_dash_part:function(b){n(b,o,"real-part","number",1);return b.real_dash_part()},make_dash_polar:function(b,d){if(f.equal(d,plt.types.Rational.ZERO))return b;var l=f.multiply(b,d.cos());b=f.multiply(b,d.sin());return plt.types.Complex.makeInstance(l,
b)},integer_question_:function(b){return L(b)},make_dash_rectangular:function(b,d){return plt.types.Complex.makeInstance(b,d)},quotient:function(b,d){n(b,L,"quotient","integer",1);n(d,L,"quotient","integer",2);b=f.divide(b,d);return plt.Kernel.positive_question_(b)?plt.types.Rational.makeInstance(b.floor().toFixnum(),1):plt.types.Rational.makeInstance(b.ceiling().toFixnum(),1)},remainder:function(b,d){n(b,o,"remainder","number",1);n(d,o,"remainder","number",2);return plt.types.Rational.makeInstance(b.toFixnum()%
d.toFixnum(),1)},real_question_:function(b){return p(b)},round:function(b){n(b,o,"round","number",1);return b.round()},sgn:function(b){n(b,o,"sgn","number",1);if(this.positive_question_(b).valueOf())return plt.types.Rational.ONE;return this.negative_question_(b).valueOf()?plt.types.Rational.NEGATIVE_ONE:plt.types.Rational.ZERO},boolean_equal__question_:function(b,d){n(b,I,"boolean=?","boolean",1);n(d,I,"boolean=?","boolean",2);return b==d},boolean_question_:function(b){return I(b)},false_question_:function(b){return b==
plt.types.Logic.FALSE},not:function(b){if(!b||b===plt.types.Logic.FALSE)return plt.types.Logic.TRUE;return plt.types.Logic.FALSE},symbol_dash__greaterthan_string:function(b){n(b,q,"symbol->string","symbol",1);return plt.types.String.makeInstance(b.val)},symbol_equal__question_:function(b,d){n(b,q,"symbol=?","symbol",1);n(d,q,"symbol=?","symbol",2);return b.val==d.val},symbol_question_:function(b){return q(b)},append:function(b){var d;for(d=0;d<b.length;d++)O(b[d],"append",d+1);if(b.length==0)return plt.types.Empty.EMPTY;
var l=b[0];for(d=1;d<b.length;d++)l=l.append(b[d]);return l},reverse:function(b){O(b,"reverse",1);return plt.types.Cons.reverse(b)},assq:function(b,d){for(O(d,"assq",2);!d.isEmpty()&&!plt.Kernel.eq_question_(b,d.first().first());)d=d.rest();return d.isEmpty()?plt.types.Logic.FALSE:d.first()},caaar:function(b){O(b,"caaar",1);return b.first().first().first()},caadr:function(b){O(b,"caadr",1);return b.first().first().rest()},caar:function(b){O(b,"caar",1);return b.first().first()},cadar:function(b){O(b,
"cadar",1);return b.first().rest().first()},cadddr:function(b){O(b,"cadddr",1);return b.rest().rest().rest().first()},caddr:function(b){O(b,"caddr",1);return b.rest().rest().first()},cadr:function(b){O(b,"cadr",1);return b.rest().first()},car:function(b){O(b,"car",1);return b.first()},cdaar:function(b){O(b,"cdaar",1);return b.first().first().rest()},cdadr:function(b){O(b,"cdadr",1);return b.rest().first().rest()},cdar:function(b){O(b,"cdar",1);return b.first().rest()},cddar:function(b){O(b,"cddar",
1);return b.first().rest().rest()},cdddr:function(b){O(b,"cdddr",1);return b.rest().rest().rest()},cddr:function(b){O(b,"cddr",1);return b.rest().rest()},cdr:function(b){O(b,"cdr",1);return b.rest()},null_question_:function(b){return y(b)},empty_question_:function(b){return y(b)},pair_question_:function(b){return u(b)},cons_question_:function(b){return u(b)},list_question_:function(b){return m(b)},sixth:function(b){O(b,"sixth",1);return b.rest().rest().rest().rest().rest().first()},seventh:function(b){O(b,
"seventh",1);return b.rest().rest().rest().rest().rest().rest().first()},eighth:function(b){O(b,"eighth",1);return b.rest().rest().rest().rest().rest().rest().rest().first()},set_dash_car_bang_:function(b,d){O(b,"set-car!",1);b.f=d},set_dash_cdr_bang_:function(b,d){O(b,"set-cdr!",1);O(d,"set-cdr!",2);b.r=d},length:function(b){O(b,"length",1);for(var d=plt.types.Rational.ZERO;!b.isEmpty();b=b.rest())d=plt.Kernel.add1(d);return d},list:function(b){for(var d=plt.types.Empty.EMPTY,l=b.length-1;l>=0;l--)d=
plt.types.Cons.makeInstance(b[l],d);return d},list_star_:function(b,d){var l=d.pop();if(l==undefined||!l instanceof plt.types.Cons)throw new M("list*: "+l+" not a list");d.unshift(b);return plt.Kernel.append([plt.Kernel.list(d),l])},list_dash_ref:function(b,d){O(b,"list-ref",1);n(d,U,"list-ref","natural",2);for(var l=plt.types.Rational.ZERO;plt.Kernel._lessthan_(l,d,[]);l=plt.Kernel.add1(l))if(b.isEmpty())throw new B("list-ref: index too small");else b=b.rest();return b.first()},remove:function(b,
d){O(d,"member",2);for(var l=d,s=new J,E=plt.types.Empty.EMPTY;!d.isEmpty();)if(plt.types.isEqual(b,d.first(),s).valueOf())return plt.Kernel.append([plt.Kernel.reverse(E),d.rest()]);else{E=plt.types.Cons.makeInstance(d.first(),E);d=d.rest()}return l},member:function(b,d){O(d,"member",2);for(var l=new J;!d.isEmpty();){if(plt.types.isEqual(b,d.first(),l).valueOf())return plt.types.Logic.TRUE;d=d.rest()}return plt.types.Logic.FALSE},memq:function(b,d){for(O(d,"memq",2);!d.isEmpty();){if(plt.Kernel.eq_question_(b,
d.first()).valueOf())return d;d=d.rest()}return plt.types.Logic.FALSE},memv:function(b,d){for(O(d,"memv",2);!d.isEmpty();){if(plt.Kernel.eqv_question_(b,d.first()).valueOf())return d;d=d.rest()}return plt.types.Logic.FALSE},memf:function(b,d){n(b,K,"memf","function",1);for(O(d,"memf",2);!d.isEmpty();){if(b([d.first()]))return d;d=d.rest()}return plt.types.Logic.FALSE},compose:function(b){return function(d){d=d;for(var l=b.length-1;l>=0;l--)d=[b[l](d)];return d[0]}},string_dash__greaterthan_number:function(b){n(b,
D,"string->number","string",1);try{var d=plt.reader.readSchemeExpressions(b,"");if(f.equal(plt.Kernel.length(d),plt.types.Rational.ONE)){var l=stx_dash_e(d.first());return o(l)?l:plt.types.Logic.FALSE}else return plt.types.Logic.FALSE}catch(s){return plt.types.Logic.FALSE}},string_dash__greaterthan_symbol:function(b){n(b,D,"string->symbol","string",1);return plt.types.Symbol.makeInstance(b)},string_dash__greaterthan_int:function(b){n(b,D,"string->int","string",1);return plt.types.Rational.makeInstance(b.toString().charCodeAt(0),
1)},string_dash_append:function(b){i(b,function(d,l){n(d,D,"string-append","string",l+1)});return plt.types.String.makeInstance(b.join(""))},replicate:function(b,d){n(b,U,"replicate","natural",1);n(d,D,"replicate","string",2);for(var l=[],s=0;s<b.toFixnum();s++)l.push(d);return plt.types.String.makeInstance(l.join(""))},string_equal__question_:ga(function(b,d){return b==d},"string=?"),string_lessthan__equal__question_:ga(function(b,d){return b<=d},"string<=?"),string_lessthan__question_:ga(function(b,
d){return b<d},"string<?"),string_greaterthan__equal__question_:ga(function(b,d){return b>=d},"string>=?"),string_greaterthan__question_:ga(function(b,d){return b>d},"string>?"),string_dash_ci_equal__question_:ga(function(b,d){return b.toUpperCase()==d.toUpperCase()},"string-ci=?"),string_dash_ci_lessthan__equal__question_:ga(function(b,d){return b.toUpperCase()<=d.toUpperCase()},"string-ci<=?"),string_dash_ci_lessthan__question_:ga(function(b,d){return b.toUpperCase()<d.toUpperCase()},"string-ci<?"),
string_dash_ci_greaterthan__question_:ga(function(b,d){return b.toUpperCase()>d.toUpperCase()},"string-ci>?"),string_dash_ci_greaterthan__equal__question_:ga(function(b,d){return b.toUpperCase()>=d.toUpperCase()},"string-ci>=?"),string_dash_copy:function(b){n(b,D,"string-copy","string",1);return b.substring(0,b.length)},string_dash_length:function(b){n(b,D,"string-length","string",1);return plt.types.Rational.makeInstance(b.length,1)},string_dash_ref:function(b,d){n(b,D,"string-ref","string",1);n(d,
U,"string-ref","natural",2);if(d.toFixnum()>=b.length)throw new B("string-ref: index >= length");return plt.types.Char.makeInstance(b.charAt(d.toFixnum()))},string_dash_ith:function(b,d){n(b,D,"string-ith","string",1);n(d,U,"string-ith","natural",2);if(d.toFixnum()>=b.length)throw new B("string-ith: index >= string length");return plt.types.String.makeInstance(b.substring(d.toFixnum(),d.toFixnum()+1))},int_dash__greaterthan_string:function(b){n(b,L,"int->string","integer",1);return plt.types.String.makeInstance(String.fromCharCode(b.toFixnum()))},
string_question_:function(b){return D(b)},substring:function(b,d,l){n(b,D,"substring","string",1);n(d,U,"substring","natural",2);n(l,U,"substring","natural",3);if(d.toFixnum()>l.toFixnum())throw new B("substring: begin > end");if(l.toFixnum()>b.length)throw new B("substring: end > length");return String.makeInstance(b.substring(d.toFixnum(),l.toFixnum()))},char_question_:function(b){return P(b)},char_dash__greaterthan_integer:function(b){n(b,P,"char->integer","char",1);b=new String(b.val);return plt.types.Rational.makeInstance(b.charCodeAt(0),
1)},integer_dash__greaterthan_char:function(b){n(b,L,"integer->char","integer",1);b=String.fromCharCode(b.toFixnum());return plt.types.Char.makeInstance(b)},char_equal__question_:da(function(b,d){return b.val==d.val},"char=?"),char_lessthan__question_:da(function(b,d){return b.val<d.val},"char<?"),char_lessthan__equal__question_:da(function(b,d){return b.val<=d.val},"char<=?"),char_greaterthan__question_:da(function(b,d){return b.val>d.val},"char>?"),char_greaterthan__equal__question_:da(function(b,
d){return b.val>=d.val},"char>=?"),char_dash_ci_equal__question_:da(function(b,d){return b.val.toUpperCase()==d.val.toUpperCase()},"char-ci=?"),char_dash_ci_lessthan__question_:da(function(b,d){return b.val.toUpperCase()<d.val.toUpperCase()},"char-ci<?"),char_dash_ci_lessthan__equal__question_:da(function(b,d){return b.val.toUpperCase()<=d.val.toUpperCase()},"char-ci<=?"),char_dash_ci_greaterthan__question_:da(function(b,d){return b.val.toUpperCase()>d.val.toUpperCase()},"char-ci>?"),char_dash_ci_greaterthan__equal__question_:da(function(b,
d){return b.val.toUpperCase()>=d.val.toUpperCase()},"char-ci>=?"),char_dash_numeric_question_:function(b){n(b,P,"char-numeric?","char",1);b=b.val;return b>="0"&&b<="9"},char_dash_alphabetic_question_:function(b){n(b,P,"char-alphabetic?","char",1);b=b.val;return Y(b)},char_dash_whitespace_question_:function(b){n(b,P,"char-whitespace?","char",1);b=b.val;return k(b)},char_dash_upper_dash_case_question_:function(b){n(b,P,"char-upper-case?","char",1);return Y(b.val)&&b.val.toUpperCase()==b.val},char_dash_lower_dash_case_question_:function(b){n(b,
P,"char-lower-case?","char",1);return Y(b.val)&&b.val.toLowerCase()==b.val},char_dash_upcase:function(b){n(b,P,"char-upcase","char",1);return plt.types.Char.makeInstance(b.val.toUpperCase())},char_dash_downcase:function(b){n(b,P,"char-downcase","char",1);return plt.types.Char.makeInstance(b.val.toLowerCase())},list_dash__greaterthan_string:function(b){ba(b,P,"list->string","char",1);for(var d="";!b.isEmpty();){d+=b.first().val;b=b.rest()}return plt.types.String.makeInstance(d)},implode:function(b){ba(b,
D,"implode","string",1);for(var d=[];!b.isEmpty();){d.push(b.first().toString());b=b.rest()}return plt.types.String.makeInstance(d.join(""))},string_dash_numeric_question_:function(b){n(b,D,"string-numeric?","string",1);for(var d=0;d<b.length;d++)if(b[d]<"0"||b[d]>"9")return plt.types.Logic.FALSE;return plt.types.Logic.TRUE},string_dash_alphabetic_question_:function(b){n(b,D,"string-alphabetic?","string",1);return Y(b)?plt.types.Logic.TRUE:plt.types.Logic.FALSE},string_dash_whitespace_question_:function(b){n(b,
D,"string-whitespace?","string",1);return k(b)?plt.types.Logic.TRUE:plt.types.Logic.FALSE},string_dash_upper_dash_case_question_:function(b){n(b,D,"string-upper-case?","string",1);return Y(b)&&b.toUpperCase()==b},string_dash_lower_dash_case_question_:function(b){n(b,D,"string-lower-case?","string",1);return Y(b)&&b.toLowerCase()==b},string:function(b){i(b,function(s,E){n(this,P,"string","char",E+1)});for(var d=[],l=0;l<b.length;l++)d.push(b[l].val);return String.makeInstance(d.join(""))},make_dash_string:function(b,
d){n(b,U,"make-string","natural",1);n(d,P,"make-string","char",2);var l="";d=d.val;for(var s=plt.types.Rational.ZERO;plt.Kernel._lessthan_(s,b,[]);s=plt.Kernel.add1(s))l+=d;return plt.types.String.makeInstance(l)},string_dash__greaterthan_list:function(b){n(b,D,"string->list","string",1);b=b;for(var d=plt.types.Empty.EMPTY,l=b.length-1;l>=0;l--)d=plt.types.Cons.makeInstance(plt.types.Char.makeInstance(b.charAt(l)),d);return d},explode:function(b){n(b,D,"explode","string",1);b=b;for(var d=plt.types.Empty.EMPTY,
l=b.length-1;l>=0;l--)d=plt.types.Cons.makeInstance(plt.types.String.makeInstance(b.charAt(l)),d);return d}};plt.Kernel.isEqual=plt.types.isEqual;plt.Kernel._dumpKernelSymbols=function(){var b=plt.types.Empty.EMPTY;for(var d in plt.Kernel)if(plt.Kernel.hasOwnProperty(d))b=plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance(d),b);return b};plt.Kernel.openInputStx=function(){throw new B("open-input-stx currently unsupported");};function ma(){return new plt._Hashtable(function(b){return plt.types.getEqHashCode(b)},
function(b,d){return b===d})}function ha(){this.hash=ma();this._eqHashCode=plt.types.makeEqHashCode()}ha.prototype.toWrittenString=function(){return"<hash>"};ha.prototype.toDisplayedString=function(){return"<hash>"};ha.prototype.isEqual=function(b){if(b==undefined||b==null||!(b instanceof ha))return false;if(this.hash.keys().length!=b.hash.keys().length)return false;for(var d=this.hash.keys(),l=0;l<d.length;l++)if(this.hash.get(d[l])!==b.hash.get(d[l]))return false;return true};function x(){this.hash=
new plt._Hashtable(function(b){return plt.types.toWrittenString(b)},function(b,d){return plt.Kernel.equal_question_(b,d)});this._eqHashCode=plt.types.makeEqHashCode()}x.prototype.toWrittenString=function(){return"<hash>"};x.prototype.toDisplayedString=function(){return"<hash>"};x.prototype.isEqual=function(b,d){if(b==undefined||b==null||!(b instanceof x))return false;if(this.hash.keys().length!=b.hash.keys().length)return false;for(var l=this.hash.keys(),s=0;s<l.length;s++)if(!plt.Kernel.isEqual(this.hash.get(l[s]),
b.hash.get(l[s]),d))return false;return true};plt.Kernel.makeHashEq=function(){return new ha};plt.Kernel.makeHash=function(){return new x};plt.Kernel.hashSetBang=function(b,d,l){n(b,R,"hash-set!","hash",1);b.hash.put(d,l)};plt.Kernel.hashRef=function(b,d,l){n(b,R,"hash-ref","hash",1);if(b.hash.containsKey(d))return b.hash.get(d);else{if(K(l))return l([]);return l}};plt.Kernel.hashRemoveBang=function(b,d){n(b,R,"hash-remove!","hash",1);b.hash.remove(d)};plt.Kernel.hashMap=function(b,d){n(b,R,"hash-map",
"hash",1);for(var l=plt.types.Empty.EMPTY,s=b.hash.keys(),E=0;E<s.length;E++){var W=b.hash.get(s[E]);l=plt.Kernel.cons(d([s[E],W]),l)}return l};plt.Kernel.hashForEach=function(b,d){n(b,R,"hash-map","hash",1);for(var l=b.hash.keys(),s=0;s<l.length;s++){var E=b.hash.get(l[s]);d([l[s],E])}};function R(b){return b!=null&&b!=undefined&&(b instanceof ha||b instanceof x)}plt.Kernel.isHash=R;plt.Kernel.apply=function(b,d,l){var s,E=[];n(b,K,"apply","function",1);if(l.length==0){s=d;for(O(s,"apply",2);!s.isEmpty();){var W=
s.first();E.push(W);s=s.rest()}}else{s=l.pop();for(O(s,"apply",3);!s.isEmpty();){W=s.first();E.push(W);s=s.rest()}for(;l.length>0;)E.unshift(l.pop());E.unshift(d)}if(X(b,E.length))return b(E);else throw new B(plt.Kernel.format("~a: expects ~a, given ~a: ~s",[b,aa(b),E.length,plt.Kernel.list(E)]));};plt.Kernel.map=function(b,d){n(b,K,"map","function",1);i(d,function(W,$){O(W,"map",$+2)});for(var l=plt.types.Empty.EMPTY;!d[0].isEmpty();){for(var s=[],E=0;E<d.length;E++){s.push(d[E].first());d[E]=d[E].rest()}l=
plt.Kernel.cons(b(s),l)}return plt.Kernel.reverse(l)};plt.Kernel.for_dash_each=function(b,d){n(b,K,"for-each","function",1);for(i(d,function(E,W){O(E,"for-each",W+2)});!d[0].isEmpty();){for(var l=[],s=0;s<d.length;s++){l.push(d[s].first());d[s]=d[s].rest()}b(l)}};plt.Kernel.andmap=function(b,d){n(b,K,"andmap","function",1);for(i(d,function(E,W){O(E,"andmap",W+2)});!d[0].isEmpty();){for(var l=[],s=0;s<d.length;s++){l.push(d[s].first());d[s]=d[s].rest()}if(!b(l))return plt.types.Logic.FALSE}return plt.types.Logic.TRUE};
plt.Kernel.ormap=function(b,d){n(b,K,"ormap","function",1);for(i(d,function(E,W){O(E,"ormap",W+2)});!d[0].isEmpty();){for(var l=[],s=0;s<d.length;s++){l.push(d[s].first());d[s]=d[s].rest()}if(b(l))return plt.types.Logic.TRUE}return plt.types.Logic.FALSE};plt.Kernel.filter=function(b,d){n(b,K,"filter","function",1);n(d,m,"filter","list",2);for(var l=plt.types.Empty.EMPTY;!d.isEmpty();){if(b([d.first()]))l=plt.types.Cons.makeInstance(d.first(),l);d=d.rest()}return plt.Kernel.reverse(l)};plt.Kernel.foldl=
function(b,d,l){n(b,K,"foldl","function",1);i(l,function(W,$){n(W,m,"foldl","list",$+3)});for(d=d;!l[0].isEmpty();){for(var s=[],E=0;E<l.length;E++){s.push(l[E].first());l[E]=l[E].rest()}s.push(d);d=b(s)}return d};plt.Kernel.foldr=function(b,d,l){n(b,K,"foldr","function",1);i(l,function(W,$){n(W,m,"foldr","list",$+3)});d=d;for(var s=0;s<l.length;s++)l[s]=plt.Kernel.reverse(l[s]);for(;!l[0].isEmpty();){var E=[];for(s=0;s<l.length;s++){E.push(l[s].first());l[s]=l[s].rest()}E.push(d);d=b(E)}return d};
plt.Kernel.argmin=function(b,d){n(b,K,"argmin","function",1);n(d,u,"argmin","nonempty list",2);var l=d.first(),s=b([d.first()]).toFloat();for(d=d.rest();!d.isEmpty();){var E=b([d.first()]).toFloat();if(E<s){l=d.first();s=E}d=d.rest()}return l};plt.Kernel.argmax=function(b,d){n(b,K,"argmax","function",1);n(d,u,"argmax","nonempty list",2);var l=d.first(),s=b([d.first()]).toFloat();for(d=d.rest();!d.isEmpty();){var E=b([d.first()]).toFloat();if(E>s){l=d.first();s=E}d=d.rest()}return l};plt.Kernel.sort=
function(b,d){n(b,m,"sort","list",1);n(d,K,"sort","function",2);for(var l=[];!b.isEmpty();){l.push(b.first());b=b.rest()}l.sort(function(s,E){return d([s,E])?-1:1});return plt.Kernel.list(l)};plt.Kernel.quicksort=plt.Kernel.sort;plt.Kernel.build_dash_list=function(b,d){n(b,U,"build-list","natural",1);n(d,K,"build-list","function",2);for(var l=plt.types.Empty.EMPTY,s=0;s<b.toFixnum();s++)l=plt.Kernel.cons(d([plt.types.Rational.makeInstance(s,1)]),l);return plt.Kernel.reverse(l)};plt.Kernel.build_dash_string=
function(b,d){n(b,U,"build-string","natural",1);n(d,K,"build-string","function",2);for(var l=[],s=0;s<b.toFixnum();s++){var E=d([plt.types.Rational.makeInstance(s,1)]);l.push(E.val)}return plt.types.String.makeInstance(l.join(""))};plt.Kernel.format=function(b,d){n(b,D,"format","string",1);var l=new RegExp("~[sSaAn%~]","g"),s=d;function E(W){if(W=="~~")return"~";else if(W=="~n"||W=="~%")return"\n";else if(W=="~s"||W=="~S"){if(s.length==0)throw new B("format: fewer arguments passed than expected");
return plt.types.toWrittenString(s.shift())}else if(W=="~a"||W=="~A"){if(s.length==0)throw new B("format: fewer arguments passed than expected");return plt.types.toDisplayedString(s.shift())}else throw new B("Unimplemented format "+W);}b=plt.types.String.makeInstance(b.replace(l,E));if(s.length>0)throw new B("format: More arguments passed than expected");return b};plt.Kernel.string=function(b){i(b,function(s,E){n(s,P,"string","char",E+1)});for(var d=[],l=0;l<b.length;l++)d.push(b[l].getValue());return plt.types.String.makeInstance(d.join(""))};
plt.Kernel.procedure_question_=function(b){return K(b)};plt.Kernel.procedure_dash_arity=function(b){n(b,K,"procedure-arity","function",1);return b.procedureArity};function X(b,d){return u(b.procedureArity)?d>=b.procedureArity.rest().first().toFixnum():d==b.procedureArity.toFixnum()}function aa(b){return u(b.procedureArity)?"at least "+(b.procedureArity.rest().first().toFixnum()==1)?"one argument":b.procedureArity.rest().first().toFixnum()+" arguments":b.procedureArity.toFixnum()==1?"one argument":
b.procedureArity.toFixnum()+" arguments"}plt.Kernel.xml_dash__greaterthan_s_dash_exp=function(b){n(b,D,"xml->s-exp","string",1);if(b.length==0)return plt.types.String.makeInstance("");var d;try{d=new ActiveXObject("Microsoft.XMLDOM");d.async="false";d.loadXML(b)}catch(l){d=new DOMParser;d=d.parseFromString(b,"text/xml")}function s(W){for(var $=plt.types.Empty.EMPTY,ea=0;ea<W.length;ea++){var la=plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance(W.item(ea).nodeName),plt.types.Cons.makeInstance(W.item(ea).nodeValue,
plt.types.Empty.EMPTY));$=plt.types.Cons.makeInstance(la,$)}return plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance("@"),plt.Kernel.reverse($))}function E(W){if(W.nodeType==Node.ELEMENT_NODE){for(var $=plt.types.Empty.EMPTY,ea=W.firstChild;ea!=null;){var la=E(ea);$=D(la)&&!$.isEmpty()&&D($.first())?plt.types.Cons.makeInstance($.first()+la,$.rest()):plt.types.Cons.makeInstance(la,$);ea=ea.nextSibling}$=plt.Kernel.reverse($);$=plt.types.Cons.makeInstance(s(W.attributes),$);return $=plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance(W.nodeName),
$)}else return W.nodeType==Node.TEXT_NODE?W.textContent:W.nodeType==Node.CDATA_SECTION_NODE?W.data:plt.types.Empty.EMPTY}return b=E(d.firstChild)};plt.Kernel.split_dash_whitespace=function(b){b=b.replace(/^\s+/,"");b=b.replace(/\s+$/,"");return plt.Kernel.list(b.split(/\s+/))};plt.Kernel.box=function(b){return new plt.types.Box(b)};plt.Kernel.unbox=function(b){n(b,plt.Kernel.box_question_,"unbox","box",1);return b.unbox()};plt.Kernel.box_question_=function(b){return b!=null&&b!=undefined&&b instanceof
plt.types.Box};plt.Kernel.set_dash_box_bang_=function(b,d){n(b,plt.Kernel.box_question_,"set-box!","box",1);b.set(d)};function ia(b,d){plt.types.Struct.call(this,"make-posn",[b,d]);this._eqHashCode=plt.types.makeEqHashCode()}ia.prototype=F(plt.types.Struct.prototype);function na(b,d){return new ia(b,d)}function v(b){n(b,pa,"posn-x","posn",1);return b._fields[0]}function ja(b){n(b,pa,"posn-y","posn",1);return b._fields[1]}function pa(b){return b!=null&&b!=undefined&&b instanceof ia}plt.Kernel.make_dash_posn=
na;plt.Kernel.posn_question_=pa;plt.Kernel.posn_dash_x=v;plt.Kernel.posn_dash_y=ja;plt.Kernel.error=function(b,d){n(b,q,"error","symbol",1);n(d,D,"error","string",2);throw new B(plt.Kernel.format("~a: ~a",[b,d]).toString());};plt.Kernel.syntax_dash_error=function(b,d){n(b,D,"syntax-error","string",1);n(d,V,"syntax-error","stx",2);throw new w(b,d);};plt.Kernel.reportError=function(b){var d;d=typeof console!="undefined"&&typeof console.log!="undefined"?function(l){console.log(l)}:function(l){alert(l)};
if(typeof b=="string")d(b);else b.msg?d(b.msg):d(b.toString());if(plt.Kernel.lastLoc){b=plt.Kernel.lastLoc;if(typeof b==="string")d("Error was raised around "+b);else typeof b!=="undefined"&&typeof b.line!=="undefined"&&d("Error was raised around: "+plt.Kernel.locToString(b))}};plt.Kernel._void_=function(){};plt.Kernel.build_dash_vector=function(b,d){n(b,U,"build-vector","natural",1);n(d,K,"build-vector","function",2);for(var l=[],s=0;s<b.toFixnum();s++)l[s]=d([plt.types.Rational.makeInstance(s,1)]);
return plt.types.Vector.makeInstance(b.toFixnum(),l)};plt.Kernel.make_dash_vector=function(b,d){n(b,U,"make-vector","natural",1);n(d,function(E){return E.length==0||E.length==1},"make-vector","at most two",2);b=b.toFixnum();var l,s=plt.types.Vector.makeInstance(b);if(d.length==1)for(l=0;l<b;l++)s.set(l,d[0]);return s};plt.Kernel.vector=function(b){return plt.types.Vector.makeInstance(b.length,b)};plt.Kernel.vector_dash_length=function(b){n(b,g,"vector-length","vector",1);return plt.types.Rational.makeInstance(b.length())};
plt.Kernel.vector_dash_ref=function(b,d){n(b,g,"vector-ref","vector",1);n(d,function(l){return U(l)&&l.toFixnum()<b.length()},"vector-ref","natural < vector length",2);return b.ref(d.toFixnum())};plt.Kernel.vector_dash_set_bang_=function(b,d,l){n(b,g,"vector-set!","vector",1);n(d,function(s){return U(s)&&s.toFixnum()<b.length()},"vector-set!","natural < vector length",2);return b.set(d.toFixnum(),l)};plt.Kernel.vector_question_=function(b){return g(b)?plt.types.Logic.TRUE:plt.types.Logic.FALSE};plt.Kernel.check_dash_expect=
function(b,d){b=b([]);d=d([]);if(!plt.Kernel.equal_question_(b,d))throw new S(plt.Kernel.format("~s doesn't match the expected value ~s",[b,d]));};plt.Kernel.check_dash_within=function(b,d,l){b=b([]);d=d([]);l=l([]);if(!plt.Kernel._equal__tilde_(b,d,l))throw new S(plt.Kernel.format("~s doesn't match the expected value ~s within ~s",[b,d,l]));};plt.Kernel.check_dash_error=function(b,d){d=d([]);var l;try{l=b([])}catch(s){if(plt.Kernel.equal_question_(s.msg,d))return;else throw new S(plt.Kernel.format("check-error encountered the error ~s instead of the expected error ~s.",
[s.msg,d]));}throw new S(plt.Kernel.format("check-error expected the error ~s, but instead received the value ~s.",[d,l]));};plt.Kernel.lastLoc=undefined;plt.Kernel.setLastLoc=function(b){plt.Kernel.lastLoc=b;return true};plt.Kernel.locToString=function(b){if(typeof b==="string")return b;return"offset="+b.offset+", line="+b.line+", span="+b.span+", id="+b.id};plt.Kernel.printf=function(b,d){b=plt.Kernel.format(b,d);plt.Kernel.printHook(b)};plt.Kernel.printHook=function(){};plt.Kernel.isSymbol=q;plt.Kernel.isChar=
P;plt.Kernel.isString=D;plt.Kernel.isBoolean=I;plt.Kernel.isPair=u;plt.Kernel.isEmpty=y;plt.Kernel.isReal=p;plt.Kernel.isRational=H;plt.Kernel.isComplex=Q;plt.Kernel.isInteger=L;plt.Kernel.isNatural=U;plt.Kernel.isNumber=o;plt.Kernel.isAlphabeticString=Y;plt.Kernel.isWhitespaceString=k;plt.Kernel.isList=m;plt.Kernel.isVector=g;plt.Kernel.isFunction=K;plt.Kernel.arrayEach=i;plt.Kernel.check=n;plt.Kernel.checkList=O;plt.Kernel.checkListof=ba;plt.Kernel.MobyError=plt.types.MobyError;plt.Kernel.MobyParserError=
plt.types.MobyParserError;plt.Kernel.MobySyntaxError=plt.types.MobySyntaxError;plt.Kernel.MobyTypeError=plt.types.MobyTypeError;plt.Kernel.MobyRuntimeError=plt.types.MobyRuntimeError;plt.Kernel.MobyTestingError=plt.types.MobyTestingError;plt.Kernel.attachEvent=A;plt.Kernel.detachEvent=C;plt.Kernel.ordinalize=G})();plt.reader={};
(function(){function f(J){return J.replace(/\\./g,function(o){switch(o){case "\\b":return"\u0008";case "\\f":return"\u000c";case "\\n":return"\n";case "\\r":return"\r";case "\\t":return"\t";case "\\v":return"\u000b";default:return o.substring(1)}})}function w(J){var o,q=0;for(o=0;o<J.length;o++)J[o]=="\n"&&q++;return q}var M="[^\\s\\(\\)\\[\\]\\{\\}\\\"\\,\\'\\`\\;]",B="(?:(?:\\d+\\/\\d+)|(?:(?:\\d+\\.\\d+|\\d+\\.|\\.\\d+)(?:[eE][+\\-]?\\d+)?)|(?:\\d+(?:[eE][+\\-]?\\d+)?))",S=[["whitespace",/^(\s+)/],
["#;",/^([#][;])/],["comment",/^([#][|](?:(?:\|[^\#])|[^\|])*[|][#])/],["comment",/(^;[^\n]*)/],["(",/^(\(|\[|\{)/],[")",/^(\)|\]|\})/],["'",/^(\')/],["`",/^(`)/],[",@",/^(,@)/],[",",/^(,)/],["char",/^\#\\(newline|backspace)/],["char",/^\#\\(.)/],["string",/^"((?:([^\\"]|(\\.)))*)"/],["symbol-or-number",new RegExp("^("+M+"+)")]],A=[["complex",new RegExp("^((?:(?:\\#[ei])?[+\\-]?"+B+")?(?:[+\\-]"+B+")i$)")],["number",/^((?:\#[ei])?[+-]inf.0)$/],["number",/^((?:\#[ei])?[+-]nan.0)$/],["number",new RegExp("^((?:\\#[ei])?[+\\-]?"+
B+"$)")]];function C(J,o){var q=0,P=1,V=[];for(o||(o="");1;){for(var D=false,I=0;I<S.length;I++){var u=S[I][0],y=S[I][1];y=J.match(y);if(y!=null){D=y[0];I=y[1];if(u=="string")I=f(I);if(u=="symbol-or-number"){u=false;for(y=0;y<A.length;y++){var p=I.match(A[y][1]);if(p){V.push([A[y][0],I,new Loc(q,P,D.length,o)]);u=true;break}}u||V.push(["symbol",I,new Loc(q,P,D.length,o)])}else u!="whitespace"&&u!="comment"&&V.push([u,I,new Loc(q,P,D.length,o)]);q+=D.length;P+=w(D);J=J.substring(D.length);D=true;break}}if(!D)break}return[V,
J]}function F(J,o){var q=make_dash_stx_colon_list,P=make_dash_stx_colon_atom,V=C(J,o),D=V[0],I=undefined;if(V[1].length>0)throw new plt.types.MobyParserError("Error while tokenizing: the rest of the stream is: "+V[1],new Loc(J.length-V[1].length,w(J.substring(0,J.length-V[1].length)),V[1].length,o));var u=plt.types.Symbol.makeInstance("quote"),y=plt.types.Symbol.makeInstance("quasiquote"),p=plt.types.Symbol.makeInstance("unquote"),H=plt.types.Symbol.makeInstance("unquote-splicing"),Q=plt.types.Empty.EMPTY;
function K(c){return D.length>0&&D[0][0]==c}function L(c){if(D.length==0)if(I)throw new plt.types.MobyParserError("token stream exhausted while trying to eat "+c,I[2]);else throw new plt.types.MobyParserError("token stream exhausted while trying to eat "+c,new Loc(0,0,J.length,o));var e=D.shift();I=e;if(e[0]==c)return e;else throw new plt.types.MobyParserError("Unexpected token "+e,e[2]);}var U,Y,k;k=function(c,e){c=L(c);var m=U();return q(plt.types.Cons.makeInstance(P(e,c[2]),plt.types.Cons.makeInstance(m,
Q)),new Loc(c[2].offset,c[2].line,m.loc.offset-c[2].offset+m.loc.span,o))};function g(c){switch(c){case "(":return")";case "[":return"]";case "{":return"}";default:throw new Error;}}function i(c,e){var m=c.match(/([+\-]?\d+)\/(\d+)/);if(c=="+inf.0")return plt.types.FloatPoint.makeInstance(Number.POSITIVE_INFINITY);else if(c=="-inf.0")return plt.types.FloatPoint.makeInstance(Number.NEGATIVE_INFINITY);else if(c=="+nan.0"||c=="-nan.0")return plt.types.FloatPoint.makeInstance(Number.NaN);else if(c.match(/[eE]/))return plt.types.FloatPoint.makeInstance(parseFloat(c));
else if(c.match(/\./))if(e){c=c.match("^(.*)[.](.*)$");e=plt.types.Rational.makeInstance(parseInt(c[1]||"0")||0);return c[1].match(/-/)?plt.types.NumberTower.subtract(e,plt.types.Rational.makeInstance(parseInt(c[2]),Math.pow(10,c[2].length))):plt.types.NumberTower.add(e,plt.types.Rational.makeInstance(parseInt(c[2]),Math.pow(10,c[2].length)))}else return plt.types.FloatPoint.makeInstance(parseFloat(c));else return m?e?plt.types.Rational.makeInstance(parseInt(m[1]),parseInt(m[2])):plt.types.FloatPoint.makeInstance(parseInt(m[1])/
parseInt(m[2])):e?plt.types.Rational.makeInstance(parseInt(c),1):plt.types.FloatPoint.makeInstance(parseInt(c))}U=function(){if(D.length==0)if(I)throw new plt.types.MobyParserError("Parse broke with empty token stream",I[2]);else throw new plt.types.MobyParserError("Parse broke with empty token stream",new Loc(0,0,J.length,o));switch(D[0][0]){case "(":var c=L("("),e=c[1],m=g(c[1]),G=Y();if(D.length==0)throw new plt.types.MobyParserError("Expected a "+m+" to close "+e,c[2]);else if(D[0][1]!=m)throw new plt.types.MobyParserError("Expected a "+
m+" to close "+e,D[0][2]);e=L(")");return make_dash_stx_colon_list(G,new Loc(c[2].offset,c[2].line,e[2].offset-c[2].offset+1,o));case "#;":L("#;");U();return U();case "'":return k("'",u);case "`":return k("`",y);case ",":return k(",",p);case ",@":return k(",@",H);case "number":c=L("number");return(G=c[1].match(/^(\#[ie])(.+)$/))?G[1]=="#i"?P(i(G[2],false),c[2]):P(i(G[2],true),c[2]):P(i(c[1],true),c[2]);case "complex":c=L("complex");G=c[1].match(/^((?:\#[ei])?)([+\-]?(?:\d+\/\d+|\d+\.\d+|\d+\.|\.\d+|\d+)?)([+\-](?:\d+\/\d+|\d+\.\d+|\d+\.|\.\d+|\d+))i/);
e=G[1]=="#i"?false:true;c=G[2]!=""?i(G[2],e):plt.types.Rational.ZERO;G=i(G[3],e);return c=P(plt.types.Complex.makeInstance(c,G));case "string":c=L("string");return P(plt.types.String.makeInstance(c[1]),c[2]);case "char":c=L("char");return c[1]=="newline"?P(plt.types.Char.makeInstance("\n"),c[2]):c[1]=="backspace"?P(plt.types.Char.makeInstance(String.fromCharCode(8)),c[2]):P(plt.types.Char.makeInstance(c[1]),c[2]);case "symbol":c=L("symbol");if(c[1]==".")throw new plt.types.MobyParserError("Dotted pairs are not currently accepted by Moby",
c[2]);return P(plt.types.Symbol.makeInstance(c[1]),c[2]);default:throw new plt.types.MobyParserError("Parse broke with token stream "+D,D[0][2]);}};Y=function(){for(var c=plt.types.Empty.EMPTY;1;)if(D.length==0||K(")"))break;else if(K("#;")){L("#;");U()}else{var e=U();c=plt.types.Cons.makeInstance(e,c)}return plt.types.Cons.reverse(c)};V=Y();if(D.length>0)throw new plt.types.MobyParserError("More elements in the program's token stream than expected: the next unconsumed token is: "+D[0][1],D[0][2]);
return V}plt.reader.tokenize=C;plt.reader.readSchemeExpressions=F})();function stx_colon_atom(f,w){plt.types.Struct.call(this,"make-stx:atom",[f,w]);this.datum=f;this.loc=w}stx_colon_atom.prototype=new plt.types.Struct;function make_dash_stx_colon_atom(f,w){return f=new stx_colon_atom(f,w)}function stx_colon_atom_dash_datum(f){if(stx_colon_atom_question_(f))return f.datum;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx_colon_atom_dash_datum: not a stx:atom: ~s",[f]));}
function stx_colon_atom_dash_loc(f){if(stx_colon_atom_question_(f))return f.loc;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx_colon_atom_dash_loc: not a stx:atom: ~s",[f]));}function set_dash_stx_colon_atom_dash_datum_bang_(f,w){if(stx_colon_atom_question_(f))f.datum=w;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_atom_dash_datum_bang_: not a stx:atom: ~s",[f]));}
function set_dash_stx_colon_atom_dash_loc_bang_(f,w){if(stx_colon_atom_question_(f))f.loc=w;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_atom_dash_loc_bang_: not a stx:atom: ~s",[f]));}function stx_colon_atom_question_(f){return f!=null&&f!=undefined&&f instanceof stx_colon_atom}function stx_colon_list(f,w){plt.types.Struct.call(this,"make-stx:list",[f,w]);this.elts=f;this.loc=w}stx_colon_list.prototype=new plt.types.Struct;
function make_dash_stx_colon_list(f,w){return new stx_colon_list(f,w)}function stx_colon_list_dash_elts(f){if(stx_colon_list_question_(f))return f.elts;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx_colon_list_dash_elts: not a stx:list: ~s",[f]));}function stx_colon_list_dash_loc(f){if(stx_colon_list_question_(f))return f.loc;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx_colon_list_dash_loc: not a stx:list: ~s",[f]));}
function set_dash_stx_colon_list_dash_elts_bang_(f,w){if(stx_colon_list_question_(f))f.elts=w;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_list_dash_elts_bang_: not a stx:list: ~s",[f]));}function set_dash_stx_colon_list_dash_loc_bang_(f,w){if(stx_colon_list_question_(f))f.loc=w;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_list_dash_loc_bang_: not a stx:list: ~s",[f]));}
function stx_colon_list_question_(f){return f!=null&&f!=undefined&&f instanceof stx_colon_list}function Loc(f,w,M,B){plt.types.Struct.call(this,"make-Loc",[f,w,M,B]);this.offset=f;this.line=w;this.span=M;this.id=B}Loc.prototype=new plt.types.Struct;function make_dash_Loc(f,w,M,B){return new Loc(f,w,M,B)}function Loc_dash_offset(f){if(Loc_question_(f))return f.offset;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc_dash_offset: not a Loc: ~s",[f]));}
function Loc_dash_line(f){if(Loc_question_(f))return f.line;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc_dash_line: not a Loc: ~s",[f]));}function Loc_dash_span(f){if(Loc_question_(f))return f.span;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc_dash_span: not a Loc: ~s",[f]));}function Loc_dash_id(f){if(Loc_question_(f))return f.id;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc_dash_id: not a Loc: ~s",[f]));}
function set_dash_Loc_dash_offset_bang_(f,w){if(Loc_question_(f))f.offset=w;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_offset_bang_: not a Loc: ~s",[f]));}function set_dash_Loc_dash_line_bang_(f,w){if(Loc_question_(f))f.line=w;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_line_bang_: not a Loc: ~s",[f]));}
function set_dash_Loc_dash_span_bang_(f,w){if(Loc_question_(f))f.span=w;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_span_bang_: not a Loc: ~s",[f]));}function set_dash_Loc_dash_id_bang_(f,w){if(Loc_question_(f))f.id=w;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_id_bang_: not a Loc: ~s",[f]));}function Loc_question_(f){return f!=null&&f!=undefined&&f instanceof Loc}
function Loc_dash__greaterthan_string(f){return plt.Kernel.setLastLoc({offset:284,line:14,span:154,id:"stx.ss"})&&plt.Kernel.format(plt.types.String.makeInstance("offset=~a line=~a span=~a id=~s"),[plt.Kernel.setLastLoc({offset:337,line:15,span:18,id:"stx.ss"})&&Loc_dash_offset(f),plt.Kernel.setLastLoc({offset:367,line:16,span:16,id:"stx.ss"})&&Loc_dash_line(f),plt.Kernel.setLastLoc({offset:395,line:17,span:16,id:"stx.ss"})&&Loc_dash_span(f),plt.Kernel.setLastLoc({offset:423,line:18,span:14,id:"stx.ss"})&&
Loc_dash_id(f)])}function stx_question_(f){return plt.Kernel.setLastLoc({offset:489,line:23,span:13,id:"stx.ss"})&&stx_colon_atom_question_(f)||plt.Kernel.setLastLoc({offset:509,line:24,span:13,id:"stx.ss"})&&stx_colon_list_question_(f)}
function stx_dash_e(f){return plt.Kernel.setLastLoc({offset:635,line:31,span:17,id:"stx.ss"})&&stx_colon_atom_question_(f)?plt.Kernel.setLastLoc({offset:658,line:32,span:22,id:"stx.ss"})&&stx_colon_atom_dash_datum(f):plt.Kernel.setLastLoc({offset:687,line:33,span:17,id:"stx.ss"})&&stx_colon_list_question_(f)?plt.Kernel.setLastLoc({offset:710,line:34,span:21,id:"stx.ss"})&&stx_colon_list_dash_elts(f):plt.Kernel.setLastLoc({offset:624,line:30,span:109,id:"stx.ss"})&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),
plt.types.String.makeInstance('cond: fell out of cond around "offset=624 line=30 span=109 id=\\"stx.ss\\""'))}
function stx_dash_loc(f){return plt.Kernel.setLastLoc({offset:797,line:40,span:17,id:"stx.ss"})&&stx_colon_atom_question_(f)?plt.Kernel.setLastLoc({offset:820,line:41,span:20,id:"stx.ss"})&&stx_colon_atom_dash_loc(f):plt.Kernel.setLastLoc({offset:847,line:42,span:17,id:"stx.ss"})&&stx_colon_list_question_(f)?plt.Kernel.setLastLoc({offset:870,line:43,span:20,id:"stx.ss"})&&stx_colon_list_dash_loc(f):plt.Kernel.setLastLoc({offset:786,line:39,span:106,id:"stx.ss"})&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),
plt.types.String.makeInstance('cond: fell out of cond around "offset=786 line=39 span=106 id=\\"stx.ss\\""'))}
function stx_dash_begins_dash_with_question_(f,w){return plt.Kernel.setLastLoc({offset:991,line:49,span:17,id:"stx.ss"})&&stx_colon_atom_question_(f)?plt.types.Logic.FALSE:plt.Kernel.setLastLoc({offset:1023,line:51,span:17,id:"stx.ss"})&&stx_colon_list_question_(f)?plt.Kernel.setLastLoc({offset:1051,line:52,span:36,id:"stx.ss"})&&plt.Kernel.not(plt.Kernel.setLastLoc({offset:1056,line:52,span:30,id:"stx.ss"})&&plt.Kernel.empty_question_(plt.Kernel.setLastLoc({offset:1064,line:52,span:21,id:"stx.ss"})&&
stx_colon_list_dash_elts(f)))&&plt.Kernel.setLastLoc({offset:1098,line:53,span:47,id:"stx.ss"})&&plt.Kernel.symbol_question_(plt.Kernel.setLastLoc({offset:1107,line:53,span:37,id:"stx.ss"})&&stx_dash_e(plt.Kernel.setLastLoc({offset:1114,line:53,span:29,id:"stx.ss"})&&plt.Kernel.first(plt.Kernel.setLastLoc({offset:1121,line:53,span:21,id:"stx.ss"})&&stx_colon_list_dash_elts(f))))&&plt.Kernel.setLastLoc({offset:1156,line:54,span:74,id:"stx.ss"})&&plt.Kernel.symbol_equal__question_(plt.Kernel.setLastLoc({offset:1166,
line:54,span:37,id:"stx.ss"})&&stx_dash_e(plt.Kernel.setLastLoc({offset:1173,line:54,span:29,id:"stx.ss"})&&plt.Kernel.first(plt.Kernel.setLastLoc({offset:1180,line:54,span:21,id:"stx.ss"})&&stx_colon_list_dash_elts(f))),w):plt.Kernel.setLastLoc({offset:980,line:48,span:253,id:"stx.ss"})&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),plt.types.String.makeInstance('cond: fell out of cond around "offset=980 line=48 span=253 id=\\"stx.ss\\""'))}
function datum_dash__greaterthan_stx(f,w){return plt.Kernel.setLastLoc({offset:1461,line:65,span:14,id:"stx.ss"})&&stx_question_(f)?f:plt.Kernel.setLastLoc({offset:1499,line:67,span:15,id:"stx.ss"})&&plt.Kernel.pair_question_(f)||plt.Kernel.setLastLoc({offset:1515,line:67,span:16,id:"stx.ss"})&&plt.Kernel.empty_question_(f)?plt.Kernel.setLastLoc({offset:1538,line:68,span:89,id:"stx.ss"})&&make_dash_stx_colon_list(plt.Kernel.setLastLoc({offset:1553,line:68,span:47,id:"stx.ss"})&&plt.Kernel.map(function(){plt.Kernel.setLastLoc({offset:1558,
line:68,span:33,id:"stx.ss"});function M(B){B=B[0];return plt.Kernel.setLastLoc({offset:1570,line:68,span:20,id:"stx.ss"})&&datum_dash__greaterthan_stx(B,w)}M.toWrittenString=function(){return"<function:lambda>"};M.toDisplayedString=M.toWrittenString;return M}(),[f]),w):plt.types.Logic.TRUE?plt.Kernel.setLastLoc({offset:1644,line:71,span:29,id:"stx.ss"})&&make_dash_stx_colon_atom(f,w):plt.Kernel.setLastLoc({offset:1450,line:64,span:225,id:"stx.ss"})&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),
plt.types.String.makeInstance('cond: fell out of cond around "offset=1450 line=64 span=225 id=\\"stx.ss\\""'))}
function stx_dash__greaterthan_datum(f){return plt.Kernel.setLastLoc({offset:1787,line:84,span:17,id:"stx.ss"})&&stx_colon_atom_question_(f)?plt.Kernel.setLastLoc({offset:1810,line:85,span:22,id:"stx.ss"})&&stx_colon_atom_dash_datum(f):plt.Kernel.setLastLoc({offset:1839,line:86,span:17,id:"stx.ss"})&&stx_colon_list_question_(f)?plt.Kernel.setLastLoc({offset:1862,line:87,span:38,id:"stx.ss"})&&plt.Kernel.map(function(){function w(M){return stx_dash__greaterthan_datum(M[0])}w.toWrittenString=function(){return"<function:stx->datum>"};
w.toDisplayedString=function(){return"<function:stx->datum>"};return w}(),[plt.Kernel.setLastLoc({offset:1878,line:87,span:21,id:"stx.ss"})&&stx_colon_list_dash_elts(f)]):plt.Kernel.setLastLoc({offset:1776,line:83,span:126,id:"stx.ss"})&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),plt.types.String.makeInstance('cond: fell out of cond around "offset=1776 line=83 span=126 id=\\"stx.ss\\""'))}(function(f){(function(){})(f||plt.Kernel.identity)})();plt.world={};plt.world.config={};
(function(){function f(A,C){var F={};for(var J in A)if(A.hasOwnProperty(J))F[J]=A[J];for(J in C)if(C.hasOwnProperty(J))F[J]=C[J];return F}function w(){this.vals={changeWorld:false,shutdownWorld:false,initialEffect:false,onRedraw:false,onDraw:false,onDrawCss:false,tickDelay:false,onTick:false,onTickEffect:false,onKey:false,onKeyEffect:false,onTilt:false,onTiltEffect:false,onAcceleration:false,onAccelerationEffect:false,onShake:false,onShakeEffect:false,onLocationChange:false,onLocationChangeEffect:false,
onAnnounce:false,onAnnounceEffect:false,stopWhen:false,stopWhenEffect:false,connectToGame:false,onGameStart:false,onOpponentTurn:false,onMyTurn:false,afterMyTurn:false,onGameFinish:false}}w.prototype.lookup=function(A){plt.Kernel.check(A,plt.Kernel.isString,"WorldConfig.lookup","string",1);if(A in this.vals)return this.vals[A];else throw Error("Can't find "+A+" in the configuration");};w.prototype.updateAll=function(A){var C=new w;C.vals=f(this.vals,A);return C};plt.world.config.WorldConfig=w;plt.world.config.CONFIG=
new w;function M(){return make_dash_effect_colon_none()}function B(A,C){A.toWrittenString=function(){return"("+C+" ...)"};A.toDisplayedString=A.toWrittenString;return A}plt.world.config.Kernel=plt.world.config.Kernel||{};plt.world.config.Kernel.onRedraw=function(A){plt.Kernel.check(A,plt.Kernel.isFunction,"on-redraw","function",1);return B(function(C){return C.updateAll({onRedraw:A})},"on-redraw")};plt.world.config.Kernel.initialEffect=function(A){return B(function(C){return C.updateAll({initialEffect:A})},
"initial-effect")};plt.world.config.Kernel.onDraw=function(A,C){plt.Kernel.check(A,plt.Kernel.isFunction,"on-draw","function",1);plt.Kernel.check(C,plt.Kernel.isFunction,"on-draw","function",2);return B(function(F){return F.updateAll({onDraw:A,onDrawCss:C})},"on-draw")};plt.world.config.Kernel.onTick=function(A,C){plt.Kernel.check(A,plt.Kernel.isNumber,"on-tick","number",1);plt.Kernel.check(C,plt.Kernel.isFunction,"on-tick","function",2);return plt.world.config.Kernel.onTick_star_(A,C,function(){return M()})};
plt.world.config.Kernel.onTick_star_=function(A,C,F){plt.Kernel.check(A,plt.Kernel.isNumber,"on-tick!","number",1);plt.Kernel.check(C,plt.Kernel.isFunction,"on-tick!","function",2);plt.Kernel.check(F,plt.Kernel.isFunction,"on-tick!","function",3);return B(function(J){var o={onTick:C,onTickEffect:F,tickDelay:plt.types.NumberTower.toFixnum(plt.types.NumberTower.multiply(plt.types.Rational.makeInstance(1000,1),A))};return J.updateAll(o)},"on-tick")};plt.world.config.Kernel.onTilt=function(A){plt.Kernel.check(A,
plt.Kernel.isFunction,"on-tilt","function",1);return plt.world.config.Kernel.onTilt_star_(A,function(){return M()})};plt.world.config.Kernel.onTilt_star_=function(A,C){plt.Kernel.check(A,plt.Kernel.isFunction,"on-tilt!","function",1);plt.Kernel.check(C,plt.Kernel.isFunction,"on-tilt!","function",2);return B(function(F){return F.updateAll({onTilt:A,onTiltEffect:C})},"on-tilt")};plt.world.config.Kernel.onAnnounce=function(A){plt.Kernel.check(A,plt.Kernel.isFunction,"on-announce","function",1);return plt.world.config.Kernel.onAnnounce_star_(A,
function(){return M()})};plt.world.config.Kernel.onAnnounce_star_=function(A,C){plt.Kernel.check(A,plt.Kernel.isFunction,"on-announce!","function",1);plt.Kernel.check(C,plt.Kernel.isFunction,"on-announce!","function",2);return B(function(F){return F.updateAll({onAnnounce:A,onAnnounceEffect:C})},"on-announce")};plt.world.config.Kernel.onAcceleration=function(A){plt.Kernel.check(A,plt.Kernel.isFunction,"on-acceleration","function",1);return plt.world.config.Kernel.onAcceleration_star_(A,function(){return M()})};
plt.world.config.Kernel.onAcceleration_star_=function(A,C){plt.Kernel.check(A,plt.Kernel.isFunction,"on-acceleration!","function",1);plt.Kernel.check(C,plt.Kernel.isFunction,"on-acceleration!","function",2);return B(function(F){return F.updateAll({onAcceleration:A,onAccelerationEffect:C})},"on-acceleration")};plt.world.config.Kernel.onShake=function(A){plt.Kernel.check(A,plt.Kernel.isFunction,"on-shake","function",1);return plt.world.config.Kernel.onShake_star_(A,function(){return M()})};plt.world.config.Kernel.onShake_star_=
function(A,C){plt.Kernel.check(A,plt.Kernel.isFunction,"on-shake!","function",1);plt.Kernel.check(C,plt.Kernel.isFunction,"on-shake!","function",2);return B(function(F){return F.updateAll({onShake:A,onShakeEffect:C})},"on-shake")};plt.world.config.Kernel.onKey=function(A){plt.Kernel.check(A,plt.Kernel.isFunction,"on-key","function",1);return plt.world.config.Kernel.onKey_star_(A,function(){return M()})};plt.world.config.Kernel.onKey_star_=function(A,C){plt.Kernel.check(A,plt.Kernel.isFunction,"on-key!",
"function",1);plt.Kernel.check(C,plt.Kernel.isFunction,"on-key!","function",2);return B(function(F){return F.updateAll({onKey:A,onKeyEffect:C})},"on-key")};plt.world.config.Kernel.onLocationChange=function(A){plt.Kernel.check(A,plt.Kernel.isFunction,"on-location-change","function",1);return plt.world.config.Kernel.onLocationChange_star_(A,function(){return M()})};plt.world.config.Kernel.onLocationChange_star_=function(A,C){plt.Kernel.check(A,plt.Kernel.isFunction,"on-location-change!","function",
1);plt.Kernel.check(C,plt.Kernel.isFunction,"on-location-change!","function",2);return B(function(F){return F.updateAll({onLocationChange:A,onLocationChangeEffect:C})},"on-location-change")};plt.world.config.Kernel.stopWhen=function(A){plt.Kernel.check(A,plt.Kernel.isFunction,"stop-when","function",1);return plt.world.config.Kernel.stopWhen_star_(A,function(){return M()})};plt.world.config.Kernel.stopWhen_star_=function(A,C){plt.Kernel.check(A,plt.Kernel.isFunction,"stop-when!","function",1);plt.Kernel.check(C,
plt.Kernel.isFunction,"stop-when!","function",2);return B(function(F){return F.updateAll({stopWhen:A,stopWhenEffect:C})},"stop-when")};function S(A,C,F,J){return function(o){plt.Kernel.check(o,C,J,F,1);return B(function(q){return q.updateAll({propertyName:o})},J)}}plt.world.config.Kernel.connect_dash_to_dash_game=S("connectToGame",plt.Kernel.isString,"string","connect-to-game");plt.world.config.Kernel.on_dash_game_dash_start=S("onGameStart",plt.Kernel.isFunction,"function","on-game-start");plt.world.config.Kernel.on_dash_opponent_dash_turn=
S("onOpponentTurn",plt.Kernel.isFunction,"function","on-opponent-turn");plt.world.config.Kernel.on_dash_my_dash_turn=S("onMyTurn",plt.Kernel.isFunction,"function","on-my-turn");plt.world.config.Kernel.after_dash_my_dash_turn=S("afterMyTurn",plt.Kernel.isFunction,"function","after-my-turn");plt.world.config.Kernel.on_dash_game_dash_finish=S("onGameFinish",plt.Kernel.isFunction,"function","on-game-finish")})();plt.platform={};
(function(){plt.platform.Platform={};var f=false;plt.platform.Platform.getInstance=function(){f||(f=new w);return f};function w(){this.tiltService=p;this.shakeService=L();this.locationService=M();this.telephonyService=H();this.networkService=k();this.soundService=c();this.powerService=n();this.smsService=ra();this.pickPlaylistService=ga()}w.prototype.getTiltService=function(){return this.tiltService};w.prototype.getShakeService=function(){return this.shakeService};w.prototype.getLocationService=function(){return this.locationService};
w.prototype.getTelephonyService=function(){return this.telephonyService};w.prototype.getNetworkService=function(){return this.networkService};w.prototype.getSoundService=function(){return this.soundService};w.prototype.getPowerService=function(){return this.powerService};w.prototype.getSmsService=function(){return this.smsService};w.prototype.getPickPlaylistService=function(){return this.pickPlaylistService};function M(){return B()?new o:S()?new F:A()?new q:new J}function B(){return typeof Device!=
"undefined"}function S(){return window.google&&window.google.gears&&true}function A(){return typeof navigator!="undefined"&&typeof navigator.geolocation!="undefined"}function C(x,R,X,aa){function ia(v){return v*Math.PI/180}function na(v,ja){return Math.pow(Math.sin((ia(v)-ia(ja))/2),2)}return 12756000*Math.asin(Math.min(1,Math.sqrt(na(x,X)+Math.cos(ia(x))*Math.cos(ia(X))*na(R,aa))))}function F(){this.geo=google.gears.factory.create("beta.geolocation");this.listeners=[];this.currentPosition={latitude:0,
longitude:0,altitude:0,bearing:0,speed:0};this.watchId=false}F.prototype.startService=function(){var x=this;function R(X){x.currentPosition.latitude=X.latitude;x.currentPosition.longitude=X.longitude;x.currentPosition.altitude=X.altitude;for(var aa=0;aa<x.listeners.length;aa++)x.listeners[aa](X.latitude,X.longitude)}this.watchId=this.geo.watchPosition(R)};F.prototype.shutdownService=function(){this.geo.clearWatch(this.watchId)};F.prototype.addLocationChangeListener=function(x){this.listeners.push(x)};
F.prototype.getLatitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.latitude)};F.prototype.getLongitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.longitude)};F.prototype.getAltitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.altitude)};F.prototype.getBearing=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.bearing)};F.prototype.getSpeed=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.speed)};
F.prototype.getDistanceBetween=function(x,R,X,aa){return plt.types.FloatPoint.makeInstance(C(x.toFloat(),R.toFloat(),X.toFloat(),aa.toFloat()))};function J(){}J.prototype.startService=function(){};J.prototype.shutdownService=function(){};J.prototype.addLocationChangeListener=function(){};J.prototype.getLatitude=function(){return plt.types.Rational.ZERO};J.prototype.getLongitude=function(){return plt.types.Rational.ZERO};J.prototype.getAltitude=function(){return plt.types.Rational.ZERO};J.prototype.getBearing=
function(){return plt.types.Rational.ZERO};J.prototype.getSpeed=function(){return plt.types.Rational.ZERO};J.prototype.getDistanceBetween=function(x,R,X,aa){return plt.types.FloatPoint.makeInstance(C(x.toFloat(),R.toFloat(),X.toFloat(),aa.toFloat()))};function o(){this.locationListeners=[];this.currentPosition={latitude:0,longitude:0,atttitude:0,bearing:0,speed:0};this.watchId=false}o.prototype.startService=function(){var x=this;function R(X){x.currentPosition.latitude=parseFloat(X.latitude);x.currentPosition.longitude=
parseFloat(X.longitude);for(X=0;X<x.locationListeners.length;X++){var aa=x.locationListeners[X];aa(x.currentPosition.latitude,x.currentPosition.longitude)}}this.watchId=navigator.geolocation.watchPosition(R,function(){},{})};o.prototype.shutdownService=function(){navigator.geolocation.clearWatch(this.watchId)};o.prototype.addLocationChangeListener=function(x){this.locationListeners.push(x)};o.prototype.getLatitude=function(){return plt.types.FloatPoint.makeInstance(navigator.geolocation.lastPosition.latitude)};
o.prototype.getLongitude=function(){return plt.types.FloatPoint.makeInstance(navigator.geolocation.lastPosition.longitude)};o.prototype.getAltitude=function(){return plt.types.Rational.ZERO};o.prototype.getBearing=function(){return plt.types.Rational.ZERO};o.prototype.getSpeed=function(){return plt.types.Rational.ZERO};o.prototype.getDistanceBetween=function(x,R,X,aa){return plt.types.FloatPoint.makeInstance(navigator.geolocation.getDistanceBetween(x.toFloat(),R.toFloat(),X.toFloat(),aa.toFloat()))};
function q(){this.locationListeners=[];this.currentPosition={latitude:0,longitude:0,atttitude:0,bearing:0,speed:0};this.watchId=false}q.prototype.startService=function(){var x=this;function R(X){x.currentPosition.latitude=X.coords.latitude;x.currentPosition.longitude=X.coords.longitude;for(var aa=0;aa<x.locationListeners.length;aa++){var ia=x.locationListeners[aa];ia(X.coords.latitude,X.coords.longitude)}}typeof navigator.geolocation!="undefined"&&typeof navigator.geolocation.getCurrentPosition!=
"undefined"&&navigator.geolocation.watchPosition(R);setTimeout(function(){navigator.geolocation.getCurrentPosition(R)},10000)};q.prototype.shutdownService=function(){if(this.watchId){navigator.geolocation.clearWatch(this.watchId);this.watchId=false}};q.prototype.addLocationChangeListener=function(x){this.locationListeners.push(x)};q.prototype.getLatitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.latitude)};q.prototype.getLongitude=function(){return plt.types.FloatPOint.makeInstance(this.currentPosition.longitude)};
q.prototype.getAltitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.altitude)};q.prototype.getBearing=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.bearing)};q.prototype.getSpeed=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.speed)};q.prototype.getDistanceBetween=function(x,R,X,aa){return plt.types.FloatPoint.makeInstance(C(x.toFloat(),R.toFloat(),X.toFloat(),aa.toFloat()))};var P=[],V=[],D,I;function u(x){for(var R=
0;R<P.length;R++)P[R](parseFloat(x.x),parseFloat(x.y),parseFloat(x.z))}function y(x){for(var R=0;R<V.length;R++)V[R](parseFloat(x.azimuth),parseFloat(x.pitch),parseFloat(x.roll))}var p={startService:function(){if(typeof Accelerometer!="undefined"){D=navigator.accelerometer.watchAcceleration(u,function(){});I=navigator.accelerometer.watchOrientation(y,function(){})}},shutdownService:function(){if(typeof Accelerometer!="undefined"){navigator.accelerometer.clearWatch(D);navigator.accelerometer.clearWatch(I);
navigator.accelerometer.stopAllShakeWatches()}},addOrientationChangeListener:function(x){V.push(x)},addAccelerationChangeListener:function(x){P.push(x)}};function H(){return B()?new K:new Q}function Q(){}Q.prototype.getSignalStrengths=function(){return plt.types.Empty.EMPTY};function K(){}K.prototype.getSignalStrengths=function(){for(var x=plt.types.Empty.EMPTY,R=Device.getSignalStrengths(),X=0;X<R.length;X++){var aa=R.get(X);x=plt.types.Cons.makeInstance(plt.Kernel.list([toNum(aa.getId()),toNum(aa.getStrength())]),
x)}return x};function L(){return B()?new U:new Y}function U(){this.listeners=[]}U.prototype.startService=function(){var x=this;function R(){for(var aa=0;aa<x.listeners.length;aa++)x.listeners[aa]()}function X(){}this.shakeId=navigator.accelerometer.watchShake(R,X)};U.prototype.shutdownService=function(){navigator.accelerometer.stopAllShakeWatches()};U.prototype.addListener=function(x){this.listeners.push(x)};function Y(){}Y.prototype.startService=function(){};Y.prototype.shutdownService=function(){};
Y.prototype.addListener=function(){};function k(){return B()?new g:new i}function g(){}g.prototype.getUrl=function(x){x=Device.getUrl(x);return plt.types.String.makeInstance(""+x)};function i(){}i.prototype.getUrl=function(x){var R=new XMLHttpRequest;x="/networkProxy?url="+encodeURIComponent(x);R.open("GET",x,false);R.send(null);return plt.types.String.makeInstance(R.responseText)};function c(){return B()?new m:e()?new G:new N}function e(){return!!document.createElement("audio").canPlayType}function m(){}
m.prototype.beep=function(){navigator.notification.beep(1)};m.prototype.playPlaylist=function(x){Device.playPlaylistRecord(x)};m.prototype.pausePlaylist=function(x){Device.pausePlaylistRecord(x)};m.prototype.stopPlaylist=function(x){Device.stopPlaylistRecord(x)};m.prototype.playSoundUrl=function(x){navigator.audio.playMusic(x)};m.prototype.playDtmfTone=function(x,R){navigator.audio.playDTMF(x);setTimeout(function(){navigator.audio.stopDTMF()},R)};m.prototype.stopSoundUrl=function(x){navigator.audio.stopMusic(x)};
m.prototype.pauseSoundUrl=function(x){navigator.audio.pauseMusic(x)};m.prototype.setVolume=function(x){navigator.audio.setMusicVolume(x)};m.prototype.raiseVolume=function(){navigator.audio.increaseMusicVolume()};m.prototype.lowerVolume=function(){navigator.audio.decreaseMusicVolume()};function G(){this.cachedUrls={};this.baseVolume=100}G.prototype.beep=function(){alert("Beep")};G.prototype.playPlaylistSound=function(){};G.prototype.pausePlaylistSound=function(){};G.prototype.stopPlaylistSound=function(){};
G.prototype.playSoundUrl=function(x){this.cachedUrls[x]||(this.cachedUrls[x]=new Audio(x));var R=this.cachedUrls[x];if(R.ended||R.paused)this.cachedUrls[x].play()};G.prototype.playDtmfTone=function(){alert("dtmf tone")};G.prototype.stopSoundUrl=function(x){if(this.cachedUrls[x]){this.cachedUrls[x].pause();this.cachedUrls[x].currentTime=0}};G.prototype.pauseSoundUrl=function(x){this.cachedUrls[x]&&this.cachedUrls[x].pause()};G.prototype.setVolume=function(x){for(var R in this.cachedUrls)this.cachedUrls[R].volume=
x/100;this.baseVolume=x};G.prototype.raiseVolume=function(){this.setVolume(Math.min(this.baseVolume+5,100))};G.prototype.lowerVolume=function(){this.setVolume(Math.max(this.baseVolume-5,0))};function N(){}N.prototype.beep=function(){alert("Beep")};N.prototype.playPlaylistSound=function(){};N.prototype.pausePlaylistSound=function(){};N.prototype.stopPlaylistSound=function(){};N.prototype.playSoundUrl=function(x){plt.Kernel.reportError("sound url "+x+" should play, but I don't have sound support.")};
N.prototype.playDtmfTone=function(){plt.Kernel.reportError("DTMF tone should play, but I don't have DTMF support")};N.prototype.stopSoundUrl=function(){};N.prototype.pauseSoundUrl=function(){};N.prototype.setVolume=function(){};N.prototype.raiseVolume=function(){};N.prototype.lowerVolume=function(){};function n(){return B()?new O:new ba}function O(){this.currentLockFlags=-1}O.prototype.setWakeLock=function(x){if(x!=this.currentLockFlags){navigator.power.setWakeLock(x);this.currentLockFlags=x}};O.prototype.releaseWakeLock=
function(){if(this.currentLockFlags!=-1){navigator.power.releaseWakeLock();this.currentLockFlags=-1}};function ba(){}ba.prototype.setWakeLock=function(){};ba.prototype.releaseWakeLock=function(){};function ra(){return B()?new fa:new da}function fa(){}fa.prototype.send=function(x,R){navigator.sms.send(x,R)};function da(){}da.prototype.send=function(x,R){alert("SMS should be sent to "+x+" with the content: "+R)};function ga(){return B()?new ma:new ha}function ma(){}ma.prototype.pickPlaylist=function(x){function R(X){x(X)}
navigator.dialogPickers.pickPlaylist(R)};function ha(){}ha.prototype.pickPlaylist=function(){alert("pick playlist currently unavailable")}})();plt.lib={};
(function(){plt.lib.Telephony={};plt.lib.Telephony.getSignalStrengths=function(){return plt.platform.Platform.getInstance().getTelephonyService().getSignalStrengths()};plt.lib.Location={};plt.lib.Location.getLatitude=function(){return plt.platform.Platform.getInstance().getLocationService().getLatitude()};plt.lib.Location.getLongitude=function(){return plt.platform.Platform.getInstance().getLocationService().getLongitude()};plt.lib.Location.getAttitude=function(){return plt.platform.Platform.getInstance().getLocationService().getAttitude()};
plt.lib.Location.getBearing=function(){return plt.platform.Platform.getInstance().getLocationService().getBearing()};plt.lib.Location.getSpeed=function(){return plt.platform.Platform.getInstance().getLocationService().getSpeed()};plt.lib.Location.getDistanceBetween=function(f,w,M,B){return plt.platform.Platform.getInstance().getLocationService().getDistanceBetween(f,w,M,B)};plt.lib.Net={};plt.lib.Net.getUrl=function(f){return plt.platform.Platform.getInstance().getNetworkService().getUrl(f)}})();
(function(f){function w(){plt.types.Struct.call(this,"make-effect:none",[])}w.prototype=new plt.types.Struct;function M(){return new w}function B(j){return j!=null&&j!=undefined&&j instanceof w}function S(){plt.types.Struct.call(this,"make-effect:beep",[])}S.prototype=new plt.types.Struct;function A(){return new S}function C(j){return j!=null&&j!=undefined&&j instanceof S}function F(j,T){plt.types.Struct.call(this,"make-effect:play-dtmf-tone",[j,T]);this.tone=j;this.duration=T}F.prototype=new plt.types.Struct;
function J(j,T){return new F(j,T)}function o(j){if(D(j))return j.tone;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:play-dtmf-tone-tone: not a effect:play-dtmf-tone: ~s",[j]));}function q(j){if(D(j))return j.duration;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:play-dtmf-tone-duration: not a effect:play-dtmf-tone: ~s",[j]));}function P(j,T){if(D(j)){j.tone=T;j._fields[0]=T}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_tone_bang_: not a effect:play-dtmf-tone: ~s",
[j]));}function V(j,T){if(D(j)){j.duration=T;j._fields[1]=T}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_duration_bang_: not a effect:play-dtmf-tone: ~s",[j]));}function D(j){return j!=null&&j!=undefined&&j instanceof F}function I(j,T){plt.types.Struct.call(this,"make-effect:send-sms",[j,T]);this.address=j;this.msg=T}I.prototype=new plt.types.Struct;function u(j,T){return new I(j,T)}function y(j){if(K(j))return j.address;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:send-sms-address: not a effect:send-sms: ~s",
[j]));}function p(j){if(K(j))return j.msg;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:send-sms-msg: not a effect:send-sms: ~s",[j]));}function H(j,T){if(K(j)){j.address=T;j._fields[0]=T}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_send_dash_sms_dash_address_bang_: not a effect:send-sms: ~s",[j]));}function Q(j,T){if(K(j)){j.msg=T;j._fields[1]=T}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_send_dash_sms_dash_msg_bang_: not a effect:send-sms: ~s",
[j]));}function K(j){return j!=null&&j!=undefined&&j instanceof I}function L(j){plt.types.Struct.call(this,"make-playlist-sound",[j]);this.playlist=j}L.prototype=new plt.types.Struct;function U(j){return new L(j)}function Y(j){if(g(j))return j.playlist;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("playlist-sound-playlist: not a playlist-sound: ~s",[j]));}function k(j,T){if(g(j)){j.playlist=T;j._fields[0]=T}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_playlist_dash_sound_dash_playlist_bang_: not a playlist-sound: ~s",
[j]));}function g(j){return j!=null&&j!=undefined&&j instanceof L}function i(j){return plt.Kernel.setLastLoc({offset:417,line:19,span:11,id:"effect-struct.ss"})&&plt.Kernel.string_question_(j)||plt.Kernel.setLastLoc({offset:435,line:20,span:19,id:"effect-struct.ss"})&&g(j)}function c(j){plt.types.Struct.call(this,"make-effect:play-sound",[j]);this.sound=j}c.prototype=new plt.types.Struct;function e(j){return new c(j)}function m(j){if(N(j))return j.sound;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:play-sound-sound: not a effect:play-sound: ~s",
[j]));}function G(j,T){if(N(j)){j.sound=T;j._fields[0]=T}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_play_dash_sound_dash_sound_bang_: not a effect:play-sound: ~s",[j]));}function N(j){return j!=null&&j!=undefined&&j instanceof c}function n(j){plt.types.Struct.call(this,"make-effect:pause-sound",[j]);this.sound=j}n.prototype=new plt.types.Struct;function O(j){return new n(j)}function ba(j){if(fa(j))return j.sound;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pause-sound-sound: not a effect:pause-sound: ~s",
[j]));}function ra(j,T){if(fa(j)){j.sound=T;j._fields[0]=T}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pause_dash_sound_dash_sound_bang_: not a effect:pause-sound: ~s",[j]));}function fa(j){return j!=null&&j!=undefined&&j instanceof n}function da(j){plt.types.Struct.call(this,"make-effect:stop-sound",[j]);this.sound=j}da.prototype=new plt.types.Struct;function ga(j){return new da(j)}function ma(j){if(x(j))return j.sound;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:stop-sound-sound: not a effect:stop-sound: ~s",
[j]));}function ha(j,T){if(x(j)){j.sound=T;j._fields[0]=T}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_stop_dash_sound_dash_sound_bang_: not a effect:stop-sound: ~s",[j]));}function x(j){return j!=null&&j!=undefined&&j instanceof da}function R(j){plt.types.Struct.call(this,"make-effect:set-sound-volume",[j]);this.volume=j}R.prototype=new plt.types.Struct;function X(j){return new R(j)}function aa(j){if(na(j))return j.volume;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:set-sound-volume-volume: not a effect:set-sound-volume: ~s",
[j]));}function ia(j,T){if(na(j)){j.volume=T;j._fields[0]=T}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_set_dash_sound_dash_volume_dash_volume_bang_: not a effect:set-sound-volume: ~s",[j]));}function na(j){return j!=null&&j!=undefined&&j instanceof R}function v(){plt.types.Struct.call(this,"make-effect:raise-sound-volume",[])}v.prototype=new plt.types.Struct;function ja(){return new v}function pa(j){return j!=null&&j!=undefined&&j instanceof v}function b(){plt.types.Struct.call(this,
"make-effect:lower-sound-volume",[])}b.prototype=new plt.types.Struct;function d(){return new b}function l(j){return j!=null&&j!=undefined&&j instanceof b}function s(j){plt.types.Struct.call(this,"make-effect:set-wake-lock",[j]);this.locks=j}s.prototype=new plt.types.Struct;function E(j){return new s(j)}function W(j){if(ea(j))return j.locks;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:set-wake-lock-locks: not a effect:set-wake-lock: ~s",[j]));}function $(j,T){if(ea(j)){j.locks=
T;j._fields[0]=T}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_set_dash_wake_dash_lock_dash_locks_bang_: not a effect:set-wake-lock: ~s",[j]));}function ea(j){return j!=null&&j!=undefined&&j instanceof s}function la(){plt.types.Struct.call(this,"make-effect:release-wake-lock",[])}la.prototype=new plt.types.Struct;function sa(){return new la}function Aa(j){return j!=null&&j!=undefined&&j instanceof la}function Ba(j){plt.types.Struct.call(this,"make-effect:pick-playlist",
[j]);this.update_dash_f=j}Ba.prototype=new plt.types.Struct;function Ha(j){return new Ba(j)}function Ea(j){if(Ca(j))return j.update_dash_f;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pick-playlist-update-f: not a effect:pick-playlist: ~s",[j]));}function Ia(j,T){if(Ca(j)){j.update_dash_f=T;j._fields[0]=T}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pick_dash_playlist_dash_update_dash_f_bang_: not a effect:pick-playlist: ~s",[j]));}function Ca(j){return j!=
null&&j!=undefined&&j instanceof Ba}function xa(j,T){plt.types.Struct.call(this,"make-effect:pick-random",[j,T]);this.n=j;this.update_dash_f=T}xa.prototype=new plt.types.Struct;function Fa(j,T){return new xa(j,T)}function Da(j){if(va(j))return j.n;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pick-random-n: not a effect:pick-random: ~s",[j]));}function oa(j){if(va(j))return j.update_dash_f;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pick-random-update-f: not a effect:pick-random: ~s",
[j]));}function Ja(j,T){if(va(j)){j.n=T;j._fields[0]=T}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pick_dash_random_dash_n_bang_: not a effect:pick-random: ~s",[j]));}function Ka(j,T){if(va(j)){j.update_dash_f=T;j._fields[1]=T}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pick_dash_random_dash_update_dash_f_bang_: not a effect:pick-random: ~s",[j]));}function va(j){return j!=null&&j!=undefined&&j instanceof xa}function Ga(j){return plt.Kernel.setLastLoc({offset:1069,
line:43,span:20,id:"effect-struct.ss"})&&B(j)||plt.Kernel.setLastLoc({offset:1096,line:44,span:20,id:"effect-struct.ss"})&&C(j)||plt.Kernel.setLastLoc({offset:1123,line:45,span:30,id:"effect-struct.ss"})&&D(j)||plt.Kernel.setLastLoc({offset:1160,line:46,span:24,id:"effect-struct.ss"})&&K(j)||plt.Kernel.setLastLoc({offset:1191,line:47,span:26,id:"effect-struct.ss"})&&N(j)||plt.Kernel.setLastLoc({offset:1224,line:48,span:27,id:"effect-struct.ss"})&&fa(j)||plt.Kernel.setLastLoc({offset:1258,line:49,
span:26,id:"effect-struct.ss"})&&x(j)||plt.Kernel.setLastLoc({offset:1291,line:50,span:32,id:"effect-struct.ss"})&&na(j)||plt.Kernel.setLastLoc({offset:1330,line:51,span:34,id:"effect-struct.ss"})&&pa(j)||plt.Kernel.setLastLoc({offset:1371,line:52,span:34,id:"effect-struct.ss"})&&l(j)||plt.Kernel.setLastLoc({offset:1412,line:53,span:29,id:"effect-struct.ss"})&&ea(j)||plt.Kernel.setLastLoc({offset:1448,line:54,span:33,id:"effect-struct.ss"})&&Aa(j)||plt.Kernel.setLastLoc({offset:1488,line:55,span:29,
id:"effect-struct.ss"})&&Ca(j)||plt.Kernel.setLastLoc({offset:1524,line:56,span:27,id:"effect-struct.ss"})&&va(j)}(function(j){(function(){})(j||plt.Kernel.identity);f.effect_colon_send_dash_sms_dash_msg=p;f.playlist_dash_sound_dash_playlist=Y;f.set_dash_effect_colon_send_dash_sms_dash_address_bang_=H;f.set_dash_playlist_dash_sound_dash_playlist_bang_=k;f.sound_question_=i;f.set_dash_effect_colon_set_dash_sound_dash_volume_dash_volume_bang_=ia;f.set_dash_effect_colon_stop_dash_sound_dash_sound_bang_=
ha;f.set_dash_effect_colon_set_dash_wake_dash_lock_dash_locks_bang_=$;f.set_dash_effect_colon_send_dash_sms_dash_msg_bang_=Q;f.set_dash_effect_colon_pick_dash_random_dash_n_bang_=Ja;f.set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_duration_bang_=V;f.set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_tone_bang_=P;f.set_dash_effect_colon_play_dash_sound_dash_sound_bang_=G;f.set_dash_effect_colon_pick_dash_random_dash_update_dash_f_bang_=Ka;f.set_dash_effect_colon_pause_dash_sound_dash_sound_bang_=
ra;f.set_dash_effect_colon_pick_dash_playlist_dash_update_dash_f_bang_=Ia;f.playlist_dash_sound_question_=g;f.make_dash_effect_colon_play_dash_dtmf_dash_tone=J;f.make_dash_effect_colon_set_dash_sound_dash_volume=X;f.make_dash_playlist_dash_sound=U;f.playlist_dash_sound=L;f.make_dash_effect_colon_stop_dash_sound=ga;f.make_dash_effect_colon_set_dash_wake_dash_lock=E;f.make_dash_effect_colon_raise_dash_sound_dash_volume=ja;f.make_dash_effect_colon_send_dash_sms=u;f.make_dash_effect_colon_release_dash_wake_dash_lock=
sa;f.make_dash_effect_colon_play_dash_sound=e;f.effect_colon_stop_dash_sound=da;f.make_dash_effect_colon_beep=A;f.make_dash_effect_colon_pause_dash_sound=O;f.make_dash_effect_colon_pick_dash_playlist=Ha;f.make_dash_effect_colon_pick_dash_random=Fa;f.make_dash_effect_colon_none=M;f.make_dash_effect_colon_lower_dash_sound_dash_volume=d;f.effect_colon_stop_dash_sound_question_=x;f.effect_question_=Ga;f.effect_colon_stop_dash_sound_dash_sound=ma;f.effect_colon_set_dash_sound_dash_volume=R;f.effect_colon_set_dash_wake_dash_lock=
s;f.effect_colon_set_dash_wake_dash_lock_question_=ea;f.effect_colon_set_dash_wake_dash_lock_dash_locks=W;f.effect_colon_set_dash_sound_dash_volume_question_=na;f.effect_colon_set_dash_sound_dash_volume_dash_volume=aa;f.effect_colon_send_dash_sms_question_=K;f.effect_colon_pause_dash_sound_question_=fa;f.effect_colon_play_dash_dtmf_dash_tone_dash_tone=o;f.effect_colon_raise_dash_sound_dash_volume=v;f.effect_colon_send_dash_sms=I;f.effect_colon_send_dash_sms_dash_address=y;f.effect_colon_release_dash_wake_dash_lock=
la;f.effect_colon_release_dash_wake_dash_lock_question_=Aa;f.effect_colon_raise_dash_sound_dash_volume_question_=pa;f.effect_colon_play_dash_sound=c;f.effect_colon_play_dash_sound_question_=N;f.effect_colon_play_dash_sound_dash_sound=m;f.effect_colon_play_dash_dtmf_dash_tone_question_=D;f.effect_colon_pick_dash_random_dash_n=Da;f.effect_colon_pick_dash_random_question_=va;f.effect_colon_play_dash_dtmf_dash_tone=F;f.effect_colon_play_dash_dtmf_dash_tone_dash_duration=q;f.effect_colon_pick_dash_random_dash_update_dash_f=
oa;f.effect_colon_pick_dash_playlist_question_=Ca;f.effect_colon_pick_dash_random=xa;f.effect_colon_pick_dash_playlist=Ba;f.effect_colon_pick_dash_playlist_dash_update_dash_f=Ea;f.effect_colon_lower_dash_sound_dash_volume_question_=l;f.effect_colon_none_question_=B;f.effect_colon_pause_dash_sound=n;f.effect_colon_pause_dash_sound_dash_sound=ba;f.effect_colon_none=w;f.effect_colon_beep_question_=C;f.effect_colon_lower_dash_sound_dash_volume=b;f.effect_colon_beep=S})()})(this);plt.world.Kernel={};
(function(){var f,w=[],M,B=false;function S(i){function c(){}c.prototype=i;return new c}function A(i){function c(){}c.prototype=i;var e=new c;for(property in i)if(i.hasOwnProperty(property))e[property]=i[property];return e}var C=[];plt.world.Kernel.addAnnounceListener=function(i){C.push(i)};plt.world.Kernel.removeAnnounceListener=function(i){i=C.indexOf(i);i!=-1&&C.splice(i,1)};plt.world.Kernel.announce=function(i,c){for(var e=0;e<C.length;e++)try{C[e](i,c)}catch(m){}};function F(i){f=i;J()}plt.world.Kernel.updateWorld=
function(i){i=i(f);F(i)};plt.world.Kernel.shutdownWorld=function(){M=true};function J(){var i;for(i=0;i<w.length;i++)w[i](f)}function o(i){w.push(i)}function q(){if(B){clearInterval(B);B=false}M=false;w=[]}function P(){if(window.document.getElementById("canvas")!=undefined)return window;var i=window.open("big-bang.html","big-bang");if(i==null)throw new Error("Error: Not allowed to create a new window.");return i}plt.world.Kernel.bigBang=function(i,c,e,m){plt.Kernel.check(i,plt.Kernel.isNumber,"big-bang",
"number",1);plt.Kernel.check(c,plt.Kernel.isNumber,"big-bang","number",2);plt.Kernel.arrayEach(args,function(O,ba){plt.Kernel.check(O,plt.Kernel.isFunction,"big-bang","handler",ba+4)});var G=P(i,c),N=G.document.getElementById("canvas");N.width=i.toFixnum();N.height=c.toFixnum();q();var n=new plt.world.config.WorldConfig;for(i=0;i<m.length;i++)n=m[i](n);n=n.updateAll({changeWorld:plt.world.Kernel.updateWorld,shutdownWorld:plt.world.Kernel.shutdownWorld});plt.world.config.CONFIG=n;if(n.lookup("onKey"))G.onkeydown=
function(O){plt.world.stimuli.onKey(O)};n.lookup("onRedraw")&&o(function(O){var ba=N.getContext("2d");O=n.lookup("onRedraw")([O]);O.render(ba,0,0)});o(function(O){if(n.lookup("stopWhen"))if(n.lookup("stopWhen")([O]))M=true});n.lookup("onTick")&&V(G,n);F(e);if(n.lookup("initialEffect")){e=plt.world.Kernel.applyEffect(n.lookup("initialEffect"));for(i=0;i<e.length;i++)M||updateWorld(e)}};function V(i,c){B=i.setInterval(function(){if(M){i.clearTimeout(B);B=false}else plt.world.stimuli.onTick()},c.lookup("tickDelay"))}
plt.world.Kernel.isKeyEqual=function(i,c){return i=i.toString().toLowerCase()==c.toString().toLowerCase()};plt.world.Kernel.imageWidth=function(i){plt.Kernel.check(i,u,"image-width","image",1);return plt.types.Rational.makeInstance(i.getWidth(),1)};plt.world.Kernel.imageHeight=function(i){plt.Kernel.check(i,u,"image-height","image",1);return plt.types.Rational.makeInstance(i.getHeight(),1)};plt.world.Kernel.placeImage=function(i,c,e,m){plt.Kernel.check(i,u,"place-image","image",1);plt.Kernel.check(c,
plt.Kernel.isNumber,"place-image","number",2);plt.Kernel.check(e,plt.Kernel.isNumber,"place-image","number",3);plt.Kernel.check(m,function(N){return y(N)||u(N)},"place-image","image",4);if(y(m))return m.add(i,plt.types.NumberTower.toFixnum(c),plt.types.NumberTower.toFixnum(e));else{var G=new p(m.getWidth(),m.getHeight(),[]);G=G.add(m,0,0);return G=G.add(i,plt.types.NumberTower.toFixnum(c),plt.types.NumberTower.toFixnum(e))}};plt.world.Kernel.emptyScene=function(i,c){plt.Kernel.check(i,plt.Kernel.isNumber,
"empty-scene","number",1);plt.Kernel.check(c,plt.Kernel.isNumber,"empty-scene","number",2);return new p(plt.types.NumberTower.toFixnum(i),plt.types.NumberTower.toFixnum(c),[])};function D(i){return typeof g.get(i)!="undefined"}plt.world.Kernel.text=function(i,c,e){plt.Kernel.check(i,plt.Kernel.isString,"text","string",1);plt.Kernel.check(c,plt.Kernel.isNumber,"text","number",2);plt.Kernel.check(e,D,"text","color",3);if(g.get(e))e=g.get(e);return new L(i,plt.types.NumberTower.toFixnum(c),e)};plt.world.Kernel.circle=
function(i,c,e){plt.Kernel.check(i,plt.Kernel.isNumber,"circle","number",1);plt.Kernel.check(c,plt.Kernel.isString,"circle","string",2);plt.Kernel.check(e,D,"circle","color",3);if(g.get(e))e=g.get(e);return new U(plt.types.NumberTower.toFixnum(i),c,e)};plt.world.Kernel.openImageUrl=function(i){plt.Kernel.check(i,plt.Kernel.isString,"open-image-url","string",1);return H.makeInstance(i.toString())};plt.world.Kernel.nwRectangle=function(i,c,e,m){plt.Kernel.check(i,plt.Kernel.isNumber,"nw:rectangle",
"number",1);plt.Kernel.check(c,plt.Kernel.isNumber,"nw:rectangle","number",2);plt.Kernel.check(e,plt.Kernel.isString,"nw:rectangle","string",3);plt.Kernel.check(m,D,"nw:rectangle","color",4);if(g.get(m))m=g.get(m);i=new K(plt.types.NumberTower.toFixnum(i),plt.types.NumberTower.toFixnum(c),e,m);return i.updatePinhole(0,0)};plt.world.Kernel.rectangle=function(i,c,e,m){plt.Kernel.check(i,plt.Kernel.isNumber,"rectangle","number",1);plt.Kernel.check(c,plt.Kernel.isNumber,"rectangle","number",2);plt.Kernel.check(e,
plt.Kernel.isString,"rectangle","string",3);plt.Kernel.check(m,D,"rectangle","color",4);if(g.get(m))m=g.get(m);return new K(plt.types.NumberTower.toFixnum(i),plt.types.NumberTower.toFixnum(c),e,m)};function I(i,c){this.pinholeX=i;this.pinholeY=c}plt.world.Kernel.BaseImage=I;function u(i){return i!=null&&i!=undefined&&i instanceof I}plt.world.Kernel.isImage=u;plt.world.Kernel.put_dash_pinhole=function(i,c,e){plt.Kernel.check(i,u,"put-pinhole","image",1);plt.Kernel.check(c,plt.Kernel.isNumber,"put-pinhole",
"number",2);plt.Kernel.check(e,plt.Kernel.isNumber,"put-pinhole","number",3);return i.updatePinhole(c.toFixnum(),e.toFixnum())};I.prototype.updatePinhole=function(i,c){var e=A(this);e.pinholeX=i;e.pinholeY=c;return e};I.prototype.render=function(){throw new MobyRuntimeError("Unimplemented method render");};plt.world.Kernel.makeCanvas=function(i,c){var e=document.createElement("canvas");e.width=i;e.height=c;e.style.width=e.width+"px";e.style.height=e.height+"px";if(window&&typeof window.G_vmlCanvasManager!=
"undefined"){e.style.display="none";document.body.appendChild(e);e=window.G_vmlCanvasManager.initElement(e);document.body.removeChild(e);e.style.display=""}return e};I.prototype.toDomNode=function(){var i=this,c=plt.world.Kernel.imageWidth(i).toFixnum(),e=plt.world.Kernel.imageHeight(i).toFixnum();c=plt.world.Kernel.makeCanvas(c,e);c.style.display="none";document.body.appendChild(c);e=c.getContext("2d");i.render(e,0,0);document.body.removeChild(c);c.style.display="";return c};I.prototype.toWrittenString=
function(){return"<image>"};I.prototype.toDisplayedString=function(){return"<image>"};plt.world.Kernel.image_question_=function(i){return u(i)};plt.world.Kernel.image_equal__question_=function(i,c){check(i,u,"image=?","image",1);check(c,u,"image=?","image",2);return i==c?plt.types.Logic.TRUE:plt.types.Logic.FALSE};function y(i){return i!=undefined&&i!=null&&i instanceof p}function p(i,c,e){I.call(this,0,0);this.width=i;this.height=c;this.children=e}p.prototype=S(I.prototype);p.prototype.add=function(i,
c,e){return new p(this.width,this.height,this.children.concat([[i,c,e]]))};p.prototype.render=function(i,c,e){var m,G,N,n;i.clearRect(c-this.pinholeX,e-this.pinholeY,this.width,this.height);for(m=0;m<this.children.length;m++){G=this.children[m][0];N=this.children[m][1];n=this.children[m][2];i.save();G.render(i,N+c-G.pinholeX,n+e-G.pinholeY);i.restore()}};p.prototype.getWidth=function(){return this.width};p.prototype.getHeight=function(){return this.height};function H(i,c){I.call(this,0,0);var e=this;
this.isLoaded=false;if(c&&c.complete){this.img=c;this.isLoaded=true;this.pinholeX=e.img.width/2;this.pinholeY=e.img.height/2}else{this.img=new Image;this.img.onload=function(){e.isLoaded=true;e.pinholeX=e.img.width/2;e.pinholeY=e.img.height/2};this.img.onerror=function(){e.img.onerror="";e.img.src="http://www.wescheme.org/images/broken.png"};this.img.src=i}}H.prototype=S(I.prototype);plt.world.Kernel.FileImage=H;var Q={};H.makeInstance=function(i){i in Q||(Q[i]=new H(i));return Q[i]};H.installInstance=
function(i,c){Q[i]=new H(i,c)};H.installBrokenImage=function(i){Q[i]=new L("Unable to load "+i,10,g.get("red"))};H.prototype.render=function(i,c,e){i.drawImage(this.img,c,e)};H.prototype.getWidth=function(){return this.img.width};H.prototype.getHeight=function(){return this.img.height};H.prototype.toDomNode=function(){return this.img.cloneNode(true)};function K(i,c,e,m){I.call(this,i/2,c/2);this.width=i;this.height=c;this.style=e;this.color=m}K.prototype=S(I.prototype);K.prototype.render=function(i,
c,e){i.fillStyle=this.color.toString();this.style.toString().toLowerCase()=="outline"?i.strokeRect(c,e,this.width,this.height):i.fillRect(c,e,this.width,this.height)};K.prototype.getWidth=function(){return this.width};K.prototype.getHeight=function(){return this.height};function L(i,c,e){I.call(this,0,0);this.msg=i;this.size=c;this.color=e;this.font="Optimer"}L.prototype=S(I.prototype);L.prototype.render=function(i,c,e){if(i.fillText){i.font=this.size+"px Optimer";i.fillStyle=this.color.toRGBAString();
i.fillText(this.msg,c,e)}else if(typeof i.mozDrawText!=="undefined"){i.mozTextStyle=this.size+"px "+this.font;i.translate(c,e+this.size);i.fillStyle=this.color;i.mozDrawText(this.msg)}};L.prototype.getWidth=function(){return this.size*this.msg.length};L.prototype.getHeight=function(){return 10};function U(i,c,e){I.call(this,i,i);this.radius=i;this.style=c;this.color=e}U.prototype=S(I.prototype);U.prototype.render=function(i,c,e){i.translate(0,0);i.beginPath();i.fillStyle=this.color.toString();i.arc(c+
this.radius,e+this.radius,this.radius,0,2*Math.PI,false);this.style.toString().toLowerCase()=="outline"?i.stroke():i.fill();i.closePath()};U.prototype.getWidth=function(){return this.radius*2};U.prototype.getHeight=function(){return this.radius*2};plt.world.Kernel.applyEffect=function(i){var c=[];if(!plt.Kernel.empty_question_(i))if(plt.Kernel.pair_question_(i)){c=c.concat(plt.world.Kernel.applyEffect(i.first()));c=c.concat(plt.world.Kernel.applyEffect(i.rest()))}else if(i=i.run())c=c.concat(i);return c};
effect_colon_none.prototype.run=function(){};effect_colon_beep.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService().beep()};effect_colon_play_dash_dtmf_dash_tone.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService().playDtmfTone(this._fields[0].toFixnum(),this._fields[1].toFixnum())};effect_colon_send_dash_sms.prototype.run=function(){plt.platform.Platform.getInstance().getSmsService().send(this._fields[0],this._fields[1])};effect_colon_play_dash_sound.prototype.run=
function(){if(plt.Kernel.isString(this._fields[0]))plt.platform.Platform.getInstance().getSoundService().playSoundUrl(this._fields[0]);else playlist_dash_sound_question_(this._fields[0])&&plt.platform.Platform.getInstance().getSoundService().playPlaylist(this._fields[0]._fields[0])};effect_colon_pause_dash_sound.prototype.run=function(){if(plt.Kernel.isString(this._fields[0]))plt.platform.Platform.getInstance().getSoundService().pauseSoundUrl(this._fields[0]);else playlist_dash_sound_question_(this._fields[0])&&
plt.platform.Platform.getInstance().getSoundService().pausePlaylist(this._fields[0]._fields[0])};effect_colon_stop_dash_sound.prototype.run=function(){if(plt.Kernel.isString(this._fields[0]))plt.platform.Platform.getInstance().getSoundService().stopSoundUrl(this._fields[0]);else playlist_dash_sound_question_(this._fields[0])&&plt.platform.Platform.getInstance().getSoundService().stopPlaylist(this._fields[0]._fields[0])};effect_colon_set_dash_sound_dash_volume.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService().setVolume(this._fields[0].toFixnum())};
effect_colon_raise_dash_sound_dash_volume.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService.raiseVolume()};effect_colon_lower_dash_sound_dash_volume.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService.lowerVolume()};effect_colon_set_dash_wake_dash_lock.prototype.run=function(){plt.platform.Platform.getInstance().getPowerService().setWakeLock(this._fields[0].toFixnum())};effect_colon_release_dash_wake_dash_lock.prototype.run=function(){plt.platform.Platform.getInstance().getPowerService().releaseWakeLock()};
effect_colon_pick_dash_playlist.prototype.run=function(){var i=this._fields[0];function c(e){var m=make_dash_playlist_dash_sound(e);setTimeout(function(){var G=plt.world.config.CONFIG.lookup("changeWorld");G(function(N){return i([N,m])})},0)}plt.platform.Platform.getInstance().getPickPlaylistService().pickPlaylist(c)};effect_colon_pick_dash_random.prototype.run=function(){var i=plt.types.Rational.makeInstance(Math.floor(plt.types.NumberTower.toFixnum(this._fields[0])*Math.random()),1),c=this._fields[1];
return function(e){return c([e,i])}};function Y(){this.colors={}}Y.prototype.put=function(i,c){this.colors[i]=c};Y.prototype.get=function(i){return this.colors[i.toString().toUpperCase()]};function k(i,c,e){this.r=i;this.g=c;this.b=e}k.prototype.toString=function(){return"rgb("+this.r+","+this.g+","+this.b+")"};k.prototype.toRGBAString=function(){return"rgba("+this.r+","+this.g+","+this.b+", 1)"};var g=new Y;g.put("ORANGE",new k(255,165,0));g.put("RED",new k(255,0,0));g.put("ORANGERED",new k(255,
69,0));g.put("TOMATO",new k(255,99,71));g.put("DARKRED",new k(139,0,0));g.put("RED",new k(255,0,0));g.put("FIREBRICK",new k(178,34,34));g.put("CRIMSON",new k(220,20,60));g.put("DEEPPINK",new k(255,20,147));g.put("MAROON",new k(176,48,96));g.put("INDIAN RED",new k(205,92,92));g.put("INDIANRED",new k(205,92,92));g.put("MEDIUM VIOLET RED",new k(199,21,133));g.put("MEDIUMVIOLETRED",new k(199,21,133));g.put("VIOLET RED",new k(208,32,144));g.put("VIOLETRED",new k(208,32,144));g.put("LIGHTCORAL",new k(240,
128,128));g.put("HOTPINK",new k(255,105,180));g.put("PALEVIOLETRED",new k(219,112,147));g.put("LIGHTPINK",new k(255,182,193));g.put("ROSYBROWN",new k(188,143,143));g.put("PINK",new k(255,192,203));g.put("ORCHID",new k(218,112,214));g.put("LAVENDERBLUSH",new k(255,240,245));g.put("SNOW",new k(255,250,250));g.put("CHOCOLATE",new k(210,105,30));g.put("SADDLEBROWN",new k(139,69,19));g.put("BROWN",new k(132,60,36));g.put("DARKORANGE",new k(255,140,0));g.put("CORAL",new k(255,127,80));g.put("SIENNA",new k(160,
82,45));g.put("ORANGE",new k(255,165,0));g.put("SALMON",new k(250,128,114));g.put("PERU",new k(205,133,63));g.put("DARKGOLDENROD",new k(184,134,11));g.put("GOLDENROD",new k(218,165,32));g.put("SANDYBROWN",new k(244,164,96));g.put("LIGHTSALMON",new k(255,160,122));g.put("DARKSALMON",new k(233,150,122));g.put("GOLD",new k(255,215,0));g.put("YELLOW",new k(255,255,0));g.put("OLIVE",new k(128,128,0));g.put("BURLYWOOD",new k(222,184,135));g.put("TAN",new k(210,180,140));g.put("NAVAJOWHITE",new k(255,222,
173));g.put("PEACHPUFF",new k(255,218,185));g.put("KHAKI",new k(240,230,140));g.put("DARKKHAKI",new k(189,183,107));g.put("MOCCASIN",new k(255,228,181));g.put("WHEAT",new k(245,222,179));g.put("BISQUE",new k(255,228,196));g.put("PALEGOLDENROD",new k(238,232,170));g.put("BLANCHEDALMOND",new k(255,235,205));g.put("MEDIUM GOLDENROD",new k(234,234,173));g.put("MEDIUMGOLDENROD",new k(234,234,173));g.put("PAPAYAWHIP",new k(255,239,213));g.put("MISTYROSE",new k(255,228,225));g.put("LEMONCHIFFON",new k(255,
250,205));g.put("ANTIQUEWHITE",new k(250,235,215));g.put("CORNSILK",new k(255,248,220));g.put("LIGHTGOLDENRODYELLOW",new k(250,250,210));g.put("OLDLACE",new k(253,245,230));g.put("LINEN",new k(250,240,230));g.put("LIGHTYELLOW",new k(255,255,224));g.put("SEASHELL",new k(255,245,238));g.put("BEIGE",new k(245,245,220));g.put("FLORALWHITE",new k(255,250,240));g.put("IVORY",new k(255,255,240));g.put("GREEN",new k(0,255,0));g.put("LAWNGREEN",new k(124,252,0));g.put("CHARTREUSE",new k(127,255,0));g.put("GREEN YELLOW",
new k(173,255,47));g.put("GREENYELLOW",new k(173,255,47));g.put("YELLOW GREEN",new k(154,205,50));g.put("YELLOWGREEN",new k(154,205,50));g.put("MEDIUM FOREST GREEN",new k(107,142,35));g.put("OLIVEDRAB",new k(107,142,35));g.put("MEDIUMFORESTGREEN",new k(107,142,35));g.put("DARK OLIVE GREEN",new k(85,107,47));g.put("DARKOLIVEGREEN",new k(85,107,47));g.put("DARKSEAGREEN",new k(143,188,139));g.put("LIME",new k(0,255,0));g.put("DARK GREEN",new k(0,100,0));g.put("DARKGREEN",new k(0,100,0));g.put("LIME GREEN",
new k(50,205,50));g.put("LIMEGREEN",new k(50,205,50));g.put("FOREST GREEN",new k(34,139,34));g.put("FORESTGREEN",new k(34,139,34));g.put("SPRING GREEN",new k(0,255,127));g.put("SPRINGGREEN",new k(0,255,127));g.put("MEDIUM SPRING GREEN",new k(0,250,154));g.put("MEDIUMSPRINGGREEN",new k(0,250,154));g.put("SEA GREEN",new k(46,139,87));g.put("SEAGREEN",new k(46,139,87));g.put("MEDIUM SEA GREEN",new k(60,179,113));g.put("MEDIUMSEAGREEN",new k(60,179,113));g.put("AQUAMARINE",new k(112,216,144));g.put("LIGHTGREEN",
new k(144,238,144));g.put("PALE GREEN",new k(152,251,152));g.put("PALEGREEN",new k(152,251,152));g.put("MEDIUM AQUAMARINE",new k(102,205,170));g.put("MEDIUMAQUAMARINE",new k(102,205,170));g.put("TURQUOISE",new k(64,224,208));g.put("LIGHTSEAGREEN",new k(32,178,170));g.put("MEDIUM TURQUOISE",new k(72,209,204));g.put("MEDIUMTURQUOISE",new k(72,209,204));g.put("HONEYDEW",new k(240,255,240));g.put("MINTCREAM",new k(245,255,250));g.put("ROYALBLUE",new k(65,105,225));g.put("DODGERBLUE",new k(30,144,255));
g.put("DEEPSKYBLUE",new k(0,191,255));g.put("CORNFLOWERBLUE",new k(100,149,237));g.put("STEEL BLUE",new k(70,130,180));g.put("STEELBLUE",new k(70,130,180));g.put("LIGHTSKYBLUE",new k(135,206,250));g.put("DARK TURQUOISE",new k(0,206,209));g.put("DARKTURQUOISE",new k(0,206,209));g.put("CYAN",new k(0,255,255));g.put("AQUA",new k(0,255,255));g.put("DARKCYAN",new k(0,139,139));g.put("TEAL",new k(0,128,128));g.put("SKY BLUE",new k(135,206,235));g.put("SKYBLUE",new k(135,206,235));g.put("CADET BLUE",new k(96,
160,160));g.put("CADETBLUE",new k(95,158,160));g.put("DARK SLATE GRAY",new k(47,79,79));g.put("DARKSLATEGRAY",new k(47,79,79));g.put("LIGHTSLATEGRAY",new k(119,136,153));g.put("SLATEGRAY",new k(112,128,144));g.put("LIGHT STEEL BLUE",new k(176,196,222));g.put("LIGHTSTEELBLUE",new k(176,196,222));g.put("LIGHT BLUE",new k(173,216,230));g.put("LIGHTBLUE",new k(173,216,230));g.put("POWDERBLUE",new k(176,224,230));g.put("PALETURQUOISE",new k(175,238,238));g.put("LIGHTCYAN",new k(224,255,255));g.put("ALICEBLUE",
new k(240,248,255));g.put("AZURE",new k(240,255,255));g.put("MEDIUM BLUE",new k(0,0,205));g.put("MEDIUMBLUE",new k(0,0,205));g.put("DARKBLUE",new k(0,0,139));g.put("MIDNIGHT BLUE",new k(25,25,112));g.put("MIDNIGHTBLUE",new k(25,25,112));g.put("NAVY",new k(36,36,140));g.put("BLUE",new k(0,0,255));g.put("INDIGO",new k(75,0,130));g.put("BLUE VIOLET",new k(138,43,226));g.put("BLUEVIOLET",new k(138,43,226));g.put("MEDIUM SLATE BLUE",new k(123,104,238));g.put("MEDIUMSLATEBLUE",new k(123,104,238));g.put("SLATE BLUE",
new k(106,90,205));g.put("SLATEBLUE",new k(106,90,205));g.put("PURPLE",new k(160,32,240));g.put("DARK SLATE BLUE",new k(72,61,139));g.put("DARKSLATEBLUE",new k(72,61,139));g.put("DARKVIOLET",new k(148,0,211));g.put("DARK ORCHID",new k(153,50,204));g.put("DARKORCHID",new k(153,50,204));g.put("MEDIUMPURPLE",new k(147,112,219));g.put("CORNFLOWER BLUE",new k(68,64,108));g.put("MEDIUM ORCHID",new k(186,85,211));g.put("MEDIUMORCHID",new k(186,85,211));g.put("MAGENTA",new k(255,0,255));g.put("FUCHSIA",new k(255,
0,255));g.put("DARKMAGENTA",new k(139,0,139));g.put("VIOLET",new k(238,130,238));g.put("PLUM",new k(221,160,221));g.put("LAVENDER",new k(230,230,250));g.put("THISTLE",new k(216,191,216));g.put("GHOSTWHITE",new k(248,248,255));g.put("WHITE",new k(255,255,255));g.put("WHITESMOKE",new k(245,245,245));g.put("GAINSBORO",new k(220,220,220));g.put("LIGHT GRAY",new k(211,211,211));g.put("LIGHTGRAY",new k(211,211,211));g.put("SILVER",new k(192,192,192));g.put("GRAY",new k(190,190,190));g.put("DARK GRAY",new k(169,
169,169));g.put("DARKGRAY",new k(169,169,169));g.put("DIM GRAY",new k(105,105,105));g.put("DIMGRAY",new k(105,105,105));g.put("BLACK",new k(0,0,0))})();plt.Jsworld={};
(function(){var f=plt.Jsworld,w=false;function M(){}var B=new M,S=[],A=[];f.shutdown=function(){for(;A.length>0;){var h=A.pop();h&&h.pause()}J()};function C(h){S.push(h)}function F(h){h=S.indexOf(h);h!=-1&&S.splice(h,1)}function J(){B=new M;S=[]}function o(h){var t=B;try{B=h(B)}catch(r){B=t;throw r;}for(h=0;h<S.length;h++)try{S[h](B,t)}catch(z){B=t;throw z;}}f.change_world=o;Number.prototype.NaN0=function(){return isNaN(this)?0:this};function q(h){for(var t=0,r=0;h.offsetParent;){t+=h.offsetLeft+
(h.currentStyle?parseInt(h.currentStyle.borderLeftWidth).NaN0():0);r+=h.offsetTop+(h.currentStyle?parseInt(h.currentStyle.borderTopWidth).NaN0():0);h=h.offsetParent}t+=h.offsetLeft+(h.currentStyle?parseInt(h.currentStyle.borderLeftWidth).NaN0():0);r+=h.offsetTop+(h.currentStyle?parseInt(h.currentStyle.borderTopWidth).NaN0():0);return{x:t,y:r}}f.getPosition=q;var P=0;function V(){return P++}f.gensym=V;function D(h,t){for(var r=new Array(h.length),z=0;z<h.length;z++)r[z]=t(h[z]);return r}f.map=D;function I(h,
t){for(var r=[],z=0;z<h.length;z++)r=r.concat(t(h[z]));return r}function u(h,t){for(var r=new Array(h.length),z=0;z<h.length;z++)r[z]=t(h[z],z);return r}f.mapi=u;function y(h,t,r){for(var z=0;z<h.length;z++)t=r(h[z],t);return t}f.fold=y;function p(h,t){var r={};for(var z in h)r[z]=h[z];for(z in t)r[z]=t[z];return r}f.augment=p;function H(h,t,r){var z={};for(var Z in h)z[Z]=h[Z];z[t]=r;return z}f.assoc_cons=H;function Q(h,t){return h.concat([t])}f.cons=Q;function K(h,t){return h.concat(t)}f.append=
K;function L(h,t){for(var r=[],z=0;z<h.length;z++)r.push([h[z],t[z]]);return r}f.array_join=L;function U(h,t){for(var r=0;r<h.length;r++)if(h[r]===t)return h.slice(0,r).concat(h.slice(r+1));return h}f.removeq=U;function Y(h,t){for(var r=0;r<h.length;r++)if(t(h[r]))return h.slice(0,r).concat(h.slice(r+1));return h}f.removef=Y;function k(h,t){for(var r=0;r<h.length;r++)if(t(h[r]))return h.slice(0,r).concat(k(h.slice(r+1),t));return h}f.filter=k;function g(h,t){var r={};for(var z in h)if(z!=t)r[z]=h[z];
return r}f.without=g;function i(h,t){for(var r=0;r<h.length;r++)if(h[r]===t)return true;return false}f.memberq=i;function c(h,t){for(var r=0;r<h.length;r++)if(h[r]==t)return true;return false}f.member=c;function e(h){return h[0]}f.head=e;function m(h){return h.slice(1,h.length)}f.tail=m;function G(h){var t=[h];for(h=h.firstChild;h!=null;h=h.nextSibling)t.push(G(h));return t}f.node_to_tree=G;function N(h){var t=[h.node];if(h.node.jsworldOpaque==true)return t;for(var r=0;r<h.children.length;r++)t=t.concat(N(h.children[r]));
return t}function n(h,t){return h&&t&&h===t}function O(h,t){return!n(h,t)}function ba(h){var t=[];if(h.node.jsworldOpaque==true)return[];for(var r=0;r<h.children.length;r++)t.push({relation:"parent",parent:h.node,child:h.children[r].node});for(r=0;r<h.children.length-1;r++)t.push({relation:"neighbor",left:h.children[r].node,right:h.children[r+1].node});for(r=0;r<h.children.length;r++)t=t.concat(ba(h.children[r]));return t}function ra(h,t){h.appendChild(t)}function fa(h,t,r){for(var z=0;z<r.length;z++)if(r[z].relation==
"parent"){var Z=r[z].parent,ca=r[z].child;O(ca.parentNode,Z)&&ra(Z,ca)}for(;;){Z=false;for(z=0;z<r.length;z++)if(r[z].relation=="neighbor"){ca=r[z].left;var qa=r[z].right;if(O(ca.nextSibling,qa)){ca.parentNode.insertBefore(ca,qa);Z=true}}if(!Z)break}var ka;function ya(wa,ua){ua=wa.compareDocumentPosition(ua);if(ua&wa.DOCUMENT_POSITION_CONTAINED_BY)return 1;if(ua&wa.DOCUMENT_POSITION_CONTAINS)return-1;if(ua&wa.DOCUMENT_POSITION_FOLLOWING)return-1;if(ua&wa.DOCUMENT_POSITION_PRECEDING)return 1;return 0}
try{ka=t.concat(h).sort(ya)}catch(ta){ka=null}r=h;for(h=h.parentNode;r!=h;){for(;;){if(r.firstChild==null||r.jsworldOpaque==true)break;r=r.firstChild}for(;r!=h;){ca=r.nextSibling;Z=r.parentNode;qa=false;var za=undefined;if(ka!=null)for(;ka.length>0&&ya(r,ka[0])>=0;){z=ka.shift();if(n(z,r)){qa=true;za=z;break}}else for(z=0;z<t.length;z++)if(n(t[z],r)){qa=true;za=t[z];break}if(qa)da(r,za);else{if(!r.isJsworldOpaque)for(;r.firstChild!=null;)ra(r.parentNode,r.firstChild);ca=r.nextSibling;r.parentNode.removeChild(r)}if(ca==
null)r=Z;else{r=ca;break}}}X(t)}function da(){}function ga(h){return h.replace(/\-(.)/g,function(t,r){return r.toUpperCase()})}function ma(h,t){for(var r=0;r<t.length;r++)h.style[ga(t[r].attrib)]=t[r].values.join(" ")}function ha(h,t){return t.id.match(/^\./)?"class"in h&&c(h["class"].split(/\s+/),t.id.substring(1)):"id"in h&&h.id==t.id}function x(h,t){for(var r=0;r<h.length;r++)R(h[r]);for(r=0;r<t.length;r++)if("id"in t[r])for(var z=0;z<h.length;z++)ha(h[z],t[r])&&ma(h[z],t[r].attribs);else ma(t[r].node,
t[r].attribs)}function R(h){if("style"in h)h.style.cssText=""}function X(h){for(var t=0;t<h.length;t++)h[t].onWorldChange&&h[t].onWorldChange(B)}function aa(h,t,r,z,Z){if(t instanceof M){var ca=Aa(z(h)),qa=N(ca);x(qa,Ea(Z(h)));fa(r,qa,ba(ca))}else ia(function(){var ka=z(t),ya=z(h),ta=Z(t),za=Z(h),wa=Aa(ya),ua=N(wa);if(ka!==ya){x(ua,Ea(za));fa(r,ua,ba(wa))}else ta!==za&&x(ua,Ea(za))})}function ia(h){var t;if(v()){t=ja();h();t.restore()}else h()}function na(){this.focused=w;this.selectionStart=w.selectionStart;
this.selectionEnd=w.selectionEnd}na.prototype.restore=function(){if(this.focused.parentNode){this.focused.selectionStart=this.selectionStart;this.focused.selectionEnd=this.selectionEnd;this.focused.focus()}else if(this.focused.id){var h=document.getElementById(this.focused.id);if(h){h.selectionStart=this.selectionStart;h.selectionEnd=this.selectionEnd;h.focus()}}};function v(){return w!=undefined}function ja(){return new na}function pa(h,t,r,z,Z){this.top=h;this.world=t;this.handlers=z;this.handlerCreators=
r;this.attribs=Z}pa.prototype.restart=function(){b(this.top,this.world,this.handlerCreators,this.attribs)};pa.prototype.pause=function(){for(var h=0;h<this.handlers.length;h++)this.handlers[h]instanceof s||this.handlers[h].onUnregister(top)};function b(h,t,r,z){J();var Z=D(r,function(ta){return ta()});A.length>0&&A[A.length-1].pause();var ca=new pa(h,t,r,Z,z);A.push(ca);function qa(ta){ca.world=ta}C(qa);var ka=new s(function(){return false},function(){});for(r=0;r<Z.length;r++)if(Z[r]instanceof s)ka=
Z[r];else Z[r].onRegister(h);function ya(ta){if(ka.test(ta)){ka.receiver(B);(ta=A.pop())&&ta.pause();if(A.length>0){ta=A.pop();ta.restart()}}}C(ya);oa(h,z);o(function(){return t})}f.big_bang=b;function d(h,t){return function(){var r={watchId:-1,onRegister:function(){r.watchId=setInterval(function(){o(t)},h)},onUnregister:function(){clearInterval(r.watchId)}};return r}}f.on_tick=d;function l(h,t){function r(z){z=h(z);Fa(z,z);return z}return function(){var z={_top:null,_listener:function(Z,ca){aa(Z,
ca,z._top,r,t)},onRegister:function(Z){z._top=Z;C(z._listener)},onUnregister:function(){F(z._listener)}};return z}}f.on_draw=l;function s(h,t){this.test=h;this.receiver=t}function E(h,t){return function(){if(t==undefined)t=function(){};return new s(h,t)}}f.stop_when=E;function W(h){function t(r){h(r)}return function(){return{onRegister:function(){C(t)},onUnregister:function(){F(t)}}}}f.on_world_change=W;function $(h,t,r){h.addEventListener?h.addEventListener(t,r,false):h.attachEvent("on"+t,r,false)}
function ea(h,t,r){$(h,t,function(z){o(function(Z){return r(Z,z)})})}function la(h,t,r){$(h,t,function(z){setTimeout(function(){o(function(Z){return r(Z,z)})},0)})}function sa(h){$(h,"focus",function(){w=h});$(h,"blur",function(){w=undefined});return h}function Aa(h){return h.length==undefined?{node:h,children:[]}:{node:h[0],children:D(h.slice(1),Aa)}}function Ba(h){return{attrib:h[0],values:h.slice(1)}}function Ha(h){var t=D(h.slice(1),Ba);return typeof h[0]=="string"?[{id:h[0],attribs:t}]:"length"in
h[0]?D(h[0],function(r){return{id:r,attribs:t}}):[{node:h[0],attribs:t}]}function Ea(h){return I(h,Ha)}function Ia(h){return h.nodeType==Node.TEXT_NODE}function Ca(h){return h.nodeType==Node.ELEMENT_NODE}function xa(h,t){throw new Da(plt.Kernel.format("Expected a non-empty array, received ~s within ~s",[h,t]),h);}function Fa(h,t){!h instanceof Array&&xa(h,t);h.length==0&&xa(h,t);if(Ia(h[0])){if(h.length>1)throw new Da(plt.Kernel.format("Text node ~s can not have children",[h]),h);}else if(Ca(h[0]))for(t=
1;t<h.length;t++)Fa(h[t],h);else throw new Da(plt.Kernel.format("expected a Text or an Element, received ~s within ~s",[h,t]),h[0]);}function Da(h,t){this.msg=h;this.elt=t}Da.prototype.toString=function(){return"on-draw: "+this.msg};function oa(h,t){if(t)for(a in t)if(t.hasOwnProperty(a))if(typeof t[a]=="function")ea(h,a,t[a]);else h[a]=t[a];return h}function Ja(h){return sa(oa(document.createElement("p"),h))}f.p=Ja;function Ka(h){return sa(oa(document.createElement("div"),h))}f.div=Ka;function va(h,
t){var r=document.createElement("button");ea(r,"click",h);return sa(oa(r,t))}f.button=va;function Ga(h){if(h.stopPropagation)h.stopPropagation();else h.cancelBubble=true}function j(h){$(h,"click",function(t){Ga(t)});return h}function T(h,t,r){h=h.toLowerCase();var z={text:La,password:La,checkbox:Ma};if(z[h])return z[h](h,t,r);else throw new plt.Kernel.MobyRuntimeError("js-input: does not currently support type "+h);}f.input=T;function La(h,t,r){var z=document.createElement("input");z.type=h;function Z(ka){return t(ka,
z.value)}la(z,"keypress",Z);h=1000;var ca=z.value,qa=setInterval(function(){if(z.parentNode){if(ca!=z.value){ca=z.value;o(function(ka){return t(ka,z.value)})}}else clearInterval(qa)},h);return j(sa(oa(z,r)))}function Ma(h,t,r){var z=document.createElement("input");z.type=h;function Z(ca){return t(ca,z.checked?plt.types.Logic.TRUE:plt.types.Logic.FALSE)}la(z,"change",Z);$(z,"click",function(ca){Ga(ca)});return oa(z,r)}function Na(h){return h=document.createTextNode(h)}f.text=Na;function Oa(h,t,r){for(var z=
document.createElement("select"),Z=0;Z<t.length;Z++)z.add(Pa({value:t[Z]}),null);z.jsworldOpaque=true;ea(z,"change",r);return h=sa(oa(z,h))}f.select=Oa;function Pa(h){var t=document.createElement("option");t.text=h.value;t.value=h.value;return t}function Qa(h){return sa(oa(document.createElement("textarea"),h))}f.textarea=Qa;function Ra(h){return sa(oa(document.createElement("h1"),h))}f.h1=Ra;function Sa(h){return sa(oa(document.createElement("canvas"),h))}f.canvas=Sa;function Ta(h,t){var r=document.createElement("img");
r.src=h;return sa(oa(r,t))}f.img=Ta;function Ua(h,t){return sa(oa(h,t))}f.raw_node=Ua})();plt.world.MobyJsWorld={};plt.world.MobyJsworld={};
(function(){var f=plt.world.MobyJsworld,w=plt.Jsworld,M=plt.Kernel.MobyTypeError;function B(u){return typeof u=="function"}function S(u){var y=u;if(plt.Kernel.empty_question_(y))return[];else if(plt.Kernel.pair_question_(y)){for(u=[];!y.isEmpty();){u.push(S(y.first()));y=y.rest()}return u}else return u}function A(u){for(var y={};!u.isEmpty();){var p=u.first().first(),H=u.first().rest().first();y[p]=H;u=u.rest()}return y}function C(){if(window.document.getElementById("jsworld-div")!=undefined)return window;
var u=window.open("big-bang.html","big-bang");if(u==null)throw new Error("Error: Not allowed to create a new window.");return u}f.makeToplevelNode=function(){return C().document.getElementById("jsworld-div")};function F(u){return u instanceof plt.types.Cons||u instanceof plt.types.Empty}f.printWorldHook=function(u,y){if(y.lastChild==null){u=plt.types.toDomNode(u);y.appendChild(u)}else{u=plt.types.toDomNode(u);y.replaceChild(u,y.lastChild)}};function J(u){return typeof u.nodeType!="undefined"}function o(u,
y,p){if(plt.Kernel.pair_question_(u)){var H=plt.Kernel.first(u);p=plt.Kernel.rest(u);if(!J(H))throw new M(plt.Kernel.format("on-draw: expected a dom-element, but received ~s instead, the first element within ~s",[H,y]));if(H.nodeType==Node.TEXT_NODE&&!plt.Kernel.empty_question_(p))throw new M(plt.Kernel.format("on-draw: the text node ~s must not have children.  It has ~s",[H,p]));for(y=2;!plt.Kernel.empty_question_(p);){o(plt.Kernel.first(p),u,y);p=plt.Kernel.rest(p);y++}}else throw new M(plt.Kernel.format("on-draw: expected a dom-s-expression, but received ~s instead~a",
[u,p!=undefined?plt.Kernel.format(", the ~a element within ~s.",[plt.Kernel.ordinalize(p),y]):"."]));}function q(u,y,p){plt.Kernel.attachEvent(u,y,p)}function P(u){if(u.preventDefault)u.preventDefault();else u.returnValue=false}function V(u){if(u.stopPropagation)u.stopPropagation();else u.cancelBubble=true}f.bigBang=function(u,y){var p=plt.types.Empty.EMPTY;plt.Kernel.arrayEach(y,function(k,g){plt.Kernel.check(k,function(i){return B(i)||F(i)},"js-big-bang","handler or attribute list",g+2)});var H=
f.makeToplevelNode();H.tabIndex=0;q(H,"click",function(k){P(k);V(k);return false},false);for(var Q=new plt.world.config.WorldConfig,K=0;K<y.length;K++)if(F(y[K]))p=y[K];else if(B(y[K]))Q=y[K](Q);Q=Q.updateAll({changeWorld:f.updateWorld,shutdownWorld:f.shutdownWorld});plt.world.config.CONFIG=Q;y=[];if(Q.lookup("onDraw")){wrappedRedraw=function(k){try{var g=Q.lookup("onDraw")([k]);plt.Kernel.setLastLoc(undefined);o(g,g,undefined);var i=[H,S(g)];return i}catch(c){D(c);throw c;}};K=function(k){try{var g=
S(Q.lookup("onDrawCss")([k]));plt.Kernel.setLastLoc(undefined);return g}catch(i){D(i);throw i;}};y.push(w.on_draw(wrappedRedraw,K))}else if(Q.lookup("onRedraw")){var L=undefined,U=undefined;wrappedRedraw=function(k){try{var g=Q.lookup("onRedraw")([k]);if(g!=null&&g!=undefined&&g instanceof plt.world.Kernel.BaseImage){var i=plt.world.Kernel.imageWidth(g).toFixnum(),c=plt.world.Kernel.imageHeight(g).toFixnum();if(!L){L=plt.world.Kernel.makeCanvas(i,c);L.jsworldOpaque=true;U=w.node_to_tree(L)}L.width=
i;L.height=c;var e=L.getContext("2d");g.render(e,0,0);return[H,U]}else return[H,w.node_to_tree(plt.types.toDomNode(g))]}catch(m){D(m);throw m;}};K=function(){return[[L,["width",L.width+"px"],["height",L.height+"px"]]]};y.push(w.on_draw(wrappedRedraw,K))}else y.push(w.on_world_change(function(k){f.printWorldHook(k,H)}));if(Q.lookup("tickDelay")){K=function(k){setTimeout(function(){plt.world.stimuli.onTick()},0);return k};var Y=Q.lookup("tickDelay");y.push(w.on_tick(Y,K))}Q.lookup("stopWhen")&&y.push(w.stop_when(function(k){return Q.lookup("stopWhen")([k])}));
if(Q.lookup("onKey")){q(H,"keydown",function(k){plt.world.stimuli.onKey(k);P(k);V(k);return false});q(H,"keypress",function(k){P(k);V(k);return false});H.focus()}if(Q.lookup("initialEffect")){Y=plt.world.Kernel.applyEffect(Q.lookup("initialEffect"));for(K=0;K<Y.length;K++)if(Q.lookup("stopWhen")&&Q.lookup("stopWhen")([u]))break;else u=Y[K](u)}return w.big_bang(H,u,y,A(p))};function D(u){plt.Kernel.reportError(u);plt.Kernel.reportError("Shutting down jsworld computations");plt.world.stimuli.onShutdown()}
f.updateWorld=function(u){function y(p){try{return u(p)}catch(H){D(H);return p}}w.change_world(y)};f.shutdownWorld=function(){w.shutdown()};function I(u){if(u.length==0)return[];if(u.length==1)return A(u[0]);else throw new Error;}f.p=function(u){u=I(u);var y=w.p(u);y.toWrittenString=function(){return plt.Kernel.format("(js-p)",[])};y.toDisplayedString=y.toWrittenString;y.toDomNode=function(){return y};return y};f.div=function(u){u=I(u);var y=w.div(u);y.toWrittenString=function(){return plt.Kernel.format("(js-div)",
[])};y.toDisplayedString=y.toWrittenString;y.toDomNode=function(){return y};return y};f.button=function(u,y){function p(){return make_dash_effect_colon_none()}var H=f.buttonStar(u,p,y);H.toWrittenString=function(){return"(js-button ...)"};H.toDisplayedString=H.toWrittenString;H.toDomNode=function(){return H};return H};f.buttonStar=function(u,y,p){p=I(p);function H(K){try{var L=y([K]),U=u([K]);plt.world.Kernel.applyEffect(L);return U}catch(Y){D(Y);return K}}var Q=w.button(H,p);Q.toWrittenString=function(){return"(js-button ...)"};
Q.toDisplayedString=Q.toWrittenString;Q.toDomNode=function(){return Q};return Q};f.input=function(u,y,p){plt.Kernel.check(u,plt.Kernel.isString,"js-input","string",1);plt.Kernel.check(y,plt.Kernel.isFunction,"js-input","(world string -> world)",1);p=I(p);var H=w.input(u,function(Q,K){return y([Q,K])},p);H.toWrittenString=function(){return"(js-input ...)"};H.toDisplayedString=H.toWrittenString;H.toDomNode=function(){return H};return H};f.get_dash_input_dash_value=function(u){plt.Kernel.check(u,function(){return plt.Kernel.isString(u)||
u.nodeType==Node.ELEMENT_NODE},"get-input-value","dom-node",1);return plt.Kernel.isString(u)?plt.types.String.makeInstance(document.getElementById(u).value||""):plt.types.String.makeInstance(u.value||"")};f.img=function(u,y){plt.Kernel.check(u,plt.Kernel.isString,"js-img","string",1);y=I(y);var p=w.img(u,y);p.toWrittenString=function(){return"(js-img ...)"};p.toDisplayedString=p.toWrittenString;p.toDomNode=function(){return p};return p};f.text=function(u){plt.Kernel.check(u,plt.Kernel.isString,"js-text",
"string",1);var y=w.text(u,[]);y.toWrittenString=function(){return"(js-text ...)"};y.toDisplayedString=y.toWrittenString;y.toDomNode=function(){return y};return y};f.select=function(u,y,p){plt.Kernel.checkListof(u,plt.Kernel.isString,"js-select","string",1);plt.Kernel.check(y,plt.Kernel.isFunction,"js-select","function",2);p=I(p);u=S(u);var H=w.select(p,u,function(Q){return y([Q,H.value])});H.toWrittenString=function(){return"(js-select ...)"};H.toDisplayedString=H.toWrittenString;H.toDomNode=function(){return H};
return H};f.rawNode=function(u,y){y=I(y);var p=w.raw_node(plt.types.toDomNode(u),y);p.toWrittenString=function(){return"(js-raw-node ...)"};p.toDisplayedString=p.toWrittenString;p.toDomNode=function(){return p};return p}})();plt.world.stimuli={};
(function(){var f={};plt.world.stimuli=f;function w(C,F,J){var o=[];S(function(P){var V=[P].concat(J);if(C){var D=C(V);o=A(D)}return F?F(V):P});for(var q=0;q<o.length;q++)S(o[q])}f.onTilt=function(C,F,J){var o=B("onTilt"),q=B("onTiltEffect");w(q,o,[M(C),M(F),M(J)])};f.onAcceleration=function(C,F,J){var o=B("onAcceleration"),q=B("onAccelerationEffect");w(q,o,[M(C),M(F),M(J)])};f.onShake=function(){var C=B("onShake"),F=B("onShakeEffect");w(F,C,[])};f.onLocation=function(C,F){var J=B("onLocationChange"),
o=B("onLocationChangeEffect");w(o,J,[M(C),M(F)])};f.onKey=function(C){function F(q){q=q.charCode||q.keyCode;return q=q==37?"left":q==38?"up":q==39?"right":q==40?"down":q==32?"space":q==13?"enter":String.fromCharCode(q)}C=F(C);var J=B("onKey"),o=B("onKeyEffect");w(o,J,[C])};f.onTick=function(){var C=B("onTick"),F=B("onTickEffect");w(F,C,[])};f.onAnnounce=function(C,F){for(var J=plt.types.Empty.EMPTY,o=0;o<F.length;o++)J=plt.types.Cons.makeInstance(F[F.length-o-1],J);F=B("onAnnounce");o=B("onAnnounceEffect");
w(F,o,[C,J])};f.onShutdown=function(){var C=B("shutdownWorld");C&&C()};var M=plt.types.FloatPoint.makeInstance;function B(C){return plt.world.config.CONFIG.lookup(C)}function S(C){B("changeWorld")&&B("changeWorld")(C)}function A(C){return plt.world.Kernel.applyEffect(C)}})();
(function(f){function w(){plt.types.Struct.call(this,"make-permission:location",[])}w.prototype=new plt.types.Struct;function M(){return new w}function B(v){return v!=null&&v!=undefined&&v instanceof w}function S(){plt.types.Struct.call(this,"make-permission:send-sms",[])}S.prototype=new plt.types.Struct;function A(){return new S}function C(v){return v!=null&&v!=undefined&&v instanceof S}function F(){plt.types.Struct.call(this,"make-permission:receive-sms",[])}F.prototype=new plt.types.Struct;function J(){return new F}
function o(v){return v!=null&&v!=undefined&&v instanceof F}function q(){plt.types.Struct.call(this,"make-permission:tilt",[])}q.prototype=new plt.types.Struct;function P(){return new q}function V(v){return v!=null&&v!=undefined&&v instanceof q}function D(){plt.types.Struct.call(this,"make-permission:shake",[])}D.prototype=new plt.types.Struct;function I(){return new D}function u(v){return v!=null&&v!=undefined&&v instanceof D}function y(){plt.types.Struct.call(this,"make-permission:internet",[])}
y.prototype=new plt.types.Struct;function p(){return new y}function H(v){return v!=null&&v!=undefined&&v instanceof y}function Q(){plt.types.Struct.call(this,"make-permission:telephony",[])}Q.prototype=new plt.types.Struct;function K(){return new Q}function L(v){return v!=null&&v!=undefined&&v instanceof Q}function U(){plt.types.Struct.call(this,"make-permission:wake-lock",[])}U.prototype=new plt.types.Struct;function Y(){return new U}function k(v){return v!=null&&v!=undefined&&v instanceof U}function g(v){plt.types.Struct.call(this,
"make-permission:open-image-url",[v]);this.url=v}g.prototype=new plt.types.Struct;function i(v){return new g(v)}function c(v){if(m(v))return v.url;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("permission:open-image-url-url: not a permission:open-image-url: ~s",[v]));}function e(v,ja){if(m(v)){v.url=ja;v._fields[0]=ja}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_permission_colon_open_dash_image_dash_url_dash_url_bang_: not a permission:open-image-url: ~s",
[v]));}function m(v){return v!=null&&v!=undefined&&v instanceof g}function G(v){plt.types.Struct.call(this,"make-permission:universe",[v]);this.url=v}G.prototype=new plt.types.Struct;function N(v){return new G(v)}function n(v){if(ba(v))return v.url;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("permission:universe-url: not a permission:universe: ~s",[v]));}function O(v,ja){if(ba(v)){v.url=ja;v._fields[0]=ja}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_permission_colon_universe_dash_url_bang_: not a permission:universe: ~s",
[v]));}function ba(v){return v!=null&&v!=undefined&&v instanceof G}function ra(v){return plt.Kernel.setLastLoc({offset:554,line:18,span:28,id:"permission.ss"})&&B(v)||plt.Kernel.setLastLoc({offset:589,line:19,span:28,id:"permission.ss"})&&C(v)||plt.Kernel.setLastLoc({offset:624,line:20,span:31,id:"permission.ss"})&&o(v)||plt.Kernel.setLastLoc({offset:662,line:21,span:24,id:"permission.ss"})&&V(v)||plt.Kernel.setLastLoc({offset:693,line:22,span:25,id:"permission.ss"})&&u(v)||plt.Kernel.setLastLoc({offset:725,
line:23,span:28,id:"permission.ss"})&&H(v)||plt.Kernel.setLastLoc({offset:760,line:24,span:29,id:"permission.ss"})&&L(v)||plt.Kernel.setLastLoc({offset:796,line:25,span:29,id:"permission.ss"})&&k(v)||plt.Kernel.setLastLoc({offset:832,line:26,span:34,id:"permission.ss"})&&m(v)||plt.Kernel.setLastLoc({offset:873,line:27,span:28,id:"permission.ss"})&&ba(v)}var fa,da,ga,ma,ha,x,R,X;function aa(v){return plt.Kernel.setLastLoc({offset:1594,line:45,span:35,id:"permission.ss"})&&B(v)?plt.types.String.makeInstance("PERMISSION:LOCATION"):
plt.Kernel.setLastLoc({offset:1663,line:47,span:35,id:"permission.ss"})&&C(v)?plt.types.String.makeInstance("PERMISSION:SEND-SMS"):plt.Kernel.setLastLoc({offset:1732,line:49,span:38,id:"permission.ss"})&&o(v)?plt.types.String.makeInstance("PERMISSION:RECEIVE-SMS"):plt.Kernel.setLastLoc({offset:1807,line:51,span:31,id:"permission.ss"})&&V(v)?plt.types.String.makeInstance("PERMISSION:TILT"):plt.Kernel.setLastLoc({offset:1868,line:53,span:32,id:"permission.ss"})&&u(v)?plt.types.String.makeInstance("PERMISSION:SHAKE"):
plt.Kernel.setLastLoc({offset:1931,line:55,span:35,id:"permission.ss"})&&H(v)?plt.types.String.makeInstance("PERMISSION:INTERNET"):plt.Kernel.setLastLoc({offset:2000,line:57,span:36,id:"permission.ss"})&&L(v)?plt.types.String.makeInstance("PERMISSION:TELEPHONY"):plt.Kernel.setLastLoc({offset:2071,line:59,span:36,id:"permission.ss"})&&k(v)?plt.types.String.makeInstance("PERMISSION:WAKE-LOCK"):plt.Kernel.setLastLoc({offset:2142,line:61,span:41,id:"permission.ss"})&&m(v)?plt.Kernel.setLastLoc({offset:2189,
line:62,span:84,id:"permission.ss"})&&plt.Kernel.format(plt.types.String.makeInstance("PERMISSION:OPEN-IMAGE-URL ~a"),[plt.Kernel.setLastLoc({offset:2228,line:62,span:44,id:"permission.ss"})&&c(v)]):plt.Kernel.setLastLoc({offset:2280,line:63,span:35,id:"permission.ss"})&&ba(v)?plt.Kernel.setLastLoc({offset:2321,line:64,span:72,id:"permission.ss"})&&plt.Kernel.format(plt.types.String.makeInstance("PERMISSION:UNIVERSE ~a"),[plt.Kernel.setLastLoc({offset:2354,line:64,span:38,id:"permission.ss"})&&n(v)]):
plt.Kernel.setLastLoc({offset:1583,line:44,span:812,id:"permission.ss"})&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),plt.types.String.makeInstance('cond: fell out of cond around "offset=1583 line=44 span=812 id=\\"permission.ss\\""'))}function ia(v){return function(){function ja(b,d){return plt.Kernel.setLastLoc({offset:2795,line:75,span:78,id:"permission.ss"})&&plt.Kernel._greaterthan_(plt.Kernel.setLastLoc({offset:2798,line:75,span:21,id:"permission.ss"})&&plt.Kernel.string_dash_length(d),
plt.Kernel.setLastLoc({offset:2841,line:76,span:31,id:"permission.ss"})&&plt.Kernel.string_dash_length(b),[])&&plt.Kernel.setLastLoc({offset:2892,line:77,span:106,id:"permission.ss"})&&plt.Kernel.string_equal__question_(plt.Kernel.setLastLoc({offset:2902,line:77,span:51,id:"permission.ss"})&&plt.Kernel.substring(d,plt.types.Rational.makeInstance(0,1),plt.Kernel.setLastLoc({offset:2921,line:77,span:31,id:"permission.ss"})&&plt.Kernel.string_dash_length(b)),b,[])}function pa(b,d,l){return plt.Kernel.setLastLoc({offset:3258,
line:83,span:183,id:"permission.ss"})&&plt.Kernel.apply(l,plt.Kernel.list([plt.Kernel.setLastLoc({offset:3277,line:83,span:163,id:"permission.ss"})&&plt.Kernel.substring(d,plt.Kernel.setLastLoc({offset:3337,line:84,span:38,id:"permission.ss"})&&plt.Kernel.add1(plt.Kernel.setLastLoc({offset:3343,line:84,span:31,id:"permission.ss"})&&plt.Kernel.string_dash_length(b)),plt.Kernel.setLastLoc({offset:3418,line:85,span:21,id:"permission.ss"})&&plt.Kernel.string_dash_length(d))]),[])}(function(){})(plt.Kernel.identity);
return plt.Kernel.setLastLoc({offset:3461,line:87,span:38,id:"permission.ss"})&&plt.Kernel.string_equal__question_(v,plt.types.String.makeInstance("PERMISSION:LOCATION"),[])?fa:plt.Kernel.setLastLoc({offset:3535,line:89,span:38,id:"permission.ss"})&&plt.Kernel.string_equal__question_(v,plt.types.String.makeInstance("PERMISSION:SEND-SMS"),[])?da:plt.Kernel.setLastLoc({offset:3614,line:91,span:41,id:"permission.ss"})&&plt.Kernel.string_equal__question_(v,plt.types.String.makeInstance("PERMISSION:RECEIVE-SMS"),
[])?ga:plt.Kernel.setLastLoc({offset:3694,line:93,span:34,id:"permission.ss"})&&plt.Kernel.string_equal__question_(v,plt.types.String.makeInstance("PERMISSION:TILT"),[])?ma:plt.Kernel.setLastLoc({offset:3760,line:95,span:35,id:"permission.ss"})&&plt.Kernel.string_equal__question_(v,plt.types.String.makeInstance("PERMISSION:SHAKE"),[])?ha:plt.Kernel.setLastLoc({offset:3828,line:97,span:38,id:"permission.ss"})&&plt.Kernel.string_equal__question_(v,plt.types.String.makeInstance("PERMISSION:INTERNET"),
[])?x:plt.Kernel.setLastLoc({offset:3902,line:99,span:39,id:"permission.ss"})&&plt.Kernel.string_equal__question_(v,plt.types.String.makeInstance("PERMISSION:TELEPHONY"),[])?R:plt.Kernel.setLastLoc({offset:3978,line:101,span:39,id:"permission.ss"})&&plt.Kernel.string_equal__question_(v,plt.types.String.makeInstance("PERMISSION:WAKE-LOCK"),[])?X:plt.Kernel.setLastLoc({offset:4054,line:103,span:52,id:"permission.ss"})&&ja(plt.types.String.makeInstance("PERMISSION:OPEN-IMAGE-URL"),v)?plt.Kernel.setLastLoc({offset:4114,
line:104,span:89,id:"permission.ss"})&&pa(plt.types.String.makeInstance("PERMISSION:OPEN-IMAGE-URL"),v,function(){function b(d){return i(d[0])}b._eqHashCode=plt.types.makeEqHashCode();b.isEqual=function(d){return this===d};b.toWrittenString=function(){return"<function:make-permission:open-image-url>"};b.toDisplayedString=b.toWrittenString;b.procedureArity=plt.types.Rational.makeInstance(1,1);return b}()):plt.Kernel.setLastLoc({offset:4212,line:105,span:46,id:"permission.ss"})&&ja(plt.types.String.makeInstance("PERMISSION:UNIVERSE"),
v)?plt.Kernel.setLastLoc({offset:4266,line:106,span:77,id:"permission.ss"})&&pa(plt.types.String.makeInstance("PERMISSION:UNIVERSE"),v,function(){function b(d){return N(d[0])}b._eqHashCode=plt.types.makeEqHashCode();b.isEqual=function(d){return this===d};b.toWrittenString=function(){return"<function:make-permission:universe>"};b.toDisplayedString=b.toWrittenString;b.procedureArity=plt.types.Rational.makeInstance(1,1);return b}()):plt.Kernel.setLastLoc({offset:3448,line:86,span:897,id:"permission.ss"})&&
plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),plt.types.String.makeInstance('cond: fell out of cond around "offset=3448 line=86 span=897 id=\\"permission.ss\\""'))}()}function na(v){return plt.Kernel.setLastLoc({offset:4584,line:115,span:35,id:"permission.ss"})&&B(v)?plt.Kernel.setLastLoc({offset:4625,line:116,span:103,id:"permission.ss"})&&plt.Kernel.list([plt.types.String.makeInstance("android.permission.ACCESS_COARSE_LOCATION"),plt.types.String.makeInstance("android.permission.ACCESS_FINE_LOCATION")]):
plt.Kernel.setLastLoc({offset:4735,line:118,span:35,id:"permission.ss"})&&C(v)?plt.Kernel.setLastLoc({offset:4776,line:119,span:36,id:"permission.ss"})&&plt.Kernel.list([plt.types.String.makeInstance("android.permission.SEND_SMS")]):plt.Kernel.setLastLoc({offset:4819,line:120,span:38,id:"permission.ss"})&&o(v)?plt.Kernel.setLastLoc({offset:4863,line:121,span:39,id:"permission.ss"})&&plt.Kernel.list([plt.types.String.makeInstance("android.permission.RECEIVE_SMS")]):plt.Kernel.setLastLoc({offset:4909,
line:122,span:31,id:"permission.ss"})&&V(v)?plt.Kernel.setLastLoc({offset:4946,line:123,span:6,id:"permission.ss"})&&plt.Kernel.list([]):plt.Kernel.setLastLoc({offset:4959,line:124,span:32,id:"permission.ss"})&&u(v)?plt.Kernel.setLastLoc({offset:4997,line:125,span:6,id:"permission.ss"})&&plt.Kernel.list([]):plt.Kernel.setLastLoc({offset:5010,line:126,span:35,id:"permission.ss"})&&H(v)?plt.Kernel.setLastLoc({offset:5051,line:127,span:36,id:"permission.ss"})&&plt.Kernel.list([plt.types.String.makeInstance("android.permission.INTERNET")]):
plt.Kernel.setLastLoc({offset:5094,line:128,span:36,id:"permission.ss"})&&L(v)?plt.Kernel.setLastLoc({offset:5136,line:129,span:49,id:"permission.ss"})&&plt.Kernel.list([plt.types.String.makeInstance("android.permission.ACCESS_COARSE_UPDATES")]):plt.Kernel.setLastLoc({offset:5192,line:130,span:36,id:"permission.ss"})&&k(v)?plt.Kernel.setLastLoc({offset:5234,line:131,span:37,id:"permission.ss"})&&plt.Kernel.list([plt.types.String.makeInstance("android.permission.WAKE_LOCK")]):plt.Kernel.setLastLoc({offset:5278,
line:132,span:41,id:"permission.ss"})&&m(v)?plt.Kernel.setLastLoc({offset:5325,line:133,span:6,id:"permission.ss"})&&plt.Kernel.list([]):plt.Kernel.setLastLoc({offset:5338,line:134,span:35,id:"permission.ss"})&&ba(v)?plt.Kernel.setLastLoc({offset:5379,line:135,span:36,id:"permission.ss"})&&plt.Kernel.list([plt.types.String.makeInstance("android.permission.INTERNET")]):plt.Kernel.setLastLoc({offset:4573,line:114,span:844,id:"permission.ss"})&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),
plt.types.String.makeInstance('cond: fell out of cond around "offset=4573 line=114 span=844 id=\\"permission.ss\\""'))}(function(v){(function(){fa=plt.Kernel.setLastLoc({offset:934,line:30,span:26,id:"permission.ss"})&&M();da=plt.Kernel.setLastLoc({offset:990,line:31,span:26,id:"permission.ss"})&&A();ga=plt.Kernel.setLastLoc({offset:1049,line:32,span:26,id:"permission.ss"})&&A();ma=plt.Kernel.setLastLoc({offset:1101,line:33,span:22,id:"permission.ss"})&&P();ha=plt.Kernel.setLastLoc({offset:1150,line:34,
span:23,id:"permission.ss"})&&I();x=plt.Kernel.setLastLoc({offset:1203,line:35,span:26,id:"permission.ss"})&&p();R=plt.Kernel.setLastLoc({offset:1260,line:36,span:27,id:"permission.ss"})&&K();X=plt.Kernel.setLastLoc({offset:1318,line:37,span:27,id:"permission.ss"})&&Y()})(v||plt.Kernel.identity);f.permission_colon_internet_question_=H;f.permission_colon_shake_question_=u;f.permission_colon_tilt_question_=V;f.permission_colon_wake_dash_lock_question_=k;f.set_dash_permission_colon_universe_dash_url_bang_=
O;f.string_dash__greaterthan_permission=ia;f.set_dash_permission_colon_open_dash_image_dash_url_dash_url_bang_=e;f.permission_question_=ra;f.permission_colon_universe_question_=ba;f.permission_colon_wake_dash_lock=U;f.permission_colon_universe=G;f.permission_colon_universe_dash_url=n;f.permission_colon_telephony_question_=L;f.permission_colon_tilt=q;f.permission_colon_telephony=Q;f.permission_colon_receive_dash_sms_question_=o;f.permission_colon_send_dash_sms_question_=C;f.permission_colon_shake=
D;f.permission_colon_send_dash_sms=S;f.permission_colon_location_question_=B;f.permission_colon_open_dash_image_dash_url_question_=m;f.permission_colon_receive_dash_sms=F;f.permission_colon_open_dash_image_dash_url=g;f.permission_colon_open_dash_image_dash_url_dash_url=c;f.permission_colon_location=w;f.make_dash_permission_colon_open_dash_image_dash_url=i;f.make_dash_permission_colon_tilt=P;f.make_dash_permission_colon_wake_dash_lock=Y;f.permission_dash__greaterthan_string=aa;f.permission_colon_internet=
y;f.permission_dash__greaterthan_android_dash_permissions=na;f.make_dash_permission_colon_universe=N;f.make_dash_permission_colon_send_dash_sms=A;f.make_dash_permission_colon_shake=I;f.make_dash_permission_colon_telephony=K;f.make_dash_permission_colon_receive_dash_sms=J;f.PERMISSION_colon_SHAKE=ha;f.make_dash_permission_colon_internet=p;f.make_dash_permission_colon_location=M;f.PERMISSION_colon_TILT=ma;f.PERMISSION_colon_WAKE_dash_LOCK=X;f.PERMISSION_colon_TELEPHONY=R;f.PERMISSION_colon_RECEIVE_dash_SMS=
ga;f.PERMISSION_colon_SEND_dash_SMS=da;f.PERMISSION_colon_LOCATION=fa;f.PERMISSION_colon_INTERNET=x})()})(this);plt.permission={};
(function(){plt.permission={};function f(o){return permission_colon_location_question_(o)}function w(o){return permission_colon_send_dash_sms_question_(o)}function M(o){return permission_colon_receive_dash_sms_question_(o)}function B(o){return permission_colon_tilt_question_(o)}function S(o){return permission_colon_shake_question_(o)}function A(o){return permission_colon_internet_question_(o)}function C(o){return permission_colon_telephony_question_(o)}function F(o){return permission_colon_wake_dash_lock_question_(o)}
function J(o){return permission_colon_open_dash_image_dash_url_question_(o)}plt.permission.startupAllPermissions=function(o,q){if(o.length>0){var P=o.pop();plt.permission._runStartupCode(P,o,q)}else q()};plt.permission._runStartupCode=function(o,q,P){var V=plt.platform.Platform.getInstance(),D=plt.world.stimuli;function I(){setTimeout(function(){plt.permission.startupAllPermissions(q,P)},0)}if(f(o)){V.getLocationService().startService();V.getLocationService().addLocationChangeListener(function(H,
Q){D.onLocation(H,Q)});I()}else if(w(o))I();else if(M(o))I();else if(B(o)){V.getTiltService().startService();V.getTiltService().addOrientationChangeListener(function(H,Q,K){D.onTilt(H,Q,K)});V.getTiltService().addAccelerationChangeListener(function(H,Q,K){D.onAcceleration(H,Q,K)});I()}else if(S(o)){V.getShakeService().startService();V.getShakeService().addListener(function(){D.onShake()});I()}else if(A(o))I();else if(C(o))I();else if(F(o))I();else if(J(o)){var u=permission_colon_open_dash_image_dash_url_dash_url(o),
y=new Image,p=function(){plt.Kernel.detachEvent(y,"load",p);plt.world.Kernel.FileImage.installInstance(u,y);I()};plt.Kernel.attachEvent(y,"load",p);plt.Kernel.attachEvent(y,"error",function(){plt.world.Kernel.FileImage.installBrokenImage(u);I()});y.src=u}else I()};plt.permission.runShutdownCode=function(o){var q=plt.platform.Platform.getInstance();f(o)&&q.getLocationService().shutdownService();w(o);M(o);B(o)&&q.getTiltService().shutdownService();S(o);A(o);C(o);F(o);J(o)}})();
=======
(function(){if(window.google&&google.gears){return}var b=null;if(typeof GearsFactory!="undefined"){b=new GearsFactory()}else{try{b=new ActiveXObject("Gears.Factory");if(b.getBuildInfo().indexOf("ie_mobile")!=-1){b.privateSetGlobalObject(this)}}catch(c){if((typeof navigator.mimeTypes!="undefined")&&navigator.mimeTypes["application/x-googlegears"]){b=document.createElement("object");b.style.display="none";b.width=0;b.height=0;b.type="application/x-googlegears";document.documentElement.appendChild(b)}}}if(!b){return}if(!window.google){google={}}if(!google.gears){google.gears={factory:b}}})();if(typeof(plt)==="undefined"){var plt={}}(function(){plt.types=plt.types||{};var f=function(t,u){t.appendChild(u)};var l=function(u){var t=function(){};t.prototype=u;return new t()};var q=0;plt.types.makeEqHashCode=function(){q++;return q};plt.types.getEqHashCode=function(t){if(t&&t._eqHashCode){return t._eqHashCode}if(typeof(t)=="string"){return t}return 0};var i=function(u,t){this._constructorName=u;this._fields=t;this._eqHashCode=plt.types.makeEqHashCode()};plt.types.Struct=i;i.prototype.toWrittenString=function(u){u.put(this,true);var t=[];t.push("(");t.push(this._constructorName);for(var v=0;v<this._fields.length;v++){t.push(" ");t.push(plt.Kernel.toWrittenString(this._fields[v],u))}t.push(")");return plt.types.String.makeInstance(t.join(""))};i.prototype.toDisplayedString=i.prototype.toWrittenString;i.prototype.toDomNode=function(t){t.put(this,true);var v=document.createElement("div");v.appendChild(document.createTextNode("("));v.appendChild(document.createTextNode(this._constructorName));for(var u=0;u<this._fields.length;u++){v.appendChild(document.createTextNode(" "));f(v,plt.Kernel.toDomNode(this._fields[u],t))}v.appendChild(document.createTextNode(")"));return v};i.prototype.isEqual=function(t,v){if(typeof(t)!="object"){return false}if(!t._constructorName){return false}if(t._constructorName!=this._constructorName){return false}if(typeof(t._fields)==="undefined"){return false}if(this._fields.length!=t._fields.length){return false}for(var u=0;u<this._fields.length;u++){if(!plt.Kernel.isEqual(this._fields[u],t._fields[u],v)){return false}}return true};var n=function(t){plt.types.Struct.call(this,"box",[t]);this._eqHashCode=plt.types.makeEqHashCode()};n.prototype=l(plt.types.Struct.prototype);n.prototype.unbox=function(){return this._fields[0]};n.prototype.set=function(t){this._fields[0]=t};plt.types.Logic={TRUE:true,FALSE:false};Boolean.prototype.toWrittenString=function(t){if(this.valueOf()){return"true"}return"false"};Boolean.prototype.toDisplayedString=Boolean.prototype.toWrittenString;Boolean.prototype.isEqual=function(t,u){return this==t};plt.types.Char=function(t){this.val=t;this._eqHashCode=plt.types.makeEqHashCode()};plt.types.Char.makeInstance=function(t){return new plt.types.Char(t)};plt.types.Char.prototype.toWrittenString=function(t){return"#\\"+this.val};plt.types.Char.prototype.toDisplayedString=function(t){return this.val};plt.types.Char.prototype.getValue=function(){return this.val};plt.types.Char.prototype.isEqual=function(t,u){return t instanceof plt.types.Char&&this.val==t.val};plt.types.Symbol=function(t){this.val=t;this._eqHashCode=plt.types.makeEqHashCode()};var o={};plt.types.Symbol.makeInstance=function(t){if(!(t in o)){o[t]=new plt.types.Symbol(t)}else{}return o[t]};plt.types.Symbol.prototype.isEqual=function(t,u){return t instanceof plt.types.Symbol&&this.val==t.val};plt.types.Symbol.prototype.toString=function(){return this.val};plt.types.Symbol.prototype.toWrittenString=function(t){return this.val};plt.types.Symbol.prototype.toDisplayedString=function(t){return this.val};plt.types.Empty=function(){this._eqHashCode=plt.types.makeEqHashCode()};plt.types.Empty.EMPTY=new plt.types.Empty();plt.types.Empty.prototype.isEqual=function(t,u){return t instanceof plt.types.Empty};plt.types.Empty.prototype.first=function(){throw new plt.Kernel.MobyRuntimeError("first can't be applied on empty.")};plt.types.Empty.prototype.rest=function(){throw new plt.Kernel.MobyRuntimeError("rest can't be applied on empty.")};plt.types.Empty.prototype.isEmpty=function(){return true};plt.types.Empty.prototype.toWrittenString=function(t){return"empty"};plt.types.Empty.prototype.toDisplayedString=function(t){return"empty"};plt.types.Empty.prototype.append=function(t){return t};plt.types.Cons=function(u,t){this.f=u;this.r=t;this._eqHashCode=plt.types.makeEqHashCode()};plt.types.Cons.makeInstance=function(u,t){return new plt.types.Cons(u,t)};plt.types.Cons.prototype.isEqual=function(t,u){if(!(t instanceof plt.types.Cons)){return plt.types.Logic.FALSE}return(plt.Kernel.isEqual(this.first(),t.first(),u)&&plt.Kernel.isEqual(this.rest(),t.rest(),u))};plt.types.Cons.prototype.first=function(){return this.f};plt.types.Cons.prototype.rest=function(){return this.r};plt.types.Cons.prototype.isEmpty=function(){return false};plt.types.Cons.prototype.append=function(u){if(u.isEmpty()){return this}var v=u;var t=plt.Kernel.reverse(this);while(!t.isEmpty()){v=plt.types.Cons.makeInstance(t.first(),v);t=t.rest()}return v};plt.types.Cons.prototype.toWrittenString=function(t){t.put(this,true);var u=[];var v=this;while(!v.isEmpty()){u.push(plt.Kernel.toWrittenString(v.first(),t));v=v.rest()}return"("+u.join(" ")+")"};plt.types.Cons.prototype.toDisplayedString=function(t){t.put(this,true);var u=[];var v=this;while(!v.isEmpty()){u.push(plt.Kernel.toDisplayedString(v.first(),t));v=v.rest()}return"("+u.join(" ")+")"};plt.types.Cons.prototype.toDomNode=function(t){t.put(this,true);var u=document.createElement("div");u.appendChild(document.createTextNode("("));var v=this;while(!v.isEmpty()){f(u,plt.Kernel.toDomNode(v.first(),t));v=v.rest();if(!v.isEmpty()){f(u,document.createTextNode(" "))}}u.appendChild(document.createTextNode(")"));return u};plt.types.Vector=function(v,u){this.elts=new Array(v);if(u){for(var t=0;t<v;t++){this.elts[t]=u[t]}}else{for(var t=0;t<v;t++){this.elts[t]=undefined}}this._eqHashCode=plt.types.makeEqHashCode()};plt.types.Vector.makeInstance=function(u,t){return new plt.types.Vector(u,t)};plt.types.Vector.prototype.length=function(){return this.elts.length};plt.types.Vector.prototype.ref=function(t){return this.elts[t]};plt.types.Vector.prototype.set=function(u,t){this.elts[u]=t};plt.types.Vector.prototype.isEqual=function(t,v){if(t!=null&&t!=undefined&&t instanceof plt.types.Vector){if(t.length()!=this.length()){return false}for(var u=0;u<this.length();u++){if(!plt.Kernel.isEqual(this.elts[u],t.elts[u],v)){return false}}return true}else{return false}};plt.types.Vector.prototype.toWrittenString=function(t){t.put(this,true);var v=[];for(var u=0;u<this.length();u++){v.push(plt.Kernel.toWrittenString(this.ref(u),t))}return"#("+v.join(" ")+")"};plt.types.Vector.prototype.toDisplayedString=function(t){t.put(this,true);var v=[];for(var u=0;u<this.length();u++){v.push(plt.Kernel.toDisplayedStringString(this.ref(u),t))}return"#("+v.join(" ")+")"};plt.types.Vector.prototype.toDomNode=function(t){t.put(this,true);var v=document.createElement("div");v.appendChild(document.createTextNode("#("));for(var u=0;u<this.length();u++){f(v,plt.Kernel.toDomNode(this.ref(u),t))}v.appendChild(document.createTextNode(")"));return v};var m=function(v,u){while(u!=0){var w=v;v=u;u=w%u}return Math.abs(v)};var b=function(u,t){return Math.abs(u*t/m(u,t))};var j=function(v,u){var w;if(isNaN(v)||!isFinite(v)){throw new plt.Kernel.MobyRuntimeError("not a number: "+v)}if(isNaN(u)||!isFinite(u)){throw new plt.Kernel.MobyRuntimeError("not a number: "+u)}while(u!=0){w=v;v=u;u=w%u}return v};plt.types.Rational=function(v,t){if(t==undefined){t=1}if(t==0){throw new plt.Kernel.MobyRuntimeError("cannot have zero denominator.")}var u=j(Math.abs(v),Math.abs(t));this.n=v/u;this.d=t/u;this._eqHashCode=plt.types.makeEqHashCode()};plt.types.Rational.prototype.toWrittenString=function(t){if(this.d==1){return this.n+""}else{return this.n+"/"+this.d}};plt.types.Rational.prototype.toDisplayedString=plt.types.Rational.prototype.toWrittenString;plt.types.Rational.prototype.level=function(){return 0};plt.types.Rational.prototype.lift=function(t){if(t.level()==1){return s.makeInstance(this.n/this.d)}if(t.level()==2){return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO)}throw new plt.Kernel.MobyRuntimeError("invalid level of Number")};plt.types.Rational.prototype.isFinite=function(){return true};plt.types.Rational.prototype.isEqual=function(t,u){return this.equals(t)};plt.types.Rational.prototype.equals=function(t){return t instanceof plt.types.Rational&&this.n==t.n&&this.d==t.d};plt.types.Rational.prototype.isInteger=function(){return this.d==1};plt.types.Rational.prototype.isRational=function(){return true};plt.types.Rational.prototype.isReal=function(){return true};plt.types.Rational.prototype.add=function(t){return plt.types.Rational.makeInstance(this.n*t.d+this.d*t.n,this.d*t.d)};plt.types.Rational.prototype.subtract=function(t){return plt.types.Rational.makeInstance((this.n*t.d)-(this.d*t.n),(this.d*t.d))};plt.types.Rational.prototype.multiply=function(t){return plt.types.Rational.makeInstance(this.n*t.n,this.d*t.d)};plt.types.Rational.prototype.divide=function(t){if(this.d*t.n==0){throw new plt.Kernel.MobyRuntimeError("division by zero")}return plt.types.Rational.makeInstance(this.n*t.d,this.d*t.n)};plt.types.Rational.prototype.toExact=function(){return this};plt.types.Rational.prototype.isExact=function(){return true};plt.types.Rational.prototype.toFixnum=function(){return Math.floor(this.n/this.d)};plt.types.Rational.prototype.numerator=function(){return plt.types.Rational.makeInstance(this.n)};plt.types.Rational.prototype.denominator=function(){return plt.types.Rational.makeInstance(this.d)};plt.types.Rational.prototype.toFloat=function(){return this.n/this.d};plt.types.Rational.prototype.toComplex=function(){return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO)};plt.types.Rational.prototype.greaterThan=function(t){return this.n*t.d>this.d*t.n};plt.types.Rational.prototype.greaterThanOrEqual=function(t){return this.n*t.d>=this.d*t.n};plt.types.Rational.prototype.lessThan=function(t){return this.n*t.d<this.d*t.n};plt.types.Rational.prototype.lessThanOrEqual=function(t){return this.n*t.d<=this.d*t.n};plt.types.Rational.prototype.sqrt=function(){if(this.n>=0){var u=Math.sqrt(this.n);var t=Math.sqrt(this.d);if(Math.floor(u)==u&&Math.floor(t)==t){return plt.types.Rational.makeInstance(u,t)}else{return s.makeInstance(u/t)}}else{var u=Math.sqrt(-this.n);var t=Math.sqrt(this.d);if(Math.floor(u)==u&&Math.floor(t)==t){return plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.makeInstance(u,t))}else{return plt.types.Complex.makeInstance(plt.types.Rational.ZERO,s.makeInstance(u/t))}}};plt.types.Rational.prototype.abs=function(){return plt.types.Rational.makeInstance(Math.abs(this.n),this.d)};plt.types.Rational.prototype.floor=function(){return plt.types.Rational.makeInstance(Math.floor(this.n/this.d),1)};plt.types.Rational.prototype.ceiling=function(){return plt.types.Rational.makeInstance(Math.ceil(this.n/this.d),1)};plt.types.Rational.prototype.conjugate=plt.types.Rational.prototype.abs;plt.types.Rational.prototype.magnitude=plt.types.Rational.prototype.abs;plt.types.Rational.prototype.log=function(){return s.makeInstance(Math.log(this.n/this.d))};plt.types.Rational.prototype.angle=function(){if(0==this.n){return plt.types.Rational.ZERO}if(this.n>0){return plt.types.Rational.ZERO}else{return s.pi}};plt.types.Rational.prototype.atan=function(){return s.makeInstance(Math.atan(this.n/this.d))};plt.types.Rational.prototype.cos=function(){return s.makeInstance(Math.cos(this.n/this.d))};plt.types.Rational.prototype.sin=function(){return s.makeInstance(Math.sin(this.n/this.d))};plt.types.Rational.prototype.expt=function(t){return s.makeInstance(Math.pow(this.n/this.d,t.n/t.d))};plt.types.Rational.prototype.exp=function(){return s.makeInstance(Math.exp(this.n/this.d))};plt.types.Rational.prototype.acos=function(){return s.makeInstance(Math.acos(this.n/this.d))};plt.types.Rational.prototype.asin=function(){return s.makeInstance(Math.asin(this.n/this.d))};plt.types.Rational.prototype.imag_dash_part=function(){return plt.types.Rational.ZERO};plt.types.Rational.prototype.real_dash_part=function(){return this};plt.types.Rational.prototype.timesI=function(){return plt.types.Complex.makeInstance(plt.types.Rational.ZERO,this)};plt.types.Rational.prototype.round=function(){if(this.d==2){var t=this.n/this.d;var u=Math.floor(t);var w=Math.ceil(t);if(u%2==0){return plt.types.Rational.makeInstance(u)}else{return plt.types.Rational.makeInstance(w)}}else{return plt.types.Rational.makeInstance(Math.round(this.n/this.d))}};plt.types.Rational.prototype.half=function(){return plt.types.Rational.makeInstance(this.n,this.d*2)};plt.types.Rational.prototype.minus=function(){return plt.types.Rational.makeInstance(0-this.n,this.d)};var d={};plt.types.Rational.makeInstance=function(u,t){if(u==undefined){throw new plt.Kernel.MobyRuntimeError("n undefined")}if(t==undefined){t=1}if(t<0){u=-u;t=-t}if(t==1&&u in d){return d[u]}else{return new plt.types.Rational(u,t)}};d={};(function(){var t;for(t=-500;t<500;t++){d[t]=new plt.types.Rational(t,1)}})();plt.types.Rational.NEGATIVE_ONE=d[-1];plt.types.Rational.ZERO=d[0];plt.types.Rational.ONE=d[1];plt.types.Rational.TWO=d[2];var s=function(t){this.n=t;this._eqHashCode=plt.types.makeEqHashCode()};plt.types.FloatPoint=s;s.makeInstance=function(t){return new s(t)};s.pi=s.makeInstance(Math.PI);s.e=s.makeInstance(Math.E);var e=s.makeInstance(Number.NaN);var c=s.makeInstance(Number.POSITIVE_INFINITY);var h=s.makeInstance(Number.NEGATIVE_INFINITY);s.prototype.isFinite=function(){return isFinite(this.n)};s.prototype.toExact=function(){return plt.types.Rational.makeInstance(Math.floor(this.n),1)};s.prototype.isExact=function(){return false};s.prototype.level=function(){return 1};s.prototype.lift=function(t){return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO)};s.prototype.toWrittenString=function(t){if(this.n==Number.POSITIVE_INFINITY){return"+inf.0"}else{if(this.n==Number.NEGATIVE_INFINITY){return"-inf.0"}else{if(this.n==Number.NaN){return"+nan.0"}else{return this.n.toString()}}}};s.prototype.toDisplayedString=s.prototype.toWrittenString;s.prototype.isEqual=function(t,u){return this.equals(t)};s.prototype.equals=function(t){return((t instanceof s)&&((this.n==t.n)||(isNaN(this.n)&&isNaN(t.n))))};s.prototype.isRational=function(){return this.isFinite()&&this.n==Math.floor(this.n)};s.prototype.isInteger=function(){return this.isFinite()&&this.n==Math.floor(this.n)};s.prototype.isReal=function(){return true};var r=function(t){if(k.lessThan(t,plt.types.Rational.ZERO)){return -1}else{if(k.greaterThan(t,plt.types.Rational.ZERO)){return 1}else{return 0}}};s.prototype.add=function(t){if(this.isFinite()&&t.isFinite()){return s.makeInstance(this.n+t.n)}else{if(isNaN(this.n)||isNaN(t.n)){return e}else{if(this.isFinite()&&!t.isFinite()){return t}else{if(!this.isFinite()&&t.isFinite()){return this}else{return((r(this)*r(t)==1)?this:e)}}}}};s.prototype.subtract=function(t){if(this.isFinite()&&t.isFinite()){return s.makeInstance(this.n-t.n)}else{if(isNaN(this.n)||isNaN(t.n)){return e}else{if(!this.isFinite()&&!t.isFinite()){if(r(this)==r(t)){return e}else{return this}}else{if(this.isFinite()){return k.multiply(t,plt.types.Rational.NEGATIVE_ONE)}else{return this}}}}};s.prototype.multiply=function(t){if(this.n==0||t.n==0){return plt.types.Rational.ZERO}if(this.isFinite()&&t.isFinite()){return s.makeInstance(this.n*t.n)}else{if(isNaN(this.n)||isNaN(t.n)){return e}else{return((r(this)*r(t)==1)?c:h)}}};s.prototype.divide=function(t){if(this.isFinite()&&t.isFinite()){if(t.n==0){throw new plt.Kernel.MobyRuntimeError("division by zero")}return s.makeInstance(this.n/t.n)}else{if(isNaN(this.n)||isNaN(t.n)){return e}else{if(!this.isFinite()&&!t.isFinite()){return e}else{if(this.isFinite()&&!t.isFinite()){return s.makeInstance(0)}else{if(!this.isFinite()&&t.isFinite()){return((r(this)*r(t)==1)?c:h)}}}}}};s.prototype.toFixnum=function(){return Math.floor(this.n)};s.prototype.numerator=function(){var u=this.n.toString();var t=u.match(/^(.*)\.(.*)$/);if(t){return s.makeInstance(parseFloat(t[1]+t[2]))}else{return this}};s.prototype.denominator=function(){var u=this.n.toString();var t=u.match(/^(.*)\.(.*)$/);if(t){return s.makeInstance(Math.pow(10,t[2].length))}else{return s.makeInstance(1)}};s.prototype.toFloat=function(){return this.n};s.prototype.toComplex=function(){return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO)};s.prototype.floor=function(){if(!isFinite(this.n)){return this}return plt.types.Rational.makeInstance(Math.floor(this.n),1)};s.prototype.ceiling=function(){if(!isFinite(this.n)){return this}return plt.types.Rational.makeInstance(Math.ceil(this.n),1)};s.prototype.greaterThan=function(t){return this.n>t.n};s.prototype.greaterThanOrEqual=function(t){return this.n>=t.n};s.prototype.lessThan=function(t){return this.n<t.n};s.prototype.lessThanOrEqual=function(t){return this.n<=t.n};s.prototype.sqrt=function(){if(this.n<0){var t=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,s.makeInstance(Math.sqrt(-this.n)));return t}else{return s.makeInstance(Math.sqrt(this.n))}};s.prototype.abs=function(){return s.makeInstance(Math.abs(this.n))};s.prototype.log=function(){if(this.n<0){return this.toComplex().log()}else{return s.makeInstance(Math.log(this.n))}};s.prototype.angle=function(){if(0==this.n){return plt.types.Rational.ZERO}if(this.n>0){return plt.types.Rational.ZERO}else{return s.pi}};s.prototype.atan=function(){return s.makeInstance(Math.atan(this.n))};s.prototype.cos=function(){return s.makeInstance(Math.cos(this.n))};s.prototype.sin=function(){return s.makeInstance(Math.sin(this.n))};s.prototype.expt=function(t){if(this.n==1){if(t.isFinite()){return this}else{if(isNaN(t.n)){return this}else{return this}}}else{return s.makeInstance(Math.pow(this.n,t.n))}};s.prototype.exp=function(){return s.makeInstance(Math.exp(this.n))};s.prototype.acos=function(){return s.makeInstance(Math.acos(this.n))};s.prototype.asin=function(){return s.makeInstance(Math.asin(this.n))};s.prototype.imag_dash_part=function(){return plt.types.Rational.ZERO};s.prototype.real_dash_part=function(){return this};s.prototype.round=function(){if(isFinite(this.n)){if(Math.abs(Math.floor(this.n)-this.n)==0.5){if(Math.floor(this.n)%2==0){return plt.types.Rational.makeInstance(Math.floor(this.n))}return plt.types.Rational.makeInstance(Math.ceil(this.n))}else{return plt.types.Rational.makeInstance(Math.round(this.n))}}else{return this}};s.prototype.conjugate=s.prototype.abs;s.prototype.magnitude=s.prototype.abs;s.prototype.minus=function(){return s.makeInstance(0-this.n)};s.prototype.half=function(){return s.makeInstance(this.n/2)};s.prototype.timesI=function(){return plt.types.Complex.makeInstance(plt.types.Rational.ZERO,this)};plt.types.Complex=function(u,t){this.r=u;this.i=t;this._eqHashCode=plt.types.makeEqHashCode()};plt.types.Complex.makeInstance=function(v,u){if(typeof(v)=="number"){v=(v==Math.floor(v)?plt.types.Rational.makeInstance(v):s.makeInstance(v))}if(typeof(u)=="number"){u=(u==Math.floor(u)?plt.types.Rational.makeInstance(u):s.makeInstance(u))}var t=new plt.types.Complex(v,u);return t};plt.types.Complex.prototype.toWrittenString=function(t){if(k.greaterThanOrEqual(this.i,plt.types.Rational.ZERO)){return plt.Kernel.toWrittenString(this.r)+"+"+plt.Kernel.toWrittenString(this.i)+"i"}else{return plt.Kernel.toWrittenString(this.r)+plt.Kernel.toWrittenString(this.i)+"i"}};plt.types.Complex.prototype.toDisplayedString=plt.types.Complex.prototype.toWrittenString;plt.types.Complex.prototype.isFinite=function(){return this.r.isFinite()&&this.i.isFinite()};plt.types.Complex.prototype.isRational=function(){return this.r.isRational()&&k.equal(this.i,plt.types.Rational.ZERO)};plt.types.Complex.prototype.isInteger=function(){return this.r.isInteger()&&k.equal(this.i,plt.types.Rational.ZERO)};plt.types.Complex.prototype.toExact=function(){if(!this.isReal()){throw new plt.Kernel.MobyRuntimeError("inexact->exact: expects argument of type real number")}return this.r.toExact()};plt.types.Complex.prototype.isExact=function(){return this.r.isExact()&&this.i.isExact()};plt.types.Complex.prototype.level=function(){return 2};plt.types.Complex.prototype.lift=function(t){throw new plt.Kernel.MobyRuntimeError("Don't know how to lift Complex number")};plt.types.Complex.prototype.isEqual=function(t,u){return this.equals(t)};plt.types.Complex.prototype.equals=function(u){var t=((u instanceof plt.types.Complex)&&(k.equal(this.r,u.r))&&(k.equal(this.i,u.i)));return t};plt.types.Complex.prototype.greaterThan=function(t){if(!this.isReal()||!t.isReal()){throw new plt.Kernel.MobyRuntimeError(">: expects argument of type real number")}return k.greaterThan(this.r,t.r)};plt.types.Complex.prototype.greaterThanOrEqual=function(t){if(!this.isReal()||!t.isReal()){throw new plt.Kernel.MobyRuntimeError(">: expects argument of type real number")}return k.greaterThanOrEqual(this.r,t.r)};plt.types.Complex.prototype.lessThan=function(t){if(!this.isReal()||!t.isReal()){throw new plt.Kernel.MobyRuntimeError(">: expects argument of type real number")}return k.lessThan(this.r,t.r)};plt.types.Complex.prototype.lessThanOrEqual=function(t){if(!this.isReal()||!t.isReal()){throw new plt.Kernel.MobyRuntimeError(">: expects argument of type real number")}return k.lessThanOrEqual(this.r,t.r)};plt.types.Complex.prototype.abs=function(){if(!k.equal(this.i,plt.types.Rational.ZERO).valueOf()){throw new plt.Kernel.MobyRuntimeError("abs: expects argument of type real number")}return this.r.abs()};plt.types.Complex.prototype.toFixnum=function(){if(!k.equal(this.i,plt.types.Rational.ZERO).valueOf()){throw new plt.Kernel.MobyRuntimeError("toFixnum: expects argument of type real number")}return this.r.toFixnum()};plt.types.Complex.prototype.numerator=function(){if(!this.isReal()){throw new plt.Kernel.MobyRuntimeError("numerator: can only be applied to real number")}return this.n.numerator()};plt.types.Complex.prototype.denominator=function(){if(!this.isReal()){throw new plt.Kernel.MobyRuntimeError("floor: can only be applied to real number")}return this.n.denominator()};plt.types.Complex.prototype.toFloat=function(){if(!k.equal(this.i,plt.types.Rational.ZERO).valueOf()){throw new plt.Kernel.MobyRuntimeError("toFloat: expects argument of type real number")}return this.r.toFloat()};plt.types.Complex.prototype.toComplex=function(){return this};plt.types.Complex.prototype.add=function(t){return plt.types.Complex.makeInstance(k.add(this.r,t.r),k.add(this.i,t.i))};plt.types.Complex.prototype.subtract=function(t){return plt.types.Complex.makeInstance(k.subtract(this.r,t.r),k.subtract(this.i,t.i))};plt.types.Complex.prototype.multiply=function(t){if(t.isReal()){return plt.types.Complex.makeInstance(k.multiply(this.r,t.r),k.multiply(this.i,t.r))}var v=k.subtract(k.multiply(this.r,t.r),k.multiply(this.i,t.i));var u=k.add(k.multiply(this.r,t.i),k.multiply(this.i,t.r));if(k.equal(u,plt.types.Rational.ZERO)){return v}return plt.types.Complex.makeInstance(v,u)};plt.types.Complex.prototype.divide=function(v){if(v.isReal()){return plt.types.Complex.makeInstance(k.divide(this.r,v.r),k.divide(this.i,v.r))}var w=v.conjugate();var u=k.multiply(this,w).toComplex();var x=k.multiply(v,w);var t=plt.types.Complex.makeInstance(k.divide(u.r,x),k.divide(u.i,x));return t};plt.types.Complex.prototype.conjugate=function(){var t=plt.types.Complex.makeInstance(this.r,k.subtract(plt.types.Rational.ZERO,this.i));return t};plt.types.Complex.prototype.magnitude=function(){var t=k.add(k.multiply(this.r,this.r),k.multiply(this.i,this.i));return t.sqrt()};plt.types.Complex.prototype.isReal=function(){return k.equal(this.i,plt.types.Rational.ZERO)};plt.types.Complex.prototype.sqrt=function(){if(this.isReal()){return this.r.sqrt()}var t=k.add(this.magnitude(),this.r);var v=t.half().sqrt();var u=k.divide(this.i,k.multiply(t,s.makeInstance(2)).sqrt());return plt.types.Complex.makeInstance(v,u)};plt.types.Complex.prototype.log=function(){var u=this.magnitude();var v=this.angle();var t=k.add(u.log(),v.timesI());return t};plt.types.Complex.prototype.angle=function(){if(this.isReal()){return this.r.angle()}if(k.equal(plt.types.Rational.ZERO,this.r)){var t=s.pi.half();return k.greaterThan(this.i,plt.types.Rational.ZERO)?t:t.minus()}else{var t=k.divide(this.i.abs(),this.r.abs()).atan();if(k.greaterThan(this.r,plt.types.Rational.ZERO)){return k.greaterThan(this.i,plt.types.Rational.ZERO)?t:t.minus()}else{return k.greaterThan(this.i,plt.types.Rational.ZERO)?s.pi.subtract(t):t.subtract(s.pi)}}};var g=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.ONE);var p=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.NEGATIVE_ONE);plt.types.Complex.prototype.atan=function(){if(k.equal(this,g)||k.equal(this,p)){return s.makeInstance(Number.NEGATIVE_INFINITY)}return k.multiply(g,k.multiply(s.makeInstance(0.5),(k.divide(k.add(g,this),k.add(g,k.subtract(plt.types.Rational.ZERO,this)))).log()))};plt.types.Complex.prototype.cos=function(){if(this.isReal()){return this.r.cos()}var u=this.timesI();var t=u.minus();return k.add(u.exp(),t.exp()).half()};plt.types.Complex.prototype.sin=function(){if(this.isReal()){return this.r.sin()}var x=this.timesI();var w=x.minus();var v=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.TWO);var u=k.subtract(x.exp(),w.exp());var t=k.divide(u,v);return t};plt.types.Complex.prototype.expt=function(u){var t=k.multiply(u,this.log());return t.exp()};plt.types.Complex.prototype.exp=function(){var v=this.r.exp();var t=this.i.cos();var u=this.i.sin();return k.multiply(v,k.add(t,u.timesI()))};plt.types.Complex.prototype.acos=function(){if(this.isReal()){return this.r.acos()}var v=s.pi.half();var w=this.timesI();var u=k.subtract(plt.types.Rational.ONE,this.multiply(this)).sqrt();var t=k.add(w,u).log().timesI();return k.add(v,t)};plt.types.Complex.prototype.asin=function(){if(this.isReal()){return this.r.asin()}var u=k.subtract(plt.types.Rational.ONE,this.multiply(this));var t=u.sqrt();return k.multiply(plt.types.Rational.TWO,(k.divide(this,k.add(plt.types.Rational.ONE,t))).atan())};plt.types.Complex.prototype.ceiling=function(){if(!this.isReal()){throw new plt.Kernel.MobyRuntimeError("ceiling: can only be applied to real number")}return this.r.ceiling()};plt.types.Complex.prototype.floor=function(){if(!this.isReal()){throw new plt.Kernel.MobyRuntimeError("floor: can only be applied to real number")}return this.r.floor()};plt.types.Complex.prototype.imag_dash_part=function(){return this.i};plt.types.Complex.prototype.real_dash_part=function(){return this.r};plt.types.Complex.prototype.round=function(){return this.r.round()};plt.types.Complex.prototype.timesI=function(){return this.multiply(plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.ONE))};plt.types.Complex.prototype.minus=function(){return plt.types.Complex.makeInstance(k.subtract(plt.types.Rational.ZERO,this.r),k.subtract(plt.types.Rational.ZERO,this.i))};plt.types.Complex.prototype.half=function(){return plt.types.Complex.makeInstance(this.r.half(),this.i.half())};var k={};plt.types.NumberTower=k;k.toFixnum=function(t){return t.toFixnum()};k.toFloat=function(t){return t.toFloat()};k.abs=function(t){return t.abs()};k.isFinite=function(t){return t.isFinite()};k.toExact=function(t){return t.toExact()};k.add=function(t,u){if(t.level()<u.level()){t=t.lift(u)}if(u.level()<t.level()){u=u.lift(t)}return t.add(u)};k.subtract=function(t,u){if(t.level()<u.level()){t=t.lift(u)}if(u.level()<t.level()){u=u.lift(t)}return t.subtract(u)};k.multiply=function(t,u){if(t.level()<u.level()){t=t.lift(u)}if(u.level()<t.level()){u=u.lift(t)}return t.multiply(u)};k.divide=function(t,u){if(t.level()<u.level()){t=t.lift(u)}if(u.level()<t.level()){u=u.lift(t)}return t.divide(u)};k.equal=function(t,u){if(t.level()<u.level()){t=t.lift(u)}if(u.level()<t.level()){u=u.lift(t)}return t.equals(u)};k.approxEqual=function(t,v,u){return k.lessThan(k.abs(k.subtract(t,v)),u)};k.greaterThanOrEqual=function(t,u){if(t.level()<u.level()){t=t.lift(u)}if(u.level()<t.level()){u=u.lift(t)}if(!(t.isReal()&&u.isReal())){throw new plt.Kernel.MobyRuntimeError("greaterThanOrEqual: couldn't be applied to complex number")}return t.greaterThanOrEqual(u)};k.lessThanOrEqual=function(t,u){if(t.level()<u.level()){t=t.lift(u)}if(u.level()<t.level()){u=u.lift(t)}if(!(t.isReal()&&u.isReal())){throw new plt.Kernel.MobyRuntimeError("lessThanOrEqual: couldn't be applied to complex number")}return t.lessThanOrEqual(u)};k.greaterThan=function(t,u){if(t.level()<u.level()){t=t.lift(u)}if(u.level()<t.level()){u=u.lift(t)}if(!(t.isReal()&&u.isReal())){throw new plt.Kernel.MobyRuntimeError("greaterThan: couldn't be applied to complex number")}return t.greaterThan(u)};k.lessThan=function(t,u){if(t.level()<u.level()){t=t.lift(u)}if(u.level()<t.level()){u=u.lift(t)}if(!(t.isReal()&&u.isReal())){throw new plt.Kernel.MobyRuntimeError("lessThan: couldn't be applied to complex number")}return t.lessThan(u)};k.modulo=function(u,v){var t=plt.types.Rational.makeInstance(u.toFixnum()%v.toFixnum(),1);if(k.lessThan(v,plt.types.Rational.ZERO)){if(k.lessThanOrEqual(t,plt.types.Rational.ZERO)){return t}return k.add(t,v)}else{if(k.lessThan(t,plt.types.Rational.ZERO)){return k.add(t,v)}return t}};k.sqr=function(t){return k.multiply(t,t)};k.expt=function(t,u){if(t.level()<u.level()){t=t.lift(u)}if(u.level()<t.level()){u=u.lift(t)}return t.expt(u)};k.gcd=function(w,v){var t=Math.abs(w.toFixnum());for(var u=0;u<v.length;u++){t=m(t,v[u].toFixnum())}return plt.types.Rational.makeInstance(t)};k.lcm=function(w,v){var t=Math.abs(w.toFixnum());if(t==0){return plt.types.Rational.ZERO}for(var u=0;u<v.length;u++){if(v[u].toFixnum()==0){return plt.types.Rational.ZERO}t=b(t,v[u].toFixnum())}return plt.types.Rational.makeInstance(t)};plt.types.String=String;plt.types.String.makeInstance=function(t){return t.valueOf()};plt.types.String.prototype.isEqual=function(t,u){return this==t};plt.types.String.prototype.toWrittenString=function(t){return'"'+this.replace(/["\\]/g,function(v,w,u){return"\\"+v})+'"'};plt.types.String.prototype.toDisplayedString=function(t){return this}})();if(typeof(plt)==="undefined"){var plt={}}plt._Hashtable=(function(){function o(A){return(typeof A==="undefined")}function m(A){return(typeof A==="function")}function k(A){return(typeof A==="string")}function g(B,A){return m(B[A])}function n(A){return g(A,"equals")}function l(A){return g(A,"hashCode")}function i(B){if(k(B)){return B}else{if(l(B)){var A=B.hashCode();if(!k(A)){return i(A)}return A}else{if(g(B,"toString")){return B.toString()}else{return String(B)}}}}function j(B,A){return B.equals(A)}function e(B,A){if(n(A)){return A.equals(B)}else{return B===A}}function b(B,A){return B===A}function h(C,G,F,E,B){var D;for(var H=0,A=C.length;H<A;H++){D=C[H];if(B(G,F(D))){return E?[H,D]:true}}return false}function u(C,B){if(g(C,"splice")){C.splice(B,1)}else{if(B===C.length-1){C.length=B}else{var E=C.slice(B+1);C.length=B;for(var D=0,A=E.length;D<A;D++){C[B+D]=E[D]}}}}function p(B,A){if(B===null){throw new Error("null is not a valid "+A)}else{if(o(B)){throw new Error(A+" must not be undefined")}}}var t="key",s="value";function r(A){p(A,t)}function z(A){p(A,s)}function y(A,C,B){this.entries=[];this.addEntry(A,C);if(B!==null){this.getEqualityFunction=function(){return B}}}function x(A){return A[0]}function w(A){return A[1]}y.prototype={getEqualityFunction:function(A){if(n(A)){return j}else{return e}},searchForEntry:function(A){return h(this.entries,A,x,true,this.getEqualityFunction(A))},getEntryForKey:function(A){return this.searchForEntry(A)[1]},getEntryIndexForKey:function(A){return this.searchForEntry(A)[0]},removeEntryForKey:function(B){var A=this.searchForEntry(B);if(A){u(this.entries,A[0]);return true}return false},addEntry:function(B,A){this.entries[this.entries.length]=[B,A]},size:function(){return this.entries.length},keys:function(C){var B=C.length;for(var D=0,A=this.entries.length;D<A;D++){C[B+D]=this.entries[D][0]}},values:function(D){var C=D.length;for(var B=0,A=this.entries.length;B<A;B++){D[C+B]=this.entries[B][1]}},containsKey:function(A){return h(this.entries,A,x,false,this.getEqualityFunction(A))},containsValue:function(A){return h(this.entries,A,w,false,b)}};function f(){}f.prototype=[];function d(A){return A[0]}function c(C,B,A){return h(C,B,d,true,A)}function v(C,B){var A=C[B];if(A&&(A instanceof f)){return A[1]}return null}function q(D,C){var B=[];var A={};D=m(D)?D:i;C=m(C)?C:null;this.put=function(E,J){r(E);z(J);var I=D(E);var G=v(A,I);if(G){var H=G.getEntryForKey(E);if(H){H[1]=J}else{G.addEntry(E,J)}}else{var F=new f();F[0]=I;F[1]=new y(E,J,C);B[B.length]=F;A[I]=F}};this.get=function(F){r(F);var H=D(F);var G=v(A,H);if(G){var E=G.getEntryForKey(F);if(E){return E[1]}}return null};this.containsKey=function(G){r(G);var F=D(G);var E=v(A,F);if(E){return E.containsKey(G)}return false};this.containsValue=function(F){z(F);for(var G=0,E=B.length;G<E;G++){if(B[G][1].containsValue(F)){return true}}return false};this.clear=function(){B.length=0;A={}};this.isEmpty=function(){return B.length===0};this.keys=function(){var F=[];for(var G=0,E=B.length;G<E;G++){B[G][1].keys(F)}return F};this.values=function(){var G=[];for(var F=0,E=B.length;F<E;F++){B[F][1].values(G)}return G};this.remove=function(E){r(E);var H=D(E);var G=v(A,H);if(G){if(G.removeEntryForKey(E)){if(G.size()===0){var F=c(B,H,G.getEqualityFunction(E));u(B,F[0]);delete A[H]}}}};this.size=function(){var G=0;for(var F=0,E=B.length;F<E;F++){G+=B[F][1].size()}return G}}return q})();if(typeof(plt)==="undefined"){var plt={}}(function(){var h=plt.types.NumberTower;if(!Array.indexOf){Array.prototype.indexOf=function(ac){for(var ab=0;ab<this.length;ab++){if(this[ab]==ac){return ab}}return -1}}var f=function(ad,ab,ac){if(ad.addEventListener){ad.addEventListener(ab,ac,false)}else{ad.attachEvent("on"+ab,ac,false)}};var r=function(ad,ab,ac){if(ad.addEventListener){ad.removeEventListener(ab,ac,false)}else{ad.detachEvent("on"+ab,ac,false)}};var A=function(ac){var ab=function(){};ab.prototype=ac;return new ab()};var V=function(){this.parentMap=e()};V.prototype.find=function(ad){var ab=(this.parentMap.containsKey(ad)?this.parentMap.get(ad):ad);if(ab===ad){return ab}else{var ac=this.find(ab);this.parentMap.put(ad,ac);return ac}};V.prototype.merge=function(ac,ab){this.parentMap.put(this.find(ac),this.find(ab))};var y=function(ab){this.msg=ab};y.prototype.name="MobyError";y.prototype.toString=function(){return this.name+": "+this.msg};var Y=function(ac,ab){y.call(this,ac);this.loc=ab};Y.prototype=A(y.prototype);Y.prototype.name="MobyParserError";var M=function(ac,ab){y.call(this,ac);this.stx=ab};M.prototype=A(y.prototype);M.prototype.name="MobySyntaxError";var H=function(ab){y.call(this,ab)};H.prototype=A(y.prototype);H.prototype.name="MobyTypeError";var D=function(ab){y.call(this,ab)};D.prototype=A(y.prototype);D.prototype.name="MobyRuntimeError";var R=function(ab){y.call(this,ab)};R.prototype=A(D.prototype);R.prototype.name="MobyTestingError";var X=function(ab){return(ab!=null&&ab!=undefined&&(ab instanceof plt.types.Rational||ab instanceof plt.types.FloatPoint||ab instanceof plt.types.Complex))};var k=function(ab){return(ab!=null&&ab!=undefined&&ab instanceof plt.types.Symbol)};var q=function(ab){return ab!=null&&ab!=undefined&&ab instanceof plt.types.Char};var N=function(ab){return stx_question_(ab)};var j=function(ab){return typeof(ab)=="string"};var G=function(ab){return(ab==plt.types.Logic.TRUE||ab==plt.types.Logic.FALSE)};var T=function(ab){return ab!=null&&ab!=undefined&&ab instanceof plt.types.Cons};var t=function(ab){return ab!=null&&ab!=undefined&&ab instanceof plt.types.Empty};var U=function(ab){return(X(ab)&&ab.isReal())};var E=function(ab){return X(ab)&&ab.isRational()};var F=function(ab){return X(ab)};var s=function(ab){return typeof(ab)=="function"};var o=function(ab){return(X(ab)&&ab.isInteger())};var m=function(ab){return X(ab)&&ab.isInteger()&&ab.toFixnum()>=0};var u=function(ac){for(var ab=0;ab<ac.length;ab++){if(!((ac[ab]>="a"&&ac[ab]<="z")||(ac[ab]>="A"&&ac[ab]<="Z"))){return false}}return true};var K=(function(){var ab=new RegExp("^\\s*$");return function(ac){return(ac.match(ab)?true:false)}}());var c=function(ab){return ab!=null&&ab!=undefined&&(ab instanceof plt.types.Vector)};var g=function(ab,ad){for(var ac=0;ac<ab.length;ac++){ad.apply(ab[ac],[ab[ac],ac])}};var J=function(af,ae,ab,ad){if(!af(ae,ab).valueOf()){return false}if(ad.length==0){return true}if(!af(ab,ad[0]).valueOf()){return false}for(var ac=0;ac<ad.length-1;ac++){if(!af(ad[ac],ad[ac+1]).valueOf()){return false}}return true};var l=function(ab,af,ad){var ac;var ae=af;for(ac=0;ac<ad.length;ac++){if(!(ab(ae,ad[ac])).valueOf()){ae=ad[ac]}}return ae};var b=function(ab){return ab!=null&&ab!=undefined&&((ab instanceof plt.types.Cons)||(ab instanceof plt.types.Empty))};var i=function(ac){var ab=["th","st","nd","rd","th","th","th","th","th","th"];if((Math.floor(ac/10)%10)==1){return ac+"th"}else{return ac+ab[ac%10]}};var B=function(ae,ac,ab,ad){return plt.Kernel.format("~a: expects type <~a> as ~a argument, given: ~s",[ae,ac,i(ab),ad])};var x=function(ac,af,ae,ad,ab){if(!af(ac)){throw new H(B(ae,ad,ab,ac))}};var I=function(ac,ad,ab){if(!b(ac)){throw new H(B(ad,"list",ab,ac))}};var S=function(ac,af,ae,ad,ab){if(!b(ac)){throw new H(B(ae,"listof "+ad,ab,ac))}while(!ac.isEmpty()){if(!af(ac.first())){throw new H(B(ae,"listof "+ad,ab,ac))}ac=ac.rest()}};var z=function(ae,ac,ad,ab){return function(ah,af,ag){x(ah,ae,ab,ac,1);x(af,ae,ab,ac,2);g(ag,function(ai,aj){x(ai,ae,ab,ac,aj+3)});return ad(ah,af,ag)}};var n=function(ac,ab){return z(X,"number",function(af,ad,ae){return J(ac,af,ad,ae)},ab)};var Z=function(ac,ab){return z(q,"char",function(af,ad,ae){return J(ac,af,ad,ae)},ab)};var p=function(ac,ab){return z(j,"string",function(af,ad,ae){return J(ac,af,ad,ae)},ab)};plt.Kernel={_heir:A,pi:plt.types.FloatPoint.pi,e:plt.types.FloatPoint.e,struct_question_:function(ab){return(ab!=null&&ab!=undefined&&ab instanceof plt.types.Struct)},number_question_:function(ab){return X(ab)},equal_question_:function(ab,ac){return plt.Kernel.isEqual(ab,ac,new V())},equal_tilde__question_:function(ab,ad,ac){x(ac,X,"equal~?","number",3);if(X(ab)&&X(ad)){return h.approxEqual(ab,ad,ac)}else{return plt.Kernel.isEqual(ab,ad,new V())}},eq_question_:function(ab,ac){return(ab==ac)},eqv_question_:function(ab,ac){if(X(ab)&&X(ac)&&ab.level()==ac.level()){return h.equal(ab,ac)}else{if(q(ab)&&q(ac)){return ab.getValue()==ac.getValue()}}return ab===ac},identity:function(ab){return ab},cons:function(ab,ac){I(ac,"cons",2);return plt.types.Cons.makeInstance(ab,ac)},first:function(ab){I(ab,"first",1);return ab.first()},rest:function(ab){I(ab,"rest",1);return ab.rest()},second:function(ab){I(ab,"second",1);return ab.rest().first()},third:function(ab){I(ab,"third",1);return ab.rest().rest().first()},fourth:function(ab){I(ab,"fourth",1);return ab.rest().rest().rest().first()},fifth:function(ab){I(ab,"fifth",1);return ab.rest().rest().rest().rest().first()},random:function(ab){x(ab,o,"random","integer",1);return plt.types.Rational.makeInstance(Math.floor(h.toFixnum(ab)*Math.random()),1)},current_dash_seconds:function(){return plt.types.Rational.makeInstance(Math.floor(new Date().getTime()/1000))},floor:function(ab){x(ab,X,"floor","number",1);return ab.floor()},ceiling:function(ab){x(ab,X,"ceiling","number",1);return ab.ceiling()},sqrt:function(ab){x(ab,X,"sqrt","number",1);return ab.sqrt()},integer_dash_sqrt:function(ac){x(ac,o,"integer-sqrt","integer",1);var ab=ac.sqrt();if(E(ab)){return plt.types.Rational.makeInstance(ab.toFixnum())}else{if(U(ab)){return plt.types.Rational.makeInstance(ab.toFixnum())}else{return plt.types.Complex.makeInstance(plt.types.Rational.makeInstance(plt.Kernel.real_dash_part(ab).toFixnum()),plt.types.Rational.makeInstance(plt.Kernel.imag_dash_part(ab).toFixnum()))}}},sqr:function(ab){x(ab,X,"sqr","number",1);return h.sqr(ab)},sin:function(ab){x(ab,X,"sin","number",1);return ab.sin()},cos:function(ab){x(ab,X,"cos","number",1);return ab.cos()},modulo:function(ab,ac){x(ab,X,"modulo","number",1);x(ac,X,"modulo","number",2);return h.modulo(ab,ac)},zero_question_:function(ab){x(ab,X,"zero?","number",1);return h.equal(ab,plt.types.Rational.ZERO)},_equal__tilde_:function(ab,ad,ac){x(ab,X,"=~","number",1);x(ad,X,"=~","number",2);x(ac,X,"=~","number",3);return h.approxEqual(ab,ad,ac)},abs:function(ab){x(ab,X,"abs","number",1);return h.abs(ab)},add1:function(ab){x(ab,X,"add1","number",1);return h.add(ab,plt.types.Rational.ONE)},sub1:function(ab){x(ab,X,"sub1","number",1);return h.subtract(ab,plt.types.Rational.ONE)},_plus_:function(ab){g(ab,function(ae,af){x(ae,X,"+","number",af+1)});var ac,ad=plt.types.Rational.ZERO;for(ac=0;ac<ab.length;ac++){ad=h.add(ad,ab[ac])}return ad},_dash_:function(ae,ab){x(ae,X,"-","number",1);g(ab,function(af,ag){x(af,X,"-","number",ag+2)});if(ab.length==0){return h.subtract(plt.types.Rational.ZERO,ae)}var ac,ad=ae;for(ac=0;ac<ab.length;ac++){ad=h.subtract(ad,ab[ac])}return ad},_star_:function(ac){g(ac,function(ae,af){x(ae,X,"*","number",af+1)});var ad,ab=plt.types.Rational.ONE;for(ad=0;ad<ac.length;ad++){ab=h.multiply(ab,ac[ad])}return ab},_slash_:function(ad,ab){x(ad,X,"/","number",1);g(ab,function(af,ag){x(af,X,"/","number",ag+2)});var ac,ae=ad;if(ab.length==0){return h.divide(plt.types.Rational.ONE,ae)}else{for(ac=0;ac<ab.length;ac++){ae=h.divide(ae,ab[ac])}return ae}},_equal_:n(h.equal,"="),_greaterthan__equal_:n(h.greaterThanOrEqual,">="),_lessthan__equal_:n(h.lessThanOrEqual,"<="),_greaterthan_:n(h.greaterThan,">"),_lessthan_:n(h.lessThan,"<"),min:function(ac,ab){x(ac,X,"min","number",1);g(ab,function(ad,ae){x(this,X,"min","number",ae+2)});return l(h.lessThanOrEqual,ac,ab)},max:function(ac,ab){x(ac,X,"max","number",1);g(ab,function(ad,ae){x(this,X,"max","number",ae+2)});return l(h.greaterThanOrEqual,ac,ab)},lcm:function(ac,ab){x(ac,o,"lcm","number",1);g(ab,function(ad,ae){x(this,o,"lcm","number",ae+2)});return h.lcm(ac,ab)},gcd:function(ac,ab){x(ac,o,"gcd","number",1);g(ab,function(ad,ae){x(this,o,"gcd","number",ae+2)});return h.gcd(ac,ab)},exact_dash__greaterthan_inexact:function(ab){x(ab,X,"exact->inexact","number",1);return plt.types.FloatPoint.makeInstance(ab.toFloat())},inexact_dash__greaterthan_exact:function(ab){x(ab,X,"inexact->exact","number",1);return h.toExact(ab)},exact_question_:function(ab){x(ab,X,"exact?","number",1);return ab.isExact()},inexact_question_:function(ab){x(ab,X,"inexact?","number",1);return !ab.isExact()},rational_question_:function(ab){return(X(ab)&&ab.isRational())},number_dash__greaterthan_string:function(ab){x(ab,X,"number->string","number",1);return plt.types.String.makeInstance(plt.Kernel.toWrittenString(ab))},conjugate:function(ab){x(ab,X,"conjugate","number",1);return ab.conjugate()},magnitude:function(ab){x(ab,X,"magnitude","number",1);return ab.magnitude()},log:function(ab){x(ab,X,"log","number",1);return ab.log()},angle:function(ab){x(ab,X,"angle","number",1);return ab.angle()},atan:function(ab,ac){if(ac.length==0){x(ab,X,"atan","number",1);return ab.atan()}else{if(ac.length==1){x(ab,U,"atan","number",1);x(ac[0],U,"atan","number",2);return plt.types.FloatPoint.makeInstance(Math.atan2(h.toFloat(ab),h.toFloat(ac[0])))}else{throw new D(plt.Kernel.format("atan: expects 1 to 2 arguments, given ~a.",[plt.types.Rational.makeInstance(ac.length)]))}}},expt:function(ab,ac){x(ab,X,"expt","number",1);x(ac,X,"expt","number",2);return h.expt(ab,ac)},exp:function(ab){x(ab,X,"exp","number",1);return ab.exp()},acos:function(ab){x(ab,X,"acos","number",1);return ab.acos()},asin:function(ab){x(ab,X,"asin","number",1);return ab.asin()},tan:function(ab){x(ab,X,"tan","number",1);return h.divide(ab.sin(),ab.cos())},complex_question_:function(ab){return F(ab)},cosh:function(ab){x(ab,X,"cosh","number",1);return this._plus_([this.exp(ab),this.exp(ab.minus())]).half()},sinh:function(ab){x(ab,X,"sinh","number",1);return h.subtract(this.exp(ab),this.exp(ab.minus())).half()},denominator:function(ab){x(ab,E,"denominator","rational",1);return ab.denominator()},numerator:function(ab){x(ab,E,"numerator","rational",1);return ab.numerator()},odd_question_:function(ab){x(ab,X,"odd?","number",1);return(Math.abs((ab.toFixnum()%2))==1)},even_question_:function(ab){x(ab,X,"even?","number",1);return(Math.abs((ab.toFixnum()%2))==0)},positive_question_:function(ab){x(ab,X,"positive?","number",1);return this._greaterthan_(ab,plt.types.Rational.ZERO,[])},negative_question_:function(ab){x(ab,X,"negative?","number",1);return this._lessthan_(ab,plt.types.Rational.ZERO,[])},imag_dash_part:function(ab){x(ab,X,"imag-part","number",1);return ab.imag_dash_part()},real_dash_part:function(ab){x(ab,X,"real-part","number",1);return ab.real_dash_part()},make_dash_polar:function(ad,ac){if(h.equal(ac,plt.types.Rational.ZERO)){return ad}var ab=h.multiply(ad,ac.cos());var ae=h.multiply(ad,ac.sin());return plt.types.Complex.makeInstance(ab,ae)},integer_question_:function(ab){return(o(ab))},make_dash_rectangular:function(ab,ac){return plt.types.Complex.makeInstance(ab,ac)},quotient:function(ab,ad){x(ab,o,"quotient","integer",1);x(ad,o,"quotient","integer",2);var ac=h.divide(ab,ad);if(plt.Kernel.positive_question_(ac)){return plt.types.Rational.makeInstance(ac.floor().toFixnum(),1)}else{return plt.types.Rational.makeInstance(ac.ceiling().toFixnum(),1)}},remainder:function(ab,ac){x(ab,X,"remainder","number",1);x(ac,X,"remainder","number",2);return plt.types.Rational.makeInstance(ab.toFixnum()%ac.toFixnum(),1)},real_question_:function(ab){return U(ab)},round:function(ab){x(ab,X,"round","number",1);return ab.round()},sgn:function(ab){x(ab,X,"sgn","number",1);if(this.positive_question_(ab).valueOf()){return plt.types.Rational.ONE}if(this.negative_question_(ab).valueOf()){return plt.types.Rational.NEGATIVE_ONE}else{return plt.types.Rational.ZERO}},boolean_equal__question_:function(ab,ac){x(ab,G,"boolean=?","boolean",1);x(ac,G,"boolean=?","boolean",2);return ab==ac},boolean_question_:function(ab){return G(ab)},false_question_:function(ab){return(ab==plt.types.Logic.FALSE)},not:function(ab){if(!ab||ab===plt.types.Logic.FALSE){return plt.types.Logic.TRUE}return plt.types.Logic.FALSE},symbol_dash__greaterthan_string:function(ab){x(ab,k,"symbol->string","symbol",1);return plt.types.String.makeInstance(ab.val)},symbol_equal__question_:function(ab,ac){x(ab,k,"symbol=?","symbol",1);x(ac,k,"symbol=?","symbol",2);return(ab.val==ac.val)},symbol_question_:function(ab){return k(ab)},append:function(ac){var ad;for(ad=0;ad<ac.length;ad++){I(ac[ad],"append",ad+1)}if(ac.length==0){return plt.types.Empty.EMPTY}var ab=ac[0];for(ad=1;ad<ac.length;ad++){ab=ab.append(ac[ad])}return ab},reverse:function(ab){I(ab,"reverse",1);var ac=plt.types.Empty.EMPTY;while(!ab.isEmpty()){ac=plt.types.Cons.makeInstance(ab.first(),ac);ab=ab.rest()}return ac},assq:function(ac,ab){I(ab,"assq",2);while(!ab.isEmpty()&&!plt.Kernel.eq_question_(ac,ab.first().first())){ab=ab.rest()}if(ab.isEmpty()){return plt.types.Logic.FALSE}else{return ab.first()}},caaar:function(ab){I(ab,"caaar",1);return ab.first().first().first()},caadr:function(ab){I(ab,"caadr",1);return ab.first().first().rest()},caar:function(ab){I(ab,"caar",1);return ab.first().first()},cadar:function(ab){I(ab,"cadar",1);return ab.first().rest().first()},cadddr:function(ab){I(ab,"cadddr",1);return ab.rest().rest().rest().first()},caddr:function(ab){I(ab,"caddr",1);return ab.rest().rest().first()},cadr:function(ab){I(ab,"cadr",1);return ab.rest().first()},car:function(ab){I(ab,"car",1);return ab.first()},cdaar:function(ab){I(ab,"cdaar",1);return ab.first().first().rest()},cdadr:function(ab){I(ab,"cdadr",1);return ab.rest().first().rest()},cdar:function(ab){I(ab,"cdar",1);return ab.first().rest()},cddar:function(ab){I(ab,"cddar",1);return ab.first().rest().rest()},cdddr:function(ab){I(ab,"cdddr",1);return ab.rest().rest().rest()},cddr:function(ab){I(ab,"cddr",1);return ab.rest().rest()},cdr:function(ab){I(ab,"cdr",1);return ab.rest()},null_question_:function(ab){return t(ab)},empty_question_:function(ab){return t(ab)},pair_question_:function(ab){return T(ab)},cons_question_:function(ab){return T(ab)},list_question_:function(ab){return b(ab)},sixth:function(ab){I(ab,"sixth",1);return ab.rest().rest().rest().rest().rest().first()},seventh:function(ab){I(ab,"seventh",1);return ab.rest().rest().rest().rest().rest().rest().first()},eighth:function(ab){I(ab,"eighth",1);return ab.rest().rest().rest().rest().rest().rest().rest().first()},set_dash_car_bang_:function(ab,ac){I(ab,"set-car!",1);ab.f=ac;return undefined},set_dash_cdr_bang_:function(ab,ac){I(ab,"set-cdr!",1);I(ac,"set-cdr!",2);ab.r=ac;return undefined},length:function(ab){I(ab,"length",1);var ac=plt.types.Rational.ZERO;for(;!ab.isEmpty();ab=ab.rest()){ac=plt.Kernel.add1(ac)}return ac},list:function(ab){var ac=plt.types.Empty.EMPTY;for(var ad=ab.length-1;ad>=0;ad--){ac=plt.types.Cons.makeInstance(ab[ad],ac)}return ac},list_star_:function(ab,ad){var ac=ad.pop();if(ac==undefined||!ac instanceof plt.types.Cons){throw new H("list*: "+ac+" not a list")}ad.unshift(ab);return plt.Kernel.append([plt.Kernel.list(ad),ac])},list_dash_ref:function(ac,ab){I(ac,"list-ref",1);x(ab,m,"list-ref","natural",2);var ad=plt.types.Rational.ZERO;for(;plt.Kernel._lessthan_(ad,ab,[]);ad=plt.Kernel.add1(ad)){if(ac.isEmpty()){throw new D("list-ref: index too small")}else{ac=ac.rest()}}return ac.first()},remove:function(ae,ac){I(ac,"member",2);var ad=ac;var af=new V();var ab=plt.types.Empty.EMPTY;while(!ac.isEmpty()){if(plt.Kernel.isEqual(ae,ac.first(),af).valueOf()){return plt.Kernel.append([plt.Kernel.reverse(ab),ac.rest()])}else{ab=plt.types.Cons.makeInstance(ac.first(),ab);ac=ac.rest()}}return ad},member:function(ac,ab){I(ab,"member",2);var ad=new V();while(!ab.isEmpty()){if(plt.Kernel.isEqual(ac,ab.first(),ad).valueOf()){return plt.types.Logic.TRUE}ab=ab.rest()}return plt.types.Logic.FALSE},memq:function(ac,ab){I(ab,"memq",2);while(!ab.isEmpty()){if(plt.Kernel.eq_question_(ac,ab.first()).valueOf()){return ab}ab=ab.rest()}return plt.types.Logic.FALSE},memv:function(ac,ab){I(ab,"memv",2);while(!ab.isEmpty()){if(plt.Kernel.eqv_question_(ac,ab.first()).valueOf()){return ab}ab=ab.rest()}return plt.types.Logic.FALSE},memf:function(ac,ab){x(ac,s,"memf","function",1);I(ab,"memf",2);while(!ab.isEmpty()){if(ac([ab.first()])){return ab}ab=ab.rest()}return plt.types.Logic.FALSE},compose:function(ab){return function(ac){var ae=ac;for(var ad=ab.length-1;ad>=0;ad--){ae=[ab[ad](ae)]}return ae[0]}},string_dash__greaterthan_number:function(ae){x(ae,j,"string->number","string",1);try{var ac=plt.reader.readSchemeExpressions(ae,"");if(h.equal(plt.Kernel.length(ac),plt.types.Rational.ONE)){var ab=stx_dash_e(ac.first());if(X(ab)){return ab}else{return plt.types.Logic.FALSE}}else{return plt.types.Logic.FALSE}}catch(ad){return plt.types.Logic.FALSE}},string_dash__greaterthan_symbol:function(ab){x(ab,j,"string->symbol","string",1);return plt.types.Symbol.makeInstance(ab)},string_dash__greaterthan_int:function(ab){x(ab,j,"string->int","string",1);return plt.types.Rational.makeInstance(ab.toString().charCodeAt(0),1)},string_dash_append:function(ab){g(ab,function(ac,ad){x(ac,j,"string-append","string",ad+1)});return plt.types.String.makeInstance(ab.join(""))},replicate:function(ae,ad){x(ae,m,"replicate","natural",1);x(ad,j,"replicate","string",2);var ab=[];for(var ac=0;ac<ae.toFixnum();ac++){ab.push(ad)}return plt.types.String.makeInstance(ab.join(""))},string_equal__question_:p(function(ab,ac){return ab==ac},"string=?"),string_lessthan__equal__question_:p(function(ab,ac){return ab<=ac},"string<=?"),string_lessthan__question_:p(function(ab,ac){return ab<ac},"string<?"),string_greaterthan__equal__question_:p(function(ab,ac){return ab>=ac},"string>=?"),string_greaterthan__question_:p(function(ab,ac){return ab>ac},"string>?"),string_dash_ci_equal__question_:p(function(ab,ac){return ab.toUpperCase()==ac.toUpperCase()},"string-ci=?"),string_dash_ci_lessthan__equal__question_:p(function(ab,ac){return ab.toUpperCase()<=ac.toUpperCase()},"string-ci<=?"),string_dash_ci_lessthan__question_:p(function(ab,ac){return ab.toUpperCase()<ac.toUpperCase()},"string-ci<?"),string_dash_ci_greaterthan__question_:p(function(ab,ac){return ab.toUpperCase()>ac.toUpperCase()},"string-ci>?"),string_dash_ci_greaterthan__equal__question_:p(function(ab,ac){return ab.toUpperCase()>=ac.toUpperCase()},"string-ci>=?"),string_dash_copy:function(ab){x(ab,j,"string-copy","string",1);return ab.substring(0,ab.length)},string_dash_length:function(ab){x(ab,j,"string-length","string",1);return plt.types.Rational.makeInstance(ab.length,1)},string_dash_ref:function(ac,ab){x(ac,j,"string-ref","string",1);x(ab,m,"string-ref","natural",2);if(ab.toFixnum()>=ac.length){throw new D("string-ref: index >= length")}return plt.types.Char.makeInstance(ac.charAt(ab.toFixnum()))},string_dash_ith:function(ac,ab){x(ac,j,"string-ith","string",1);x(ab,m,"string-ith","natural",2);if(ab.toFixnum()>=ac.length){throw new D("string-ith: index >= string length")}return plt.types.String.makeInstance(ac.substring(ab.toFixnum(),ab.toFixnum()+1))},int_dash__greaterthan_string:function(ab){x(ab,o,"int->string","integer",1);return plt.types.String.makeInstance(String.fromCharCode(ab.toFixnum()))},string_question_:function(ab){return j(ab)},substring:function(ad,ac,ab){x(ad,j,"substring","string",1);x(ac,m,"substring","natural",2);x(ab,m,"substring","natural",3);if(ac.toFixnum()>ab.toFixnum()){throw new D("substring: begin > end")}if(ab.toFixnum()>ad.length){throw new D("substring: end > length")}return String.makeInstance(ad.substring(ac.toFixnum(),ab.toFixnum()))},char_question_:function(ab){return q(ab)},char_dash__greaterthan_integer:function(ab){x(ab,q,"char->integer","char",1);var ac=new String(ab.val);return plt.types.Rational.makeInstance(ac.charCodeAt(0),1)},integer_dash__greaterthan_char:function(ac){x(ac,o,"integer->char","integer",1);var ab=String.fromCharCode(ac.toFixnum());return plt.types.Char.makeInstance(ab)},char_equal__question_:Z(function(ab,ac){return ab.val==ac.val},"char=?"),char_lessthan__question_:Z(function(ab,ac){return ab.val<ac.val},"char<?"),char_lessthan__equal__question_:Z(function(ab,ac){return ab.val<=ac.val},"char<=?"),char_greaterthan__question_:Z(function(ab,ac){return ab.val>ac.val},"char>?"),char_greaterthan__equal__question_:Z(function(ab,ac){return ab.val>=ac.val},"char>=?"),char_dash_ci_equal__question_:Z(function(ab,ac){return ab.val.toUpperCase()==ac.val.toUpperCase()},"char-ci=?"),char_dash_ci_lessthan__question_:Z(function(ab,ac){return ab.val.toUpperCase()<ac.val.toUpperCase()},"char-ci<?"),char_dash_ci_lessthan__equal__question_:Z(function(ab,ac){return ab.val.toUpperCase()<=ac.val.toUpperCase()},"char-ci<=?"),char_dash_ci_greaterthan__question_:Z(function(ab,ac){return ab.val.toUpperCase()>ac.val.toUpperCase()},"char-ci>?"),char_dash_ci_greaterthan__equal__question_:Z(function(ab,ac){return ab.val.toUpperCase()>=ac.val.toUpperCase()},"char-ci>=?"),char_dash_numeric_question_:function(ab){x(ab,q,"char-numeric?","char",1);var ac=ab.val;return(ac>="0"&&ac<="9")},char_dash_alphabetic_question_:function(ab){x(ab,q,"char-alphabetic?","char",1);var ac=ab.val;return u(ac)},char_dash_whitespace_question_:function(ab){x(ab,q,"char-whitespace?","char",1);var ac=ab.val;return K(ac)},char_dash_upper_dash_case_question_:function(ab){x(ab,q,"char-upper-case?","char",1);return u(ab.val)&&ab.val.toUpperCase()==ab.val},char_dash_lower_dash_case_question_:function(ab){x(ab,q,"char-lower-case?","char",1);return u(ab.val)&&ab.val.toLowerCase()==ab.val},char_dash_upcase:function(ab){x(ab,q,"char-upcase","char",1);return plt.types.Char.makeInstance(ab.val.toUpperCase())},char_dash_downcase:function(ab){x(ab,q,"char-downcase","char",1);return plt.types.Char.makeInstance(ab.val.toLowerCase())},list_dash__greaterthan_string:function(ab){S(ab,q,"list->string","char",1);var ac="";while(!ab.isEmpty()){ac+=ab.first().val;ab=ab.rest()}return plt.types.String.makeInstance(ac)},implode:function(ab){S(ab,j,"implode","string",1);var ac=[];while(!ab.isEmpty()){ac.push(ab.first().toString());ab=ab.rest()}return plt.types.String.makeInstance(ac.join(""))},string_dash_numeric_question_:function(ac){x(ac,j,"string-numeric?","string",1);for(var ab=0;ab<ac.length;ab++){if(ac[ab]<"0"||ac[ab]>"9"){return plt.types.Logic.FALSE}}return plt.types.Logic.TRUE},string_dash_alphabetic_question_:function(ab){x(ab,j,"string-alphabetic?","string",1);return u(ab)?plt.types.Logic.TRUE:plt.types.Logic.FALSE},string_dash_whitespace_question_:function(ab){x(ab,j,"string-whitespace?","string",1);return K(ab)?plt.types.Logic.TRUE:plt.types.Logic.FALSE},string_dash_upper_dash_case_question_:function(ab){x(ab,j,"string-upper-case?","string",1);return u(ab)&&ab.toUpperCase()==ab},string_dash_lower_dash_case_question_:function(ab){x(ab,j,"string-lower-case?","string",1);return u(ab)&&ab.toLowerCase()==ab},string:function(ad){g(ad,function(ae,af){x(this,q,"string","char",af+1)});var ab=[];for(var ac=0;ac<ad.length;ac++){ab.push(ad[ac].val)}return String.makeInstance(ab.join(""))},make_dash_string:function(af,ad){x(af,m,"make-string","natural",1);x(ad,q,"make-string","char",2);var ab="";var ae=ad.val;var ac=plt.types.Rational.ZERO;for(;plt.Kernel._lessthan_(ac,af,[]);ac=plt.Kernel.add1(ac)){ab+=ae}return plt.types.String.makeInstance(ab)},string_dash__greaterthan_list:function(ae){x(ae,j,"string->list","string",1);var ad=ae;var ab=plt.types.Empty.EMPTY;for(var ac=ad.length-1;ac>=0;ac--){ab=plt.types.Cons.makeInstance(plt.types.Char.makeInstance(ad.charAt(ac)),ab)}return ab},explode:function(ae){x(ae,j,"explode","string",1);var ad=ae;var ab=plt.types.Empty.EMPTY;for(var ac=ad.length-1;ac>=0;ac--){ab=plt.types.Cons.makeInstance(plt.types.String.makeInstance(ad.charAt(ac)),ab)}return ab}};plt.Kernel.isEqual=function(ab,ad,ac){if(ab===ad){return true}if(X(ab)&&X(ad)){return h.equal(ab,ad)}if(ab==undefined||ab==null){return(ad==undefined||ad==null)}if(typeof(ab)=="object"&&typeof(ad)=="object"&&ac.find(ab)===ac.find(ad)){return true}else{if(typeof(ab)=="object"&&typeof(ad)=="object"){ac.merge(ab,ad)}return ab.isEqual(ad,ac)}};plt.Kernel._dumpKernelSymbols=function(){var ab=plt.types.Empty.EMPTY;for(var ac in plt.Kernel){if(plt.Kernel.hasOwnProperty(ac)){ab=plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance(ac),ab)}}return ab};plt.Kernel.openInputStx=function(ab){throw new D("open-input-stx currently unsupported")};var e=function(){return new plt._Hashtable(function(ab){return plt.types.getEqHashCode(ab)},function(ab,ac){return ab===ac})};var aa=function(ab){this.hash=e();this._eqHashCode=plt.types.makeEqHashCode()};aa.prototype.toWrittenString=function(ab){return"<hash>"};aa.prototype.toDisplayedString=function(ab){return"<hash>"};aa.prototype.isEqual=function(ab,ae){if(ab==undefined||ab==null||(!(ab instanceof aa))){return false}if(this.hash.keys().length!=ab.hash.keys().length){return false}var ad=this.hash.keys();for(var ac=0;ac<ad.length;ac++){if(!(this.hash.get(ad[ac])===ab.hash.get(ad[ac]))){return false}}return true};var P=function(ab){this.hash=new plt._Hashtable(function(ac){return plt.Kernel.toWrittenString(ac)},function(ac,ad){return plt.Kernel.equal_question_(ac,ad)});this._eqHashCode=plt.types.makeEqHashCode()};P.prototype.toWrittenString=function(ab){return"<hash>"};P.prototype.toDisplayedString=function(ab){return"<hash>"};P.prototype.isEqual=function(ab,ae){if(ab==undefined||ab==null||(!(ab instanceof P))){return false}if(this.hash.keys().length!=ab.hash.keys().length){return false}var ad=this.hash.keys();for(var ac=0;ac<ad.length;ac++){if(!(plt.Kernel.isEqual(this.hash.get(ad[ac]),ab.hash.get(ad[ac]),ae))){return false}}return true};plt.Kernel.makeHashEq=function(){return new aa()};plt.Kernel.makeHash=function(){return new P()};plt.Kernel.hashSetBang=function(ac,ab,ad){x(ac,v,"hash-set!","hash",1);ac.hash.put(ab,ad);return undefined};plt.Kernel.hashRef=function(ac,ab,ad){x(ac,v,"hash-ref","hash",1);if(ac.hash.containsKey(ab)){return ac.hash.get(ab)}else{if(s(ad)){return ad([])}return ad}};plt.Kernel.hashRemoveBang=function(ac,ab){x(ac,v,"hash-remove!","hash",1);ac.hash.remove(ab);return undefined};plt.Kernel.hashMap=function(ac,af){x(ac,v,"hash-map","hash",1);var ab=plt.types.Empty.EMPTY;var ae=ac.hash.keys();for(var ad=0;ad<ae.length;ad++){var ag=ac.hash.get(ae[ad]);ab=plt.Kernel.cons(af([ae[ad],ag]),ab)}return ab};plt.Kernel.hashForEach=function(ac,af){x(ac,v,"hash-map","hash",1);var ab=plt.types.Empty.EMPTY;var ae=ac.hash.keys();for(var ad=0;ad<ae.length;ad++){var ag=ac.hash.get(ae[ad]);af([ae[ad],ag])}return undefined};var v=function(ab){return((ab!=null)&&(ab!=undefined)&&((ab instanceof aa)||(ab instanceof P)))};plt.Kernel.isHash=v;plt.Kernel.apply=function(ag,af,ab){var ae;var ad=[];x(ag,s,"apply","function",1);if(ab.length==0){ae=af;I(ae,"apply",2);while(!ae.isEmpty()){var ac=ae.first();ad.push(ac);ae=ae.rest()}}else{ae=ab.pop();I(ae,"apply",3);while(!ae.isEmpty()){var ac=ae.first();ad.push(ac);ae=ae.rest()}while(ab.length>0){ad.unshift(ab.pop())}ad.unshift(af)}if(W(ag,ad.length)){return ag(ad)}else{throw new D(plt.Kernel.format("~a: expects ~a, given ~a: ~s",[ag,d(ag),ad.length,plt.Kernel.list(ad)]))}};plt.Kernel.map=function(ae,af){x(ae,s,"map","function",1);g(af,function(ag,ah){I(ag,"map",ah+2)});var ad=plt.types.Empty.EMPTY;while(!af[0].isEmpty()){var ab=[];for(var ac=0;ac<af.length;ac++){ab.push(af[ac].first());af[ac]=af[ac].rest()}ad=plt.Kernel.cons(ae(ab),ad)}return plt.Kernel.reverse(ad)};plt.Kernel.for_dash_each=function(ad,ae){x(ad,s,"for-each","function",1);g(ae,function(af,ag){I(af,"for-each",ag+2)});while(!ae[0].isEmpty()){var ab=[];for(var ac=0;ac<ae.length;ac++){ab.push(ae[ac].first());ae[ac]=ae[ac].rest()}ad(ab)}return undefined};plt.Kernel.andmap=function(ad,ae){x(ad,s,"andmap","function",1);g(ae,function(af,ag){I(af,"andmap",ag+2)});while(!ae[0].isEmpty()){var ab=[];for(var ac=0;ac<ae.length;ac++){ab.push(ae[ac].first());ae[ac]=ae[ac].rest()}if(!ad(ab)){return plt.types.Logic.FALSE}}return plt.types.Logic.TRUE};plt.Kernel.ormap=function(ad,ae){x(ad,s,"ormap","function",1);g(ae,function(af,ag){I(af,"ormap",ag+2)});while(!ae[0].isEmpty()){var ab=[];for(var ac=0;ac<ae.length;ac++){ab.push(ae[ac].first());ae[ac]=ae[ac].rest()}if(ad(ab)){return plt.types.Logic.TRUE}}return plt.types.Logic.FALSE};plt.Kernel.filter=function(ac,ad){x(ac,s,"filter","function",1);x(ad,b,"filter","list",2);var ab=plt.types.Empty.EMPTY;while(!ad.isEmpty()){if(ac([ad.first()])){ab=plt.types.Cons.makeInstance(ad.first(),ab)}ad=ad.rest()}return plt.Kernel.reverse(ab)};plt.Kernel.foldl=function(af,ae,ag){x(af,s,"foldl","function",1);g(ag,function(ah,ai){x(ah,b,"foldl","list",ai+3)});var ab=ae;while(!ag[0].isEmpty()){var ac=[];for(var ad=0;ad<ag.length;ad++){ac.push(ag[ad].first());ag[ad]=ag[ad].rest()}ac.push(ab);ab=af(ac)}return ab};plt.Kernel.foldr=function(af,ae,ag){x(af,s,"foldr","function",1);g(ag,function(ah,ai){x(ah,b,"foldr","list",ai+3)});var ab=ae;for(var ad=0;ad<ag.length;ad++){ag[ad]=plt.Kernel.reverse(ag[ad])}while(!ag[0].isEmpty()){var ac=[];for(var ad=0;ad<ag.length;ad++){ac.push(ag[ad].first());ag[ad]=ag[ad].rest()}ac.push(ab);ab=af(ac)}return ab};plt.Kernel.argmin=function(ad,af){x(ad,s,"argmin","function",1);x(af,T,"argmin","nonempty list",2);var ac=af.first();var ab=ad([af.first()]).toFloat();af=af.rest();while(!af.isEmpty()){var ae=ad([af.first()]).toFloat();if(ae<ab){ac=af.first();ab=ae}af=af.rest()}return ac};plt.Kernel.argmax=function(ad,af){x(ad,s,"argmax","function",1);x(af,T,"argmax","nonempty list",2);var ac=af.first();var ab=ad([af.first()]).toFloat();af=af.rest();while(!af.isEmpty()){var ae=ad([af.first()]).toFloat();if(ae>ab){ac=af.first();ab=ae}af=af.rest()}return ac};plt.Kernel.sort=function(ac,ad){x(ac,b,"sort","list",1);x(ad,s,"sort","function",2);var ab=[];while(!ac.isEmpty()){ab.push(ac.first());ac=ac.rest()}ab.sort(function(ae,af){return ad([ae,af])?-1:1});return plt.Kernel.list(ab)};plt.Kernel.quicksort=plt.Kernel.sort;plt.Kernel.build_dash_list=function(ae,ad){x(ae,m,"build-list","natural",1);x(ad,s,"build-list","function",2);var ab=plt.types.Empty.EMPTY;for(var ac=0;ac<ae.toFixnum();ac++){ab=plt.Kernel.cons(ad([plt.types.Rational.makeInstance(ac,1)]),ab)}return plt.Kernel.reverse(ab)};plt.Kernel.build_dash_string=function(af,ae){x(af,m,"build-string","natural",1);x(ae,s,"build-string","function",2);var ad=[];for(var ab=0;ab<af.toFixnum();ab++){var ac=ae([plt.types.Rational.makeInstance(ab,1)]);ad.push(ac.val)}return plt.types.String.makeInstance(ad.join(""))};plt.Kernel.format=function(ad,ae){x(ad,j,"format","string",1);var ag=new RegExp("~[sSaAn%~]","g");var ac=ae;function af(ah){if(ah=="~~"){return"~"}else{if(ah=="~n"||ah=="~%"){return"\n"}else{if(ah=="~s"||ah=="~S"){if(ac.length==0){throw new D("format: fewer arguments passed than expected")}return plt.Kernel.toWrittenString(ac.shift())}else{if(ah=="~a"||ah=="~A"){if(ac.length==0){throw new D("format: fewer arguments passed than expected")}return plt.Kernel.toDisplayedString(ac.shift())}else{throw new D("Unimplemented format "+ah)}}}}}var ab=plt.types.String.makeInstance(ad.replace(ag,af));if(ac.length>0){throw new D("format: More arguments passed than expected")}return ab};plt.Kernel.string=function(ab){g(ab,function(ae,af){x(ae,q,"string","char",af+1)});var ad=[];for(var ac=0;ac<ab.length;ac++){ad.push(ab[ac].getValue())}return plt.types.String.makeInstance(ad.join(""))};plt.Kernel.procedure_question_=function(ab){return s(ab)};plt.Kernel.procedure_dash_arity=function(ab){x(ab,s,"procedure-arity","function",1);return ab.procedureArity};var W=function(ab,ac){if(T(ab.procedureArity)){return ac>=ab.procedureArity.rest().first().toFixnum()}else{return ac==ab.procedureArity.toFixnum()}};var d=function(ab){if(T(ab.procedureArity)){return("at least "+(ab.procedureArity.rest().first().toFixnum()==1)?"one argument":ab.procedureArity.rest().first().toFixnum()+" arguments")}else{return((ab.procedureArity.toFixnum()==1)?"one argument":ab.procedureArity.toFixnum()+" arguments")}};plt.Kernel.xml_dash__greaterthan_s_dash_exp=function(ad){x(ad,j,"xml->s-exp","string",1);if(ad.length==0){return plt.types.String.makeInstance("")}var ae;try{ae=new ActiveXObject("Microsoft.XMLDOM");ae.async="false";ae.loadXML(ad)}catch(af){var ah=new DOMParser();ae=ah.parseFromString(ad,"text/xml")}var ac=function(aj){var ai=plt.types.Empty.EMPTY;for(var ak=0;ak<aj.length;ak++){var al=plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance(aj.item(ak).nodeName),plt.types.Cons.makeInstance(aj.item(ak).nodeValue,plt.types.Empty.EMPTY));ai=plt.types.Cons.makeInstance(al,ai)}return plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance("@"),plt.Kernel.reverse(ai))};var ag=function(ak){if(ak.nodeType==Node.ELEMENT_NODE){var ai=plt.types.Empty.EMPTY;var al=ak.firstChild;while(al!=null){var aj=ag(al);if(j(aj)&&!ai.isEmpty()&&j(ai.first())){ai=plt.types.Cons.makeInstance(ai.first()+aj,ai.rest())}else{ai=plt.types.Cons.makeInstance(aj,ai)}al=al.nextSibling}ai=plt.Kernel.reverse(ai);ai=plt.types.Cons.makeInstance(ac(ak.attributes),ai);ai=plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance(ak.nodeName),ai);return ai}else{if(ak.nodeType==Node.TEXT_NODE){return ak.textContent}else{if(ak.nodeType==Node.CDATA_SECTION_NODE){return ak.data}else{return plt.types.Empty.EMPTY}}}};var ab=ag(ae.firstChild);return ab};plt.Kernel.split_dash_whitespace=function(ab){ab=ab.replace(/^\s+/,"");ab=ab.replace(/\s+$/,"");return plt.Kernel.list(ab.split(/\s+/))};plt.Kernel.box=function(ab){return new plt.types.Box(ab)};plt.Kernel.unbox=function(ab){x(ab,plt.Kernel.box_question_,"unbox","box",1);return ab.unbox()};plt.Kernel.box_question_=function(ab){return ab!=null&&ab!=undefined&&ab instanceof Box};plt.Kernel.set_dash_box_bang_=function(ac,ab){x(ac,plt.Kernel.box_question_,"set-box!","box",1);ac.set(ab);return undefined};var w=function(ab,ac){plt.types.Struct.call(this,"make-posn",[ab,ac]);this._eqHashCode=plt.types.makeEqHashCode()};w.prototype=A(plt.types.Struct.prototype);var C=function(ac,ab){return new w(ac,ab)};var Q=function(ab){x(ab,L,"posn-x","posn",1);return ab._fields[0]};var O=function(ab){x(ab,L,"posn-y","posn",1);return ab._fields[1]};var L=function(ab){return ab!=null&&ab!=undefined&&ab instanceof w};plt.Kernel.make_dash_posn=C;plt.Kernel.posn_question_=L;plt.Kernel.posn_dash_x=Q;plt.Kernel.posn_dash_y=O;plt.Kernel.error=function(ab,ac){x(ab,k,"error","symbol",1);x(ac,j,"error","string",2);throw new D(plt.Kernel.format("~a: ~a",[ab,ac]).toString())};plt.Kernel.syntax_dash_error=function(ac,ab){x(ac,j,"syntax-error","string",1);x(ab,N,"syntax-error","stx",2);throw new M(ac,ab)};plt.Kernel.toWrittenString=function(ab,ac){if(!ac){ac=e()}if(ab&&ac.containsKey(ab)){return"..."}if(ab==undefined||ab==null){return"<undefined>"}if(typeof(ab)=="string"){return ab.toWrittenString()}if(typeof(ab)!="object"&&typeof(ab)!="function"){return ab.toString()}if(typeof(ab.toWrittenString)!=="undefined"){return ab.toWrittenString(ac)}if(typeof(ab.toDisplayedString)!=="undefined"){return ab.toDisplayedString(ac)}else{return ab.toString()}};plt.Kernel.toDisplayedString=function(ab,ac){if(!ac){ac=e()}if(ab&&ac.containsKey(ab)){return"..."}if(ab==undefined||ab==null){return"<undefined>"}if(typeof(ab)=="string"){return ab.toDisplayedString()}if(typeof(ab)!="object"&&typeof(ab)!="function"){return ab.toString()}if(typeof(ab.toWrittenString)!=="undefined"){return ab.toWrittenString(ac)}if(typeof(ab.toDisplayedString)!=="undefined"){return ab.toDisplayedString(ac)}else{return ab.toString()}};plt.Kernel.toDomNode=function(ab,ac){if(!ac){ac=e()}if(ab&&ac.containsKey(ab)){return document.createTextNode("...")}if(ab==undefined||ab==null){var ad=document.createTextNode("<undefined>");return ad}if(typeof(ab)=="string"){var ad=document.createTextNode(ab.toWrittenString());return ad}if(typeof(ab)!="object"&&typeof(ab)!="function"){var ad=document.createTextNode(ab.toString());return ad}if(ab.nodeType){return ab}if(typeof(ab.toDomNode)!=="undefined"){return ab.toDomNode(ac)}if(typeof(ab.toWrittenString)!=="undefined"){var ad=document.createTextNode(plt.Kernel.toWrittenString(ab,ac));return ad}if(typeof(ab.toDisplayedString)!=="undefined"){var ad=document.createTextNode(plt.Kernel.toDisplayedString(ab,ac));return ad}else{var ad=document.createTextNode(ab.toString());return ad}};plt.Kernel.reportError=function(ac){var ab;if(typeof(console)!="undefined"&&typeof(console.log)!="undefined"){ab=(function(ae){console.log(ae)})}else{ab=(function(ae){alert(ae)})}if(typeof ac=="string"){ab(ac)}else{if(ac.msg){ab(ac.msg)}else{ab(ac.toString())}}if(plt.Kernel.lastLoc){var ad=plt.Kernel.lastLoc;if(typeof(ad)==="string"){ab("Error was raised around "+ad)}else{if(typeof(ad)!=="undefined"&&typeof(ad.line)!=="undefined"){ab("Error was raised around: "+plt.Kernel.locToString(ad))}}}};plt.Kernel._void_=function(ab){return undefined};plt.Kernel.build_dash_vector=function(ae,ac){x(ae,m,"build-vector","natural",1);x(ac,s,"build-vector","function",2);var ad=[];for(var ab=0;ab<ae.toFixnum();ab++){ad[ab]=ac([plt.types.Rational.makeInstance(ab,1)])}return plt.types.Vector.makeInstance(ae.toFixnum(),ad)};plt.Kernel.make_dash_vector=function(af,ad){x(af,m,"make-vector","natural",1);x(ad,function(ag){return ag.length==0||ag.length==1},"make-vector","at most two",2);var ac=af.toFixnum();var ae;var ab=plt.types.Vector.makeInstance(ac);if(ad.length==1){for(ae=0;ae<ac;ae++){ab.set(ae,ad[0])}}return ab};plt.Kernel.vector=function(ab){return plt.types.Vector.makeInstance(ab.length,ab)};plt.Kernel.vector_dash_length=function(ab){x(ab,c,"vector-length","vector",1);return plt.types.Rational.makeInstance(ab.length())};plt.Kernel.vector_dash_ref=function(ac,ab){x(ac,c,"vector-ref","vector",1);x(ab,function(ad){return m(ad)&&ad.toFixnum()<ac.length()},"vector-ref","natural < vector length",2);return ac.ref(ab.toFixnum())};plt.Kernel.vector_dash_set_bang_=function(ad,ac,ab){x(ad,c,"vector-set!","vector",1);x(ac,function(ae){return m(ae)&&ae.toFixnum()<ad.length()},"vector-set!","natural < vector length",2);return ad.set(ac.toFixnum(),ab)};plt.Kernel.vector_question_=function(ab){return c(ab)?plt.types.Logic.TRUE:plt.types.Logic.FALSE};plt.Kernel.check_dash_expect=function(ad,ab){var ae=ad([]);var ac=ab([]);if(!plt.Kernel.equal_question_(ae,ac)){throw new R(plt.Kernel.format("~s doesn't match the expected value ~s",[ae,ac]))}};plt.Kernel.check_dash_within=function(af,ac,ae){var ag=af([]);var ad=ac([]);var ab=ae([]);if(!plt.Kernel._equal__tilde_(ag,ad,ab)){throw new R(plt.Kernel.format("~s doesn't match the expected value ~s within ~s",[ag,ad,ab]))}};plt.Kernel.check_dash_error=function(ab,ad){var af=ad([]);var ae;try{ae=ab([])}catch(ac){if(!plt.Kernel.equal_question_(ac.msg,af)){throw new R(plt.Kernel.format("check-error encountered the error ~s instead of the expected error ~s.",[ac.msg,af]))}else{return}}throw new R(plt.Kernel.format("check-error expected the error ~s, but instead received the value ~s.",[af,ae]))};plt.Kernel.lastLoc=undefined;plt.Kernel.setLastLoc=function(ab){plt.Kernel.lastLoc=ab;return true};plt.Kernel.locToString=function(ab){if(typeof(ab)==="string"){return ab}return("offset="+ab.offset+", line="+ab.line+", span="+ab.span+", id="+ab.id)};plt.Kernel.printf=function(ab,ac){var ad=plt.Kernel.format(ab,ac);plt.Kernel.printHook(ad);return undefined};plt.Kernel.printHook=function(ab){};plt.Kernel.isSymbol=k;plt.Kernel.isChar=q;plt.Kernel.isString=j;plt.Kernel.isBoolean=G;plt.Kernel.isPair=T;plt.Kernel.isEmpty=t;plt.Kernel.isReal=U;plt.Kernel.isRational=E;plt.Kernel.isComplex=F;plt.Kernel.isInteger=o;plt.Kernel.isNatural=m;plt.Kernel.isNumber=X;plt.Kernel.isAlphabeticString=u;plt.Kernel.isWhitespaceString=K;plt.Kernel.isList=b;plt.Kernel.isVector=c;plt.Kernel.isFunction=s;plt.Kernel.arrayEach=g;plt.Kernel.check=x;plt.Kernel.checkList=I;plt.Kernel.checkListof=S;plt.Kernel.MobyError=y;plt.Kernel.MobyParserError=Y;plt.Kernel.MobySyntaxError=M;plt.Kernel.MobyTypeError=H;plt.Kernel.MobyRuntimeError=D;plt.Kernel.attachEvent=f;plt.Kernel.detachEvent=r;plt.Kernel.ordinalize=i})();if(typeof(plt)==="undefined"){var plt={}}plt.reader={};(function(){var e=function(k){return k.replace(/\\./g,function(m,n,l){switch(m){case"\\b":return"\b";case"\\f":return"\f";case"\\n":return"\n";case"\\r":return"\r";case"\\t":return"\t";case"\\v":return"\v";default:return m.substring(1)}})};var i=function(l){var k;var m=0;for(k=0;k<l.length;k++){if(l[k]=="\n"){m++}}return m};var b="[\\s\\(\\)\\[\\]\\{\\}\\\"\\,\\'\\`\\;]";var g="[^\\s\\(\\)\\[\\]\\{\\}\\\"\\,\\'\\`\\;]";var c=("(?:(?:\\d+\\/\\d+)|"+("(?:(?:\\d+\\.\\d+|\\d+\\.|\\.\\d+)(?:[eE][+\\-]?\\d+)?)|")+("(?:\\d+(?:[eE][+\\-]?\\d+)?))"));var d=[["whitespace",/^(\s+)/],["#;",/^([#][;])/],["comment",new RegExp("^([#][|](?:(?:\\|[^\\#])|[^\\|])*[|][#])")],["comment",/(^;[^\n]*)/],["(",/^(\(|\[|\{)/],[")",/^(\)|\]|\})/],["'",/^(\')/],["`",/^(`)/],[",@",/^(,@)/],[",",/^(,)/],["char",/^\#\\(newline|backspace)/],["char",/^\#\\(.)/],["string",new RegExp('^"((?:([^\\\\"]|(\\\\.)))*)"')],["symbol-or-number",new RegExp("^("+g+"+)")]];var j=[["complex",new RegExp("^((?:(?:\\#[ei])?[+\\-]?"+c+")?(?:[+\\-]"+c+")i$)")],["number",/^((?:\#[ei])?[+-]inf.0)$/],["number",/^((?:\#[ei])?[+-]nan.0)$/],["number",new RegExp("^((?:\\#[ei])?[+\\-]?"+c+"$)")]];var h=function(y,k){var n=0;var z=1;var t=[];if(!k){k=""}while(true){var q=false;for(var o=0;o<d.length;o++){var p=d[o][0];var r=d[o][1];var x=y.match(r);if(x!=null){var u=x[0];var l=x[1];if(p=="string"){l=e(l)}if(p=="symbol-or-number"){var w=false;for(var m=0;m<j.length;m++){var v=l.match(j[m][1]);if(v){t.push([j[m][0],l,new Loc(n,z,u.length,k)]);w=true;break}}if(!w){t.push(["symbol",l,new Loc(n,z,u.length,k)])}}else{if(p!="whitespace"&&p!="comment"){t.push([p,l,new Loc(n,z,u.length,k)])}}n=n+u.length;z=z+i(u);y=y.substring(u.length);q=true;break}}if(!q){break}}return[t,y]};var f=function(y,C){var B=make_dash_stx_colon_list;var E=make_dash_stx_colon_atom;var l=h(y,C);var z=l[0];var D=undefined;if(l[1].length>0){throw new plt.Kernel.MobyParserError("Error while tokenizing: the rest of the stream is: "+l[1],new Loc(y.length-l[1].length,i(y.substring(0,y.length-l[1].length)),l[1].length,C))}var v=plt.types.Symbol.makeInstance("quote");var k=plt.types.Symbol.makeInstance("quasiquote");var A=plt.types.Symbol.makeInstance("unquote");var m=plt.types.Symbol.makeInstance("unquote-splicing");var r=plt.types.Empty.EMPTY;var o=function(s){return(z.length>0&&z[0][0]==s)};var t=function(F){if(z.length==0){if(D){throw new plt.Kernel.MobyParserError("token stream exhausted while trying to eat "+F,D[2])}else{throw new plt.Kernel.MobyParserError("token stream exhausted while trying to eat "+F,new Loc(0,0,y.length,C))}}var s=z.shift();D=s;if(s[0]==F){return s}else{throw new plt.Kernel.MobyParserError("Unexpected token "+s,s[2])}};var q;var w;var n;n=function(F,H){var s=t(F);var G=q();return B(plt.Kernel.cons(E(H,s[2]),plt.Kernel.cons(G,r)),new Loc(s[2].offset,s[2].line,(G.loc.offset-s[2].offset+G.loc.span),C))};var p=function(s){switch(s){case"(":return")";case"[":return"]";case"{":return"}";default:throw new Error()}};var x=function(I,H){var F=I.match(/([+\-]?\d+)\/(\d+)/);if(I=="+inf.0"){return plt.types.FloatPoint.makeInstance(Number.POSITIVE_INFINITY)}else{if(I=="-inf.0"){return plt.types.FloatPoint.makeInstance(Number.NEGATIVE_INFINITY)}else{if(I=="+nan.0"||I=="-nan.0"){return plt.types.FloatPoint.makeInstance(Number.NaN)}else{if(I.match(/[eE]/)){return plt.types.FloatPoint.makeInstance(parseFloat(I))}else{if(I.match(/\./)){if(H){var s=I.match("^(.*)[.](.*)$");var G=plt.types.Rational.makeInstance(parseInt(s[1]||"0")||0);if(s[1].match(/-/)){return plt.types.NumberTower.subtract(G,plt.types.Rational.makeInstance(parseInt(s[2]),Math.pow(10,s[2].length)))}else{return plt.types.NumberTower.add(G,plt.types.Rational.makeInstance(parseInt(s[2]),Math.pow(10,s[2].length)))}}else{return plt.types.FloatPoint.makeInstance(parseFloat(I))}}else{if(F){if(H){return plt.types.Rational.makeInstance(parseInt(F[1]),parseInt(F[2]))}else{return plt.types.FloatPoint.makeInstance(parseInt(F[1])/parseInt(F[2]))}}else{if(H){return plt.types.Rational.makeInstance(parseInt(I),1)}else{return plt.types.FloatPoint.makeInstance(parseInt(I))}}}}}}}};q=function(){if(z.length==0){if(D){throw new plt.Kernel.MobyParserError("Parse broke with empty token stream",D[2])}else{throw new plt.Kernel.MobyParserError("Parse broke with empty token stream",new Loc(0,0,y.length,C))}}switch(z[0][0]){case"(":var P=t("(");var L=P[1];var J=p(P[1]);var R=w();if(z.length==0){throw new plt.Kernel.MobyParserError("Expected a "+J+" to close "+L,P[2])}else{if(z[0][1]!=J){throw new plt.Kernel.MobyParserError("Expected a "+J+" to close "+L,z[0][2])}}var N=t(")");return make_dash_stx_colon_list(R,new Loc(P[2].offset,P[2].line,N[2].offset-P[2].offset+1,C));case"#;":var I=t("#;");var H=q();return q();case"'":return n("'",v);case"`":return n("`",k);case",":return n(",",A);case",@":return n(",@",m);case"number":var Q=t("number");var O=Q[1].match(/^(\#[ie])(.+)$/);if(O){if(O[1]=="#i"){return E(x(O[2],false),Q[2])}else{return E(x(O[2],true),Q[2])}}else{return E(x(Q[1],true),Q[2])}case"complex":var Q=t("complex");var G=Q[1].match(/^((?:\#[ei])?)([+\-]?(?:\d+\/\d+|\d+\.\d+|\d+\.|\.\d+|\d+)?)([+\-](?:\d+\/\d+|\d+\.\d+|\d+\.|\.\d+|\d+))i/);var F=(G[1]=="#i"?false:true);var M=(G[2]!=""?x(G[2],F):plt.types.Rational.ZERO);var K=x(G[3],F);var s=E(plt.types.Complex.makeInstance(M,K));return s;case"string":var Q=t("string");return E(plt.types.String.makeInstance(Q[1]),Q[2]);case"char":var Q=t("char");if(Q[1]=="newline"){return E(plt.types.Char.makeInstance("\n"),Q[2])}else{if(Q[1]=="backspace"){return E(plt.types.Char.makeInstance(String.fromCharCode(8)),Q[2])}else{return E(plt.types.Char.makeInstance(Q[1]),Q[2])}}case"symbol":var Q=t("symbol");if(Q[1]=="."){throw new plt.Kernel.MobyParserError("Dotted pairs are not currently accepted by Moby",Q[2])}return E(plt.types.Symbol.makeInstance(Q[1]),Q[2]);default:throw new plt.Kernel.MobyParserError("Parse broke with token stream "+z,z[0][2])}};w=function(){var s=plt.types.Empty.EMPTY;while(true){if(z.length==0||o(")")){break}else{if(o("#;")){t("#;");var F=q()}else{var G=q();s=plt.types.Cons.makeInstance(G,s)}}}return plt.Kernel.reverse(s)};var u=w();if(z.length>0){throw new plt.Kernel.MobyParserError("More elements in the program's token stream than expected: the next unconsumed token is: "+z[0][1],z[0][2])}return u};plt.reader.tokenize=h;plt.reader.readSchemeExpressions=f}());var stx_colon_atom=function(b,c){plt.types.Struct.call(this,"make-stx:atom",[b,c]);this.datum=b;this.loc=c};stx_colon_atom.prototype=new plt.types.Struct();var make_dash_stx_colon_atom=function(d,b){var c=new stx_colon_atom(d,b);return c};var stx_colon_atom_dash_datum=function(b){if(stx_colon_atom_question_(b)){return b.datum}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx_colon_atom_dash_datum: not a stx:atom: ~s",[b]))}};var stx_colon_atom_dash_loc=function(b){if(stx_colon_atom_question_(b)){return b.loc}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx_colon_atom_dash_loc: not a stx:atom: ~s",[b]))}};var set_dash_stx_colon_atom_dash_datum_bang_=function(c,b){if(stx_colon_atom_question_(c)){c.datum=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_atom_dash_datum_bang_: not a stx:atom: ~s",[c]))}};var set_dash_stx_colon_atom_dash_loc_bang_=function(c,b){if(stx_colon_atom_question_(c)){c.loc=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_atom_dash_loc_bang_: not a stx:atom: ~s",[c]))}};var stx_colon_atom_question_=function(b){return(b!=null&&b!=undefined&&b instanceof stx_colon_atom)};var stx_colon_list=function(b,c){plt.types.Struct.call(this,"make-stx:list",[b,c]);this.elts=b;this.loc=c};stx_colon_list.prototype=new plt.types.Struct();var make_dash_stx_colon_list=function(c,b){return new stx_colon_list(c,b)};var stx_colon_list_dash_elts=function(b){if(stx_colon_list_question_(b)){return b.elts}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx_colon_list_dash_elts: not a stx:list: ~s",[b]))}};var stx_colon_list_dash_loc=function(b){if(stx_colon_list_question_(b)){return b.loc}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx_colon_list_dash_loc: not a stx:list: ~s",[b]))}};var set_dash_stx_colon_list_dash_elts_bang_=function(c,b){if(stx_colon_list_question_(c)){c.elts=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_list_dash_elts_bang_: not a stx:list: ~s",[c]))}};var set_dash_stx_colon_list_dash_loc_bang_=function(c,b){if(stx_colon_list_question_(c)){c.loc=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_list_dash_loc_bang_: not a stx:list: ~s",[c]))}};var stx_colon_list_question_=function(b){return b!=null&&b!=undefined&&b instanceof stx_colon_list};var Loc=function(d,b,c,e){plt.types.Struct.call(this,"make-Loc",[d,b,c,e]);this.offset=d;this.line=b;this.span=c;this.id=e};Loc.prototype=new plt.types.Struct();var make_dash_Loc=function(e,d,c,b){return new Loc(e,d,c,b)};var Loc_dash_offset=function(b){if(Loc_question_(b)){return b.offset}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc_dash_offset: not a Loc: ~s",[b]))}};var Loc_dash_line=function(b){if(Loc_question_(b)){return b.line}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc_dash_line: not a Loc: ~s",[b]))}};var Loc_dash_span=function(b){if(Loc_question_(b)){return b.span}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc_dash_span: not a Loc: ~s",[b]))}};var Loc_dash_id=function(b){if(Loc_question_(b)){return b.id}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc_dash_id: not a Loc: ~s",[b]))}};var set_dash_Loc_dash_offset_bang_=function(c,b){if(Loc_question_(c)){c.offset=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_offset_bang_: not a Loc: ~s",[c]))}};var set_dash_Loc_dash_line_bang_=function(c,b){if(Loc_question_(c)){c.line=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_line_bang_: not a Loc: ~s",[c]))}};var set_dash_Loc_dash_span_bang_=function(c,b){if(Loc_question_(c)){c.span=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_span_bang_: not a Loc: ~s",[c]))}};var set_dash_Loc_dash_id_bang_=function(c,b){if(Loc_question_(c)){c.id=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_id_bang_: not a Loc: ~s",[c]))}};var Loc_question_=function(b){return b!=null&&b!=undefined&&b instanceof Loc};var Loc_dash__greaterthan_string=function(b){return(plt.Kernel.setLastLoc('offset=284 line=14 span=154 id="stx.ss"')&&plt.Kernel.format((plt.types.String.makeInstance("offset=~a line=~a span=~a id=~s")),[(plt.Kernel.setLastLoc('offset=337 line=15 span=18 id="stx.ss"')&&Loc_dash_offset(b)),(plt.Kernel.setLastLoc('offset=367 line=16 span=16 id="stx.ss"')&&Loc_dash_line(b)),(plt.Kernel.setLastLoc('offset=395 line=17 span=16 id="stx.ss"')&&Loc_dash_span(b)),(plt.Kernel.setLastLoc('offset=423 line=18 span=14 id="stx.ss"')&&Loc_dash_id(b))]))};var stx_question_=function(b){return((plt.Kernel.setLastLoc('offset=489 line=23 span=13 id="stx.ss"')&&stx_colon_atom_question_(b))||(plt.Kernel.setLastLoc('offset=509 line=24 span=13 id="stx.ss"')&&stx_colon_list_question_(b)))};var stx_dash_e=function(b){return((plt.Kernel.setLastLoc('offset=635 line=31 span=17 id="stx.ss"')&&stx_colon_atom_question_(b))?(plt.Kernel.setLastLoc('offset=658 line=32 span=22 id="stx.ss"')&&stx_colon_atom_dash_datum(b)):((plt.Kernel.setLastLoc('offset=687 line=33 span=17 id="stx.ss"')&&stx_colon_list_question_(b))?(plt.Kernel.setLastLoc('offset=710 line=34 span=21 id="stx.ss"')&&stx_colon_list_dash_elts(b)):(plt.Kernel.setLastLoc('offset=624 line=30 span=109 id="stx.ss"')&&plt.Kernel.error((plt.types.Symbol.makeInstance("cond")),(plt.types.String.makeInstance('cond: fell out of cond around "offset=624 line=30 span=109 id=\\"stx.ss\\""'))))))};var stx_dash_loc=function(b){return((plt.Kernel.setLastLoc('offset=797 line=40 span=17 id="stx.ss"')&&stx_colon_atom_question_(b))?(plt.Kernel.setLastLoc('offset=820 line=41 span=20 id="stx.ss"')&&stx_colon_atom_dash_loc(b)):((plt.Kernel.setLastLoc('offset=847 line=42 span=17 id="stx.ss"')&&stx_colon_list_question_(b))?(plt.Kernel.setLastLoc('offset=870 line=43 span=20 id="stx.ss"')&&stx_colon_list_dash_loc(b)):(plt.Kernel.setLastLoc('offset=786 line=39 span=106 id="stx.ss"')&&plt.Kernel.error((plt.types.Symbol.makeInstance("cond")),(plt.types.String.makeInstance('cond: fell out of cond around "offset=786 line=39 span=106 id=\\"stx.ss\\""'))))))};var stx_dash_begins_dash_with_question_=function(c,b){return((plt.Kernel.setLastLoc('offset=991 line=49 span=17 id="stx.ss"')&&stx_colon_atom_question_(c))?plt.types.Logic.FALSE:((plt.Kernel.setLastLoc('offset=1023 line=51 span=17 id="stx.ss"')&&stx_colon_list_question_(c))?((plt.Kernel.setLastLoc('offset=1051 line=52 span=36 id="stx.ss"')&&plt.Kernel.not((plt.Kernel.setLastLoc('offset=1056 line=52 span=30 id="stx.ss"')&&plt.Kernel.empty_question_((plt.Kernel.setLastLoc('offset=1064 line=52 span=21 id="stx.ss"')&&stx_colon_list_dash_elts(c))))))&&(plt.Kernel.setLastLoc('offset=1098 line=53 span=47 id="stx.ss"')&&plt.Kernel.symbol_question_((plt.Kernel.setLastLoc('offset=1107 line=53 span=37 id="stx.ss"')&&stx_dash_e((plt.Kernel.setLastLoc('offset=1114 line=53 span=29 id="stx.ss"')&&plt.Kernel.first((plt.Kernel.setLastLoc('offset=1121 line=53 span=21 id="stx.ss"')&&stx_colon_list_dash_elts(c))))))))&&(plt.Kernel.setLastLoc('offset=1156 line=54 span=74 id="stx.ss"')&&plt.Kernel.symbol_equal__question_((plt.Kernel.setLastLoc('offset=1166 line=54 span=37 id="stx.ss"')&&stx_dash_e((plt.Kernel.setLastLoc('offset=1173 line=54 span=29 id="stx.ss"')&&plt.Kernel.first((plt.Kernel.setLastLoc('offset=1180 line=54 span=21 id="stx.ss"')&&stx_colon_list_dash_elts(c)))))),b))):(plt.Kernel.setLastLoc('offset=980 line=48 span=253 id="stx.ss"')&&plt.Kernel.error((plt.types.Symbol.makeInstance("cond")),(plt.types.String.makeInstance('cond: fell out of cond around "offset=980 line=48 span=253 id=\\"stx.ss\\""'))))))};var datum_dash__greaterthan_stx=function(b,c){return((plt.Kernel.setLastLoc('offset=1461 line=65 span=14 id="stx.ss"')&&stx_question_(b))?b:(((plt.Kernel.setLastLoc('offset=1499 line=67 span=15 id="stx.ss"')&&plt.Kernel.pair_question_(b))||(plt.Kernel.setLastLoc('offset=1515 line=67 span=16 id="stx.ss"')&&plt.Kernel.empty_question_(b)))?(plt.Kernel.setLastLoc('offset=1538 line=68 span=89 id="stx.ss"')&&make_dash_stx_colon_list((plt.Kernel.setLastLoc('offset=1553 line=68 span=47 id="stx.ss"')&&plt.Kernel.map(((function(){plt.Kernel.setLastLoc('offset=1558 line=68 span=33 id="stx.ss"');var d=(function(f){var e=f[0];return(plt.Kernel.setLastLoc('offset=1570 line=68 span=20 id="stx.ss"')&&datum_dash__greaterthan_stx(e,c))});d.toWrittenString=function(e){return"<function:lambda>"};d.toDisplayedString=d.toWrittenString;return d})()),[b])),c)):(plt.types.Logic.TRUE?(plt.Kernel.setLastLoc('offset=1644 line=71 span=29 id="stx.ss"')&&make_dash_stx_colon_atom(b,c)):(plt.Kernel.setLastLoc('offset=1450 line=64 span=225 id="stx.ss"')&&plt.Kernel.error((plt.types.Symbol.makeInstance("cond")),(plt.types.String.makeInstance('cond: fell out of cond around "offset=1450 line=64 span=225 id=\\"stx.ss\\""')))))))};var stx_dash__greaterthan_datum=function(b){return((plt.Kernel.setLastLoc('offset=1787 line=84 span=17 id="stx.ss"')&&stx_colon_atom_question_(b))?(plt.Kernel.setLastLoc('offset=1810 line=85 span=22 id="stx.ss"')&&stx_colon_atom_dash_datum(b)):((plt.Kernel.setLastLoc('offset=1839 line=86 span=17 id="stx.ss"')&&stx_colon_list_question_(b))?(plt.Kernel.setLastLoc('offset=1862 line=87 span=38 id="stx.ss"')&&plt.Kernel.map((function(){var c=(function(d){return stx_dash__greaterthan_datum(d[0])});c.toWrittenString=function(d){return"<function:stx->datum>"};c.toDisplayedString=function(d){return"<function:stx->datum>"};return c})(),[(plt.Kernel.setLastLoc('offset=1878 line=87 span=21 id="stx.ss"')&&stx_colon_list_dash_elts(b))])):(plt.Kernel.setLastLoc('offset=1776 line=83 span=126 id="stx.ss"')&&plt.Kernel.error((plt.types.Symbol.makeInstance("cond")),(plt.types.String.makeInstance('cond: fell out of cond around "offset=1776 line=83 span=126 id=\\"stx.ss\\""'))))))};(function(){((function(b){}))(arguments[0]||plt.Kernel.identity)})();if(typeof(plt)==="undefined"){var plt={}}plt.world=plt.world||{};plt.world.config=plt.world.config||{};(function(){var e=function(j,h){var g={};for(var i in j){if(j.hasOwnProperty(i)){g[i]=j[i]}}for(var i in h){if(h.hasOwnProperty(i)){g[i]=h[i]}}return g};var f=function(){this.vals={changeWorld:false,shutdownWorld:false,initialEffect:false,onRedraw:false,onDraw:false,onDrawCss:false,tickDelay:false,onTick:false,onTickEffect:false,onKey:false,onKeyEffect:false,onTilt:false,onTiltEffect:false,onAcceleration:false,onAccelerationEffect:false,onShake:false,onShakeEffect:false,onLocationChange:false,onLocationChangeEffect:false,onAnnounce:false,onAnnounceEffect:false,stopWhen:false,stopWhenEffect:false,connectToGame:false,onGameStart:false,onOpponentTurn:false,onMyTurn:false,afterMyTurn:false,onGameFinish:false}};f.prototype.lookup=function(g){plt.Kernel.check(g,plt.Kernel.isString,"WorldConfig.lookup","string",1);if(g in this.vals){return this.vals[g]}else{throw Error("Can't find "+g+" in the configuration")}};f.prototype.updateAll=function(h){var g=new f();g.vals=e(this.vals,h);return g};plt.world.config.WorldConfig=f;plt.world.config.CONFIG=new f();var d=function(){return make_dash_effect_colon_none()};var b=function(h,g){h.toWrittenString=function(i){return"("+g+" ...)"};h.toDisplayedString=h.toWrittenString;return h};plt.world.config.Kernel=plt.world.config.Kernel||{};plt.world.config.Kernel.onRedraw=function(g){plt.Kernel.check(g,plt.Kernel.isFunction,"on-redraw","function",1);return b(function(h){return h.updateAll({onRedraw:g})},"on-redraw")};plt.world.config.Kernel.initialEffect=function(g){return b(function(h){return h.updateAll({initialEffect:g})},"initial-effect")};plt.world.config.Kernel.onDraw=function(h,g){plt.Kernel.check(h,plt.Kernel.isFunction,"on-draw","function",1);plt.Kernel.check(g,plt.Kernel.isFunction,"on-draw","function",2);return b(function(i){return i.updateAll({onDraw:h,onDrawCss:g})},"on-draw")};plt.world.config.Kernel.onTick=function(g,h){plt.Kernel.check(g,plt.Kernel.isNumber,"on-tick","number",1);plt.Kernel.check(h,plt.Kernel.isFunction,"on-tick","function",2);return plt.world.config.Kernel.onTick_star_(g,h,function(i){return d()})};plt.world.config.Kernel.onTick_star_=function(g,i,h){plt.Kernel.check(g,plt.Kernel.isNumber,"on-tick!","number",1);plt.Kernel.check(i,plt.Kernel.isFunction,"on-tick!","function",2);plt.Kernel.check(h,plt.Kernel.isFunction,"on-tick!","function",3);return b(function(j){var k={onTick:i,onTickEffect:h,tickDelay:(plt.types.NumberTower.toFixnum(plt.types.NumberTower.multiply(plt.types.Rational.makeInstance(1000,1),g)))};return j.updateAll(k)},"on-tick")};plt.world.config.Kernel.onTilt=function(g){plt.Kernel.check(g,plt.Kernel.isFunction,"on-tilt","function",1);return plt.world.config.Kernel.onTilt_star_(g,function(i,h,k,j){return d()})};plt.world.config.Kernel.onTilt_star_=function(h,g){plt.Kernel.check(h,plt.Kernel.isFunction,"on-tilt!","function",1);plt.Kernel.check(g,plt.Kernel.isFunction,"on-tilt!","function",2);return b(function(i){return i.updateAll({onTilt:h,onTiltEffect:g})},"on-tilt")};plt.world.config.Kernel.onAnnounce=function(g){plt.Kernel.check(g,plt.Kernel.isFunction,"on-announce","function",1);return plt.world.config.Kernel.onAnnounce_star_(g,function(h,i,j){return d()})};plt.world.config.Kernel.onAnnounce_star_=function(h,g){plt.Kernel.check(h,plt.Kernel.isFunction,"on-announce!","function",1);plt.Kernel.check(g,plt.Kernel.isFunction,"on-announce!","function",2);return b(function(i){return i.updateAll({onAnnounce:h,onAnnounceEffect:g})},"on-announce")};plt.world.config.Kernel.onAcceleration=function(g){plt.Kernel.check(g,plt.Kernel.isFunction,"on-acceleration","function",1);return plt.world.config.Kernel.onAcceleration_star_(g,function(i,h,k,j){return d()})};plt.world.config.Kernel.onAcceleration_star_=function(h,g){plt.Kernel.check(h,plt.Kernel.isFunction,"on-acceleration!","function",1);plt.Kernel.check(g,plt.Kernel.isFunction,"on-acceleration!","function",2);return b(function(i){return i.updateAll({onAcceleration:h,onAccelerationEffect:g})},"on-acceleration")};plt.world.config.Kernel.onShake=function(g){plt.Kernel.check(g,plt.Kernel.isFunction,"on-shake","function",1);return plt.world.config.Kernel.onShake_star_(g,function(i,h,k,j){return d()})};plt.world.config.Kernel.onShake_star_=function(h,g){plt.Kernel.check(h,plt.Kernel.isFunction,"on-shake!","function",1);plt.Kernel.check(g,plt.Kernel.isFunction,"on-shake!","function",2);return b(function(i){return i.updateAll({onShake:h,onShakeEffect:g})},"on-shake")};plt.world.config.Kernel.onKey=function(g){plt.Kernel.check(g,plt.Kernel.isFunction,"on-key","function",1);return plt.world.config.Kernel.onKey_star_(g,function(h,i){return d()})};plt.world.config.Kernel.onKey_star_=function(h,g){plt.Kernel.check(h,plt.Kernel.isFunction,"on-key!","function",1);plt.Kernel.check(g,plt.Kernel.isFunction,"on-key!","function",2);return b(function(i){return i.updateAll({onKey:h,onKeyEffect:g})},"on-key")};plt.world.config.Kernel.onLocationChange=function(g){plt.Kernel.check(g,plt.Kernel.isFunction,"on-location-change","function",1);return plt.world.config.Kernel.onLocationChange_star_(g,function(h,j,i){return d()})};plt.world.config.Kernel.onLocationChange_star_=function(h,g){plt.Kernel.check(h,plt.Kernel.isFunction,"on-location-change!","function",1);plt.Kernel.check(g,plt.Kernel.isFunction,"on-location-change!","function",2);return b(function(i){return i.updateAll({onLocationChange:h,onLocationChangeEffect:g})},"on-location-change")};plt.world.config.Kernel.stopWhen=function(g){plt.Kernel.check(g,plt.Kernel.isFunction,"stop-when","function",1);return plt.world.config.Kernel.stopWhen_star_(g,function(h){return d()})};plt.world.config.Kernel.stopWhen_star_=function(h,g){plt.Kernel.check(h,plt.Kernel.isFunction,"stop-when!","function",1);plt.Kernel.check(g,plt.Kernel.isFunction,"stop-when!","function",2);return b(function(i){return i.updateAll({stopWhen:h,stopWhenEffect:g})},"stop-when")};var c=function(i,j,h,g){return function(k){plt.Kernel.check(k,j,g,h,1);return b(function(l){return l.updateAll({propertyName:k})},g)}};plt.world.config.Kernel.connect_dash_to_dash_game=c("connectToGame",plt.Kernel.isString,"string","connect-to-game");plt.world.config.Kernel.on_dash_game_dash_start=c("onGameStart",plt.Kernel.isFunction,"function","on-game-start");plt.world.config.Kernel.on_dash_opponent_dash_turn=c("onOpponentTurn",plt.Kernel.isFunction,"function","on-opponent-turn");plt.world.config.Kernel.on_dash_my_dash_turn=c("onMyTurn",plt.Kernel.isFunction,"function","on-my-turn");plt.world.config.Kernel.after_dash_my_dash_turn=c("afterMyTurn",plt.Kernel.isFunction,"function","after-my-turn");plt.world.config.Kernel.on_dash_game_dash_finish=c("onGameFinish",plt.Kernel.isFunction,"function","on-game-finish")})();if(typeof(plt)==="undefined"){var plt={}}plt.platform={};(function(){plt.platform.Platform={};var y=false;plt.platform.Platform.getInstance=function(){if(!y){y=new r()}return y};var r=function(){this.tiltService=m;this.shakeService=u();this.locationService=I();this.telephonyService=D();this.networkService=C();this.soundService=G();this.powerService=J();this.smsService=p();this.pickPlaylistService=i()};r.prototype.getTiltService=function(){return this.tiltService};r.prototype.getShakeService=function(){return this.shakeService};r.prototype.getLocationService=function(){return this.locationService};r.prototype.getTelephonyService=function(){return this.telephonyService};r.prototype.getNetworkService=function(){return this.networkService};r.prototype.getSoundService=function(){return this.soundService};r.prototype.getPowerService=function(){return this.powerService};r.prototype.getSmsService=function(){return this.smsService};r.prototype.getPickPlaylistService=function(){return this.pickPlaylistService};var I=function(){if(N()){return new l()}else{if(f()){return new x()}else{if(n()){return new k()}else{return new b()}}}};var N=function(){return(typeof Device!="undefined")};var f=function(){return(window.google&&window.google.gears&&true)};var n=function(){return(typeof(navigator)!="undefined"&&typeof(navigator.geolocation)!="undefined")};var K=function(W,V,U,T){var S=function(X){return X*Math.PI/180};var R=function(X,Y){return Math.pow(Math.sin((S(X)-S(Y))/2),2)};return 6378000*2*Math.asin(Math.min(1,Math.sqrt(R(W,U)+(Math.cos(S(W))*Math.cos(S(U))*R(V,T)))))};var x=function(){this.geo=google.gears.factory.create("beta.geolocation");this.listeners=[];this.currentPosition={latitude:0,longitude:0,altitude:0,bearing:0,speed:0};this.watchId=false};x.prototype.startService=function(){var R=this;function S(T){R.currentPosition.latitude=T.latitude;R.currentPosition.longitude=T.longitude;R.currentPosition.altitude=T.altitude;for(var U=0;U<R.listeners.length;U++){R.listeners[U](T.latitude,T.longitude)}}this.watchId=this.geo.watchPosition(S)};x.prototype.shutdownService=function(){this.geo.clearWatch(this.watchId)};x.prototype.addLocationChangeListener=function(R){this.listeners.push(R)};x.prototype.getLatitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.latitude)};x.prototype.getLongitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.longitude)};x.prototype.getAltitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.altitude)};x.prototype.getBearing=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.bearing)};x.prototype.getSpeed=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.speed)};x.prototype.getDistanceBetween=function(U,T,S,R){return plt.types.FloatPoint.makeInstance(K(U.toFloat(),T.toFloat(),S.toFloat(),R.toFloat()))};var b=function(){};b.prototype.startService=function(){};b.prototype.shutdownService=function(){};b.prototype.addLocationChangeListener=function(R){};b.prototype.getLatitude=function(){return plt.types.Rational.ZERO};b.prototype.getLongitude=function(){return plt.types.Rational.ZERO};b.prototype.getAltitude=function(){return plt.types.Rational.ZERO};b.prototype.getBearing=function(){return plt.types.Rational.ZERO};b.prototype.getSpeed=function(){return plt.types.Rational.ZERO};b.prototype.getDistanceBetween=function(U,T,S,R){return plt.types.FloatPoint.makeInstance(K(U.toFloat(),T.toFloat(),S.toFloat(),R.toFloat()))};var l=function(){this.locationListeners=[];this.currentPosition={latitude:0,longitude:0,atttitude:0,bearing:0,speed:0};this.watchId=false};l.prototype.startService=function(){var S=this;var R=function(V){S.currentPosition.latitude=parseFloat(V.latitude);S.currentPosition.longitude=parseFloat(V.longitude);for(var T=0;T<S.locationListeners.length;T++){var U=S.locationListeners[T];U(S.currentPosition.latitude,S.currentPosition.longitude)}};this.watchId=navigator.geolocation.watchPosition(R,function(){},{})};l.prototype.shutdownService=function(){navigator.geolocation.clearWatch(this.watchId)};l.prototype.addLocationChangeListener=function(R){this.locationListeners.push(R)};l.prototype.getLatitude=function(){return plt.types.FloatPoint.makeInstance(navigator.geolocation.lastPosition.latitude)};l.prototype.getLongitude=function(){return plt.types.FloatPoint.makeInstance(navigator.geolocation.lastPosition.longitude)};l.prototype.getAltitude=function(){return plt.types.Rational.ZERO};l.prototype.getBearing=function(){return plt.types.Rational.ZERO};l.prototype.getSpeed=function(){return plt.types.Rational.ZERO};l.prototype.getDistanceBetween=function(U,T,S,R){return plt.types.FloatPoint.makeInstance(navigator.geolocation.getDistanceBetween(U.toFloat(),T.toFloat(),S.toFloat(),R.toFloat()))};var k=function(){this.locationListeners=[];this.currentPosition={latitude:0,longitude:0,atttitude:0,bearing:0,speed:0};this.watchId=false};k.prototype.startService=function(){var T=this;var R=function(W){T.currentPosition.latitude=W.coords.latitude;T.currentPosition.longitude=W.coords.longitude;for(var U=0;U<T.locationListeners.length;U++){var V=T.locationListeners[U];V(W.coords.latitude,W.coords.longitude)}};var S=function(){};if(typeof navigator.geolocation!="undefined"&&typeof navigator.geolocation.getCurrentPosition!="undefined"){navigator.geolocation.watchPosition(R)}setTimeout(function(){navigator.geolocation.getCurrentPosition(R)},10000)};k.prototype.shutdownService=function(){if(this.watchId){navigator.geolocation.clearWatch(this.watchId);this.watchId=false}};k.prototype.addLocationChangeListener=function(R){this.locationListeners.push(R)};k.prototype.getLatitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.latitude)};k.prototype.getLongitude=function(){return plt.types.FloatPOint.makeInstance(this.currentPosition.longitude)};k.prototype.getAltitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.altitude)};k.prototype.getBearing=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.bearing)};k.prototype.getSpeed=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.speed)};k.prototype.getDistanceBetween=function(U,T,S,R){return plt.types.FloatPoint.makeInstance(K(U.toFloat(),T.toFloat(),S.toFloat(),R.toFloat()))};var j=[];var s=[];var q;var t;var F;var g=function(S){for(var R=0;R<j.length;R++){j[R](parseFloat(S.x),parseFloat(S.y),parseFloat(S.z))}};var z=function(R){for(var S=0;S<s.length;S++){s[S](parseFloat(R.azimuth),parseFloat(R.pitch),parseFloat(R.roll))}};var m={startService:function(){if(typeof Accelerometer!="undefined"){q=navigator.accelerometer.watchAcceleration(g,function(){});t=navigator.accelerometer.watchOrientation(z,function(){})}},shutdownService:function(){if(typeof Accelerometer!="undefined"){navigator.accelerometer.clearWatch(q);navigator.accelerometer.clearWatch(t);navigator.accelerometer.stopAllShakeWatches()}},addOrientationChangeListener:function(R){s.push(R)},addAccelerationChangeListener:function(R){j.push(R)}};var D=function(){if(N()){return new e()}else{return new A()}};var A=function(){};A.prototype.getSignalStrengths=function(){return plt.types.Empty.EMPTY};var e=function(){};e.prototype.getSignalStrengths=function(){var R=plt.types.Empty.EMPTY;var U=Device.getSignalStrengths();for(var S=0;S<U.length;S++){var T=U.get(S);R=plt.types.Cons.makeInstance(plt.Kernel.list([toNum(T.getId()),toNum(T.getStrength())]),R)}return R};var u=function(){if(N()){return new B()}else{return new H()}};var B=function(){this.listeners=[]};B.prototype.startService=function(){var S=this;var T=function(){for(var U=0;U<S.listeners.length;U++){S.listeners[U]()}};var R=function(){};this.shakeId=navigator.accelerometer.watchShake(T,R)};B.prototype.shutdownService=function(){navigator.accelerometer.stopAllShakeWatches()};B.prototype.addListener=function(R){this.listeners.push(R)};var H=function(){};H.prototype.startService=function(){};H.prototype.shutdownService=function(){};H.prototype.addListener=function(R){};var C=function(){if(N()){return new M()}else{return new Q()}};var M=function(){};M.prototype.getUrl=function(S){var R=Device.getUrl(S);return plt.types.String.makeInstance(""+R)};var Q=function(){};Q.prototype.getUrl=function(S){var T=new XMLHttpRequest();var R="/networkProxy?url="+encodeURIComponent(S);T.open("GET",R,false);T.send(null);return plt.types.String.makeInstance(T.responseText)};var G=function(){if(N()){return new P()}else{if(h()){return new d()}else{return new L()}}};var h=function(){return !!(document.createElement("audio").canPlayType)};var P=function(){};P.prototype.beep=function(){navigator.notification.beep(1)};P.prototype.playPlaylist=function(R){Device.playPlaylistRecord(R)};P.prototype.pausePlaylist=function(R){Device.pausePlaylistRecord(R)};P.prototype.stopPlaylist=function(R){Device.stopPlaylistRecord(R)};P.prototype.playSoundUrl=function(R){navigator.audio.playMusic(R)};P.prototype.playDtmfTone=function(S,R){navigator.audio.playDTMF(S);setTimeout(function(){navigator.audio.stopDTMF()},R)};P.prototype.stopSoundUrl=function(R){navigator.audio.stopMusic(R)};P.prototype.pauseSoundUrl=function(R){navigator.audio.pauseMusic(R)};P.prototype.setVolume=function(R){navigator.audio.setMusicVolume(R)};P.prototype.raiseVolume=function(){navigator.audio.increaseMusicVolume()};P.prototype.lowerVolume=function(){navigator.audio.decreaseMusicVolume()};var d=function(){this.cachedUrls={};this.baseVolume=100};d.prototype.beep=function(){alert("Beep")};d.prototype.playPlaylistSound=function(R){};d.prototype.pausePlaylistSound=function(R){};d.prototype.stopPlaylistSound=function(R){};d.prototype.playSoundUrl=function(R){if(!this.cachedUrls[R]){this.cachedUrls[R]=new Audio(R)}var S=this.cachedUrls[R];if(S.ended||S.paused){this.cachedUrls[R].play()}};d.prototype.playDtmfTone=function(S,R){alert("dtmf tone")};d.prototype.stopSoundUrl=function(R){if(this.cachedUrls[R]){this.cachedUrls[R].pause();this.cachedUrls[R].currentTime=0}};d.prototype.pauseSoundUrl=function(R){if(this.cachedUrls[R]){this.cachedUrls[R].pause()}};d.prototype.setVolume=function(S){for(var R in this.cachedUrls){this.cachedUrls[R].volume=S/100}this.baseVolume=S};d.prototype.raiseVolume=function(){this.setVolume(Math.min(this.baseVolume+5,100))};d.prototype.lowerVolume=function(){this.setVolume(Math.max(this.baseVolume-5,0))};var L=function(){};L.prototype.beep=function(){alert("Beep")};L.prototype.playPlaylistSound=function(R){};L.prototype.pausePlaylistSound=function(R){};L.prototype.stopPlaylistSound=function(R){};L.prototype.playSoundUrl=function(R){plt.Kernel.reportError("sound url "+R+" should play, but I don't have sound support.")};L.prototype.playDtmfTone=function(S,R){plt.Kernel.reportError("DTMF tone should play, but I don't have DTMF support")};L.prototype.stopSoundUrl=function(R){};L.prototype.pauseSoundUrl=function(R){};L.prototype.setVolume=function(R){};L.prototype.raiseVolume=function(){};L.prototype.lowerVolume=function(){};var J=function(){if(N()){return new c()}else{return new O()}};var c=function(){this.currentLockFlags=-1};c.prototype.setWakeLock=function(R){if(R!=this.currentLockFlags){navigator.power.setWakeLock(R);this.currentLockFlags=R}};c.prototype.releaseWakeLock=function(){if(this.currentLockFlags!=-1){navigator.power.releaseWakeLock();this.currentLockFlags=-1}};var O=function(){};O.prototype.setWakeLock=function(R){};O.prototype.releaseWakeLock=function(){};var p=function(){if(N()){return new E()}else{return new w()}};var E=function(){};E.prototype.send=function(R,S){navigator.sms.send(R,S)};var w=function(){};w.prototype.send=function(R,S){alert("SMS should be sent to "+R+" with the content: "+S)};var i=function(){if(N()){return new v()}else{return new o()}};var v=function(){};v.prototype.pickPlaylist=function(S){var R=function(T){S(T)};navigator.dialogPickers.pickPlaylist(R)};var o=function(){};o.prototype.pickPlaylist=function(R){alert("pick playlist currently unavailable")}})();if(typeof(plt)==="undefined"){var plt={}}plt.lib={};(function(){plt.lib.Telephony={};plt.lib.Telephony.getSignalStrengths=function(){return plt.platform.Platform.getInstance().getTelephonyService().getSignalStrengths()};plt.lib.Location={};plt.lib.Location.getLatitude=function(){return plt.platform.Platform.getInstance().getLocationService().getLatitude()};plt.lib.Location.getLongitude=function(){return plt.platform.Platform.getInstance().getLocationService().getLongitude()};plt.lib.Location.getAttitude=function(){return plt.platform.Platform.getInstance().getLocationService().getAttitude()};plt.lib.Location.getBearing=function(){return plt.platform.Platform.getInstance().getLocationService().getBearing()};plt.lib.Location.getSpeed=function(){return plt.platform.Platform.getInstance().getLocationService().getSpeed()};plt.lib.Location.getDistanceBetween=function(e,d,c,b){return plt.platform.Platform.getInstance().getLocationService().getDistanceBetween(e,d,c,b)};plt.lib.Net={};plt.lib.Net.getUrl=function(b){return plt.platform.Platform.getInstance().getNetworkService().getUrl(b)}}());var effect_colon_none=function(){plt.types.Struct.call(this,"make-effect:none",[])};effect_colon_none.prototype=new plt.types.Struct();var make_dash_effect_colon_none=function(){return new effect_colon_none()};var effect_colon_none_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_none};var effect_colon_beep=function(){plt.types.Struct.call(this,"make-effect:beep",[])};effect_colon_beep.prototype=new plt.types.Struct();var make_dash_effect_colon_beep=function(){return new effect_colon_beep()};var effect_colon_beep_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_beep};var effect_colon_play_dash_dtmf_dash_tone=function(c,b){plt.types.Struct.call(this,"make-effect:play-dtmf-tone",[c,b]);this.tone=c;this.duration=b};effect_colon_play_dash_dtmf_dash_tone.prototype=new plt.types.Struct();var make_dash_effect_colon_play_dash_dtmf_dash_tone=function(c,b){return new effect_colon_play_dash_dtmf_dash_tone(c,b)};var effect_colon_play_dash_dtmf_dash_tone_dash_tone=function(b){if(effect_colon_play_dash_dtmf_dash_tone_question_(b)){return b.tone}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:play-dtmf-tone-tone: not a effect:play-dtmf-tone: ~s",[b]))}};var effect_colon_play_dash_dtmf_dash_tone_dash_duration=function(b){if(effect_colon_play_dash_dtmf_dash_tone_question_(b)){return b.duration}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:play-dtmf-tone-duration: not a effect:play-dtmf-tone: ~s",[b]))}};var set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_tone_bang_=function(c,b){if(effect_colon_play_dash_dtmf_dash_tone_question_(c)){c.tone=b;c._fields[0]=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_tone_bang_: not a effect:play-dtmf-tone: ~s",[c]))}};var set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_duration_bang_=function(c,b){if(effect_colon_play_dash_dtmf_dash_tone_question_(c)){c.duration=b;c._fields[1]=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_duration_bang_: not a effect:play-dtmf-tone: ~s",[c]))}};var effect_colon_play_dash_dtmf_dash_tone_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_play_dash_dtmf_dash_tone};var effect_colon_send_dash_sms=function(b,c){plt.types.Struct.call(this,"make-effect:send-sms",[b,c]);this.address=b;this.msg=c};effect_colon_send_dash_sms.prototype=new plt.types.Struct();var make_dash_effect_colon_send_dash_sms=function(c,b){return new effect_colon_send_dash_sms(c,b)};var effect_colon_send_dash_sms_dash_address=function(b){if(effect_colon_send_dash_sms_question_(b)){return b.address}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:send-sms-address: not a effect:send-sms: ~s",[b]))}};var effect_colon_send_dash_sms_dash_msg=function(b){if(effect_colon_send_dash_sms_question_(b)){return b.msg}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:send-sms-msg: not a effect:send-sms: ~s",[b]))}};var set_dash_effect_colon_send_dash_sms_dash_address_bang_=function(c,b){if(effect_colon_send_dash_sms_question_(c)){c.address=b;c._fields[0]=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_send_dash_sms_dash_address_bang_: not a effect:send-sms: ~s",[c]))}};var set_dash_effect_colon_send_dash_sms_dash_msg_bang_=function(c,b){if(effect_colon_send_dash_sms_question_(c)){c.msg=b;c._fields[1]=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_send_dash_sms_dash_msg_bang_: not a effect:send-sms: ~s",[c]))}};var effect_colon_send_dash_sms_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_send_dash_sms};var playlist_dash_sound=function(b){plt.types.Struct.call(this,"make-playlist-sound",[b]);this.playlist=b};playlist_dash_sound.prototype=new plt.types.Struct();var make_dash_playlist_dash_sound=function(b){return new playlist_dash_sound(b)};var playlist_dash_sound_dash_playlist=function(b){if(playlist_dash_sound_question_(b)){return b.playlist}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("playlist-sound-playlist: not a playlist-sound: ~s",[b]))}};var set_dash_playlist_dash_sound_dash_playlist_bang_=function(c,b){if(playlist_dash_sound_question_(c)){c.playlist=b;c._fields[0]=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_playlist_dash_sound_dash_playlist_bang_: not a playlist-sound: ~s",[c]))}};var playlist_dash_sound_question_=function(b){return b!=null&&b!=undefined&&b instanceof playlist_dash_sound};var sound_question_=function(b){return((plt.Kernel.setLastLoc({offset:417,line:19,span:11,id:"effect-struct.ss"})&&plt.Kernel.string_question_(b))||(plt.Kernel.setLastLoc({offset:435,line:20,span:19,id:"effect-struct.ss"})&&playlist_dash_sound_question_(b)))};var effect_colon_play_dash_sound=function(b){plt.types.Struct.call(this,"make-effect:play-sound",[b]);this.sound=b};effect_colon_play_dash_sound.prototype=new plt.types.Struct();var make_dash_effect_colon_play_dash_sound=function(b){return new effect_colon_play_dash_sound(b)};var effect_colon_play_dash_sound_dash_sound=function(b){if(effect_colon_play_dash_sound_question_(b)){return b.sound}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:play-sound-sound: not a effect:play-sound: ~s",[b]))}};var set_dash_effect_colon_play_dash_sound_dash_sound_bang_=function(c,b){if(effect_colon_play_dash_sound_question_(c)){c.sound=b;c._fields[0]=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_play_dash_sound_dash_sound_bang_: not a effect:play-sound: ~s",[c]))}};var effect_colon_play_dash_sound_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_play_dash_sound};var effect_colon_pause_dash_sound=function(b){plt.types.Struct.call(this,"make-effect:pause-sound",[b]);this.sound=b};effect_colon_pause_dash_sound.prototype=new plt.types.Struct();var make_dash_effect_colon_pause_dash_sound=function(b){return new effect_colon_pause_dash_sound(b)};var effect_colon_pause_dash_sound_dash_sound=function(b){if(effect_colon_pause_dash_sound_question_(b)){return b.sound}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pause-sound-sound: not a effect:pause-sound: ~s",[b]))}};var set_dash_effect_colon_pause_dash_sound_dash_sound_bang_=function(c,b){if(effect_colon_pause_dash_sound_question_(c)){c.sound=b;c._fields[0]=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pause_dash_sound_dash_sound_bang_: not a effect:pause-sound: ~s",[c]))}};var effect_colon_pause_dash_sound_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_pause_dash_sound};var effect_colon_stop_dash_sound=function(b){plt.types.Struct.call(this,"make-effect:stop-sound",[b]);this.sound=b};effect_colon_stop_dash_sound.prototype=new plt.types.Struct();var make_dash_effect_colon_stop_dash_sound=function(b){return new effect_colon_stop_dash_sound(b)};var effect_colon_stop_dash_sound_dash_sound=function(b){if(effect_colon_stop_dash_sound_question_(b)){return b.sound}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:stop-sound-sound: not a effect:stop-sound: ~s",[b]))}};var set_dash_effect_colon_stop_dash_sound_dash_sound_bang_=function(c,b){if(effect_colon_stop_dash_sound_question_(c)){c.sound=b;c._fields[0]=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_stop_dash_sound_dash_sound_bang_: not a effect:stop-sound: ~s",[c]))}};var effect_colon_stop_dash_sound_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_stop_dash_sound};var effect_colon_set_dash_sound_dash_volume=function(b){plt.types.Struct.call(this,"make-effect:set-sound-volume",[b]);this.volume=b};effect_colon_set_dash_sound_dash_volume.prototype=new plt.types.Struct();var make_dash_effect_colon_set_dash_sound_dash_volume=function(b){return new effect_colon_set_dash_sound_dash_volume(b)};var effect_colon_set_dash_sound_dash_volume_dash_volume=function(b){if(effect_colon_set_dash_sound_dash_volume_question_(b)){return b.volume}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:set-sound-volume-volume: not a effect:set-sound-volume: ~s",[b]))}};var set_dash_effect_colon_set_dash_sound_dash_volume_dash_volume_bang_=function(c,b){if(effect_colon_set_dash_sound_dash_volume_question_(c)){c.volume=b;c._fields[0]=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_set_dash_sound_dash_volume_dash_volume_bang_: not a effect:set-sound-volume: ~s",[c]))}};var effect_colon_set_dash_sound_dash_volume_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_set_dash_sound_dash_volume};var effect_colon_raise_dash_sound_dash_volume=function(){plt.types.Struct.call(this,"make-effect:raise-sound-volume",[])};effect_colon_raise_dash_sound_dash_volume.prototype=new plt.types.Struct();var make_dash_effect_colon_raise_dash_sound_dash_volume=function(){return new effect_colon_raise_dash_sound_dash_volume()};var effect_colon_raise_dash_sound_dash_volume_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_raise_dash_sound_dash_volume};var effect_colon_lower_dash_sound_dash_volume=function(){plt.types.Struct.call(this,"make-effect:lower-sound-volume",[])};effect_colon_lower_dash_sound_dash_volume.prototype=new plt.types.Struct();var make_dash_effect_colon_lower_dash_sound_dash_volume=function(){return new effect_colon_lower_dash_sound_dash_volume()};var effect_colon_lower_dash_sound_dash_volume_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_lower_dash_sound_dash_volume};var effect_colon_set_dash_wake_dash_lock=function(b){plt.types.Struct.call(this,"make-effect:set-wake-lock",[b]);this.locks=b};effect_colon_set_dash_wake_dash_lock.prototype=new plt.types.Struct();var make_dash_effect_colon_set_dash_wake_dash_lock=function(b){return new effect_colon_set_dash_wake_dash_lock(b)};var effect_colon_set_dash_wake_dash_lock_dash_locks=function(b){if(effect_colon_set_dash_wake_dash_lock_question_(b)){return b.locks}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:set-wake-lock-locks: not a effect:set-wake-lock: ~s",[b]))}};var set_dash_effect_colon_set_dash_wake_dash_lock_dash_locks_bang_=function(c,b){if(effect_colon_set_dash_wake_dash_lock_question_(c)){c.locks=b;c._fields[0]=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_set_dash_wake_dash_lock_dash_locks_bang_: not a effect:set-wake-lock: ~s",[c]))}};var effect_colon_set_dash_wake_dash_lock_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_set_dash_wake_dash_lock};var effect_colon_release_dash_wake_dash_lock=function(){plt.types.Struct.call(this,"make-effect:release-wake-lock",[])};effect_colon_release_dash_wake_dash_lock.prototype=new plt.types.Struct();var make_dash_effect_colon_release_dash_wake_dash_lock=function(){return new effect_colon_release_dash_wake_dash_lock()};var effect_colon_release_dash_wake_dash_lock_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_release_dash_wake_dash_lock};var effect_colon_pick_dash_playlist=function(b){plt.types.Struct.call(this,"make-effect:pick-playlist",[b]);this.update_dash_f=b};effect_colon_pick_dash_playlist.prototype=new plt.types.Struct();var make_dash_effect_colon_pick_dash_playlist=function(b){return new effect_colon_pick_dash_playlist(b)};var effect_colon_pick_dash_playlist_dash_update_dash_f=function(b){if(effect_colon_pick_dash_playlist_question_(b)){return b.update_dash_f}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pick-playlist-update-f: not a effect:pick-playlist: ~s",[b]))}};var set_dash_effect_colon_pick_dash_playlist_dash_update_dash_f_bang_=function(c,b){if(effect_colon_pick_dash_playlist_question_(c)){c.update_dash_f=b;c._fields[0]=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pick_dash_playlist_dash_update_dash_f_bang_: not a effect:pick-playlist: ~s",[c]))}};var effect_colon_pick_dash_playlist_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_pick_dash_playlist};var effect_colon_pick_dash_random=function(c,b){plt.types.Struct.call(this,"make-effect:pick-random",[c,b]);this.n=c;this.update_dash_f=b};effect_colon_pick_dash_random.prototype=new plt.types.Struct();var make_dash_effect_colon_pick_dash_random=function(c,b){return new effect_colon_pick_dash_random(c,b)};var effect_colon_pick_dash_random_dash_n=function(b){if(effect_colon_pick_dash_random_question_(b)){return b.n}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pick-random-n: not a effect:pick-random: ~s",[b]))}};var effect_colon_pick_dash_random_dash_update_dash_f=function(b){if(effect_colon_pick_dash_random_question_(b)){return b.update_dash_f}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pick-random-update-f: not a effect:pick-random: ~s",[b]))}};var set_dash_effect_colon_pick_dash_random_dash_n_bang_=function(c,b){if(effect_colon_pick_dash_random_question_(c)){c.n=b;c._fields[0]=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pick_dash_random_dash_n_bang_: not a effect:pick-random: ~s",[c]))}};var set_dash_effect_colon_pick_dash_random_dash_update_dash_f_bang_=function(c,b){if(effect_colon_pick_dash_random_question_(c)){c.update_dash_f=b;c._fields[1]=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pick_dash_random_dash_update_dash_f_bang_: not a effect:pick-random: ~s",[c]))}};var effect_colon_pick_dash_random_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_pick_dash_random};var effect_question_=function(b){return((plt.Kernel.setLastLoc({offset:1069,line:43,span:20,id:"effect-struct.ss"})&&effect_colon_none_question_(b))||(plt.Kernel.setLastLoc({offset:1096,line:44,span:20,id:"effect-struct.ss"})&&effect_colon_beep_question_(b))||(plt.Kernel.setLastLoc({offset:1123,line:45,span:30,id:"effect-struct.ss"})&&effect_colon_play_dash_dtmf_dash_tone_question_(b))||(plt.Kernel.setLastLoc({offset:1160,line:46,span:24,id:"effect-struct.ss"})&&effect_colon_send_dash_sms_question_(b))||(plt.Kernel.setLastLoc({offset:1191,line:47,span:26,id:"effect-struct.ss"})&&effect_colon_play_dash_sound_question_(b))||(plt.Kernel.setLastLoc({offset:1224,line:48,span:27,id:"effect-struct.ss"})&&effect_colon_pause_dash_sound_question_(b))||(plt.Kernel.setLastLoc({offset:1258,line:49,span:26,id:"effect-struct.ss"})&&effect_colon_stop_dash_sound_question_(b))||(plt.Kernel.setLastLoc({offset:1291,line:50,span:32,id:"effect-struct.ss"})&&effect_colon_set_dash_sound_dash_volume_question_(b))||(plt.Kernel.setLastLoc({offset:1330,line:51,span:34,id:"effect-struct.ss"})&&effect_colon_raise_dash_sound_dash_volume_question_(b))||(plt.Kernel.setLastLoc({offset:1371,line:52,span:34,id:"effect-struct.ss"})&&effect_colon_lower_dash_sound_dash_volume_question_(b))||(plt.Kernel.setLastLoc({offset:1412,line:53,span:29,id:"effect-struct.ss"})&&effect_colon_set_dash_wake_dash_lock_question_(b))||(plt.Kernel.setLastLoc({offset:1448,line:54,span:33,id:"effect-struct.ss"})&&effect_colon_release_dash_wake_dash_lock_question_(b))||(plt.Kernel.setLastLoc({offset:1488,line:55,span:29,id:"effect-struct.ss"})&&effect_colon_pick_dash_playlist_question_(b))||(plt.Kernel.setLastLoc({offset:1524,line:56,span:27,id:"effect-struct.ss"})&&effect_colon_pick_dash_random_question_(b)))};(function(){((function(b){}))(arguments[0]||plt.Kernel.identity)})();if(typeof(plt)==="undefined"){var plt={}}plt.world=plt.world||{};plt.world.Kernel=plt.world.Kernel||{};(function(){var p;var x=[];var e;var o=false;var q=function(D){var C=function(){};C.prototype=D;return new C()};var w=function(D){var E=function(){};E.prototype=D;var F=new E();for(property in D){if(D.hasOwnProperty(property)){F[property]=D[property]}}return F};var v=[];plt.world.Kernel.addAnnounceListener=function(C){v.push(C)};plt.world.Kernel.removeAnnounceListener=function(D){var C=v.indexOf(D);if(C!=-1){v.splice(C,1)}};plt.world.Kernel.announce=function(C,E){for(var D=0;D<v.length;D++){try{v[D](C,E)}catch(F){}}};var t=function(C){p=C;g()};plt.world.Kernel.updateWorld=function(D){var C=D(p);t(C)};plt.world.Kernel.shutdownWorld=function(){e=true};var g=function(){var C;for(C=0;C<x.length;C++){x[C](p)}};var A=function(C){x.push(C)};var i=function(E){var C=E.charCode||E.keyCode;var D;if(C==37){D="left"}else{if(C==38){D="up"}else{if(C==39){D="right"}else{if(C==40){D="down"}else{D=String.fromCharCode(C)}}}}return D};var h=function(){if(o){clearInterval(o);o=false}e=false;x=[]};var y=function(D,C){if(window.document.getElementById("canvas")!=undefined){return window}var E=window.open("big-bang.html","big-bang");if(E==null){throw new Error("Error: Not allowed to create a new window.")}return E};plt.world.Kernel.bigBang=function(D,J,C,G){plt.Kernel.check(D,plt.Kernel.isNumber,"big-bang","number",1);plt.Kernel.check(J,plt.Kernel.isNumber,"big-bang","number",2);plt.Kernel.arrayEach(args,function(L,M){plt.Kernel.check(L,plt.Kernel.isFunction,"big-bang","handler",M+4)});var H;var I=y(D,J);var E=I.document.getElementById("canvas");E.width=D.toFixnum();E.height=J.toFixnum();h();var F=new plt.world.config.WorldConfig();for(H=0;H<G.length;H++){F=G[H](F)}F=F.updateAll({changeWorld:plt.world.Kernel.updateWorld,shutdownWorld:plt.world.Kernel.shutdownWorld});plt.world.config.CONFIG=F;if(F.lookup("onKey")){I.onkeydown=function(L){plt.world.stimuli.onKey(L)}}if(F.lookup("onRedraw")){A(function(L){var M=E.getContext("2d");var N=F.lookup("onRedraw")([L]);N.render(M,0,0)})}A(function(L){if(F.lookup("stopWhen")){if(F.lookup("stopWhen")([L])){e=true}}});if(F.lookup("onTick")){l(I,F)}t(C);if(F.lookup("initialEffect")){var K=plt.world.Kernel.applyEffect(F.lookup("initialEffect"));for(var H=0;H<K.length;H++){if(!e){updateWorld(K)}}}};var l=function(D,C){o=D.setInterval(function(){if(e){D.clearTimeout(o);o=false}else{plt.world.stimuli.onTick()}},C.lookup("tickDelay"))};plt.world.Kernel.isKeyEqual=function(E,D){var C=(E.toString().toLowerCase()==D.toString().toLowerCase());return C};plt.world.Kernel.imageWidth=function(C){plt.Kernel.check(C,r,"image-width","image",1);return plt.types.Rational.makeInstance(C.getWidth(),1)};plt.world.Kernel.imageHeight=function(C){plt.Kernel.check(C,r,"image-height","image",1);return plt.types.Rational.makeInstance(C.getHeight(),1)};plt.world.Kernel.placeImage=function(E,C,G,D){plt.Kernel.check(E,r,"place-image","image",1);plt.Kernel.check(C,plt.Kernel.isNumber,"place-image","number",2);plt.Kernel.check(G,plt.Kernel.isNumber,"place-image","number",3);plt.Kernel.check(D,function(H){return B(H)||r(H)},"place-image","image",4);if(B(D)){return D.add(E,plt.types.NumberTower.toFixnum(C),plt.types.NumberTower.toFixnum(G))}else{var F=new c(D.getWidth(),D.getHeight(),[]);F=F.add(D,0,0);F=F.add(E,plt.types.NumberTower.toFixnum(C),plt.types.NumberTower.toFixnum(G));return F}};plt.world.Kernel.emptyScene=function(D,C){plt.Kernel.check(D,plt.Kernel.isNumber,"empty-scene","number",1);plt.Kernel.check(C,plt.Kernel.isNumber,"empty-scene","number",2);return new c(plt.types.NumberTower.toFixnum(D),plt.types.NumberTower.toFixnum(C),[])};var u=function(C){return typeof(b.get(C))!="undefined"};plt.world.Kernel.text=function(E,C,D){plt.Kernel.check(E,plt.Kernel.isString,"text","string",1);plt.Kernel.check(C,plt.Kernel.isNumber,"text","number",2);plt.Kernel.check(D,u,"text","color",3);if(b.get(D)){D=b.get(D)}return new d(E,plt.types.NumberTower.toFixnum(C),D)};plt.world.Kernel.circle=function(E,D,C){plt.Kernel.check(E,plt.Kernel.isNumber,"circle","number",1);plt.Kernel.check(D,plt.Kernel.isString,"circle","string",2);plt.Kernel.check(C,u,"circle","color",3);if(b.get(C)){C=b.get(C)}return new f(plt.types.NumberTower.toFixnum(E),D,C)};plt.world.Kernel.openImageUrl=function(C){plt.Kernel.check(C,plt.Kernel.isString,"open-image-url","string",1);return k.makeInstance(C.toString())};plt.world.Kernel.nwRectangle=function(C,F,E,G){plt.Kernel.check(C,plt.Kernel.isNumber,"nw:rectangle","number",1);plt.Kernel.check(F,plt.Kernel.isNumber,"nw:rectangle","number",2);plt.Kernel.check(E,plt.Kernel.isString,"nw:rectangle","string",3);plt.Kernel.check(G,u,"nw:rectangle","color",4);if(b.get(G)){G=b.get(G)}var D=new n(plt.types.NumberTower.toFixnum(C),plt.types.NumberTower.toFixnum(F),E,G);return D.updatePinhole(0,0)};plt.world.Kernel.rectangle=function(C,E,D,F){plt.Kernel.check(C,plt.Kernel.isNumber,"rectangle","number",1);plt.Kernel.check(E,plt.Kernel.isNumber,"rectangle","number",2);plt.Kernel.check(D,plt.Kernel.isString,"rectangle","string",3);plt.Kernel.check(F,u,"rectangle","color",4);if(b.get(F)){F=b.get(F)}return new n(plt.types.NumberTower.toFixnum(C),plt.types.NumberTower.toFixnum(E),D,F)};var z=function(D,C){this.pinholeX=D;this.pinholeY=C};plt.world.Kernel.BaseImage=z;var r=function(C){return((C!=null)&&(C!=undefined)&&(C instanceof z))};plt.world.Kernel.isImage=r;plt.world.Kernel.put_dash_pinhole=function(D,C,E){plt.Kernel.check(D,r,"put-pinhole","image",1);plt.Kernel.check(C,plt.Kernel.isNumber,"put-pinhole","number",2);plt.Kernel.check(E,plt.Kernel.isNumber,"put-pinhole","number",3);return D.updatePinhole(C.toFixnum(),E.toFixnum())};z.prototype.updatePinhole=function(C,E){var D=w(this);D.pinholeX=C;D.pinholeY=E;return D};z.prototype.render=function(D,C,E){throw new MobyRuntimeError("Unimplemented method render")};plt.world.Kernel.makeCanvas=function(E,C){var D=document.createElement("canvas");D.width=E;D.height=C;D.style.width=D.width+"px";D.style.height=D.height+"px";if(window&&typeof window.G_vmlCanvasManager!="undefined"){D.style.display="none";document.body.appendChild(D);D=window.G_vmlCanvasManager.initElement(D);document.body.removeChild(D);D.style.display=""}return D};z.prototype.toDomNode=function(E){var H=this;var G=plt.world.Kernel.imageWidth(H).toFixnum();var C=plt.world.Kernel.imageHeight(H).toFixnum();var F=plt.world.Kernel.makeCanvas(G,C);var I=F.style.display;F.style.display="none";document.body.appendChild(F);var D=F.getContext("2d");H.render(D,0,0);document.body.removeChild(F);F.style.display="";return F};z.prototype.toWrittenString=function(C){return"<image>"};z.prototype.toDisplayedString=function(C){return"<image>"};plt.world.Kernel.image_question_=function(C){return r(C)};plt.world.Kernel.image_equal__question_=function(D,C){check(D,r,"image=?","image",1);check(C,r,"image=?","image",2);return D==C?plt.types.Logic.TRUE:plt.types.Logic.FALSE};var B=function(C){return((C!=undefined)&&(C!=null)&&(C instanceof c))};var c=function(E,C,D){z.call(this,0,0);this.width=E;this.height=C;this.children=D};c.prototype=q(z.prototype);c.prototype.add=function(D,C,E){return new c(this.width,this.height,this.children.concat([[D,C,E]]))};c.prototype.render=function(F,D,I){var H;var G,E,C;F.clearRect(D-this.pinholeX,I-this.pinholeY,this.width,this.height);for(H=0;H<this.children.length;H++){G=this.children[H][0];E=this.children[H][1];C=this.children[H][2];F.save();G.render(F,E+D-G.pinholeX,C+I-G.pinholeY);F.restore()}};c.prototype.getWidth=function(){return this.width};c.prototype.getHeight=function(){return this.height};var k=function(E,D){z.call(this,0,0);var C=this;this.isLoaded=false;if(D&&D.complete){this.img=D;this.isLoaded=true;this.pinholeX=C.img.width/2;this.pinholeY=C.img.height/2}else{this.img=new Image();this.img.onload=function(){C.isLoaded=true;C.pinholeX=C.img.width/2;C.pinholeY=C.img.height/2};this.img.onerror=function(F){C.img.onerror="";C.img.src="http://www.wescheme.org/images/broken.png"};this.img.src=E}};k.prototype=q(z.prototype);plt.world.Kernel.FileImage=k;var j={};k.makeInstance=function(C){if(!(C in j)){j[C]=new k(C)}return j[C]};k.installInstance=function(D,C){j[D]=new k(D,C)};k.installBrokenImage=function(C){j[C]=new d("Unable to load "+C,10,b.get("red"))};k.prototype.render=function(D,C,E){D.drawImage(this.img,C,E)};k.prototype.getWidth=function(){return this.img.width};k.prototype.getHeight=function(){return this.img.height};k.prototype.toDomNode=function(C){return this.img.cloneNode(true)};var n=function(F,C,E,D){z.call(this,F/2,C/2);this.width=F;this.height=C;this.style=E;this.color=D};n.prototype=q(z.prototype);n.prototype.render=function(D,C,E){D.fillStyle=this.color.toString();if(this.style.toString().toLowerCase()=="outline"){D.strokeRect(C,E,this.width,this.height)}else{D.fillRect(C,E,this.width,this.height)}};n.prototype.getWidth=function(){return this.width};n.prototype.getHeight=function(){return this.height};var d=function(E,D,C){z.call(this,0,0);this.msg=E;this.size=D;this.color=C;this.font="Optimer"};d.prototype=q(z.prototype);d.prototype.render=function(D,C,E){if(D.fillText){D.font=this.size+"px Optimer";D.fillStyle=this.color.toRGBAString();D.fillText(this.msg,C,E)}else{if(typeof(D.mozDrawText)!=="undefined"){D.mozTextStyle=this.size+"px "+this.font;D.translate(C,E+this.size);D.fillStyle=this.color;D.mozDrawText(this.msg)}}};d.prototype.getWidth=function(){return this.size*this.msg.length};d.prototype.getHeight=function(){return 10};var f=function(C,E,D){z.call(this,C,C);this.radius=C;this.style=E;this.color=D};f.prototype=q(z.prototype);f.prototype.render=function(D,C,E){D.translate(0,0);D.beginPath();D.fillStyle=this.color.toString();D.arc(C+this.radius,E+this.radius,this.radius,0,2*Math.PI,false);if(this.style.toString().toLowerCase()=="outline"){D.stroke()}else{D.fill()}D.closePath()};f.prototype.getWidth=function(){return this.radius*2};f.prototype.getHeight=function(){return this.radius*2};plt.world.Kernel.applyEffect=function(E){var D=[];if(plt.Kernel.empty_question_(E)){}else{if(plt.Kernel.pair_question_(E)){D=D.concat(plt.world.Kernel.applyEffect(E.first()));D=D.concat(plt.world.Kernel.applyEffect(E.rest()))}else{var C=E.run();if(C){D=D.concat(C)}}}return D};effect_colon_none.prototype.run=function(){};effect_colon_beep.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService().beep()};effect_colon_play_dash_dtmf_dash_tone.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService().playDtmfTone(this._fields[0].toFixnum(),this._fields[1].toFixnum())};effect_colon_send_dash_sms.prototype.run=function(){plt.platform.Platform.getInstance().getSmsService().send(this._fields[0],this._fields[1])};effect_colon_play_dash_sound.prototype.run=function(){if(plt.Kernel.isString(this._fields[0])){plt.platform.Platform.getInstance().getSoundService().playSoundUrl(this._fields[0])}else{if(playlist_dash_sound_question_(this._fields[0])){plt.platform.Platform.getInstance().getSoundService().playPlaylist(this._fields[0]._fields[0])}}};effect_colon_pause_dash_sound.prototype.run=function(){if(plt.Kernel.isString(this._fields[0])){plt.platform.Platform.getInstance().getSoundService().pauseSoundUrl(this._fields[0])}else{if(playlist_dash_sound_question_(this._fields[0])){plt.platform.Platform.getInstance().getSoundService().pausePlaylist(this._fields[0]._fields[0])}}};effect_colon_stop_dash_sound.prototype.run=function(){if(plt.Kernel.isString(this._fields[0])){plt.platform.Platform.getInstance().getSoundService().stopSoundUrl(this._fields[0])}else{if(playlist_dash_sound_question_(this._fields[0])){plt.platform.Platform.getInstance().getSoundService().stopPlaylist(this._fields[0]._fields[0])}}};effect_colon_set_dash_sound_dash_volume.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService().setVolume(this._fields[0].toFixnum())};effect_colon_raise_dash_sound_dash_volume.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService.raiseVolume()};effect_colon_lower_dash_sound_dash_volume.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService.lowerVolume()};effect_colon_set_dash_wake_dash_lock.prototype.run=function(){plt.platform.Platform.getInstance().getPowerService().setWakeLock(this._fields[0].toFixnum())};effect_colon_release_dash_wake_dash_lock.prototype.run=function(){plt.platform.Platform.getInstance().getPowerService().releaseWakeLock()};effect_colon_pick_dash_playlist.prototype.run=function(){var C=this._fields[0];var D=function(F){var E=make_dash_playlist_dash_sound(F);setTimeout(function(){var G=plt.world.config.CONFIG.lookup("changeWorld");G(function(H){return C([H,E])})},0)};plt.platform.Platform.getInstance().getPickPlaylistService().pickPlaylist(D)};effect_colon_pick_dash_random.prototype.run=function(){var D=plt.types.Rational.makeInstance(Math.floor(plt.types.NumberTower.toFixnum(this._fields[0])*Math.random()),1);var C=this._fields[1];return function(E){return C([E,D])}};var m=function(){this.colors={}};m.prototype.put=function(D,C){this.colors[D]=C};m.prototype.get=function(C){return this.colors[C.toString().toUpperCase()]};var s=function(E,D,C){this.r=E;this.g=D;this.b=C};s.prototype.toString=function(){return"rgb("+this.r+","+this.g+","+this.b+")"};s.prototype.toRGBAString=function(){return"rgba("+this.r+","+this.g+","+this.b+", 1)"};var b=new m();b.put("ORANGE",new s(255,165,0));b.put("RED",new s(255,0,0));b.put("ORANGERED",new s(255,69,0));b.put("TOMATO",new s(255,99,71));b.put("DARKRED",new s(139,0,0));b.put("RED",new s(255,0,0));b.put("FIREBRICK",new s(178,34,34));b.put("CRIMSON",new s(220,20,60));b.put("DEEPPINK",new s(255,20,147));b.put("MAROON",new s(176,48,96));b.put("INDIAN RED",new s(205,92,92));b.put("INDIANRED",new s(205,92,92));b.put("MEDIUM VIOLET RED",new s(199,21,133));b.put("MEDIUMVIOLETRED",new s(199,21,133));b.put("VIOLET RED",new s(208,32,144));b.put("VIOLETRED",new s(208,32,144));b.put("LIGHTCORAL",new s(240,128,128));b.put("HOTPINK",new s(255,105,180));b.put("PALEVIOLETRED",new s(219,112,147));b.put("LIGHTPINK",new s(255,182,193));b.put("ROSYBROWN",new s(188,143,143));b.put("PINK",new s(255,192,203));b.put("ORCHID",new s(218,112,214));b.put("LAVENDERBLUSH",new s(255,240,245));b.put("SNOW",new s(255,250,250));b.put("CHOCOLATE",new s(210,105,30));b.put("SADDLEBROWN",new s(139,69,19));b.put("BROWN",new s(132,60,36));b.put("DARKORANGE",new s(255,140,0));b.put("CORAL",new s(255,127,80));b.put("SIENNA",new s(160,82,45));b.put("ORANGE",new s(255,165,0));b.put("SALMON",new s(250,128,114));b.put("PERU",new s(205,133,63));b.put("DARKGOLDENROD",new s(184,134,11));b.put("GOLDENROD",new s(218,165,32));b.put("SANDYBROWN",new s(244,164,96));b.put("LIGHTSALMON",new s(255,160,122));b.put("DARKSALMON",new s(233,150,122));b.put("GOLD",new s(255,215,0));b.put("YELLOW",new s(255,255,0));b.put("OLIVE",new s(128,128,0));b.put("BURLYWOOD",new s(222,184,135));b.put("TAN",new s(210,180,140));b.put("NAVAJOWHITE",new s(255,222,173));b.put("PEACHPUFF",new s(255,218,185));b.put("KHAKI",new s(240,230,140));b.put("DARKKHAKI",new s(189,183,107));b.put("MOCCASIN",new s(255,228,181));b.put("WHEAT",new s(245,222,179));b.put("BISQUE",new s(255,228,196));b.put("PALEGOLDENROD",new s(238,232,170));b.put("BLANCHEDALMOND",new s(255,235,205));b.put("MEDIUM GOLDENROD",new s(234,234,173));b.put("MEDIUMGOLDENROD",new s(234,234,173));b.put("PAPAYAWHIP",new s(255,239,213));b.put("MISTYROSE",new s(255,228,225));b.put("LEMONCHIFFON",new s(255,250,205));b.put("ANTIQUEWHITE",new s(250,235,215));b.put("CORNSILK",new s(255,248,220));b.put("LIGHTGOLDENRODYELLOW",new s(250,250,210));b.put("OLDLACE",new s(253,245,230));b.put("LINEN",new s(250,240,230));b.put("LIGHTYELLOW",new s(255,255,224));b.put("SEASHELL",new s(255,245,238));b.put("BEIGE",new s(245,245,220));b.put("FLORALWHITE",new s(255,250,240));b.put("IVORY",new s(255,255,240));b.put("GREEN",new s(0,255,0));b.put("LAWNGREEN",new s(124,252,0));b.put("CHARTREUSE",new s(127,255,0));b.put("GREEN YELLOW",new s(173,255,47));b.put("GREENYELLOW",new s(173,255,47));b.put("YELLOW GREEN",new s(154,205,50));b.put("YELLOWGREEN",new s(154,205,50));b.put("MEDIUM FOREST GREEN",new s(107,142,35));b.put("OLIVEDRAB",new s(107,142,35));b.put("MEDIUMFORESTGREEN",new s(107,142,35));b.put("DARK OLIVE GREEN",new s(85,107,47));b.put("DARKOLIVEGREEN",new s(85,107,47));b.put("DARKSEAGREEN",new s(143,188,139));b.put("LIME",new s(0,255,0));b.put("DARK GREEN",new s(0,100,0));b.put("DARKGREEN",new s(0,100,0));b.put("LIME GREEN",new s(50,205,50));b.put("LIMEGREEN",new s(50,205,50));b.put("FOREST GREEN",new s(34,139,34));b.put("FORESTGREEN",new s(34,139,34));b.put("SPRING GREEN",new s(0,255,127));b.put("SPRINGGREEN",new s(0,255,127));b.put("MEDIUM SPRING GREEN",new s(0,250,154));b.put("MEDIUMSPRINGGREEN",new s(0,250,154));b.put("SEA GREEN",new s(46,139,87));b.put("SEAGREEN",new s(46,139,87));b.put("MEDIUM SEA GREEN",new s(60,179,113));b.put("MEDIUMSEAGREEN",new s(60,179,113));b.put("AQUAMARINE",new s(112,216,144));b.put("LIGHTGREEN",new s(144,238,144));b.put("PALE GREEN",new s(152,251,152));b.put("PALEGREEN",new s(152,251,152));b.put("MEDIUM AQUAMARINE",new s(102,205,170));b.put("MEDIUMAQUAMARINE",new s(102,205,170));b.put("TURQUOISE",new s(64,224,208));b.put("LIGHTSEAGREEN",new s(32,178,170));b.put("MEDIUM TURQUOISE",new s(72,209,204));b.put("MEDIUMTURQUOISE",new s(72,209,204));b.put("HONEYDEW",new s(240,255,240));b.put("MINTCREAM",new s(245,255,250));b.put("ROYALBLUE",new s(65,105,225));b.put("DODGERBLUE",new s(30,144,255));b.put("DEEPSKYBLUE",new s(0,191,255));b.put("CORNFLOWERBLUE",new s(100,149,237));b.put("STEEL BLUE",new s(70,130,180));b.put("STEELBLUE",new s(70,130,180));b.put("LIGHTSKYBLUE",new s(135,206,250));b.put("DARK TURQUOISE",new s(0,206,209));b.put("DARKTURQUOISE",new s(0,206,209));b.put("CYAN",new s(0,255,255));b.put("AQUA",new s(0,255,255));b.put("DARKCYAN",new s(0,139,139));b.put("TEAL",new s(0,128,128));b.put("SKY BLUE",new s(135,206,235));b.put("SKYBLUE",new s(135,206,235));b.put("CADET BLUE",new s(96,160,160));b.put("CADETBLUE",new s(95,158,160));b.put("DARK SLATE GRAY",new s(47,79,79));b.put("DARKSLATEGRAY",new s(47,79,79));b.put("LIGHTSLATEGRAY",new s(119,136,153));b.put("SLATEGRAY",new s(112,128,144));b.put("LIGHT STEEL BLUE",new s(176,196,222));b.put("LIGHTSTEELBLUE",new s(176,196,222));b.put("LIGHT BLUE",new s(173,216,230));b.put("LIGHTBLUE",new s(173,216,230));b.put("POWDERBLUE",new s(176,224,230));b.put("PALETURQUOISE",new s(175,238,238));b.put("LIGHTCYAN",new s(224,255,255));b.put("ALICEBLUE",new s(240,248,255));b.put("AZURE",new s(240,255,255));b.put("MEDIUM BLUE",new s(0,0,205));b.put("MEDIUMBLUE",new s(0,0,205));b.put("DARKBLUE",new s(0,0,139));b.put("MIDNIGHT BLUE",new s(25,25,112));b.put("MIDNIGHTBLUE",new s(25,25,112));b.put("NAVY",new s(36,36,140));b.put("BLUE",new s(0,0,255));b.put("INDIGO",new s(75,0,130));b.put("BLUE VIOLET",new s(138,43,226));b.put("BLUEVIOLET",new s(138,43,226));b.put("MEDIUM SLATE BLUE",new s(123,104,238));b.put("MEDIUMSLATEBLUE",new s(123,104,238));b.put("SLATE BLUE",new s(106,90,205));b.put("SLATEBLUE",new s(106,90,205));b.put("PURPLE",new s(160,32,240));b.put("DARK SLATE BLUE",new s(72,61,139));b.put("DARKSLATEBLUE",new s(72,61,139));b.put("DARKVIOLET",new s(148,0,211));b.put("DARK ORCHID",new s(153,50,204));b.put("DARKORCHID",new s(153,50,204));b.put("MEDIUMPURPLE",new s(147,112,219));b.put("CORNFLOWER BLUE",new s(68,64,108));b.put("MEDIUM ORCHID",new s(186,85,211));b.put("MEDIUMORCHID",new s(186,85,211));b.put("MAGENTA",new s(255,0,255));b.put("FUCHSIA",new s(255,0,255));b.put("DARKMAGENTA",new s(139,0,139));b.put("VIOLET",new s(238,130,238));b.put("PLUM",new s(221,160,221));b.put("LAVENDER",new s(230,230,250));b.put("THISTLE",new s(216,191,216));b.put("GHOSTWHITE",new s(248,248,255));b.put("WHITE",new s(255,255,255));b.put("WHITESMOKE",new s(245,245,245));b.put("GAINSBORO",new s(220,220,220));b.put("LIGHT GRAY",new s(211,211,211));b.put("LIGHTGRAY",new s(211,211,211));b.put("SILVER",new s(192,192,192));b.put("GRAY",new s(190,190,190));b.put("DARK GRAY",new s(169,169,169));b.put("DARKGRAY",new s(169,169,169));b.put("DIM GRAY",new s(105,105,105));b.put("DIMGRAY",new s(105,105,105));b.put("BLACK",new s(0,0,0))})();if(typeof(plt)=="undefined"){var plt={}}plt.Jsworld={};(function(){var ag=plt.Jsworld;var f=false;function L(){}var aA=new L();var Z=[];var ar=[];ag.shutdown=function(){while(ar.length>0){var p=ar.pop();if(p){p.pause()}}r()};function G(p){Z.push(p)}function an(aO){var p=Z.indexOf(aO);if(p!=-1){Z.splice(p,1)}}function r(){aA=new L();Z=[]}function N(aQ){var p=aA;try{aA=aQ(aA)}catch(aP){aA=p;throw aP}for(var aO=0;aO<Z.length;aO++){try{Z[aO](aA,p)}catch(aP){aA=p;throw aP}}}ag.change_world=N;Number.prototype.NaN0=function(){return isNaN(this)?0:this};function J(aP){var aO=0;var p=0;while(aP.offsetParent){aO+=aP.offsetLeft+(aP.currentStyle?(parseInt(aP.currentStyle.borderLeftWidth)).NaN0():0);p+=aP.offsetTop+(aP.currentStyle?(parseInt(aP.currentStyle.borderTopWidth)).NaN0():0);aP=aP.offsetParent}aO+=aP.offsetLeft+(aP.currentStyle?(parseInt(aP.currentStyle.borderLeftWidth)).NaN0():0);p+=aP.offsetTop+(aP.currentStyle?(parseInt(aP.currentStyle.borderTopWidth)).NaN0():0);return{x:aO,y:p}}ag.getPosition=J;var ad=0;function o(){return ad++}ag.gensym=o;function K(aO,aQ){var p=new Array(aO.length);for(var aP=0;aP<aO.length;aP++){p[aP]=aQ(aO[aP])}return p}ag.map=K;function c(aO,aQ){var p=[];for(var aP=0;aP<aO.length;aP++){p=p.concat(aQ(aO[aP]))}return p}function n(aO,aQ){var p=new Array(aO.length);for(var aP=0;aP<aO.length;aP++){p[aP]=aQ(aO[aP],aP)}return p}ag.mapi=n;function w(aO,p,aQ){for(var aP=0;aP<aO.length;aP++){p=aQ(aO[aP],p)}return p}ag.fold=w;function av(aQ,aO){var p={};for(var aP in aQ){p[aP]=aQ[aP]}for(var aP in aO){p[aP]=aO[aP]}return p}ag.augment=av;function R(aR,aP,aO){var p={};for(var aQ in aR){p[aQ]=aR[aQ]}p[aP]=aO;return p}ag.assoc_cons=R;function al(aO,p){return aO.concat([p])}ag.cons=al;function Y(aO,p){return aO.concat(p)}ag.append=Y;function M(aQ,aO){var aP=[];for(var p=0;p<aQ.length;p++){aP.push([aQ[p],aO[p]])}return aP}ag.array_join=M;function q(aP,aO){for(var p=0;p<aP.length;p++){if(aP[p]===aO){return aP.slice(0,p).concat(aP.slice(p+1))}}return aP}ag.removeq=q;function y(aP,aO){for(var p=0;p<aP.length;p++){if(aO(aP[p])){return aP.slice(0,p).concat(aP.slice(p+1))}}return aP}ag.removef=y;function S(aP,aO){for(var p=0;p<aP.length;p++){if(aO(aP[p])){return aP.slice(0,p).concat(S(aP.slice(p+1),aO))}}return aP}ag.filter=S;function aJ(aP,aO){var aQ={};for(var p in aP){if(p!=aO){aQ[p]=aP[p]}}return aQ}ag.without=aJ;function l(aO,p){for(var aP=0;aP<aO.length;aP++){if(aO[aP]===p){return true}}return false}ag.memberq=l;function au(aO,p){for(var aP=0;aP<aO.length;aP++){if(aO[aP]==p){return true}}return false}ag.member=au;function Q(p){return p[0]}ag.head=Q;function X(p){return p.slice(1,p.length)}ag.tail=X;function aD(aO){var p=[aO];for(var aP=aO.firstChild;aP!=null;aP=aP.nextSibling){p.push(aD(aP))}return p}ag.node_to_tree=aD;function j(p){var aO=[p.node];if(p.node.jsworldOpaque==true){return aO}for(var aP=0;aP<p.children.length;aP++){aO=aO.concat(j(p.children[aP]))}return aO}function aF(aO,p){return(aO&&p&&aO===p)}function e(aO,p){return !aF(aO,p)}function ac(p){var aO=[];if(p.node.jsworldOpaque==true){return[]}for(var aP=0;aP<p.children.length;aP++){aO.push({relation:"parent",parent:p.node,child:p.children[aP].node})}for(var aP=0;aP<p.children.length-1;aP++){aO.push({relation:"neighbor",left:p.children[aP].node,right:p.children[aP+1].node})}for(var aP=0;aP<p.children.length;aP++){aO=aO.concat(ac(p.children[aP]))}return aO}function az(p,aO){p.appendChild(aO)}function ak(aO,aX,aR){for(var a0=0;a0<aR.length;a0++){if(aR[a0].relation=="parent"){var aU=aR[a0].parent,aS=aR[a0].child;if(e(aS.parentNode,aU)){az(aU,aS)}else{}}}for(;;){var a2=false;for(var a0=0;a0<aR.length;a0++){if(aR[a0].relation=="neighbor"){var aQ=aR[a0].left,a3=aR[a0].right;if(e(aQ.nextSibling,a3)){aQ.parentNode.insertBefore(aQ,a3);a2=true}}}if(!a2){break}}var aT;function aP(a7,a6){var a5=a7.compareDocumentPosition(a6);if(a5&a7.DOCUMENT_POSITION_CONTAINED_BY){return 1}if(a5&a7.DOCUMENT_POSITION_CONTAINS){return -1}if(a5&a7.DOCUMENT_POSITION_FOLLOWING){return -1}if(a5&a7.DOCUMENT_POSITION_PRECEDING){return 1}return 0}try{aT=aX.concat(aO).sort(aP)}catch(a1){aT=null}var aY=aO,aZ=aO.parentNode;while(aY!=aZ){for(;;){if(aY.firstChild==null||aY.jsworldOpaque==true){break}aY=aY.firstChild}while(aY!=aZ){var aW=aY.nextSibling,aU=aY.parentNode;var aV=false;var p=undefined;if(aT!=null){while(aT.length>0&&aP(aY,aT[0])>=0){var a4=aT.shift();if(aF(a4,aY)){aV=true;p=a4;break}}}else{for(var a0=0;a0<aX.length;a0++){if(aF(aX[a0],aY)){aV=true;p=aX[a0];break}}}if(!aV){if(aY.isJsworldOpaque){}else{while(aY.firstChild!=null){az(aY.parentNode,aY.firstChild)}}aW=aY.nextSibling;aY.parentNode.removeChild(aY)}else{am(aY,p)}if(aW==null){aY=aU}else{aY=aW;break}}}af(aX)}function am(aO,p){}function B(p){return p.replace(/\-(.)/g,function(aO,aP){return aP.toUpperCase()})}function ax(aO,aP){for(var p=0;p<aP.length;p++){aO.style[B(aP[p].attrib)]=aP[p].values.join(" ")}}function k(aO,p){if(p.id.match(/^\./)){return("class" in aO&&au(aO["class"].split(/\s+/),p.id.substring(1)))}else{return("id" in aO&&aO.id==p.id)}}function aL(p,aQ){for(var aP=0;aP<p.length;aP++){b(p[aP])}for(var aP=0;aP<aQ.length;aP++){if("id" in aQ[aP]){for(var aO=0;aO<p.length;aO++){if(k(p[aO],aQ[aP])){ax(p[aO],aQ[aP].attribs)}}}else{ax(aQ[aP].node,aQ[aP].attribs)}}}var b=function(p){if("style" in p){p.style.cssText=""}};function af(p){for(var aO=0;aO<p.length;aO++){if(p[aO].onWorldChange){p[aO].onWorldChange(aA)}}}function A(aR,p,aT,aQ,aS){if(p instanceof L){var aO=D(aQ(aR));var aP=j(aO);aL(aP,F(aS(aR)));ak(aT,aP,ac(aO));return}else{aK(function(){var aZ=aQ(p);var aV=aQ(aR);var aU=aS(p);var aW=aS(aR);var aX=D(aV);var aY=j(aX);if(aZ!==aV){aL(aY,F(aW));ak(aT,aY,ac(aX))}else{if(aU!==aW){aL(aY,F(aW))}}})}}function aK(aO){var p;if(aI()){p=ay();aO();p.restore()}else{aO()}}function C(){this.focused=f;this.selectionStart=f.selectionStart;this.selectionEnd=f.selectionEnd}C.prototype.restore=function(){if(this.focused.parentNode){this.focused.selectionStart=this.selectionStart;this.focused.selectionEnd=this.selectionEnd;this.focused.focus()}else{if(this.focused.id){var p=document.getElementById(this.focused.id);if(p){p.selectionStart=this.selectionStart;p.selectionEnd=this.selectionEnd;p.focus()}}}};function aI(){return f!=undefined}function ay(){return new C()}function I(aQ,aO,aP,p,aR){this.top=aQ;this.world=aO;this.handlers=p;this.handlerCreators=aP;this.attribs=aR}I.prototype.restart=function(){P(this.top,this.world,this.handlerCreators,this.attribs)};I.prototype.pause=function(){for(var p=0;p<this.handlers.length;p++){if(this.handlers[p] instanceof W){}else{this.handlers[p].onUnregister(top)}}};function P(aV,aS,aQ,p){r();var aO=K(aQ,function(aX){return aX()});if(ar.length>0){ar[ar.length-1].pause()}var aU=new I(aV,aS,aQ,aO,p);ar.push(aU);function aW(aX,aY){aU.world=aX}G(aW);var aR=new W(function(aX){return false},function(aX){});for(var aP=0;aP<aO.length;aP++){if(aO[aP] instanceof W){aR=aO[aP]}else{aO[aP].onRegister(aV)}}function aT(aY,a0){if(aR.test(aY)){aR.receiver(aA);var aX=ar.pop();if(aX){aX.pause()}if(ar.length>0){var aZ=ar.pop();aZ.restart()}}}G(aT);aH(aV,p);N(function(aX){return aS})}ag.big_bang=P;function ah(p,aO){return function(){var aP={watchId:-1,onRegister:function(aQ){aP.watchId=setInterval(function(){N(aO)},p)},onUnregister:function(aQ){clearInterval(aP.watchId)}};return aP}}ag.on_tick=ah;function s(aP,aO){function p(aQ){var aR=aP(aQ);t(aR,aR);return aR}return function(){var aQ={_top:null,_listener:function(aR,aS){A(aR,aS,aQ._top,p,aO)},onRegister:function(aR){aQ._top=aR;G(aQ._listener)},onUnregister:function(aR){an(aQ._listener)}};return aQ}}ag.on_draw=s;function W(aO,p){this.test=aO;this.receiver=p}function ap(aO,p){return function(){if(p==undefined){p=function(aP){}}return new W(aO,p)}}ag.stop_when=ap;function x(aO){var p=function(aQ,aP){aO(aQ)};return function(){return{onRegister:function(aP){G(p)},onUnregister:function(aP){an(p)}}}}ag.on_world_change=x;function T(aP,p,aO){if(aP.addEventListener){aP.addEventListener(p,aO,false)}else{aP.attachEvent("on"+p,aO,false)}}function aE(aO,p,aP){T(aO,p,function(aQ){N(function(aR){return aP(aR,aQ)})})}function aq(aO,p,aP){T(aO,p,function(aQ){setTimeout(function(){N(function(aR){return aP(aR,aQ)})},0)})}function u(p){T(p,"focus",function(aO){f=p});T(p,"blur",function(aO){f=undefined});return p}function D(p){if(p.length==undefined){return{node:p,children:[]}}else{return{node:p[0],children:K(p.slice(1),D)}}}function ai(p){return{attrib:p[0],values:p.slice(1)}}function m(p){var aO=K(p.slice(1),ai);if(typeof p[0]=="string"){return[{id:p[0],attribs:aO}]}else{if("length" in p[0]){return K(p[0],function(aP){return{id:aP,attribs:aO}})}else{return[{node:p[0],attribs:aO}]}}}function F(p){return c(p,m)}function H(p){return(p.nodeType==Node.TEXT_NODE)}function aj(p){return(p.nodeType==Node.ELEMENT_NODE)}var i=function(p,aO){throw new aG(plt.Kernel.format("Expected a non-empty array, received ~s within ~s",[p,aO]),p)};function t(p,aP){if(!p instanceof Array){i(p,aP)}if(p.length==0){i(p,aP)}if(H(p[0])){if(p.length>1){throw new aG(plt.Kernel.format("Text node ~s can not have children",[p]),p)}}else{if(aj(p[0])){for(var aO=1;aO<p.length;aO++){t(p[aO],p)}}else{throw new aG(plt.Kernel.format("expected a Text or an Element, received ~s within ~s",[p,aP]),p[0])}}}function aG(aO,p){this.msg=aO;this.elt=p}aG.prototype.toString=function(){return"on-draw: "+this.msg};function aH(p,aO){if(aO){for(a in aO){if(aO.hasOwnProperty(a)){if(typeof aO[a]=="function"){aE(p,a,aO[a])}else{p[a]=aO[a]}}}}return p}function aa(p){return u(aH(document.createElement("p"),p))}ag.p=aa;function E(p){return u(aH(document.createElement("div"),p))}ag.div=E;function h(p,aO){var aP=document.createElement("button");aE(aP,"click",p);return u(aH(aP,aO))}ag.button=h;var O=function(p){if(p.preventDefault){p.preventDefault()}else{p.returnValue=false}};var ao=function(p){if(p.stopPropagation){p.stopPropagation()}else{p.cancelBubble=true}};var v=function(p){T(p,"click",function(aO){ao(aO)});return p};function aM(p,aP,aO){p=p.toLowerCase();var aQ={text:at,password:at,checkbox:ab};if(aQ[p]){return(aQ[p])(p,aP,aO)}else{throw new plt.Kernel.MobyRuntimeError("js-input: does not currently support type "+p)}}ag.input=aM;var at=function(aO,aT,aS){var aU=document.createElement("input");aU.type=aO;function aR(aV,aW){return aT(aV,aU.value)}aq(aU,"keypress",aR);var p=1000;var aQ=aU.value;var aP=setInterval(function(){if(!aU.parentNode){clearInterval(aP);return}if(aQ!=aU.value){aQ=aU.value;N(function(aV){return aT(aV,aU.value)})}},p);return v(u(aH(aU,aS)))};var ab=function(aO,aQ,aP){var aR=document.createElement("input");aR.type=aO;var p=function(aS,aT){return aQ(aS,(aR.checked?plt.types.Logic.TRUE:plt.types.Logic.FALSE))};aq(aR,"change",p);T(aR,"click",function(aS){ao(aS)});return aH(aR,aP)};var U=function(p,aP,aO){var aQ=document.createElement("button");aE(aQ,"click",function(aR){return aP(aR,aQ.value)});return u(aH(aQ,aO))};function d(aP,aR,aQ){var aS=document.createElement("input");aS.type="text";var aO=undefined;function p(aT,aU){return aR(aT,aS.value)}aE(aS,"keypress",p);return v(u(aH(aS,aQ)))}function aw(aO,aP){var p=document.createTextNode(aO);return p}ag.text=aw;function aC(aR,aP,aQ){var aS=document.createElement("select");for(var aO=0;aO<aP.length;aO++){aS.add(V({value:aP[aO]}),null)}aS.jsworldOpaque=true;aE(aS,"change",aQ);var p=u(aH(aS,aR));return p}ag.select=aC;function V(aO){var p=document.createElement("option");p.text=aO.value;p.value=aO.value;return p}function g(p){return u(aH(document.createElement("textarea"),p))}ag.textarea=g;function aB(p){return u(aH(document.createElement("h1"),p))}ag.h1=aB;function aN(p){return u(aH(document.createElement("canvas"),p))}ag.canvas=aN;function ae(aO,p){var aP=document.createElement("img");aP.src=aO;return u(aH(aP,p))}ag.img=ae;function z(p,aO){return u(aH(p,aO))}ag.raw_node=z})();if(typeof(plt)==="undefined"){var plt={}}plt.world=plt.world||{};plt.world.MobyJsworld={};(function(){var e=plt.world.MobyJsworld;var p=plt.Jsworld;var h=plt.Kernel.MobyTypeError;var k=function(s){return typeof(s)=="function"};var m=function(t){var u=t;if(plt.Kernel.empty_question_(u)){return[]}else{if(plt.Kernel.pair_question_(u)){var s=[];while(!u.isEmpty()){s.push(m(u.first()));u=u.rest()}return s}else{return t}}};var i=function(t){var s={};while(!t.isEmpty()){var u=t.first().first();var v=t.first().rest().first();s[u]=v;t=t.rest()}return s};var r=function(){if(window.document.getElementById("jsworld-div")!=undefined){return window}var s=window.open("big-bang.html","big-bang");if(s==null){throw new Error("Error: Not allowed to create a new window.")}return s};e.makeToplevelNode=function(){return r().document.getElementById("jsworld-div")};var f=function(s){return(s instanceof plt.types.Cons)||(s instanceof plt.types.Empty)};e.printWorldHook=function(u,t){var s;if(t.lastChild==null){s=plt.Kernel.toDomNode(u);t.appendChild(s)}else{s=plt.Kernel.toDomNode(u);t.replaceChild(s,t.lastChild)}};var j=function(t){var s;if(t.target){s=t.target}else{if(t.srcElement){s=t.srcElement}}if(s.nodeType==3){s=s.parentNode}return s};var q=function(s){return typeof(s.nodeType)!="undefined"};var d=function(s,y,u){if(plt.Kernel.pair_question_(s)){var t=plt.Kernel.first(s);var w=plt.Kernel.rest(s);if(!q(t)){throw new h(plt.Kernel.format("on-draw: expected a dom-element, but received ~s instead, the first element within ~s",[t,y]))}if(t.nodeType==Node.TEXT_NODE&&!plt.Kernel.empty_question_(w)){throw new h(plt.Kernel.format("on-draw: the text node ~s must not have children.  It has ~s",[t,w]))}var v=2;while(!plt.Kernel.empty_question_(w)){d(plt.Kernel.first(w),s,v);w=plt.Kernel.rest(w);v++}}else{throw new h(plt.Kernel.format("on-draw: expected a dom-s-expression, but received ~s instead~a",[s,(u!=undefined?plt.Kernel.format(", the ~a element within ~s.",[plt.Kernel.ordinalize(u),y]):".")]))}};var l=function(u,s,t){plt.Kernel.attachEvent(u,s,t)};var n=function(s){if(s.preventDefault){s.preventDefault()}else{s.returnValue=false}};var o=function(s){if(s.stopPropagation){s.stopPropagation()}else{s.cancelBubble=true}};e.bigBang=function(B,w){var t=plt.types.Empty.EMPTY;plt.Kernel.arrayEach(w,function(F,G){plt.Kernel.check(F,function(H){return k(H)||f(H)},"js-big-bang","handler or attribute list",G+2)});var C=e.makeToplevelNode();C.tabIndex=0;l(C,"click",function(F){n(F);o(F);return false},false);var v=new plt.world.config.WorldConfig();for(var A=0;A<w.length;A++){if(f(w[A])){t=w[A]}else{if(k(w[A])){v=w[A](v)}}}v=v.updateAll({changeWorld:e.updateWorld,shutdownWorld:e.shutdownWorld});plt.world.config.CONFIG=v;var u=[];var D;if(v.lookup("onDraw")){wrappedRedraw=function(G){try{var H=v.lookup("onDraw")([G]);plt.Kernel.setLastLoc(undefined);d(H,H,undefined);var F=[C,m(H)];return F}catch(I){g(I);throw I}};D=function(G){try{var F=m(v.lookup("onDrawCss")([G]));plt.Kernel.setLastLoc(undefined);return F}catch(H){g(H);throw H}};u.push(p.on_draw(wrappedRedraw,D))}else{if(v.lookup("onRedraw")){var z=undefined;var s=undefined;wrappedRedraw=function(H){try{var J=v.lookup("onRedraw")([H]);if(J!=null&&J!=undefined&&J instanceof plt.world.Kernel.BaseImage){var I=plt.world.Kernel.imageWidth(J).toFixnum();var F=plt.world.Kernel.imageHeight(J).toFixnum();if(!z){z=plt.world.Kernel.makeCanvas(I,F);z.jsworldOpaque=true;s=p.node_to_tree(z)}z.width=I;z.height=F;var G=z.getContext("2d");J.render(G,0,0);return[C,s]}else{return[C,p.node_to_tree(plt.Kernel.toDomNode(J))]}}catch(K){g(K);throw K}};D=function(F){return[[z,["width",z.width+"px"],["height",z.height+"px"]]]};u.push(p.on_draw(wrappedRedraw,D))}else{u.push(p.on_world_change(function(F){e.printWorldHook(F,C)}))}}if(v.lookup("tickDelay")){var x=function(F){setTimeout(function(){plt.world.stimuli.onTick()},0);return F};var y=v.lookup("tickDelay");u.push(p.on_tick(y,x))}if(v.lookup("stopWhen")){u.push(p.stop_when(function(F){return v.lookup("stopWhen")([F])}))}if(v.lookup("onKey")){l(C,"keydown",function(F){plt.world.stimuli.onKey(F);n(F);o(F);return false});l(C,"keypress",function(F){n(F);o(F);return false});C.focus()}if(v.lookup("initialEffect")){var E=plt.world.Kernel.applyEffect(v.lookup("initialEffect"));for(var A=0;A<E.length;A++){if(v.lookup("stopWhen")&&v.lookup("stopWhen")([B])){break}else{B=E[A](B)}}}return p.big_bang(C,B,u,i(t))};var c=function(u){var s=plt.types.Empty.EMPTY;for(var t=0;t<u.length;t++){s=plt.types.Cons.makeInstance(u[length-t-1],s)}return s};var g=function(s){plt.Kernel.reportError(s);plt.Kernel.reportError("Shutting down jsworld computations");plt.world.stimuli.onShutdown()};e.updateWorld=function(t){var s=function(u){try{return t(u)}catch(v){g(v);return u}};p.change_world(s)};e.shutdownWorld=function(){p.shutdown()};var b=function(s){if(s.length==0){return[]}if(s.length==1){return i(s[0])}else{throw new Error()}};e.p=function(s){var u=b(s);var t=p.p(u);t.toWrittenString=function(v){return plt.Kernel.format("(js-p)",[])};t.toDisplayedString=t.toWrittenString;t.toDomNode=function(v){return t};return t};e.div=function(s){var u=b(s);var t=p.div(u);t.toWrittenString=function(v){return plt.Kernel.format("(js-div)",[])};t.toDisplayedString=t.toWrittenString;t.toDomNode=function(v){return t};return t};e.button=function(v,s){var u=function(w){return make_dash_effect_colon_none()};var t=e.buttonStar(v,u,s);t.toWrittenString=function(w){return"(js-button ...)"};t.toDisplayedString=t.toWrittenString;t.toDomNode=function(w){return t};return t};e.buttonStar=function(s,w,u){var x=b(u);var t=function(A,y){try{var z=w([A]);var C=s([A]);plt.world.Kernel.applyEffect(z);return C}catch(B){g(B);return A}};var v=p.button(t,x);v.toWrittenString=function(y){return"(js-button ...)"};v.toDisplayedString=v.toWrittenString;v.toDomNode=function(y){return v};return v};e.input=function(t,w,s){plt.Kernel.check(t,plt.Kernel.isString,"js-input","string",1);plt.Kernel.check(w,plt.Kernel.isFunction,"js-input","(world string -> world)",1);var v=b(s);var u=p.input(t,function(x,y){return w([x,y])},v);u.toWrittenString=function(x){return"(js-input ...)"};u.toDisplayedString=u.toWrittenString;u.toDomNode=function(x){return u};return u};e.get_dash_input_dash_value=function(s){plt.Kernel.check(s,function(t){return(plt.Kernel.isString(s)||s.nodeType==Node.ELEMENT_NODE)},"get-input-value","dom-node",1);if(plt.Kernel.isString(s)){return plt.types.String.makeInstance(document.getElementById(s).value||"")}else{return plt.types.String.makeInstance(s.value||"")}};e.img=function(v,s){plt.Kernel.check(v,plt.Kernel.isString,"js-img","string",1);var u=b(s);var t=p.img(v,u);t.toWrittenString=function(w){return"(js-img ...)"};t.toDisplayedString=t.toWrittenString;t.toDomNode=function(w){return t};return t};e.text=function(t){plt.Kernel.check(t,plt.Kernel.isString,"js-text","string",1);var u=p.text(t,[]);u.toWrittenString=function(s){return"(js-text ...)"};u.toDisplayedString=u.toWrittenString;u.toDomNode=function(s){return u};return u};e.select=function(u,x,t){plt.Kernel.checkListof(u,plt.Kernel.isString,"js-select","string",1);plt.Kernel.check(x,plt.Kernel.isFunction,"js-select","function",2);var w=b(t);var s=m(u);var v=p.select(w,s,function(y,z){return x([y,v.value])});v.toWrittenString=function(y){return"(js-select ...)"};v.toDisplayedString=v.toWrittenString;v.toDomNode=function(y){return v};return v};e.rawNode=function(s,t){var v=b(t);var u=p.raw_node(plt.Kernel.toDomNode(s),v);u.toWrittenString=function(w){return"(js-raw-node ...)"};u.toDisplayedString=u.toWrittenString;u.toDomNode=function(w){return u};return u}})();if(typeof(plt)==="undefined"){var plt={}}plt.world=plt.world||{};(function(){var c={};plt.world.stimuli=c;var g=function(m,j,h){var l=[];e(function(i){var n=[i].concat(h);if(m){var o=m(n);l=b(o)}if(j){return j(n)}else{return i}});for(var k=0;k<l.length;k++){e(l[k])}};c.onTilt=function(k,l,j){var i=d("onTilt");var h=d("onTiltEffect");g(h,i,[f(k),f(l),f(j)])};c.onAcceleration=function(h,l,k){var i=d("onAcceleration");var j=d("onAccelerationEffect");g(j,i,[f(h),f(l),f(k)])};c.onShake=function(){var i=d("onShake");var h=d("onShakeEffect");g(h,i,[])};c.onLocation=function(k,h){var i=d("onLocationChange");var j=d("onLocationChangeEffect");g(j,i,[f(k),f(h)])};c.onKey=function(j){var k=function(o){var m=o.charCode||o.keyCode;var n;if(m==37){n="left"}else{if(m==38){n="up"}else{if(m==39){n="right"}else{if(m==40){n="down"}else{if(m==32){n="space"}else{if(m==13){n="enter"}else{n=String.fromCharCode(m)}}}}}}return n};var i=k(j);var h=d("onKey");var l=d("onKeyEffect");g(l,h,[i])};c.onTick=function(){var i=d("onTick");var h=d("onTickEffect");g(h,i,[])};c.onAnnounce=function(j,m){var l=plt.types.Empty.EMPTY;for(var k=0;k<m.length;k++){l=plt.types.Cons.makeInstance(m[m.length-k-1],l)}var n=d("onAnnounce");var h=d("onAnnounceEffect");g(n,h,[j,l])};c.onShutdown=function(){var h=d("shutdownWorld");if(h){h()}};var f=plt.types.FloatPoint.makeInstance;var d=function(h){return plt.world.config.CONFIG.lookup(h)};var e=function(h){if(d("changeWorld")){d("changeWorld")(h)}};var b=function(h){return plt.world.Kernel.applyEffect(h)}})();var permission_colon_location=function(){plt.types.Struct.call(this,"make-permission:location",[])};permission_colon_location.prototype=new plt.types.Struct();var make_dash_permission_colon_location=function(){return new permission_colon_location()};var permission_colon_location_question_=function(b){return b!=null&&b!=undefined&&b instanceof permission_colon_location};var permission_colon_send_dash_sms=function(){plt.types.Struct.call(this,"make-permission:send-sms",[])};permission_colon_send_dash_sms.prototype=new plt.types.Struct();var make_dash_permission_colon_send_dash_sms=function(){return new permission_colon_send_dash_sms()};var permission_colon_send_dash_sms_question_=function(b){return b!=null&&b!=undefined&&b instanceof permission_colon_send_dash_sms};var permission_colon_receive_dash_sms=function(){plt.types.Struct.call(this,"make-permission:receive-sms",[])};permission_colon_receive_dash_sms.prototype=new plt.types.Struct();var make_dash_permission_colon_receive_dash_sms=function(){return new permission_colon_receive_dash_sms()};var permission_colon_receive_dash_sms_question_=function(b){return b!=null&&b!=undefined&&b instanceof permission_colon_receive_dash_sms};var permission_colon_tilt=function(){plt.types.Struct.call(this,"make-permission:tilt",[])};permission_colon_tilt.prototype=new plt.types.Struct();var make_dash_permission_colon_tilt=function(){return new permission_colon_tilt()};var permission_colon_tilt_question_=function(b){return b!=null&&b!=undefined&&b instanceof permission_colon_tilt};var permission_colon_shake=function(){plt.types.Struct.call(this,"make-permission:shake",[])};permission_colon_shake.prototype=new plt.types.Struct();var make_dash_permission_colon_shake=function(){return new permission_colon_shake()};var permission_colon_shake_question_=function(b){return b!=null&&b!=undefined&&b instanceof permission_colon_shake};var permission_colon_internet=function(){plt.types.Struct.call(this,"make-permission:internet",[])};permission_colon_internet.prototype=new plt.types.Struct();var make_dash_permission_colon_internet=function(){return new permission_colon_internet()};var permission_colon_internet_question_=function(b){return b!=null&&b!=undefined&&b instanceof permission_colon_internet};var permission_colon_telephony=function(){plt.types.Struct.call(this,"make-permission:telephony",[])};permission_colon_telephony.prototype=new plt.types.Struct();var make_dash_permission_colon_telephony=function(){return new permission_colon_telephony()};var permission_colon_telephony_question_=function(b){return b!=null&&b!=undefined&&b instanceof permission_colon_telephony};var permission_colon_wake_dash_lock=function(){plt.types.Struct.call(this,"make-permission:wake-lock",[])};permission_colon_wake_dash_lock.prototype=new plt.types.Struct();var make_dash_permission_colon_wake_dash_lock=function(){return new permission_colon_wake_dash_lock()};var permission_colon_wake_dash_lock_question_=function(b){return b!=null&&b!=undefined&&b instanceof permission_colon_wake_dash_lock};var permission_colon_open_dash_image_dash_url=function(b){plt.types.Struct.call(this,"make-permission:open-image-url",[b]);this.url=b};permission_colon_open_dash_image_dash_url.prototype=new plt.types.Struct();var make_dash_permission_colon_open_dash_image_dash_url=function(b){return new permission_colon_open_dash_image_dash_url(b)};var permission_colon_open_dash_image_dash_url_dash_url=function(b){if(permission_colon_open_dash_image_dash_url_question_(b)){return b.url}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("permission:open-image-url-url: not a permission:open-image-url: ~s",[b]))}};var set_dash_permission_colon_open_dash_image_dash_url_dash_url_bang_=function(c,b){if(permission_colon_open_dash_image_dash_url_question_(c)){c.url=b;c._fields[0]=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_permission_colon_open_dash_image_dash_url_dash_url_bang_: not a permission:open-image-url: ~s",[c]))}};var permission_colon_open_dash_image_dash_url_question_=function(b){return b!=null&&b!=undefined&&b instanceof permission_colon_open_dash_image_dash_url};var permission_colon_universe=function(b){plt.types.Struct.call(this,"make-permission:universe",[b]);this.url=b};permission_colon_universe.prototype=new plt.types.Struct();var make_dash_permission_colon_universe=function(b){return new permission_colon_universe(b)};var permission_colon_universe_dash_url=function(b){if(permission_colon_universe_question_(b)){return b.url}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("permission:universe-url: not a permission:universe: ~s",[b]))}};var set_dash_permission_colon_universe_dash_url_bang_=function(c,b){if(permission_colon_universe_question_(c)){c.url=b;c._fields[0]=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_permission_colon_universe_dash_url_bang_: not a permission:universe: ~s",[c]))}};var permission_colon_universe_question_=function(b){return b!=null&&b!=undefined&&b instanceof permission_colon_universe};var permission_question_=function(b){return((plt.Kernel.setLastLoc({offset:554,line:18,span:28,id:"permission.ss"})&&permission_colon_location_question_(b))||(plt.Kernel.setLastLoc({offset:589,line:19,span:28,id:"permission.ss"})&&permission_colon_send_dash_sms_question_(b))||(plt.Kernel.setLastLoc({offset:624,line:20,span:31,id:"permission.ss"})&&permission_colon_receive_dash_sms_question_(b))||(plt.Kernel.setLastLoc({offset:662,line:21,span:24,id:"permission.ss"})&&permission_colon_tilt_question_(b))||(plt.Kernel.setLastLoc({offset:693,line:22,span:25,id:"permission.ss"})&&permission_colon_shake_question_(b))||(plt.Kernel.setLastLoc({offset:725,line:23,span:28,id:"permission.ss"})&&permission_colon_internet_question_(b))||(plt.Kernel.setLastLoc({offset:760,line:24,span:29,id:"permission.ss"})&&permission_colon_telephony_question_(b))||(plt.Kernel.setLastLoc({offset:796,line:25,span:29,id:"permission.ss"})&&permission_colon_wake_dash_lock_question_(b))||(plt.Kernel.setLastLoc({offset:832,line:26,span:34,id:"permission.ss"})&&permission_colon_open_dash_image_dash_url_question_(b))||(plt.Kernel.setLastLoc({offset:873,line:27,span:28,id:"permission.ss"})&&permission_colon_universe_question_(b)))};var PERMISSION_colon_LOCATION;var PERMISSION_colon_SEND_dash_SMS;var PERMISSION_colon_RECEIVE_dash_SMS;var PERMISSION_colon_TILT;var PERMISSION_colon_SHAKE;var PERMISSION_colon_INTERNET;var PERMISSION_colon_TELEPHONY;var PERMISSION_colon_WAKE_dash_LOCK;var permission_dash__greaterthan_string=function(b){return((plt.Kernel.setLastLoc({offset:1594,line:45,span:35,id:"permission.ss"})&&permission_colon_location_question_(b))?(plt.types.String.makeInstance("PERMISSION:LOCATION")):((plt.Kernel.setLastLoc({offset:1663,line:47,span:35,id:"permission.ss"})&&permission_colon_send_dash_sms_question_(b))?(plt.types.String.makeInstance("PERMISSION:SEND-SMS")):((plt.Kernel.setLastLoc({offset:1732,line:49,span:38,id:"permission.ss"})&&permission_colon_receive_dash_sms_question_(b))?(plt.types.String.makeInstance("PERMISSION:RECEIVE-SMS")):((plt.Kernel.setLastLoc({offset:1807,line:51,span:31,id:"permission.ss"})&&permission_colon_tilt_question_(b))?(plt.types.String.makeInstance("PERMISSION:TILT")):((plt.Kernel.setLastLoc({offset:1868,line:53,span:32,id:"permission.ss"})&&permission_colon_shake_question_(b))?(plt.types.String.makeInstance("PERMISSION:SHAKE")):((plt.Kernel.setLastLoc({offset:1931,line:55,span:35,id:"permission.ss"})&&permission_colon_internet_question_(b))?(plt.types.String.makeInstance("PERMISSION:INTERNET")):((plt.Kernel.setLastLoc({offset:2000,line:57,span:36,id:"permission.ss"})&&permission_colon_telephony_question_(b))?(plt.types.String.makeInstance("PERMISSION:TELEPHONY")):((plt.Kernel.setLastLoc({offset:2071,line:59,span:36,id:"permission.ss"})&&permission_colon_wake_dash_lock_question_(b))?(plt.types.String.makeInstance("PERMISSION:WAKE-LOCK")):((plt.Kernel.setLastLoc({offset:2142,line:61,span:41,id:"permission.ss"})&&permission_colon_open_dash_image_dash_url_question_(b))?(plt.Kernel.setLastLoc({offset:2189,line:62,span:84,id:"permission.ss"})&&plt.Kernel.format((plt.types.String.makeInstance("PERMISSION:OPEN-IMAGE-URL ~a")),[(plt.Kernel.setLastLoc({offset:2228,line:62,span:44,id:"permission.ss"})&&permission_colon_open_dash_image_dash_url_dash_url(b))])):((plt.Kernel.setLastLoc({offset:2280,line:63,span:35,id:"permission.ss"})&&permission_colon_universe_question_(b))?(plt.Kernel.setLastLoc({offset:2321,line:64,span:72,id:"permission.ss"})&&plt.Kernel.format((plt.types.String.makeInstance("PERMISSION:UNIVERSE ~a")),[(plt.Kernel.setLastLoc({offset:2354,line:64,span:38,id:"permission.ss"})&&permission_colon_universe_dash_url(b))])):(plt.Kernel.setLastLoc({offset:1583,line:44,span:812,id:"permission.ss"})&&plt.Kernel.error((plt.types.Symbol.makeInstance("cond")),(plt.types.String.makeInstance('cond: fell out of cond around "offset=1583 line=44 span=812 id=\\"permission.ss\\""'))))))))))))))};var string_dash__greaterthan_permission=function(b){return((function(){var c=function(e,f){return((plt.Kernel.setLastLoc({offset:2795,line:75,span:78,id:"permission.ss"})&&plt.Kernel._greaterthan_((plt.Kernel.setLastLoc({offset:2798,line:75,span:21,id:"permission.ss"})&&plt.Kernel.string_dash_length(f)),(plt.Kernel.setLastLoc({offset:2841,line:76,span:31,id:"permission.ss"})&&plt.Kernel.string_dash_length(e)),[]))&&(plt.Kernel.setLastLoc({offset:2892,line:77,span:106,id:"permission.ss"})&&plt.Kernel.string_equal__question_((plt.Kernel.setLastLoc({offset:2902,line:77,span:51,id:"permission.ss"})&&plt.Kernel.substring(f,(plt.types.Rational.makeInstance(0,1)),(plt.Kernel.setLastLoc({offset:2921,line:77,span:31,id:"permission.ss"})&&plt.Kernel.string_dash_length(e)))),e,[])))};var d=function(e,g,f){return(plt.Kernel.setLastLoc({offset:3258,line:83,span:183,id:"permission.ss"})&&plt.Kernel.apply(f,plt.Kernel.list([(plt.Kernel.setLastLoc({offset:3277,line:83,span:163,id:"permission.ss"})&&plt.Kernel.substring(g,(plt.Kernel.setLastLoc({offset:3337,line:84,span:38,id:"permission.ss"})&&plt.Kernel.add1((plt.Kernel.setLastLoc({offset:3343,line:84,span:31,id:"permission.ss"})&&plt.Kernel.string_dash_length(e)))),(plt.Kernel.setLastLoc({offset:3418,line:85,span:21,id:"permission.ss"})&&plt.Kernel.string_dash_length(g))))]),[]))};(function(e){})(plt.Kernel.identity);return((plt.Kernel.setLastLoc({offset:3461,line:87,span:38,id:"permission.ss"})&&plt.Kernel.string_equal__question_(b,(plt.types.String.makeInstance("PERMISSION:LOCATION")),[]))?PERMISSION_colon_LOCATION:((plt.Kernel.setLastLoc({offset:3535,line:89,span:38,id:"permission.ss"})&&plt.Kernel.string_equal__question_(b,(plt.types.String.makeInstance("PERMISSION:SEND-SMS")),[]))?PERMISSION_colon_SEND_dash_SMS:((plt.Kernel.setLastLoc({offset:3614,line:91,span:41,id:"permission.ss"})&&plt.Kernel.string_equal__question_(b,(plt.types.String.makeInstance("PERMISSION:RECEIVE-SMS")),[]))?PERMISSION_colon_RECEIVE_dash_SMS:((plt.Kernel.setLastLoc({offset:3694,line:93,span:34,id:"permission.ss"})&&plt.Kernel.string_equal__question_(b,(plt.types.String.makeInstance("PERMISSION:TILT")),[]))?PERMISSION_colon_TILT:((plt.Kernel.setLastLoc({offset:3760,line:95,span:35,id:"permission.ss"})&&plt.Kernel.string_equal__question_(b,(plt.types.String.makeInstance("PERMISSION:SHAKE")),[]))?PERMISSION_colon_SHAKE:((plt.Kernel.setLastLoc({offset:3828,line:97,span:38,id:"permission.ss"})&&plt.Kernel.string_equal__question_(b,(plt.types.String.makeInstance("PERMISSION:INTERNET")),[]))?PERMISSION_colon_INTERNET:((plt.Kernel.setLastLoc({offset:3902,line:99,span:39,id:"permission.ss"})&&plt.Kernel.string_equal__question_(b,(plt.types.String.makeInstance("PERMISSION:TELEPHONY")),[]))?PERMISSION_colon_TELEPHONY:((plt.Kernel.setLastLoc({offset:3978,line:101,span:39,id:"permission.ss"})&&plt.Kernel.string_equal__question_(b,(plt.types.String.makeInstance("PERMISSION:WAKE-LOCK")),[]))?PERMISSION_colon_WAKE_dash_LOCK:((plt.Kernel.setLastLoc({offset:4054,line:103,span:52,id:"permission.ss"})&&c((plt.types.String.makeInstance("PERMISSION:OPEN-IMAGE-URL")),b))?(plt.Kernel.setLastLoc({offset:4114,line:104,span:89,id:"permission.ss"})&&d((plt.types.String.makeInstance("PERMISSION:OPEN-IMAGE-URL")),b,(function(){var e=(function(f){return make_dash_permission_colon_open_dash_image_dash_url(f[0])});e._eqHashCode=plt.types.makeEqHashCode();e.isEqual=function(f,g){return this===f};e.toWrittenString=function(f){return"<function:make-permission:open-image-url>"};e.toDisplayedString=e.toWrittenString;e.procedureArity=(plt.types.Rational.makeInstance(1,1));return e})())):((plt.Kernel.setLastLoc({offset:4212,line:105,span:46,id:"permission.ss"})&&c((plt.types.String.makeInstance("PERMISSION:UNIVERSE")),b))?(plt.Kernel.setLastLoc({offset:4266,line:106,span:77,id:"permission.ss"})&&d((plt.types.String.makeInstance("PERMISSION:UNIVERSE")),b,(function(){var e=(function(f){return make_dash_permission_colon_universe(f[0])});e._eqHashCode=plt.types.makeEqHashCode();e.isEqual=function(f,g){return this===f};e.toWrittenString=function(f){return"<function:make-permission:universe>"};e.toDisplayedString=e.toWrittenString;e.procedureArity=(plt.types.Rational.makeInstance(1,1));return e})())):(plt.Kernel.setLastLoc({offset:3448,line:86,span:897,id:"permission.ss"})&&plt.Kernel.error((plt.types.Symbol.makeInstance("cond")),(plt.types.String.makeInstance('cond: fell out of cond around "offset=3448 line=86 span=897 id=\\"permission.ss\\""'))))))))))))))})())};var permission_dash__greaterthan_android_dash_permissions=function(b){return((plt.Kernel.setLastLoc({offset:4584,line:115,span:35,id:"permission.ss"})&&permission_colon_location_question_(b))?(plt.Kernel.setLastLoc({offset:4625,line:116,span:103,id:"permission.ss"})&&plt.Kernel.list([(plt.types.String.makeInstance("android.permission.ACCESS_COARSE_LOCATION")),(plt.types.String.makeInstance("android.permission.ACCESS_FINE_LOCATION"))])):((plt.Kernel.setLastLoc({offset:4735,line:118,span:35,id:"permission.ss"})&&permission_colon_send_dash_sms_question_(b))?(plt.Kernel.setLastLoc({offset:4776,line:119,span:36,id:"permission.ss"})&&plt.Kernel.list([(plt.types.String.makeInstance("android.permission.SEND_SMS"))])):((plt.Kernel.setLastLoc({offset:4819,line:120,span:38,id:"permission.ss"})&&permission_colon_receive_dash_sms_question_(b))?(plt.Kernel.setLastLoc({offset:4863,line:121,span:39,id:"permission.ss"})&&plt.Kernel.list([(plt.types.String.makeInstance("android.permission.RECEIVE_SMS"))])):((plt.Kernel.setLastLoc({offset:4909,line:122,span:31,id:"permission.ss"})&&permission_colon_tilt_question_(b))?(plt.Kernel.setLastLoc({offset:4946,line:123,span:6,id:"permission.ss"})&&plt.Kernel.list([])):((plt.Kernel.setLastLoc({offset:4959,line:124,span:32,id:"permission.ss"})&&permission_colon_shake_question_(b))?(plt.Kernel.setLastLoc({offset:4997,line:125,span:6,id:"permission.ss"})&&plt.Kernel.list([])):((plt.Kernel.setLastLoc({offset:5010,line:126,span:35,id:"permission.ss"})&&permission_colon_internet_question_(b))?(plt.Kernel.setLastLoc({offset:5051,line:127,span:36,id:"permission.ss"})&&plt.Kernel.list([(plt.types.String.makeInstance("android.permission.INTERNET"))])):((plt.Kernel.setLastLoc({offset:5094,line:128,span:36,id:"permission.ss"})&&permission_colon_telephony_question_(b))?(plt.Kernel.setLastLoc({offset:5136,line:129,span:49,id:"permission.ss"})&&plt.Kernel.list([(plt.types.String.makeInstance("android.permission.ACCESS_COARSE_UPDATES"))])):((plt.Kernel.setLastLoc({offset:5192,line:130,span:36,id:"permission.ss"})&&permission_colon_wake_dash_lock_question_(b))?(plt.Kernel.setLastLoc({offset:5234,line:131,span:37,id:"permission.ss"})&&plt.Kernel.list([(plt.types.String.makeInstance("android.permission.WAKE_LOCK"))])):((plt.Kernel.setLastLoc({offset:5278,line:132,span:41,id:"permission.ss"})&&permission_colon_open_dash_image_dash_url_question_(b))?(plt.Kernel.setLastLoc({offset:5325,line:133,span:6,id:"permission.ss"})&&plt.Kernel.list([])):((plt.Kernel.setLastLoc({offset:5338,line:134,span:35,id:"permission.ss"})&&permission_colon_universe_question_(b))?(plt.Kernel.setLastLoc({offset:5379,line:135,span:36,id:"permission.ss"})&&plt.Kernel.list([(plt.types.String.makeInstance("android.permission.INTERNET"))])):(plt.Kernel.setLastLoc({offset:4573,line:114,span:844,id:"permission.ss"})&&plt.Kernel.error((plt.types.Symbol.makeInstance("cond")),(plt.types.String.makeInstance('cond: fell out of cond around "offset=4573 line=114 span=844 id=\\"permission.ss\\""'))))))))))))))};(function(){((function(b){PERMISSION_colon_LOCATION=(plt.Kernel.setLastLoc({offset:934,line:30,span:26,id:"permission.ss"})&&make_dash_permission_colon_location());PERMISSION_colon_SEND_dash_SMS=(plt.Kernel.setLastLoc({offset:990,line:31,span:26,id:"permission.ss"})&&make_dash_permission_colon_send_dash_sms());PERMISSION_colon_RECEIVE_dash_SMS=(plt.Kernel.setLastLoc({offset:1049,line:32,span:26,id:"permission.ss"})&&make_dash_permission_colon_send_dash_sms());PERMISSION_colon_TILT=(plt.Kernel.setLastLoc({offset:1101,line:33,span:22,id:"permission.ss"})&&make_dash_permission_colon_tilt());PERMISSION_colon_SHAKE=(plt.Kernel.setLastLoc({offset:1150,line:34,span:23,id:"permission.ss"})&&make_dash_permission_colon_shake());PERMISSION_colon_INTERNET=(plt.Kernel.setLastLoc({offset:1203,line:35,span:26,id:"permission.ss"})&&make_dash_permission_colon_internet());PERMISSION_colon_TELEPHONY=(plt.Kernel.setLastLoc({offset:1260,line:36,span:27,id:"permission.ss"})&&make_dash_permission_colon_telephony());PERMISSION_colon_WAKE_dash_LOCK=(plt.Kernel.setLastLoc({offset:1318,line:37,span:27,id:"permission.ss"})&&make_dash_permission_colon_wake_dash_lock())}))(arguments[0]||plt.Kernel.identity)})();if(typeof(plt)==="undefined"){var plt={}}(function(){plt.permission={};var j=function(l){return permission_colon_location_question_(l)};var g=function(l){return permission_colon_send_dash_sms_question_(l)};var k=function(l){return permission_colon_receive_dash_sms_question_(l)};var b=function(l){return permission_colon_tilt_question_(l)};var c=function(l){return permission_colon_shake_question_(l)};var i=function(l){return permission_colon_internet_question_(l)};var d=function(l){return permission_colon_telephony_question_(l)};var e=function(l){return permission_colon_wake_dash_lock_question_(l)};var f=function(l){return permission_colon_open_dash_image_dash_url_question_(l)};var h=function(l){return permission_colon_universe_question_(l)};plt.permission.startupAllPermissions=function(l,m){if(l.length>0){var n=l.pop();plt.permission._runStartupCode(n,l,m)}else{m()}};plt.permission._runStartupCode=function(l,q,n){var m=plt.platform.Platform.getInstance();var s=plt.world.stimuli;var o=function(){setTimeout(function(){plt.permission.startupAllPermissions(q,n)},0)};if(j(l)){m.getLocationService().startService();m.getLocationService().addLocationChangeListener(function(v,p){s.onLocation(v,p)});o()}else{if(g(l)){o()}else{if(k(l)){o()}else{if(b(l)){m.getTiltService().startService();m.getTiltService().addOrientationChangeListener(function(v,w,p){s.onTilt(v,w,p)});m.getTiltService().addAccelerationChangeListener(function(p,w,v){s.onAcceleration(p,w,v)});o()}else{if(c(l)){m.getShakeService().startService();m.getShakeService().addListener(function(){s.onShake()});o()}else{if(i(l)){o()}else{if(d(l)){o()}else{if(e(l)){o()}else{if(f(l)){var u=permission_colon_open_dash_image_dash_url_dash_url(l);var r=new Image();var t=function(){plt.Kernel.detachEvent(r,"load",t);plt.world.Kernel.FileImage.installInstance(u,r);o()};plt.Kernel.attachEvent(r,"load",t);plt.Kernel.attachEvent(r,"error",function(){plt.world.Kernel.FileImage.installBrokenImage(u);o()});r.src=u}else{o()}}}}}}}}}};plt.permission.runShutdownCode=function(m){var l=plt.platform.Platform.getInstance();if(j(m)){l.getLocationService().shutdownService()}if(g(m)){}if(k(m)){}if(b(m)){l.getTiltService().shutdownService()}if(c(m)){}if(i(m)){}if(d(m)){}if(e(m)){}if(f(m)){}}})();
>>>>>>> origin/master:war/runtime/compressed-runtime.js
