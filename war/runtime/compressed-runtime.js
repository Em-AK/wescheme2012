(function(){if(!(window.google&&google.gears)){var f=null;if(typeof GearsFactory!="undefined")f=new GearsFactory;else try{f=new ActiveXObject("Gears.Factory");f.getBuildInfo().indexOf("ie_mobile")!=-1&&f.privateSetGlobalObject(this)}catch(r){if(typeof navigator.mimeTypes!="undefined"&&navigator.mimeTypes["application/x-googlegears"]){f=document.createElement("object");f.style.display="none";f.width=0;f.height=0;f.type="application/x-googlegears";document.documentElement.appendChild(f)}}if(f){window.google||
(google={});if(!google.gears)google.gears={factory:f}}}})();var plt={};plt.types={};
(function(){plt.types=plt.types||{};function f(c,e){c.appendChild(e)}function r(c){function e(){}e.prototype=c;return new e}var M=0;plt.types.makeEqHashCode=function(){M++;return M};plt.types.getEqHashCode=function(c){if(c&&c._eqHashCode)return c._eqHashCode;if(typeof c=="string")return c;return 0};function C(c,e){this._constructorName=c;this._fields=e;this._eqHashCode=plt.types.makeEqHashCode()}plt.types.Struct=C;C.prototype.toWrittenString=function(c){c.put(this,true);var e=[];e.push("(");e.push(this._constructorName);
for(var n=0;n<this._fields.length;n++){e.push(" ");e.push(plt.types.toWrittenString(this._fields[n],c))}e.push(")");return plt.types.String.makeInstance(e.join(""))};C.prototype.toDisplayedString=C.prototype.toWrittenString;C.prototype.toDomNode=function(c){c.put(this,true);var e=document.createElement("div");e.appendChild(document.createTextNode("("));e.appendChild(document.createTextNode(this._constructorName));for(var n=0;n<this._fields.length;n++){e.appendChild(document.createTextNode(" "));f(e,
plt.types.toDomNode(this._fields[n],c))}e.appendChild(document.createTextNode(")"));return e};C.prototype.isEqual=function(c,e){if(typeof c!="object")return false;if(!c._constructorName)return false;if(c._constructorName!=this._constructorName)return false;if(typeof c._fields==="undefined")return false;if(this._fields.length!=c._fields.length)return false;for(var n=0;n<this._fields.length;n++)if(!plt.types.isEqual(this._fields[n],c._fields[n],e))return false;return true};function S(c){plt.types.Struct.call(this,
"box",[c]);this._eqHashCode=plt.types.makeEqHashCode()}S.prototype=r(plt.types.Struct.prototype);S.prototype.unbox=function(){return this._fields[0]};S.prototype.set=function(c){this._fields[0]=c};plt.types.Logic={TRUE:true,FALSE:false};Boolean.prototype.toWrittenString=function(){if(this.valueOf())return"true";return"false"};Boolean.prototype.toDisplayedString=Boolean.prototype.toWrittenString;Boolean.prototype.isEqual=function(c){return this==c};plt.types.Char=function(c){this.val=c;this._eqHashCode=
plt.types.makeEqHashCode()};plt.types.Char.makeInstance=function(c){return new plt.types.Char(c)};plt.types.Char.prototype.toWrittenString=function(){return"#\\"+this.val};plt.types.Char.prototype.toDisplayedString=function(){return this.val};plt.types.Char.prototype.getValue=function(){return this.val};plt.types.Char.prototype.isEqual=function(c){return c instanceof plt.types.Char&&this.val==c.val};plt.types.Symbol=function(c){this.val=c;this._eqHashCode=plt.types.makeEqHashCode()};var z={};plt.types.Symbol.makeInstance=
function(c){c in z||(z[c]=new plt.types.Symbol(c));return z[c]};plt.types.Symbol.prototype.isEqual=function(c){return c instanceof plt.types.Symbol&&this.val==c.val};plt.types.Symbol.prototype.toString=function(){return this.val};plt.types.Symbol.prototype.toWrittenString=function(){return this.val};plt.types.Symbol.prototype.toDisplayedString=function(){return this.val};plt.types.Empty=function(){this._eqHashCode=plt.types.makeEqHashCode()};plt.types.Empty.EMPTY=new plt.types.Empty;plt.types.Empty.prototype.isEqual=
function(c){return c instanceof plt.types.Empty};plt.types.Empty.prototype.first=function(){throw new g("first can't be applied on empty.");};plt.types.Empty.prototype.rest=function(){throw new g("rest can't be applied on empty.");};plt.types.Empty.prototype.isEmpty=function(){return true};plt.types.Empty.prototype.toWrittenString=function(){return"empty"};plt.types.Empty.prototype.toDisplayedString=function(){return"empty"};plt.types.Empty.prototype.append=function(c){return c};plt.types.Cons=function(c,
e){this.f=c;this.r=e;this._eqHashCode=plt.types.makeEqHashCode()};plt.types.Cons.reverse=function(c){for(var e=plt.types.Empty.EMPTY;!c.isEmpty();){e=plt.types.Cons.makeInstance(c.first(),e);c=c.rest()}return e};plt.types.Cons.makeInstance=function(c,e){return new plt.types.Cons(c,e)};plt.types.Cons.prototype.isEqual=function(c,e){if(!(c instanceof plt.types.Cons))return plt.types.Logic.FALSE;return plt.types.isEqual(this.first(),c.first(),e)&&plt.types.isEqual(this.rest(),c.rest(),e)};plt.types.Cons.prototype.first=
function(){return this.f};plt.types.Cons.prototype.rest=function(){return this.r};plt.types.Cons.prototype.isEmpty=function(){return false};plt.types.Cons.prototype.append=function(c){if(c.isEmpty())return this;c=c;for(var e=plt.types.Cons.reverse(this);!e.isEmpty();){c=plt.types.Cons.makeInstance(e.first(),c);e=e.rest()}return c};plt.types.Cons.prototype.toWrittenString=function(c){c.put(this,true);for(var e=[],n=this;!n.isEmpty();){e.push(plt.types.toWrittenString(n.first(),c));n=n.rest()}return"("+
e.join(" ")+")"};plt.types.Cons.prototype.toDisplayedString=function(c){c.put(this,true);for(var e=[],n=this;!n.isEmpty();){e.push(plt.types.toDisplayedString(n.first(),c));n=n.rest()}return"("+e.join(" ")+")"};plt.types.Cons.prototype.toDomNode=function(c){c.put(this,true);var e=document.createElement("div");e.appendChild(document.createTextNode("("));for(var n=this;!n.isEmpty();){f(e,plt.types.toDomNode(n.first(),c));n=n.rest();n.isEmpty()||f(e,document.createTextNode(" "))}e.appendChild(document.createTextNode(")"));
return e};plt.types.Vector=function(c,e){this.elts=new Array(c);if(e)for(var n=0;n<c;n++)this.elts[n]=e[n];else for(n=0;n<c;n++)this.elts[n]=undefined;this._eqHashCode=plt.types.makeEqHashCode()};plt.types.Vector.makeInstance=function(c,e){return new plt.types.Vector(c,e)};plt.types.Vector.prototype.length=function(){return this.elts.length};plt.types.Vector.prototype.ref=function(c){return this.elts[c]};plt.types.Vector.prototype.set=function(c,e){this.elts[c]=e};plt.types.Vector.prototype.isEqual=
function(c,e){if(c!=null&&c!=undefined&&c instanceof plt.types.Vector){if(c.length()!=this.length())return false;for(var n=0;n<this.length();n++)if(!plt.types.isEqual(this.elts[n],c.elts[n],e))return false;return true}else return false};plt.types.Vector.prototype.toWrittenString=function(c){c.put(this,true);for(var e=[],n=0;n<this.length();n++)e.push(plt.types.toWrittenString(this.ref(n),c));return"#("+e.join(" ")+")"};plt.types.Vector.prototype.toDisplayedString=function(c){c.put(this,true);for(var e=
[],n=0;n<this.length();n++)e.push(plt.types.toDisplayedString(this.ref(n),c));return"#("+e.join(" ")+")"};plt.types.Vector.prototype.toDomNode=function(c){c.put(this,true);var e=document.createElement("div");e.appendChild(document.createTextNode("#("));for(var n=0;n<this.length();n++)f(e,plt.types.toDomNode(this.ref(n),c));e.appendChild(document.createTextNode(")"));return e};function B(c,e){for(;e!=0;){var n=c;c=e;e=n%e}return Math.abs(c)}function G(c,e){return Math.abs(c*e/B(c,e))}function J(c,
e){var n;if(isNaN(c)||!isFinite(c))throw new g("not a number: "+c);if(isNaN(e)||!isFinite(e))throw new g("not a number: "+e);for(;e!=0;){n=c;c=e;e=n%e}return c}plt.types.Rational=function(c,e){if(e==undefined)e=1;if(e==0)throw new g("cannot have zero denominator.");var n=J(Math.abs(c),Math.abs(e));this.n=c/n;this.d=e/n;this._eqHashCode=plt.types.makeEqHashCode()};plt.types.Rational.prototype.toWrittenString=function(){return this.d==1?this.n+"":this.n+"/"+this.d};plt.types.Rational.prototype.toDisplayedString=
plt.types.Rational.prototype.toWrittenString;plt.types.Rational.prototype.level=function(){return 0};plt.types.Rational.prototype.lift=function(c){if(c.level()==1)return p.makeInstance(this.n/this.d);if(c.level()==2)return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO);throw new g("invalid level of Number");};plt.types.Rational.prototype.isFinite=function(){return true};plt.types.Rational.prototype.isEqual=function(c){return this.equals(c)};plt.types.Rational.prototype.equals=function(c){return c instanceof
plt.types.Rational&&this.n==c.n&&this.d==c.d};plt.types.Rational.prototype.isInteger=function(){return this.d==1};plt.types.Rational.prototype.isRational=function(){return true};plt.types.Rational.prototype.isReal=function(){return true};plt.types.Rational.prototype.add=function(c){return plt.types.Rational.makeInstance(this.n*c.d+this.d*c.n,this.d*c.d)};plt.types.Rational.prototype.subtract=function(c){return plt.types.Rational.makeInstance(this.n*c.d-this.d*c.n,this.d*c.d)};plt.types.Rational.prototype.multiply=
function(c){return plt.types.Rational.makeInstance(this.n*c.n,this.d*c.d)};plt.types.Rational.prototype.divide=function(c){if(this.d*c.n==0)throw new g("division by zero");return plt.types.Rational.makeInstance(this.n*c.d,this.d*c.n)};plt.types.Rational.prototype.toExact=function(){return this};plt.types.Rational.prototype.isExact=function(){return true};plt.types.Rational.prototype.toFixnum=function(){return Math.floor(this.n/this.d)};plt.types.Rational.prototype.numerator=function(){return plt.types.Rational.makeInstance(this.n)};
plt.types.Rational.prototype.denominator=function(){return plt.types.Rational.makeInstance(this.d)};plt.types.Rational.prototype.toFloat=function(){return this.n/this.d};plt.types.Rational.prototype.toComplex=function(){return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO)};plt.types.Rational.prototype.greaterThan=function(c){return this.n*c.d>this.d*c.n};plt.types.Rational.prototype.greaterThanOrEqual=function(c){return this.n*c.d>=this.d*c.n};plt.types.Rational.prototype.lessThan=
function(c){return this.n*c.d<this.d*c.n};plt.types.Rational.prototype.lessThanOrEqual=function(c){return this.n*c.d<=this.d*c.n};plt.types.Rational.prototype.sqrt=function(){if(this.n>=0){var c=Math.sqrt(this.n),e=Math.sqrt(this.d);return Math.floor(c)==c&&Math.floor(e)==e?plt.types.Rational.makeInstance(c,e):p.makeInstance(c/e)}else{c=Math.sqrt(-this.n);e=Math.sqrt(this.d);return Math.floor(c)==c&&Math.floor(e)==e?plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.makeInstance(c,
e)):plt.types.Complex.makeInstance(plt.types.Rational.ZERO,p.makeInstance(c/e))}};plt.types.Rational.prototype.abs=function(){return plt.types.Rational.makeInstance(Math.abs(this.n),this.d)};plt.types.Rational.prototype.floor=function(){return plt.types.Rational.makeInstance(Math.floor(this.n/this.d),1)};plt.types.Rational.prototype.ceiling=function(){return plt.types.Rational.makeInstance(Math.ceil(this.n/this.d),1)};plt.types.Rational.prototype.conjugate=plt.types.Rational.prototype.abs;plt.types.Rational.prototype.magnitude=
plt.types.Rational.prototype.abs;plt.types.Rational.prototype.log=function(){return p.makeInstance(Math.log(this.n/this.d))};plt.types.Rational.prototype.angle=function(){if(0==this.n)return plt.types.Rational.ZERO;return this.n>0?plt.types.Rational.ZERO:p.pi};plt.types.Rational.prototype.atan=function(){return p.makeInstance(Math.atan(this.n/this.d))};plt.types.Rational.prototype.cos=function(){return p.makeInstance(Math.cos(this.n/this.d))};plt.types.Rational.prototype.sin=function(){return p.makeInstance(Math.sin(this.n/
this.d))};plt.types.Rational.prototype.expt=function(c){return p.makeInstance(Math.pow(this.n/this.d,c.n/c.d))};plt.types.Rational.prototype.exp=function(){return p.makeInstance(Math.exp(this.n/this.d))};plt.types.Rational.prototype.acos=function(){return p.makeInstance(Math.acos(this.n/this.d))};plt.types.Rational.prototype.asin=function(){return p.makeInstance(Math.asin(this.n/this.d))};plt.types.Rational.prototype.imag_dash_part=function(){return plt.types.Rational.ZERO};plt.types.Rational.prototype.real_dash_part=
function(){return this};plt.types.Rational.prototype.timesI=function(){return plt.types.Complex.makeInstance(plt.types.Rational.ZERO,this)};plt.types.Rational.prototype.round=function(){if(this.d==2){var c=this.n/this.d,e=Math.floor(c);c=Math.ceil(c);return e%2==0?plt.types.Rational.makeInstance(e):plt.types.Rational.makeInstance(c)}else return plt.types.Rational.makeInstance(Math.round(this.n/this.d))};plt.types.Rational.prototype.half=function(){return plt.types.Rational.makeInstance(this.n,this.d*
2)};plt.types.Rational.prototype.minus=function(){return plt.types.Rational.makeInstance(0-this.n,this.d)};var o={};plt.types.Rational.makeInstance=function(c,e){if(c==undefined)throw new g("n undefined");if(e==undefined)e=1;if(e<0){c=-c;e=-e}if(isNaN(c)||isNaN(e))return p.nan;if(!isFinite(e))return Rational.ZERO;if(!isFinite(c))return p.makeInstance(c);return e==1&&c in o?o[c]:new plt.types.Rational(c,e)};o={};(function(){var c;for(c=-500;c<500;c++)o[c]=new plt.types.Rational(c,1)})();plt.types.Rational.NEGATIVE_ONE=
o[-1];plt.types.Rational.ZERO=o[0];plt.types.Rational.ONE=o[1];plt.types.Rational.TWO=o[2];function p(c){this.n=c;this._eqHashCode=plt.types.makeEqHashCode()}plt.types.FloatPoint=p;var N=new p(Number.NaN),V=new p(Number.POSITIVE_INFINITY),D=new p(Number.NEGATIVE_INFINITY);p.pi=new p(Math.PI);p.e=new p(Math.E);p.nan=N;p.inf=V;p.neginf=D;p.makeInstance=function(c){if(isNaN(c))return p.nan;else if(c===Number.POSITIVE_INFINITY)return p.inf;else if(c===Number.NEGATIVE_INFINITY)return p.neginf;return new p(c)};
p.prototype.isFinite=function(){return isFinite(this.n)};p.prototype.toExact=function(){return plt.types.Rational.makeInstance(Math.floor(this.n),1)};p.prototype.isExact=function(){return false};p.prototype.level=function(){return 1};p.prototype.lift=function(){return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO)};p.prototype.toWrittenString=function(){return this.n==Number.POSITIVE_INFINITY?"+inf.0":this.n==Number.NEGATIVE_INFINITY?"-inf.0":this.n==Number.NaN?"+nan.0":this.n.toString()};
p.prototype.toDisplayedString=p.prototype.toWrittenString;p.prototype.isEqual=function(c){return c instanceof p&&(this.n==c.n||isNaN(this.n)&&isNaN(c.n))};p.prototype.equals=function(c){return c instanceof p&&this.n==c.n};p.prototype.isRational=function(){return this.isFinite()&&this.n==Math.floor(this.n)};p.prototype.isInteger=function(){return this.isFinite()&&this.n==Math.floor(this.n)};p.prototype.isReal=function(){return true};function H(c){return q.lessThan(c,plt.types.Rational.ZERO)?-1:q.greaterThan(c,
plt.types.Rational.ZERO)?1:0}p.prototype.add=function(c){return this.isFinite()&&c.isFinite()?p.makeInstance(this.n+c.n):isNaN(this.n)||isNaN(c.n)?N:this.isFinite()&&!c.isFinite()?c:!this.isFinite()&&c.isFinite()?this:H(this)*H(c)==1?this:N};p.prototype.subtract=function(c){return this.isFinite()&&c.isFinite()?p.makeInstance(this.n-c.n):isNaN(this.n)||isNaN(c.n)?N:!this.isFinite()&&!c.isFinite()?H(this)==H(c)?N:this:this.isFinite()?q.multiply(c,plt.types.Rational.NEGATIVE_ONE):this};p.prototype.multiply=
function(c){if(this.n==0||c.n==0)return plt.types.Rational.ZERO;return this.isFinite()&&c.isFinite()?p.makeInstance(this.n*c.n):isNaN(this.n)||isNaN(c.n)?N:H(this)*H(c)==1?V:D};p.prototype.divide=function(c){if(this.isFinite()&&c.isFinite()){if(c.n==0)throw new g("division by zero");return p.makeInstance(this.n/c.n)}else if(isNaN(this.n)||isNaN(c.n))return N;else if(!this.isFinite()&&!c.isFinite())return N;else if(this.isFinite()&&!c.isFinite())return p.makeInstance(0);else if(!this.isFinite()&&c.isFinite())return H(this)*
H(c)==1?V:D};p.prototype.toFixnum=function(){return Math.floor(this.n)};p.prototype.numerator=function(){var c=this.n.toString();return(c=c.match(/^(.*)\.(.*)$/))?p.makeInstance(parseFloat(c[1]+c[2])):this};p.prototype.denominator=function(){var c=this.n.toString();return(c=c.match(/^(.*)\.(.*)$/))?p.makeInstance(Math.pow(10,c[2].length)):p.makeInstance(1)};p.prototype.toFloat=function(){return this.n};p.prototype.toComplex=function(){return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO)};
p.prototype.floor=function(){if(!isFinite(this.n))return this;return plt.types.Rational.makeInstance(Math.floor(this.n),1)};p.prototype.ceiling=function(){if(!isFinite(this.n))return this;return plt.types.Rational.makeInstance(Math.ceil(this.n),1)};p.prototype.greaterThan=function(c){return this.n>c.n};p.prototype.greaterThanOrEqual=function(c){return this.n>=c.n};p.prototype.lessThan=function(c){return this.n<c.n};p.prototype.lessThanOrEqual=function(c){return this.n<=c.n};p.prototype.sqrt=function(){if(this.n<
0){var c=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,p.makeInstance(Math.sqrt(-this.n)));return c}else return p.makeInstance(Math.sqrt(this.n))};p.prototype.abs=function(){return p.makeInstance(Math.abs(this.n))};p.prototype.log=function(){return this.n<0?this.toComplex().log():p.makeInstance(Math.log(this.n))};p.prototype.angle=function(){if(0==this.n)return plt.types.Rational.ZERO;return this.n>0?plt.types.Rational.ZERO:p.pi};p.prototype.atan=function(){return p.makeInstance(Math.atan(this.n))};
p.prototype.cos=function(){return p.makeInstance(Math.cos(this.n))};p.prototype.sin=function(){return p.makeInstance(Math.sin(this.n))};p.prototype.expt=function(c){if(this.n==1){c.isFinite()||isNaN(c.n);return this}else return p.makeInstance(Math.pow(this.n,c.n))};p.prototype.exp=function(){return p.makeInstance(Math.exp(this.n))};p.prototype.acos=function(){return p.makeInstance(Math.acos(this.n))};p.prototype.asin=function(){return p.makeInstance(Math.asin(this.n))};p.prototype.imag_dash_part=
function(){return plt.types.Rational.ZERO};p.prototype.real_dash_part=function(){return this};p.prototype.round=function(){if(isFinite(this.n))if(Math.abs(Math.floor(this.n)-this.n)==0.5){if(Math.floor(this.n)%2==0)return plt.types.Rational.makeInstance(Math.floor(this.n));return plt.types.Rational.makeInstance(Math.ceil(this.n))}else return plt.types.Rational.makeInstance(Math.round(this.n));else return this};p.prototype.conjugate=p.prototype.abs;p.prototype.magnitude=p.prototype.abs;p.prototype.minus=
function(){return p.makeInstance(0-this.n)};p.prototype.half=function(){return p.makeInstance(this.n/2)};p.prototype.timesI=function(){return plt.types.Complex.makeInstance(plt.types.Rational.ZERO,this)};plt.types.Complex=function(c,e){this.r=c;this.i=e;this._eqHashCode=plt.types.makeEqHashCode()};plt.types.Complex.makeInstance=function(c,e){if(typeof c=="number")c=c==Math.floor(c)?plt.types.Rational.makeInstance(c):p.makeInstance(c);if(typeof e=="number")e=e==Math.floor(e)?plt.types.Rational.makeInstance(e):
p.makeInstance(e);return c=new plt.types.Complex(c,e)};plt.types.Complex.prototype.toWrittenString=function(){return q.greaterThanOrEqual(this.i,plt.types.Rational.ZERO)?plt.types.toWrittenString(this.r)+"+"+plt.types.toWrittenString(this.i)+"i":plt.types.toWrittenString(this.r)+plt.types.toWrittenString(this.i)+"i"};plt.types.Complex.prototype.toDisplayedString=plt.types.Complex.prototype.toWrittenString;plt.types.Complex.prototype.isFinite=function(){return this.r.isFinite()&&this.i.isFinite()};
plt.types.Complex.prototype.isRational=function(){return this.r.isRational()&&q.equal(this.i,plt.types.Rational.ZERO)};plt.types.Complex.prototype.isInteger=function(){return this.r.isInteger()&&q.equal(this.i,plt.types.Rational.ZERO)};plt.types.Complex.prototype.toExact=function(){if(!this.isReal())throw new g("inexact->exact: expects argument of type real number");return this.r.toExact()};plt.types.Complex.prototype.isExact=function(){return this.r.isExact()&&this.i.isExact()};plt.types.Complex.prototype.level=
function(){return 2};plt.types.Complex.prototype.lift=function(){throw new g("Don't know how to lift Complex number");};plt.types.Complex.prototype.isEqual=function(c){return this.equals(c)};plt.types.Complex.prototype.equals=function(c){return c=c instanceof plt.types.Complex&&q.equal(this.r,c.r)&&q.equal(this.i,c.i)};plt.types.Complex.prototype.greaterThan=function(c){if(!this.isReal()||!c.isReal())throw new g(">: expects argument of type real number");return q.greaterThan(this.r,c.r)};plt.types.Complex.prototype.greaterThanOrEqual=
function(c){if(!this.isReal()||!c.isReal())throw new g(">: expects argument of type real number");return q.greaterThanOrEqual(this.r,c.r)};plt.types.Complex.prototype.lessThan=function(c){if(!this.isReal()||!c.isReal())throw new g(">: expects argument of type real number");return q.lessThan(this.r,c.r)};plt.types.Complex.prototype.lessThanOrEqual=function(c){if(!this.isReal()||!c.isReal())throw new g(">: expects argument of type real number");return q.lessThanOrEqual(this.r,c.r)};plt.types.Complex.prototype.abs=
function(){if(!q.equal(this.i,plt.types.Rational.ZERO).valueOf())throw new g("abs: expects argument of type real number");return this.r.abs()};plt.types.Complex.prototype.toFixnum=function(){if(!q.equal(this.i,plt.types.Rational.ZERO).valueOf())throw new g("toFixnum: expects argument of type real number");return this.r.toFixnum()};plt.types.Complex.prototype.numerator=function(){if(!this.isReal())throw new g("numerator: can only be applied to real number");return this.n.numerator()};plt.types.Complex.prototype.denominator=
function(){if(!this.isReal())throw new g("floor: can only be applied to real number");return this.n.denominator()};plt.types.Complex.prototype.toFloat=function(){if(!q.equal(this.i,plt.types.Rational.ZERO).valueOf())throw new g("toFloat: expects argument of type real number");return this.r.toFloat()};plt.types.Complex.prototype.toComplex=function(){return this};plt.types.Complex.prototype.add=function(c){return plt.types.Complex.makeInstance(q.add(this.r,c.r),q.add(this.i,c.i))};plt.types.Complex.prototype.subtract=
function(c){return plt.types.Complex.makeInstance(q.subtract(this.r,c.r),q.subtract(this.i,c.i))};plt.types.Complex.prototype.multiply=function(c){if(c.isReal())return plt.types.Complex.makeInstance(q.multiply(this.r,c.r),q.multiply(this.i,c.r));var e=q.subtract(q.multiply(this.r,c.r),q.multiply(this.i,c.i));c=q.add(q.multiply(this.r,c.i),q.multiply(this.i,c.r));if(q.equal(c,plt.types.Rational.ZERO))return e;return plt.types.Complex.makeInstance(e,c)};plt.types.Complex.prototype.divide=function(c){if(c.isReal())return plt.types.Complex.makeInstance(q.divide(this.r,
c.r),q.divide(this.i,c.r));var e=c.conjugate(),n=q.multiply(this,e).toComplex();c=q.multiply(c,e);return n=plt.types.Complex.makeInstance(q.divide(n.r,c),q.divide(n.i,c))};plt.types.Complex.prototype.conjugate=function(){var c=plt.types.Complex.makeInstance(this.r,q.subtract(plt.types.Rational.ZERO,this.i));return c};plt.types.Complex.prototype.magnitude=function(){var c=q.add(q.multiply(this.r,this.r),q.multiply(this.i,this.i));return c.sqrt()};plt.types.Complex.prototype.isReal=function(){return q.equal(this.i,
plt.types.Rational.ZERO)};plt.types.Complex.prototype.sqrt=function(){if(this.isReal())return this.r.sqrt();var c=q.add(this.magnitude(),this.r),e=c.half().sqrt();c=q.divide(this.i,q.multiply(c,p.makeInstance(2)).sqrt());return plt.types.Complex.makeInstance(e,c)};plt.types.Complex.prototype.log=function(){var c=this.magnitude(),e=this.angle();return c=q.add(c.log(),e.timesI())};plt.types.Complex.prototype.angle=function(){if(this.isReal())return this.r.angle();if(q.equal(plt.types.Rational.ZERO,
this.r)){var c=p.pi.half();return q.greaterThan(this.i,plt.types.Rational.ZERO)?c:c.minus()}else{c=q.divide(this.i.abs(),this.r.abs()).atan();return q.greaterThan(this.r,plt.types.Rational.ZERO)?q.greaterThan(this.i,plt.types.Rational.ZERO)?c:c.minus():q.greaterThan(this.i,plt.types.Rational.ZERO)?p.pi.subtract(c):c.subtract(p.pi)}};var v=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.ONE),y=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.NEGATIVE_ONE);
plt.types.Complex.prototype.atan=function(){if(q.equal(this,v)||q.equal(this,y))return p.makeInstance(Number.NEGATIVE_INFINITY);return q.multiply(v,q.multiply(p.makeInstance(0.5),q.divide(q.add(v,this),q.add(v,q.subtract(plt.types.Rational.ZERO,this))).log()))};plt.types.Complex.prototype.cos=function(){if(this.isReal())return this.r.cos();var c=this.timesI(),e=c.minus();return q.add(c.exp(),e.exp()).half()};plt.types.Complex.prototype.sin=function(){if(this.isReal())return this.r.sin();var c=this.timesI(),
e=c.minus(),n=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.TWO);c=q.subtract(c.exp(),e.exp());return n=q.divide(c,n)};plt.types.Complex.prototype.expt=function(c){c=q.multiply(c,this.log());return c.exp()};plt.types.Complex.prototype.exp=function(){var c=this.r.exp(),e=this.i.cos(),n=this.i.sin();return q.multiply(c,q.add(e,n.timesI()))};plt.types.Complex.prototype.acos=function(){if(this.isReal())return this.r.acos();var c=p.pi.half(),e=this.timesI(),n=q.subtract(plt.types.Rational.ONE,
this.multiply(this)).sqrt();e=q.add(e,n).log().timesI();return q.add(c,e)};plt.types.Complex.prototype.asin=function(){if(this.isReal())return this.r.asin();var c=q.subtract(plt.types.Rational.ONE,this.multiply(this));c=c.sqrt();return q.multiply(plt.types.Rational.TWO,q.divide(this,q.add(plt.types.Rational.ONE,c)).atan())};plt.types.Complex.prototype.ceiling=function(){if(!this.isReal())throw new g("ceiling: can only be applied to real number");return this.r.ceiling()};plt.types.Complex.prototype.floor=
function(){if(!this.isReal())throw new g("floor: can only be applied to real number");return this.r.floor()};plt.types.Complex.prototype.imag_dash_part=function(){return this.i};plt.types.Complex.prototype.real_dash_part=function(){return this.r};plt.types.Complex.prototype.round=function(){return this.r.round()};plt.types.Complex.prototype.timesI=function(){return this.multiply(plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.ONE))};plt.types.Complex.prototype.minus=function(){return plt.types.Complex.makeInstance(q.subtract(plt.types.Rational.ZERO,
this.r),q.subtract(plt.types.Rational.ZERO,this.i))};plt.types.Complex.prototype.half=function(){return plt.types.Complex.makeInstance(this.r.half(),this.i.half())};var q={};plt.types.NumberTower=q;q.toFixnum=function(c){return c.toFixnum()};q.toFloat=function(c){return c.toFloat()};q.abs=function(c){return c.abs()};q.isFinite=function(c){return c.isFinite()};q.toExact=function(c){return c.toExact()};q.add=function(c,e){if(c.level()<e.level())c=c.lift(e);if(e.level()<c.level())e=e.lift(c);return c.add(e)};
q.subtract=function(c,e){if(c.level()<e.level())c=c.lift(e);if(e.level()<c.level())e=e.lift(c);return c.subtract(e)};q.multiply=function(c,e){if(c.level()<e.level())c=c.lift(e);if(e.level()<c.level())e=e.lift(c);return c.multiply(e)};q.divide=function(c,e){if(c.level()<e.level())c=c.lift(e);if(e.level()<c.level())e=e.lift(c);return c.divide(e)};q.equal=function(c,e){if(c.level()<e.level())c=c.lift(e);if(e.level()<c.level())e=e.lift(c);return c.equals(e)};q.eqv=function(c,e){return c===e||c.level()===
e.level()&&c.equals(e)};q.approxEqual=function(c,e,n){return q.lessThan(q.abs(q.subtract(c,e)),n)};q.greaterThanOrEqual=function(c,e){if(c.level()<e.level())c=c.lift(e);if(e.level()<c.level())e=e.lift(c);if(!(c.isReal()&&e.isReal()))throw new g("greaterThanOrEqual: couldn't be applied to complex number");return c.greaterThanOrEqual(e)};q.lessThanOrEqual=function(c,e){if(c.level()<e.level())c=c.lift(e);if(e.level()<c.level())e=e.lift(c);if(!(c.isReal()&&e.isReal()))throw new g("lessThanOrEqual: couldn't be applied to complex number");
return c.lessThanOrEqual(e)};q.greaterThan=function(c,e){if(c.level()<e.level())c=c.lift(e);if(e.level()<c.level())e=e.lift(c);if(!(c.isReal()&&e.isReal()))throw new g("greaterThan: couldn't be applied to complex number");return c.greaterThan(e)};q.lessThan=function(c,e){if(c.level()<e.level())c=c.lift(e);if(e.level()<c.level())e=e.lift(c);if(!(c.isReal()&&e.isReal()))throw new g("lessThan: couldn't be applied to complex number");return c.lessThan(e)};q.modulo=function(c,e){c=plt.types.Rational.makeInstance(c.toFixnum()%
e.toFixnum(),1);if(q.lessThan(e,plt.types.Rational.ZERO)){if(q.lessThanOrEqual(c,plt.types.Rational.ZERO))return c;return q.add(c,e)}else{if(q.lessThan(c,plt.types.Rational.ZERO))return q.add(c,e);return c}};q.sqr=function(c){return q.multiply(c,c)};q.expt=function(c,e){if(c.level()<e.level())c=c.lift(e);if(e.level()<c.level())e=e.lift(c);return c.expt(e)};q.gcd=function(c,e){c=Math.abs(c.toFixnum());for(var n=0;n<e.length;n++)c=B(c,e[n].toFixnum());return plt.types.Rational.makeInstance(c)};q.lcm=
function(c,e){c=Math.abs(c.toFixnum());if(c==0)return plt.types.Rational.ZERO;for(var n=0;n<e.length;n++){if(e[n].toFixnum()==0)return plt.types.Rational.ZERO;c=G(c,e[n].toFixnum())}return plt.types.Rational.makeInstance(c)};plt.types.String=String;plt.types.String.makeInstance=function(c){return c.valueOf()};plt.types.String.prototype.isEqual=function(c){return this==c};var I=new RegExp('["\\\\]',"g");plt.types.String.prototype.toWrittenString=function(){return'"'+this.replace(I,function(c){return"\\"+
c})+'"'};plt.types.String.prototype.toDisplayedString=function(){return this};function Q(){return new plt._Hashtable(function(c){return plt.types.getEqHashCode(c)},function(c,e){return c===e})}plt.types.toWrittenString=function(c,e){e||(e=Q());if(c&&e.containsKey(c))return"...";if(c==undefined||c==null)return"<undefined>";if(typeof c=="string")return c.toWrittenString();if(typeof c!="object"&&typeof c!="function")return c.toString();if(typeof c.toWrittenString!=="undefined")return c.toWrittenString(e);
return typeof c.toDisplayedString!=="undefined"?c.toDisplayedString(e):c.toString()};plt.types.toDisplayedString=function(c,e){e||(e=Q());if(c&&e.containsKey(c))return"...";if(c==undefined||c==null)return"<undefined>";if(typeof c=="string")return c.toDisplayedString();if(typeof c!="object"&&typeof c!="function")return c.toString();if(typeof c.toWrittenString!=="undefined")return c.toWrittenString(e);return typeof c.toDisplayedString!=="undefined"?c.toDisplayedString(e):c.toString()};plt.types.toDomNode=
function(c,e){e||(e=Q());if(c&&e.containsKey(c))return document.createTextNode("...");if(c==undefined||c==null)return c=document.createTextNode("<undefined>");if(typeof c=="string")return c=document.createTextNode(c.toWrittenString());if(typeof c!="object"&&typeof c!="function")return c=document.createTextNode(c.toString());if(c.nodeType)return c;if(typeof c.toDomNode!=="undefined")return c.toDomNode(e);if(typeof c.toWrittenString!=="undefined")return c=document.createTextNode(plt.types.toWrittenString(c,
e));return c=typeof c.toDisplayedString!=="undefined"?document.createTextNode(plt.types.toDisplayedString(c,e)):document.createTextNode(c.toString())};function K(c){return c!=null&&c!=undefined&&(c instanceof plt.types.Rational||c instanceof plt.types.FloatPoint||c instanceof plt.types.Complex)}plt.types.isNumber=K;plt.types.isEqual=function(c,e,n){if(c===e)return true;if(K(c)&&K(e))return q.equal(c,e);if(c==undefined||c==null)return e==undefined||e==null;if(typeof c=="object"&&typeof e=="object"&&
n.find(c)===n.find(e))return true;else{typeof c=="object"&&typeof e=="object"&&n.merge(c,e);return c.isEqual(e,n)}};plt.types.liftToplevelToFunctionValue=function(c,e,n,E){if(!c._mobyLiftedFunction){var L=function(m){return c.apply(null,m.slice(0,n).concat([m.slice(n)]))};L._eqHashCode=plt.types.makeEqHashCode();L.isEqual=function(m){return this===m};L.toWrittenString=function(){return"<function:"+e+">"};L.toDisplayedString=L.toWrittenString;L.procedureArity=E;c._mobyLiftedFunction=L}return c._mobyLiftedFunction};
function O(c){this.msg=c}O.prototype.name="MobyError";O.prototype.toString=function(){return this.name+": "+this.msg};function U(c,e){O.call(this,c);this.loc=e}U.prototype=r(O.prototype);U.prototype.name="MobyParserError";function Y(c,e){O.call(this,c);this.stx=e}Y.prototype=r(O.prototype);Y.prototype.name="MobySyntaxError";function l(c){O.call(this,c)}l.prototype=r(O.prototype);l.prototype.name="MobyTypeError";function g(c){O.call(this,c)}g.prototype=r(O.prototype);g.prototype.name="MobyRuntimeError";
function i(c){O.call(this,c)}i.prototype=r(g.prototype);i.prototype.name="MobyTestingError";plt.types.MobyError=O;plt.types.MobyParserError=U;plt.types.MobySyntaxError=Y;plt.types.MobyTypeError=l;plt.types.MobyRuntimeError=g;plt.types.MobyTestingError=i;plt.types.Box=S})();
plt._Hashtable=function(){function f(g){return typeof g==="undefined"}function r(g){return typeof g==="function"}function M(g){return typeof g==="string"}function C(g,i){return r(g[i])}function S(g){return C(g,"equals")}function z(g){return C(g,"hashCode")}function B(g){if(M(g))return g;else if(z(g)){var i=g.hashCode();if(!M(i))return B(i);return i}else return C(g,"toString")?g.toString():String(g)}function G(g,i){return g.equals(i)}function J(g,i){return S(i)?i.equals(g):g===i}function o(g,i){return g===
i}function p(g,i,c,e,n){for(var E,L=0,m=g.length;L<m;L++){E=g[L];if(n(i,c(E)))return e?[L,E]:true}return false}function N(g,i){if(C(g,"splice"))g.splice(i,1);else if(i===g.length-1)g.length=i;else{var c=g.slice(i+1);g.length=i;for(var e=0,n=c.length;e<n;e++)g[i+e]=c[e]}}function V(g,i){if(g===null)throw new Error("null is not a valid "+i);else if(f(g))throw new Error(i+" must not be undefined");}var D="key",H="value";function v(g){V(g,D)}function y(g){V(g,H)}function q(g,i,c){this.entries=[];this.addEntry(g,
i);if(c!==null)this.getEqualityFunction=function(){return c}}function I(g){return g[0]}function Q(g){return g[1]}q.prototype={getEqualityFunction:function(g){return S(g)?G:J},searchForEntry:function(g){return p(this.entries,g,I,true,this.getEqualityFunction(g))},getEntryForKey:function(g){return this.searchForEntry(g)[1]},getEntryIndexForKey:function(g){return this.searchForEntry(g)[0]},removeEntryForKey:function(g){var i=this.searchForEntry(g);if(i){N(this.entries,i[0]);return true}return false},
addEntry:function(g,i){this.entries[this.entries.length]=[g,i]},size:function(){return this.entries.length},keys:function(g){for(var i=g.length,c=0,e=this.entries.length;c<e;c++)g[i+c]=this.entries[c][0]},values:function(g){for(var i=g.length,c=0,e=this.entries.length;c<e;c++)g[i+c]=this.entries[c][1]},containsKey:function(g){return p(this.entries,g,I,false,this.getEqualityFunction(g))},containsValue:function(g){return p(this.entries,g,Q,false,o)}};function K(){}K.prototype=[];function O(g){return g[0]}
function U(g,i,c){return p(g,i,O,true,c)}function Y(g,i){var c=g[i];if(c&&c instanceof K)return c[1];return null}function l(g,i){var c=[],e={};g=r(g)?g:B;i=r(i)?i:null;this.put=function(n,E){v(n);y(E);var L=g(n),m=Y(e,L);if(m){var P=m.getEntryForKey(n);if(P)P[1]=E;else m.addEntry(n,E)}else{var ca=new K;ca[0]=L;ca[1]=new q(n,E,i);c[c.length]=ca;e[L]=ca}};this.get=function(n){v(n);var E=g(n),L=Y(e,E);if(L){var m=L.getEntryForKey(n);if(m)return m[1]}return null};this.containsKey=function(n){v(n);var E=
g(n),L=Y(e,E);if(L)return L.containsKey(n);return false};this.containsValue=function(n){y(n);for(var E=0,L=c.length;E<L;E++)if(c[E][1].containsValue(n))return true;return false};this.clear=function(){c.length=0;e={}};this.isEmpty=function(){return c.length===0};this.keys=function(){for(var n=[],E=0,L=c.length;E<L;E++)c[E][1].keys(n);return n};this.values=function(){for(var n=[],E=0,L=c.length;E<L;E++)c[E][1].values(n);return n};this.remove=function(n){v(n);var E=g(n),L=Y(e,E);if(L)if(L.removeEntryForKey(n))if(L.size()===
0){var m=U(c,E,L.getEqualityFunction(n));N(c,m[0]);delete e[E]}};this.size=function(){for(var n=0,E=0,L=c.length;E<L;E++)n+=c[E][1].size();return n}}return l}();plt.Kernel={};
(function(){var f=plt.types.NumberTower,r=plt.types.MobySyntaxError,M=plt.types.MobyTypeError,C=plt.types.MobyRuntimeError,S=plt.types.MobyTestingError;if(!Array.indexOf)Array.prototype.indexOf=function(b){for(var d=0;d<this.length;d++)if(this[d]==b)return d;return-1};function z(b,d,k){b.addEventListener?b.addEventListener(d,k,false):b.attachEvent("on"+d,k,false)}function B(b,d,k){b.addEventListener?b.removeEventListener(d,k,false):b.detachEvent("on"+d,k,false)}function G(b){function d(){}d.prototype=
b;return new d}function J(){this.parentMap=na()}J.prototype.find=function(b){var d=this.parentMap.containsKey(b)?this.parentMap.get(b):b;if(d===b)return d;else{d=this.find(d);this.parentMap.put(b,d);return d}};J.prototype.merge=function(b,d){this.parentMap.put(this.find(b),this.find(d))};var o=plt.types.isNumber;function p(b){return b!=null&&b!=undefined&&b instanceof plt.types.Symbol}function N(b){return b!=null&&b!=undefined&&b instanceof plt.types.Char}function V(b){return stx_question_(b)}function D(b){return typeof b==
"string"}function H(b){return b==plt.types.Logic.TRUE||b==plt.types.Logic.FALSE}function v(b){return b!=null&&b!=undefined&&b instanceof plt.types.Cons}function y(b){return b!=null&&b!=undefined&&b instanceof plt.types.Empty}function q(b){return o(b)&&b.isReal()}function I(b){return o(b)&&b.isRational()}function Q(b){return o(b)}function K(b){return typeof b=="function"}function O(b){return o(b)&&b.isInteger()}function U(b){return o(b)&&b.isInteger()&&b.toFixnum()>=0}function Y(b){for(var d=0;d<b.length;d++)if(!(b[d]>=
"a"&&b[d]<="z"||b[d]>="A"&&b[d]<="Z"))return false;return true}var l=function(){var b=/^\s*$/;return function(d){return d.match(b)?true:false}}();function g(b){return b!=null&&b!=undefined&&b instanceof plt.types.Vector}function i(b,d){for(var k=0;k<b.length;k++)d.apply(b[k],[b[k],k])}function c(b,d,k,s){if(!b(d,k).valueOf())return false;if(s.length==0)return true;if(!b(k,s[0]).valueOf())return false;for(d=0;d<s.length-1;d++)if(!b(s[d],s[d+1]).valueOf())return false;return true}function e(b,d,k){var s=
d;for(d=0;d<k.length;d++)b(s,k[d]).valueOf()||(s=k[d]);return s}function n(b){return b!=null&&b!=undefined&&(b instanceof plt.types.Cons||b instanceof plt.types.Empty)}function E(b){var d=["th","st","nd","rd","th","th","th","th","th","th"];return Math.floor(b/10)%10==1?b+"th":b+d[b%10]}function L(b,d,k,s){return plt.Kernel.format("~a: expects type <~a> as ~a argument, given: ~s",[b,d,E(k),s])}function m(b,d,k,s,F){if(!d(b))throw new M(L(k,s,F,b));}function P(b,d,k){if(!n(b))throw new M(L(d,"list",
k,b));}function ca(b,d,k,s,F){if(!n(b))throw new M(L(k,"listof "+s,F,b));for(;!b.isEmpty();){if(!d(b.first()))throw new M(L(k,"listof "+s,F,b));b=b.rest()}}function ia(b,d,k,s){return function(F,W,aa){m(F,b,s,d,1);m(W,b,s,d,2);i(aa,function(ea,ma){m(ea,b,s,d,ma+3)});return k(F,W,aa)}}function ha(b,d){return ia(o,"number",function(k,s,F){return c(b,k,s,F)},d)}function da(b,d){return ia(N,"char",function(k,s,F){return c(b,k,s,F)},d)}function fa(b,d){return ia(D,"string",function(k,s,F){return c(b,k,
s,F)},d)}plt.Kernel={_heir:G,pi:plt.types.FloatPoint.pi,e:plt.types.FloatPoint.e,struct_question_:function(b){return b!=null&&b!=undefined&&b instanceof plt.types.Struct},number_question_:function(b){return o(b)},equal_question_:function(b,d){return plt.types.isEqual(b,d,new J)},equal_tilde__question_:function(b,d,k){m(k,o,"equal~?","number",3);return o(b)&&o(d)?f.approxEqual(b,d,k):plt.types.isEqual(b,d,new J)},eq_question_:function(b,d){return b==d},eqv_question_:function(b,d){if(o(b)&&o(d))return f.eqv(b,
d);else if(N(b)&&N(d))return b.getValue()==d.getValue();return b===d},identity:function(b){return b},cons:function(b,d){P(d,"cons",2);return plt.types.Cons.makeInstance(b,d)},first:function(b){P(b,"first",1);return b.first()},rest:function(b){P(b,"rest",1);return b.rest()},second:function(b){P(b,"second",1);return b.rest().first()},third:function(b){P(b,"third",1);return b.rest().rest().first()},fourth:function(b){P(b,"fourth",1);return b.rest().rest().rest().first()},fifth:function(b){P(b,"fifth",
1);return b.rest().rest().rest().rest().first()},random:function(b){m(b,O,"random","integer",1);return plt.types.Rational.makeInstance(Math.floor(f.toFixnum(b)*Math.random()),1)},current_dash_seconds:function(){return plt.types.Rational.makeInstance(Math.floor((new Date).getTime()/1000))},floor:function(b){m(b,o,"floor","number",1);return b.floor()},ceiling:function(b){m(b,o,"ceiling","number",1);return b.ceiling()},sqrt:function(b){m(b,o,"sqrt","number",1);return b.sqrt()},integer_dash_sqrt:function(b){m(b,
O,"integer-sqrt","integer",1);b=b.sqrt();return I(b)?plt.types.Rational.makeInstance(b.toFixnum()):q(b)?plt.types.Rational.makeInstance(b.toFixnum()):plt.types.Complex.makeInstance(plt.types.Rational.makeInstance(plt.Kernel.real_dash_part(b).toFixnum()),plt.types.Rational.makeInstance(plt.Kernel.imag_dash_part(b).toFixnum()))},sqr:function(b){m(b,o,"sqr","number",1);return f.sqr(b)},sin:function(b){m(b,o,"sin","number",1);return b.sin()},cos:function(b){m(b,o,"cos","number",1);return b.cos()},modulo:function(b,
d){m(b,o,"modulo","number",1);m(d,o,"modulo","number",2);return f.modulo(b,d)},zero_question_:function(b){m(b,o,"zero?","number",1);return f.equal(b,plt.types.Rational.ZERO)},_equal__tilde_:function(b,d,k){m(b,o,"=~","number",1);m(d,o,"=~","number",2);m(k,o,"=~","number",3);return f.approxEqual(b,d,k)},abs:function(b){m(b,o,"abs","number",1);return f.abs(b)},add1:function(b){m(b,o,"add1","number",1);return f.add(b,plt.types.Rational.ONE)},sub1:function(b){m(b,o,"sub1","number",1);return f.subtract(b,
plt.types.Rational.ONE)},_plus_:function(b){i(b,function(s,F){m(s,o,"+","number",F+1)});var d,k=plt.types.Rational.ZERO;for(d=0;d<b.length;d++)k=f.add(k,b[d]);return k},_dash_:function(b,d){m(b,o,"-","number",1);i(d,function(s,F){m(s,o,"-","number",F+2)});if(d.length==0)return f.subtract(plt.types.Rational.ZERO,b);var k=b;for(b=0;b<d.length;b++)k=f.subtract(k,d[b]);return k},_star_:function(b){i(b,function(s,F){m(s,o,"*","number",F+1)});var d,k=plt.types.Rational.ONE;for(d=0;d<b.length;d++)k=f.multiply(k,
b[d]);return k},_slash_:function(b,d){m(b,o,"/","number",1);i(d,function(s,F){m(s,o,"/","number",F+2)});var k=b;if(d.length==0)return f.divide(plt.types.Rational.ONE,k);else{for(b=0;b<d.length;b++)k=f.divide(k,d[b]);return k}},_equal_:ha(f.equal,"="),_greaterthan__equal_:ha(f.greaterThanOrEqual,">="),_lessthan__equal_:ha(f.lessThanOrEqual,"<="),_greaterthan_:ha(f.greaterThan,">"),_lessthan_:ha(f.lessThan,"<"),min:function(b,d){m(b,o,"min","number",1);i(d,function(k,s){m(this,o,"min","number",s+2)});
return e(f.lessThanOrEqual,b,d)},max:function(b,d){m(b,o,"max","number",1);i(d,function(k,s){m(this,o,"max","number",s+2)});return e(f.greaterThanOrEqual,b,d)},lcm:function(b,d){m(b,O,"lcm","number",1);i(d,function(k,s){m(this,O,"lcm","number",s+2)});return f.lcm(b,d)},gcd:function(b,d){m(b,O,"gcd","number",1);i(d,function(k,s){m(this,O,"gcd","number",s+2)});return f.gcd(b,d)},exact_dash__greaterthan_inexact:function(b){m(b,o,"exact->inexact","number",1);return plt.types.FloatPoint.makeInstance(b.toFloat())},
inexact_dash__greaterthan_exact:function(b){m(b,o,"inexact->exact","number",1);return f.toExact(b)},exact_question_:function(b){m(b,o,"exact?","number",1);return b.isExact()},inexact_question_:function(b){m(b,o,"inexact?","number",1);return!b.isExact()},rational_question_:function(b){return o(b)&&b.isRational()},number_dash__greaterthan_string:function(b){m(b,o,"number->string","number",1);return plt.types.String.makeInstance(plt.types.toWrittenString(b))},conjugate:function(b){m(b,o,"conjugate",
"number",1);return b.conjugate()},magnitude:function(b){m(b,o,"magnitude","number",1);return b.magnitude()},log:function(b){m(b,o,"log","number",1);return b.log()},angle:function(b){m(b,o,"angle","number",1);return b.angle()},atan:function(b,d){if(d.length==0){m(b,o,"atan","number",1);return b.atan()}else if(d.length==1){m(b,q,"atan","number",1);m(d[0],q,"atan","number",2);return plt.types.FloatPoint.makeInstance(Math.atan2(f.toFloat(b),f.toFloat(d[0])))}else throw new C(plt.Kernel.format("atan: expects 1 to 2 arguments, given ~a.",
[plt.types.Rational.makeInstance(d.length)]));},expt:function(b,d){m(b,o,"expt","number",1);m(d,o,"expt","number",2);return f.expt(b,d)},exp:function(b){m(b,o,"exp","number",1);return b.exp()},acos:function(b){m(b,o,"acos","number",1);return b.acos()},asin:function(b){m(b,o,"asin","number",1);return b.asin()},tan:function(b){m(b,o,"tan","number",1);return f.divide(b.sin(),b.cos())},complex_question_:function(b){return Q(b)},cosh:function(b){m(b,o,"cosh","number",1);return this._plus_([this.exp(b),
this.exp(b.minus())]).half()},sinh:function(b){m(b,o,"sinh","number",1);return f.subtract(this.exp(b),this.exp(b.minus())).half()},denominator:function(b){m(b,I,"denominator","rational",1);return b.denominator()},numerator:function(b){m(b,I,"numerator","rational",1);return b.numerator()},odd_question_:function(b){m(b,o,"odd?","number",1);return Math.abs(b.toFixnum()%2)==1},even_question_:function(b){m(b,o,"even?","number",1);return Math.abs(b.toFixnum()%2)==0},positive_question_:function(b){m(b,o,
"positive?","number",1);return this._greaterthan_(b,plt.types.Rational.ZERO,[])},negative_question_:function(b){m(b,o,"negative?","number",1);return this._lessthan_(b,plt.types.Rational.ZERO,[])},imag_dash_part:function(b){m(b,o,"imag-part","number",1);return b.imag_dash_part()},real_dash_part:function(b){m(b,o,"real-part","number",1);return b.real_dash_part()},make_dash_polar:function(b,d){if(f.equal(d,plt.types.Rational.ZERO))return b;var k=f.multiply(b,d.cos());b=f.multiply(b,d.sin());return plt.types.Complex.makeInstance(k,
b)},integer_question_:function(b){return O(b)},make_dash_rectangular:function(b,d){return plt.types.Complex.makeInstance(b,d)},quotient:function(b,d){m(b,O,"quotient","integer",1);m(d,O,"quotient","integer",2);b=f.divide(b,d);return plt.Kernel.positive_question_(b)?plt.types.Rational.makeInstance(b.floor().toFixnum(),1):plt.types.Rational.makeInstance(b.ceiling().toFixnum(),1)},remainder:function(b,d){m(b,o,"remainder","number",1);m(d,o,"remainder","number",2);return plt.types.Rational.makeInstance(b.toFixnum()%
d.toFixnum(),1)},real_question_:function(b){return q(b)},round:function(b){m(b,o,"round","number",1);return b.round()},sgn:function(b){m(b,o,"sgn","number",1);if(this.positive_question_(b).valueOf())return plt.types.Rational.ONE;return this.negative_question_(b).valueOf()?plt.types.Rational.NEGATIVE_ONE:plt.types.Rational.ZERO},boolean_equal__question_:function(b,d){m(b,H,"boolean=?","boolean",1);m(d,H,"boolean=?","boolean",2);return b==d},boolean_question_:function(b){return H(b)},false_question_:function(b){return b==
plt.types.Logic.FALSE},not:function(b){if(!b||b===plt.types.Logic.FALSE)return plt.types.Logic.TRUE;return plt.types.Logic.FALSE},symbol_dash__greaterthan_string:function(b){m(b,p,"symbol->string","symbol",1);return plt.types.String.makeInstance(b.val)},symbol_equal__question_:function(b,d){m(b,p,"symbol=?","symbol",1);m(d,p,"symbol=?","symbol",2);return b.val==d.val},symbol_question_:function(b){return p(b)},append:function(b){var d;for(d=0;d<b.length;d++)P(b[d],"append",d+1);if(b.length==0)return plt.types.Empty.EMPTY;
var k=b[0];for(d=1;d<b.length;d++)k=k.append(b[d]);return k},reverse:function(b){P(b,"reverse",1);return plt.types.Cons.reverse(b)},assq:function(b,d){for(P(d,"assq",2);!d.isEmpty()&&!plt.Kernel.eq_question_(b,d.first().first());)d=d.rest();return d.isEmpty()?plt.types.Logic.FALSE:d.first()},caaar:function(b){P(b,"caaar",1);return b.first().first().first()},caadr:function(b){P(b,"caadr",1);return b.first().first().rest()},caar:function(b){P(b,"caar",1);return b.first().first()},cadar:function(b){P(b,
"cadar",1);return b.first().rest().first()},cadddr:function(b){P(b,"cadddr",1);return b.rest().rest().rest().first()},caddr:function(b){P(b,"caddr",1);return b.rest().rest().first()},cadr:function(b){P(b,"cadr",1);return b.rest().first()},car:function(b){P(b,"car",1);return b.first()},cdaar:function(b){P(b,"cdaar",1);return b.first().first().rest()},cdadr:function(b){P(b,"cdadr",1);return b.rest().first().rest()},cdar:function(b){P(b,"cdar",1);return b.first().rest()},cddar:function(b){P(b,"cddar",
1);return b.first().rest().rest()},cdddr:function(b){P(b,"cdddr",1);return b.rest().rest().rest()},cddr:function(b){P(b,"cddr",1);return b.rest().rest()},cdr:function(b){P(b,"cdr",1);return b.rest()},null_question_:function(b){return y(b)},empty_question_:function(b){return y(b)},pair_question_:function(b){return v(b)},cons_question_:function(b){return v(b)},list_question_:function(b){return n(b)},sixth:function(b){P(b,"sixth",1);return b.rest().rest().rest().rest().rest().first()},seventh:function(b){P(b,
"seventh",1);return b.rest().rest().rest().rest().rest().rest().first()},eighth:function(b){P(b,"eighth",1);return b.rest().rest().rest().rest().rest().rest().rest().first()},set_dash_car_bang_:function(b,d){P(b,"set-car!",1);b.f=d},set_dash_cdr_bang_:function(b,d){P(b,"set-cdr!",1);P(d,"set-cdr!",2);b.r=d},length:function(b){P(b,"length",1);for(var d=plt.types.Rational.ZERO;!b.isEmpty();b=b.rest())d=plt.Kernel.add1(d);return d},list:function(b){for(var d=plt.types.Empty.EMPTY,k=b.length-1;k>=0;k--)d=
plt.types.Cons.makeInstance(b[k],d);return d},list_star_:function(b,d){var k=d.pop();if(k==undefined||!k instanceof plt.types.Cons)throw new M("list*: "+k+" not a list");d.unshift(b);return plt.Kernel.append([plt.Kernel.list(d),k])},list_dash_ref:function(b,d){P(b,"list-ref",1);m(d,U,"list-ref","natural",2);for(var k=plt.types.Rational.ZERO;plt.Kernel._lessthan_(k,d,[]);k=plt.Kernel.add1(k))if(b.isEmpty())throw new C("list-ref: index too small");else b=b.rest();return b.first()},remove:function(b,
d){P(d,"member",2);for(var k=d,s=new J,F=plt.types.Empty.EMPTY;!d.isEmpty();)if(plt.types.isEqual(b,d.first(),s).valueOf())return plt.Kernel.append([plt.Kernel.reverse(F),d.rest()]);else{F=plt.types.Cons.makeInstance(d.first(),F);d=d.rest()}return k},member:function(b,d){P(d,"member",2);for(var k=new J;!d.isEmpty();){if(plt.types.isEqual(b,d.first(),k).valueOf())return plt.types.Logic.TRUE;d=d.rest()}return plt.types.Logic.FALSE},memq:function(b,d){for(P(d,"memq",2);!d.isEmpty();){if(plt.Kernel.eq_question_(b,
d.first()).valueOf())return d;d=d.rest()}return plt.types.Logic.FALSE},memv:function(b,d){for(P(d,"memv",2);!d.isEmpty();){if(plt.Kernel.eqv_question_(b,d.first()).valueOf())return d;d=d.rest()}return plt.types.Logic.FALSE},memf:function(b,d){m(b,K,"memf","function",1);for(P(d,"memf",2);!d.isEmpty();){if(b([d.first()]))return d;d=d.rest()}return plt.types.Logic.FALSE},compose:function(b){return function(d){d=d;for(var k=b.length-1;k>=0;k--)d=[b[k](d)];return d[0]}},string_dash__greaterthan_number:function(b){m(b,
D,"string->number","string",1);try{var d=plt.reader.readSchemeExpressions(b,"");if(f.equal(plt.Kernel.length(d),plt.types.Rational.ONE)){var k=stx_dash_e(d.first());return o(k)?k:plt.types.Logic.FALSE}else return plt.types.Logic.FALSE}catch(s){return plt.types.Logic.FALSE}},string_dash__greaterthan_symbol:function(b){m(b,D,"string->symbol","string",1);return plt.types.Symbol.makeInstance(b)},string_dash__greaterthan_int:function(b){m(b,D,"string->int","string",1);return plt.types.Rational.makeInstance(b.toString().charCodeAt(0),
1)},string_dash_append:function(b){i(b,function(d,k){m(d,D,"string-append","string",k+1)});return plt.types.String.makeInstance(b.join(""))},replicate:function(b,d){m(b,U,"replicate","natural",1);m(d,D,"replicate","string",2);for(var k=[],s=0;s<b.toFixnum();s++)k.push(d);return plt.types.String.makeInstance(k.join(""))},string_equal__question_:fa(function(b,d){return b==d},"string=?"),string_lessthan__equal__question_:fa(function(b,d){return b<=d},"string<=?"),string_lessthan__question_:fa(function(b,
d){return b<d},"string<?"),string_greaterthan__equal__question_:fa(function(b,d){return b>=d},"string>=?"),string_greaterthan__question_:fa(function(b,d){return b>d},"string>?"),string_dash_ci_equal__question_:fa(function(b,d){return b.toUpperCase()==d.toUpperCase()},"string-ci=?"),string_dash_ci_lessthan__equal__question_:fa(function(b,d){return b.toUpperCase()<=d.toUpperCase()},"string-ci<=?"),string_dash_ci_lessthan__question_:fa(function(b,d){return b.toUpperCase()<d.toUpperCase()},"string-ci<?"),
string_dash_ci_greaterthan__question_:fa(function(b,d){return b.toUpperCase()>d.toUpperCase()},"string-ci>?"),string_dash_ci_greaterthan__equal__question_:fa(function(b,d){return b.toUpperCase()>=d.toUpperCase()},"string-ci>=?"),string_dash_copy:function(b){m(b,D,"string-copy","string",1);return b.substring(0,b.length)},string_dash_length:function(b){m(b,D,"string-length","string",1);return plt.types.Rational.makeInstance(b.length,1)},string_dash_ref:function(b,d){m(b,D,"string-ref","string",1);m(d,
U,"string-ref","natural",2);if(d.toFixnum()>=b.length)throw new C("string-ref: index >= length");return plt.types.Char.makeInstance(b.charAt(d.toFixnum()))},string_dash_ith:function(b,d){m(b,D,"string-ith","string",1);m(d,U,"string-ith","natural",2);if(d.toFixnum()>=b.length)throw new C("string-ith: index >= string length");return plt.types.String.makeInstance(b.substring(d.toFixnum(),d.toFixnum()+1))},int_dash__greaterthan_string:function(b){m(b,O,"int->string","integer",1);return plt.types.String.makeInstance(String.fromCharCode(b.toFixnum()))},
string_question_:function(b){return D(b)},substring:function(b,d,k){m(b,D,"substring","string",1);m(d,U,"substring","natural",2);m(k,U,"substring","natural",3);if(d.toFixnum()>k.toFixnum())throw new C("substring: begin > end");if(k.toFixnum()>b.length)throw new C("substring: end > length");return String.makeInstance(b.substring(d.toFixnum(),k.toFixnum()))},char_question_:function(b){return N(b)},char_dash__greaterthan_integer:function(b){m(b,N,"char->integer","char",1);b=new String(b.val);return plt.types.Rational.makeInstance(b.charCodeAt(0),
1)},integer_dash__greaterthan_char:function(b){m(b,O,"integer->char","integer",1);b=String.fromCharCode(b.toFixnum());return plt.types.Char.makeInstance(b)},char_equal__question_:da(function(b,d){return b.val==d.val},"char=?"),char_lessthan__question_:da(function(b,d){return b.val<d.val},"char<?"),char_lessthan__equal__question_:da(function(b,d){return b.val<=d.val},"char<=?"),char_greaterthan__question_:da(function(b,d){return b.val>d.val},"char>?"),char_greaterthan__equal__question_:da(function(b,
d){return b.val>=d.val},"char>=?"),char_dash_ci_equal__question_:da(function(b,d){return b.val.toUpperCase()==d.val.toUpperCase()},"char-ci=?"),char_dash_ci_lessthan__question_:da(function(b,d){return b.val.toUpperCase()<d.val.toUpperCase()},"char-ci<?"),char_dash_ci_lessthan__equal__question_:da(function(b,d){return b.val.toUpperCase()<=d.val.toUpperCase()},"char-ci<=?"),char_dash_ci_greaterthan__question_:da(function(b,d){return b.val.toUpperCase()>d.val.toUpperCase()},"char-ci>?"),char_dash_ci_greaterthan__equal__question_:da(function(b,
d){return b.val.toUpperCase()>=d.val.toUpperCase()},"char-ci>=?"),char_dash_numeric_question_:function(b){m(b,N,"char-numeric?","char",1);b=b.val;return b>="0"&&b<="9"},char_dash_alphabetic_question_:function(b){m(b,N,"char-alphabetic?","char",1);b=b.val;return Y(b)},char_dash_whitespace_question_:function(b){m(b,N,"char-whitespace?","char",1);b=b.val;return l(b)},char_dash_upper_dash_case_question_:function(b){m(b,N,"char-upper-case?","char",1);return Y(b.val)&&b.val.toUpperCase()==b.val},char_dash_lower_dash_case_question_:function(b){m(b,
N,"char-lower-case?","char",1);return Y(b.val)&&b.val.toLowerCase()==b.val},char_dash_upcase:function(b){m(b,N,"char-upcase","char",1);return plt.types.Char.makeInstance(b.val.toUpperCase())},char_dash_downcase:function(b){m(b,N,"char-downcase","char",1);return plt.types.Char.makeInstance(b.val.toLowerCase())},list_dash__greaterthan_string:function(b){ca(b,N,"list->string","char",1);for(var d="";!b.isEmpty();){d+=b.first().val;b=b.rest()}return plt.types.String.makeInstance(d)},implode:function(b){ca(b,
D,"implode","string",1);for(var d=[];!b.isEmpty();){d.push(b.first().toString());b=b.rest()}return plt.types.String.makeInstance(d.join(""))},string_dash_numeric_question_:function(b){m(b,D,"string-numeric?","string",1);for(var d=0;d<b.length;d++)if(b[d]<"0"||b[d]>"9")return plt.types.Logic.FALSE;return plt.types.Logic.TRUE},string_dash_alphabetic_question_:function(b){m(b,D,"string-alphabetic?","string",1);return Y(b)?plt.types.Logic.TRUE:plt.types.Logic.FALSE},string_dash_whitespace_question_:function(b){m(b,
D,"string-whitespace?","string",1);return l(b)?plt.types.Logic.TRUE:plt.types.Logic.FALSE},string_dash_upper_dash_case_question_:function(b){m(b,D,"string-upper-case?","string",1);return Y(b)&&b.toUpperCase()==b},string_dash_lower_dash_case_question_:function(b){m(b,D,"string-lower-case?","string",1);return Y(b)&&b.toLowerCase()==b},string:function(b){i(b,function(s,F){m(this,N,"string","char",F+1)});for(var d=[],k=0;k<b.length;k++)d.push(b[k].val);return String.makeInstance(d.join(""))},make_dash_string:function(b,
d){m(b,U,"make-string","natural",1);m(d,N,"make-string","char",2);var k="";d=d.val;for(var s=plt.types.Rational.ZERO;plt.Kernel._lessthan_(s,b,[]);s=plt.Kernel.add1(s))k+=d;return plt.types.String.makeInstance(k)},string_dash__greaterthan_list:function(b){m(b,D,"string->list","string",1);b=b;for(var d=plt.types.Empty.EMPTY,k=b.length-1;k>=0;k--)d=plt.types.Cons.makeInstance(plt.types.Char.makeInstance(b.charAt(k)),d);return d},explode:function(b){m(b,D,"explode","string",1);b=b;for(var d=plt.types.Empty.EMPTY,
k=b.length-1;k>=0;k--)d=plt.types.Cons.makeInstance(plt.types.String.makeInstance(b.charAt(k)),d);return d}};plt.Kernel.isEqual=plt.types.isEqual;plt.Kernel._dumpKernelSymbols=function(){var b=plt.types.Empty.EMPTY;for(var d in plt.Kernel)if(plt.Kernel.hasOwnProperty(d))b=plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance(d),b);return b};plt.Kernel.openInputStx=function(){throw new C("open-input-stx currently unsupported");};function na(){return new plt._Hashtable(function(b){return plt.types.getEqHashCode(b)},
function(b,d){return b===d})}function ja(){this.hash=na();this._eqHashCode=plt.types.makeEqHashCode()}ja.prototype.toWrittenString=function(){return"<hash>"};ja.prototype.toDisplayedString=function(){return"<hash>"};ja.prototype.isEqual=function(b){if(b==undefined||b==null||!(b instanceof ja))return false;if(this.hash.keys().length!=b.hash.keys().length)return false;for(var d=this.hash.keys(),k=0;k<d.length;k++)if(this.hash.get(d[k])!==b.hash.get(d[k]))return false;return true};function w(){this.hash=
new plt._Hashtable(function(b){return plt.types.toWrittenString(b)},function(b,d){return plt.Kernel.equal_question_(b,d)});this._eqHashCode=plt.types.makeEqHashCode()}w.prototype.toWrittenString=function(){return"<hash>"};w.prototype.toDisplayedString=function(){return"<hash>"};w.prototype.isEqual=function(b,d){if(b==undefined||b==null||!(b instanceof w))return false;if(this.hash.keys().length!=b.hash.keys().length)return false;for(var k=this.hash.keys(),s=0;s<k.length;s++)if(!plt.Kernel.isEqual(this.hash.get(k[s]),
b.hash.get(k[s]),d))return false;return true};plt.Kernel.makeHashEq=function(){return new ja};plt.Kernel.makeHash=function(){return new w};plt.Kernel.hashSetBang=function(b,d,k){m(b,R,"hash-set!","hash",1);b.hash.put(d,k)};plt.Kernel.hashRef=function(b,d,k){m(b,R,"hash-ref","hash",1);if(b.hash.containsKey(d))return b.hash.get(d);else{if(K(k))return k([]);return k}};plt.Kernel.hashRemoveBang=function(b,d){m(b,R,"hash-remove!","hash",1);b.hash.remove(d)};plt.Kernel.hashMap=function(b,d){m(b,R,"hash-map",
"hash",1);for(var k=plt.types.Empty.EMPTY,s=b.hash.keys(),F=0;F<s.length;F++){var W=b.hash.get(s[F]);k=plt.Kernel.cons(d([s[F],W]),k)}return k};plt.Kernel.hashForEach=function(b,d){m(b,R,"hash-map","hash",1);for(var k=b.hash.keys(),s=0;s<k.length;s++){var F=b.hash.get(k[s]);d([k[s],F])}};function R(b){return b!=null&&b!=undefined&&(b instanceof ja||b instanceof w)}plt.Kernel.isHash=R;plt.Kernel.apply=function(b,d,k){var s,F=[];m(b,K,"apply","function",1);if(k.length==0){s=d;for(P(s,"apply",2);!s.isEmpty();){var W=
s.first();F.push(W);s=s.rest()}}else{s=k.pop();for(P(s,"apply",3);!s.isEmpty();){W=s.first();F.push(W);s=s.rest()}for(;k.length>0;)F.unshift(k.pop());F.unshift(d)}if(X(b,F.length))return b(F);else throw new C(plt.Kernel.format("~a: expects ~a, given ~a: ~s",[b,$(b),F.length,plt.Kernel.list(F)]));};plt.Kernel.map=function(b,d){m(b,K,"map","function",1);i(d,function(W,aa){P(W,"map",aa+2)});for(var k=plt.types.Empty.EMPTY;!d[0].isEmpty();){for(var s=[],F=0;F<d.length;F++){s.push(d[F].first());d[F]=d[F].rest()}k=
plt.Kernel.cons(b(s),k)}return plt.Kernel.reverse(k)};plt.Kernel.for_dash_each=function(b,d){m(b,K,"for-each","function",1);for(i(d,function(F,W){P(F,"for-each",W+2)});!d[0].isEmpty();){for(var k=[],s=0;s<d.length;s++){k.push(d[s].first());d[s]=d[s].rest()}b(k)}};plt.Kernel.andmap=function(b,d){m(b,K,"andmap","function",1);for(i(d,function(F,W){P(F,"andmap",W+2)});!d[0].isEmpty();){for(var k=[],s=0;s<d.length;s++){k.push(d[s].first());d[s]=d[s].rest()}if(!b(k))return plt.types.Logic.FALSE}return plt.types.Logic.TRUE};
plt.Kernel.ormap=function(b,d){m(b,K,"ormap","function",1);for(i(d,function(F,W){P(F,"ormap",W+2)});!d[0].isEmpty();){for(var k=[],s=0;s<d.length;s++){k.push(d[s].first());d[s]=d[s].rest()}if(b(k))return plt.types.Logic.TRUE}return plt.types.Logic.FALSE};plt.Kernel.filter=function(b,d){m(b,K,"filter","function",1);m(d,n,"filter","list",2);for(var k=plt.types.Empty.EMPTY;!d.isEmpty();){if(b([d.first()]))k=plt.types.Cons.makeInstance(d.first(),k);d=d.rest()}return plt.Kernel.reverse(k)};plt.Kernel.foldl=
function(b,d,k){m(b,K,"foldl","function",1);i(k,function(W,aa){m(W,n,"foldl","list",aa+3)});for(d=d;!k[0].isEmpty();){for(var s=[],F=0;F<k.length;F++){s.push(k[F].first());k[F]=k[F].rest()}s.push(d);d=b(s)}return d};plt.Kernel.foldr=function(b,d,k){m(b,K,"foldr","function",1);i(k,function(W,aa){m(W,n,"foldr","list",aa+3)});d=d;for(var s=0;s<k.length;s++)k[s]=plt.Kernel.reverse(k[s]);for(;!k[0].isEmpty();){var F=[];for(s=0;s<k.length;s++){F.push(k[s].first());k[s]=k[s].rest()}F.push(d);d=b(F)}return d};
plt.Kernel.argmin=function(b,d){m(b,K,"argmin","function",1);m(d,v,"argmin","nonempty list",2);var k=d.first(),s=b([d.first()]).toFloat();for(d=d.rest();!d.isEmpty();){var F=b([d.first()]).toFloat();if(F<s){k=d.first();s=F}d=d.rest()}return k};plt.Kernel.argmax=function(b,d){m(b,K,"argmax","function",1);m(d,v,"argmax","nonempty list",2);var k=d.first(),s=b([d.first()]).toFloat();for(d=d.rest();!d.isEmpty();){var F=b([d.first()]).toFloat();if(F>s){k=d.first();s=F}d=d.rest()}return k};plt.Kernel.sort=
function(b,d){m(b,n,"sort","list",1);m(d,K,"sort","function",2);for(var k=[];!b.isEmpty();){k.push(b.first());b=b.rest()}k.sort(function(s,F){return d([s,F])?-1:1});return plt.Kernel.list(k)};plt.Kernel.quicksort=plt.Kernel.sort;plt.Kernel.build_dash_list=function(b,d){m(b,U,"build-list","natural",1);m(d,K,"build-list","function",2);for(var k=plt.types.Empty.EMPTY,s=0;s<b.toFixnum();s++)k=plt.Kernel.cons(d([plt.types.Rational.makeInstance(s,1)]),k);return plt.Kernel.reverse(k)};plt.Kernel.build_dash_string=
function(b,d){m(b,U,"build-string","natural",1);m(d,K,"build-string","function",2);for(var k=[],s=0;s<b.toFixnum();s++){var F=d([plt.types.Rational.makeInstance(s,1)]);k.push(F.val)}return plt.types.String.makeInstance(k.join(""))};plt.Kernel.format=function(b,d){m(b,D,"format","string",1);var k=new RegExp("~[sSaAn%~]","g"),s=d;function F(W){if(W=="~~")return"~";else if(W=="~n"||W=="~%")return"\n";else if(W=="~s"||W=="~S"){if(s.length==0)throw new C("format: fewer arguments passed than expected");
return plt.types.toWrittenString(s.shift())}else if(W=="~a"||W=="~A"){if(s.length==0)throw new C("format: fewer arguments passed than expected");return plt.types.toDisplayedString(s.shift())}else throw new C("Unimplemented format "+W);}b=plt.types.String.makeInstance(b.replace(k,F));if(s.length>0)throw new C("format: More arguments passed than expected");return b};plt.Kernel.string=function(b){i(b,function(s,F){m(s,N,"string","char",F+1)});for(var d=[],k=0;k<b.length;k++)d.push(b[k].getValue());return plt.types.String.makeInstance(d.join(""))};
plt.Kernel.procedure_question_=function(b){return K(b)};plt.Kernel.procedure_dash_arity=function(b){m(b,K,"procedure-arity","function",1);return b.procedureArity};function X(b,d){return v(b.procedureArity)?d>=b.procedureArity.rest().first().toFixnum():d==b.procedureArity.toFixnum()}function $(b){return v(b.procedureArity)?"at least "+(b.procedureArity.rest().first().toFixnum()==1)?"one argument":b.procedureArity.rest().first().toFixnum()+" arguments":b.procedureArity.toFixnum()==1?"one argument":
b.procedureArity.toFixnum()+" arguments"}plt.Kernel.xml_dash__greaterthan_s_dash_exp=function(b){m(b,D,"xml->s-exp","string",1);if(b.length==0)return plt.types.String.makeInstance("");var d;try{d=new ActiveXObject("Microsoft.XMLDOM");d.async="false";d.loadXML(b)}catch(k){d=new DOMParser;d=d.parseFromString(b,"text/xml")}function s(W){for(var aa=plt.types.Empty.EMPTY,ea=0;ea<W.length;ea++){var ma=plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance(W.item(ea).nodeName),plt.types.Cons.makeInstance(W.item(ea).nodeValue,
plt.types.Empty.EMPTY));aa=plt.types.Cons.makeInstance(ma,aa)}return plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance("@"),plt.Kernel.reverse(aa))}function F(W){if(W.nodeType==Node.ELEMENT_NODE){for(var aa=plt.types.Empty.EMPTY,ea=W.firstChild;ea!=null;){var ma=F(ea);aa=D(ma)&&!aa.isEmpty()&&D(aa.first())?plt.types.Cons.makeInstance(aa.first()+ma,aa.rest()):plt.types.Cons.makeInstance(ma,aa);ea=ea.nextSibling}aa=plt.Kernel.reverse(aa);aa=plt.types.Cons.makeInstance(s(W.attributes),aa);return aa=
plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance(W.nodeName),aa)}else return W.nodeType==Node.TEXT_NODE?W.textContent:W.nodeType==Node.CDATA_SECTION_NODE?W.data:plt.types.Empty.EMPTY}return b=F(d.firstChild)};plt.Kernel.split_dash_whitespace=function(b){b=b.replace(/^\s+/,"");b=b.replace(/\s+$/,"");return plt.Kernel.list(b.split(/\s+/))};plt.Kernel.box=function(b){return new plt.types.Box(b)};plt.Kernel.unbox=function(b){m(b,plt.Kernel.box_question_,"unbox","box",1);return b.unbox()};plt.Kernel.box_question_=
function(b){return b!=null&&b!=undefined&&b instanceof plt.types.Box};plt.Kernel.set_dash_box_bang_=function(b,d){m(b,plt.Kernel.box_question_,"set-box!","box",1);b.set(d)};function ka(b,d){plt.types.Struct.call(this,"make-posn",[b,d]);this._eqHashCode=plt.types.makeEqHashCode()}ka.prototype=G(plt.types.Struct.prototype);function oa(b,d){return new ka(b,d)}function pa(b){m(b,ga,"posn-x","posn",1);return b._fields[0]}function x(b){m(b,ga,"posn-y","posn",1);return b._fields[1]}function ga(b){return b!=
null&&b!=undefined&&b instanceof ka}plt.Kernel.make_dash_posn=oa;plt.Kernel.posn_question_=ga;plt.Kernel.posn_dash_x=pa;plt.Kernel.posn_dash_y=x;plt.Kernel.error=function(b,d){m(b,p,"error","symbol",1);m(d,D,"error","string",2);throw new C(plt.Kernel.format("~a: ~a",[b,d]).toString());};plt.Kernel.syntax_dash_error=function(b,d){m(b,D,"syntax-error","string",1);m(d,V,"syntax-error","stx",2);throw new r(b,d);};plt.Kernel.reportError=function(b){var d;d=typeof console!="undefined"&&typeof console.log!=
"undefined"?function(k){console.log(k)}:function(k){alert(k)};if(typeof b=="string")d(b);else b.msg?d(b.msg):d(b.toString());if(plt.Kernel.lastLoc){b=plt.Kernel.lastLoc;if(typeof b==="string")d("Error was raised around "+b);else typeof b!=="undefined"&&typeof b.line!=="undefined"&&d("Error was raised around: "+plt.Kernel.locToString(b))}};plt.Kernel._void_=function(){};plt.Kernel.build_dash_vector=function(b,d){m(b,U,"build-vector","natural",1);m(d,K,"build-vector","function",2);for(var k=[],s=0;s<
b.toFixnum();s++)k[s]=d([plt.types.Rational.makeInstance(s,1)]);return plt.types.Vector.makeInstance(b.toFixnum(),k)};plt.Kernel.make_dash_vector=function(b,d){m(b,U,"make-vector","natural",1);m(d,function(F){return F.length==0||F.length==1},"make-vector","at most two",2);b=b.toFixnum();var k,s=plt.types.Vector.makeInstance(b);if(d.length==1)for(k=0;k<b;k++)s.set(k,d[0]);return s};plt.Kernel.vector=function(b){return plt.types.Vector.makeInstance(b.length,b)};plt.Kernel.vector_dash_length=function(b){m(b,
g,"vector-length","vector",1);return plt.types.Rational.makeInstance(b.length())};plt.Kernel.vector_dash_ref=function(b,d){m(b,g,"vector-ref","vector",1);m(d,function(k){return U(k)&&k.toFixnum()<b.length()},"vector-ref","natural < vector length",2);return b.ref(d.toFixnum())};plt.Kernel.vector_dash_set_bang_=function(b,d,k){m(b,g,"vector-set!","vector",1);m(d,function(s){return U(s)&&s.toFixnum()<b.length()},"vector-set!","natural < vector length",2);return b.set(d.toFixnum(),k)};plt.Kernel.vector_question_=
function(b){return g(b)?plt.types.Logic.TRUE:plt.types.Logic.FALSE};plt.Kernel.check_dash_expect=function(b,d){b=b([]);d=d([]);if(!plt.Kernel.equal_question_(b,d))throw new S(plt.Kernel.format("~s doesn't match the expected value ~s",[b,d]));};plt.Kernel.check_dash_within=function(b,d,k){b=b([]);d=d([]);k=k([]);if(!plt.Kernel._equal__tilde_(b,d,k))throw new S(plt.Kernel.format("~s doesn't match the expected value ~s within ~s",[b,d,k]));};plt.Kernel.check_dash_error=function(b,d){d=d([]);var k;try{k=
b([])}catch(s){if(plt.Kernel.equal_question_(s.msg,d))return;else throw new S(plt.Kernel.format("check-error encountered the error ~s instead of the expected error ~s.",[s.msg,d]));}throw new S(plt.Kernel.format("check-error expected the error ~s, but instead received the value ~s.",[d,k]));};plt.Kernel.lastLoc=undefined;plt.Kernel.setLastLoc=function(b){plt.Kernel.lastLoc=b;return true};plt.Kernel.locToString=function(b){if(typeof b==="string")return b;return"offset="+b.offset+", line="+b.line+", span="+
b.span+", id="+b.id};plt.Kernel.printf=function(b,d){b=plt.Kernel.format(b,d);plt.Kernel.printHook(b)};plt.Kernel.printHook=function(){};plt.Kernel.isSymbol=p;plt.Kernel.isChar=N;plt.Kernel.isString=D;plt.Kernel.isBoolean=H;plt.Kernel.isPair=v;plt.Kernel.isEmpty=y;plt.Kernel.isReal=q;plt.Kernel.isRational=I;plt.Kernel.isComplex=Q;plt.Kernel.isInteger=O;plt.Kernel.isNatural=U;plt.Kernel.isNumber=o;plt.Kernel.isAlphabeticString=Y;plt.Kernel.isWhitespaceString=l;plt.Kernel.isList=n;plt.Kernel.isVector=
g;plt.Kernel.isFunction=K;plt.Kernel.arrayEach=i;plt.Kernel.check=m;plt.Kernel.checkList=P;plt.Kernel.checkListof=ca;plt.Kernel.MobyError=plt.types.MobyError;plt.Kernel.MobyParserError=plt.types.MobyParserError;plt.Kernel.MobySyntaxError=plt.types.MobySyntaxError;plt.Kernel.MobyTypeError=plt.types.MobyTypeError;plt.Kernel.MobyRuntimeError=plt.types.MobyRuntimeError;plt.Kernel.MobyTestingError=plt.types.MobyTestingError;plt.Kernel.attachEvent=z;plt.Kernel.detachEvent=B;plt.Kernel.ordinalize=E})();
plt.reader={};
(function(){function f(J){return J.replace(/\\./g,function(o){switch(o){case "\\b":return"\u0008";case "\\f":return"\u000c";case "\\n":return"\n";case "\\r":return"\r";case "\\t":return"\t";case "\\v":return"\u000b";default:return o.substring(1)}})}function r(J){var o,p=0;for(o=0;o<J.length;o++)J[o]=="\n"&&p++;return p}var M="[^\\s\\(\\)\\[\\]\\{\\}\\\"\\,\\'\\`\\;]",C="(?:(?:\\d+\\/\\d+)|(?:(?:\\d+\\.\\d+|\\d+\\.|\\.\\d+)(?:[eE][+\\-]?\\d+)?)|(?:\\d+(?:[eE][+\\-]?\\d+)?))",S=[["whitespace",/^(\s+)/],
["#;",/^([#][;])/],["comment",/^([#][|](?:(?:\|[^\#])|[^\|])*[|][#])/],["comment",/(^;[^\n]*)/],["(",/^(\(|\[|\{)/],[")",/^(\)|\]|\})/],["'",/^(\')/],["`",/^(`)/],[",@",/^(,@)/],[",",/^(,)/],["char",/^\#\\(newline|backspace)/],["char",/^\#\\(.)/],["string",/^"((?:([^\\"]|(\\.)))*)"/],["symbol-or-number",new RegExp("^("+M+"+)")]],z=[["complex",new RegExp("^((?:(?:\\#[ei])?[+\\-]?"+C+")?(?:[+\\-]"+C+")i$)")],["number",/^((?:\#[ei])?[+-]inf.0)$/],["number",/^((?:\#[ei])?[+-]nan.0)$/],["number",new RegExp("^((?:\\#[ei])?[+\\-]?"+
C+"$)")]];function B(J,o){var p=0,N=1,V=[];for(o||(o="");1;){for(var D=false,H=0;H<S.length;H++){var v=S[H][0],y=S[H][1];y=J.match(y);if(y!=null){D=y[0];H=y[1];if(v=="string")H=f(H);if(v=="symbol-or-number"){v=false;for(y=0;y<z.length;y++){var q=H.match(z[y][1]);if(q){V.push([z[y][0],H,new Loc(p,N,D.length,o)]);v=true;break}}v||V.push(["symbol",H,new Loc(p,N,D.length,o)])}else v!="whitespace"&&v!="comment"&&V.push([v,H,new Loc(p,N,D.length,o)]);p+=D.length;N+=r(D);J=J.substring(D.length);D=true;break}}if(!D)break}return[V,
J]}function G(J,o){var p=make_dash_stx_colon_list,N=make_dash_stx_colon_atom,V=B(J,o),D=V[0],H=undefined;if(V[1].length>0)throw new plt.types.MobyParserError("Error while tokenizing: the rest of the stream is: "+V[1],new Loc(J.length-V[1].length,r(J.substring(0,J.length-V[1].length)),V[1].length,o));var v=plt.types.Symbol.makeInstance("quote"),y=plt.types.Symbol.makeInstance("quasiquote"),q=plt.types.Symbol.makeInstance("unquote"),I=plt.types.Symbol.makeInstance("unquote-splicing"),Q=plt.types.Empty.EMPTY;
function K(c){return D.length>0&&D[0][0]==c}function O(c){if(D.length==0)if(H)throw new plt.types.MobyParserError("token stream exhausted while trying to eat "+c,H[2]);else throw new plt.types.MobyParserError("token stream exhausted while trying to eat "+c,new Loc(0,0,J.length,o));var e=D.shift();H=e;if(e[0]==c)return e;else throw new plt.types.MobyParserError("Unexpected token "+e,e[2]);}var U,Y,l;l=function(c,e){c=O(c);var n=U();return p(plt.types.Cons.makeInstance(N(e,c[2]),plt.types.Cons.makeInstance(n,
Q)),new Loc(c[2].offset,c[2].line,n.loc.offset-c[2].offset+n.loc.span,o))};function g(c){switch(c){case "(":return")";case "[":return"]";case "{":return"}";default:throw new Error;}}function i(c,e){var n=c.match(/([+\-]?\d+)\/(\d+)/);if(c=="+inf.0")return plt.types.FloatPoint.makeInstance(Number.POSITIVE_INFINITY);else if(c=="-inf.0")return plt.types.FloatPoint.makeInstance(Number.NEGATIVE_INFINITY);else if(c=="+nan.0"||c=="-nan.0")return plt.types.FloatPoint.makeInstance(Number.NaN);else if(c.match(/[eE]/))return plt.types.FloatPoint.makeInstance(parseFloat(c));
else if(c.match(/\./))if(e){c=c.match("^(.*)[.](.*)$");e=plt.types.Rational.makeInstance(parseInt(c[1]||"0")||0);return c[1].match(/-/)?plt.types.NumberTower.subtract(e,plt.types.Rational.makeInstance(parseInt(c[2]),Math.pow(10,c[2].length))):plt.types.NumberTower.add(e,plt.types.Rational.makeInstance(parseInt(c[2]),Math.pow(10,c[2].length)))}else return plt.types.FloatPoint.makeInstance(parseFloat(c));else return n?e?plt.types.Rational.makeInstance(parseInt(n[1]),parseInt(n[2])):plt.types.FloatPoint.makeInstance(parseInt(n[1])/
parseInt(n[2])):e?plt.types.Rational.makeInstance(parseInt(c),1):plt.types.FloatPoint.makeInstance(parseInt(c))}U=function(){if(D.length==0)if(H)throw new plt.types.MobyParserError("Parse broke with empty token stream",H[2]);else throw new plt.types.MobyParserError("Parse broke with empty token stream",new Loc(0,0,J.length,o));switch(D[0][0]){case "(":var c=O("("),e=c[1],n=g(c[1]),E=Y();if(D.length==0)throw new plt.types.MobyParserError("Expected a "+n+" to close "+e,c[2]);else if(D[0][1]!=n)throw new plt.types.MobyParserError("Expected a "+
n+" to close "+e,D[0][2]);e=O(")");return make_dash_stx_colon_list(E,new Loc(c[2].offset,c[2].line,e[2].offset-c[2].offset+1,o));case "#;":O("#;");U();return U();case "'":return l("'",v);case "`":return l("`",y);case ",":return l(",",q);case ",@":return l(",@",I);case "number":c=O("number");return(E=c[1].match(/^(\#[ie])(.+)$/))?E[1]=="#i"?N(i(E[2],false),c[2]):N(i(E[2],true),c[2]):N(i(c[1],true),c[2]);case "complex":c=O("complex");E=c[1].match(/^((?:\#[ei])?)([+\-]?(?:\d+\/\d+|\d+\.\d+|\d+\.|\.\d+|\d+)?)([+\-](?:\d+\/\d+|\d+\.\d+|\d+\.|\.\d+|\d+))i/);
e=E[1]=="#i"?false:true;c=E[2]!=""?i(E[2],e):plt.types.Rational.ZERO;E=i(E[3],e);return c=N(plt.types.Complex.makeInstance(c,E));case "string":c=O("string");return N(plt.types.String.makeInstance(c[1]),c[2]);case "char":c=O("char");return c[1]=="newline"?N(plt.types.Char.makeInstance("\n"),c[2]):c[1]=="backspace"?N(plt.types.Char.makeInstance(String.fromCharCode(8)),c[2]):N(plt.types.Char.makeInstance(c[1]),c[2]);case "symbol":c=O("symbol");if(c[1]==".")throw new plt.types.MobyParserError("Dotted pairs are not currently accepted by Moby",
c[2]);return N(plt.types.Symbol.makeInstance(c[1]),c[2]);default:throw new plt.types.MobyParserError("Parse broke with token stream "+D,D[0][2]);}};Y=function(){for(var c=plt.types.Empty.EMPTY;1;)if(D.length==0||K(")"))break;else if(K("#;")){O("#;");U()}else{var e=U();c=plt.types.Cons.makeInstance(e,c)}return plt.types.Cons.reverse(c)};V=Y();if(D.length>0)throw new plt.types.MobyParserError("More elements in the program's token stream than expected: the next unconsumed token is: "+D[0][1],D[0][2]);
return V}plt.reader.tokenize=B;plt.reader.readSchemeExpressions=G})();function stx_colon_atom(f,r){plt.types.Struct.call(this,"make-stx:atom",[f,r]);this.datum=f;this.loc=r}stx_colon_atom.prototype=new plt.types.Struct;function make_dash_stx_colon_atom(f,r){return f=new stx_colon_atom(f,r)}function stx_colon_atom_dash_datum(f){if(stx_colon_atom_question_(f))return f.datum;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx_colon_atom_dash_datum: not a stx:atom: ~s",[f]));}
function stx_colon_atom_dash_loc(f){if(stx_colon_atom_question_(f))return f.loc;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx_colon_atom_dash_loc: not a stx:atom: ~s",[f]));}function set_dash_stx_colon_atom_dash_datum_bang_(f,r){if(stx_colon_atom_question_(f))f.datum=r;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_atom_dash_datum_bang_: not a stx:atom: ~s",[f]));}
function set_dash_stx_colon_atom_dash_loc_bang_(f,r){if(stx_colon_atom_question_(f))f.loc=r;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_atom_dash_loc_bang_: not a stx:atom: ~s",[f]));}function stx_colon_atom_question_(f){return f!=null&&f!=undefined&&f instanceof stx_colon_atom}function stx_colon_list(f,r){plt.types.Struct.call(this,"make-stx:list",[f,r]);this.elts=f;this.loc=r}stx_colon_list.prototype=new plt.types.Struct;
function make_dash_stx_colon_list(f,r){return new stx_colon_list(f,r)}function stx_colon_list_dash_elts(f){if(stx_colon_list_question_(f))return f.elts;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx_colon_list_dash_elts: not a stx:list: ~s",[f]));}function stx_colon_list_dash_loc(f){if(stx_colon_list_question_(f))return f.loc;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx_colon_list_dash_loc: not a stx:list: ~s",[f]));}
function set_dash_stx_colon_list_dash_elts_bang_(f,r){if(stx_colon_list_question_(f))f.elts=r;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_list_dash_elts_bang_: not a stx:list: ~s",[f]));}function set_dash_stx_colon_list_dash_loc_bang_(f,r){if(stx_colon_list_question_(f))f.loc=r;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_list_dash_loc_bang_: not a stx:list: ~s",[f]));}
function stx_colon_list_question_(f){return f!=null&&f!=undefined&&f instanceof stx_colon_list}function Loc(f,r,M,C){plt.types.Struct.call(this,"make-Loc",[f,r,M,C]);this.offset=f;this.line=r;this.span=M;this.id=C}Loc.prototype=new plt.types.Struct;function make_dash_Loc(f,r,M,C){return new Loc(f,r,M,C)}function Loc_dash_offset(f){if(Loc_question_(f))return f.offset;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc_dash_offset: not a Loc: ~s",[f]));}
function Loc_dash_line(f){if(Loc_question_(f))return f.line;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc_dash_line: not a Loc: ~s",[f]));}function Loc_dash_span(f){if(Loc_question_(f))return f.span;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc_dash_span: not a Loc: ~s",[f]));}function Loc_dash_id(f){if(Loc_question_(f))return f.id;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc_dash_id: not a Loc: ~s",[f]));}
function set_dash_Loc_dash_offset_bang_(f,r){if(Loc_question_(f))f.offset=r;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_offset_bang_: not a Loc: ~s",[f]));}function set_dash_Loc_dash_line_bang_(f,r){if(Loc_question_(f))f.line=r;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_line_bang_: not a Loc: ~s",[f]));}
function set_dash_Loc_dash_span_bang_(f,r){if(Loc_question_(f))f.span=r;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_span_bang_: not a Loc: ~s",[f]));}function set_dash_Loc_dash_id_bang_(f,r){if(Loc_question_(f))f.id=r;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_id_bang_: not a Loc: ~s",[f]));}function Loc_question_(f){return f!=null&&f!=undefined&&f instanceof Loc}
function Loc_dash__greaterthan_string(f){return plt.Kernel.setLastLoc({offset:284,line:14,span:154,id:"stx.ss"})&&plt.Kernel.format(plt.types.String.makeInstance("offset=~a line=~a span=~a id=~s"),[plt.Kernel.setLastLoc({offset:337,line:15,span:18,id:"stx.ss"})&&Loc_dash_offset(f),plt.Kernel.setLastLoc({offset:367,line:16,span:16,id:"stx.ss"})&&Loc_dash_line(f),plt.Kernel.setLastLoc({offset:395,line:17,span:16,id:"stx.ss"})&&Loc_dash_span(f),plt.Kernel.setLastLoc({offset:423,line:18,span:14,id:"stx.ss"})&&
Loc_dash_id(f)])}function stx_question_(f){return plt.Kernel.setLastLoc({offset:489,line:23,span:13,id:"stx.ss"})&&stx_colon_atom_question_(f)||plt.Kernel.setLastLoc({offset:509,line:24,span:13,id:"stx.ss"})&&stx_colon_list_question_(f)}
function stx_dash_e(f){return plt.Kernel.setLastLoc({offset:635,line:31,span:17,id:"stx.ss"})&&stx_colon_atom_question_(f)?plt.Kernel.setLastLoc({offset:658,line:32,span:22,id:"stx.ss"})&&stx_colon_atom_dash_datum(f):plt.Kernel.setLastLoc({offset:687,line:33,span:17,id:"stx.ss"})&&stx_colon_list_question_(f)?plt.Kernel.setLastLoc({offset:710,line:34,span:21,id:"stx.ss"})&&stx_colon_list_dash_elts(f):plt.Kernel.setLastLoc({offset:624,line:30,span:109,id:"stx.ss"})&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),
plt.types.String.makeInstance('cond: fell out of cond around "offset=624 line=30 span=109 id=\\"stx.ss\\""'))}
function stx_dash_loc(f){return plt.Kernel.setLastLoc({offset:797,line:40,span:17,id:"stx.ss"})&&stx_colon_atom_question_(f)?plt.Kernel.setLastLoc({offset:820,line:41,span:20,id:"stx.ss"})&&stx_colon_atom_dash_loc(f):plt.Kernel.setLastLoc({offset:847,line:42,span:17,id:"stx.ss"})&&stx_colon_list_question_(f)?plt.Kernel.setLastLoc({offset:870,line:43,span:20,id:"stx.ss"})&&stx_colon_list_dash_loc(f):plt.Kernel.setLastLoc({offset:786,line:39,span:106,id:"stx.ss"})&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),
plt.types.String.makeInstance('cond: fell out of cond around "offset=786 line=39 span=106 id=\\"stx.ss\\""'))}
function stx_dash_begins_dash_with_question_(f,r){return plt.Kernel.setLastLoc({offset:991,line:49,span:17,id:"stx.ss"})&&stx_colon_atom_question_(f)?plt.types.Logic.FALSE:plt.Kernel.setLastLoc({offset:1023,line:51,span:17,id:"stx.ss"})&&stx_colon_list_question_(f)?plt.Kernel.setLastLoc({offset:1051,line:52,span:36,id:"stx.ss"})&&plt.Kernel.not(plt.Kernel.setLastLoc({offset:1056,line:52,span:30,id:"stx.ss"})&&plt.Kernel.empty_question_(plt.Kernel.setLastLoc({offset:1064,line:52,span:21,id:"stx.ss"})&&
stx_colon_list_dash_elts(f)))&&plt.Kernel.setLastLoc({offset:1098,line:53,span:47,id:"stx.ss"})&&plt.Kernel.symbol_question_(plt.Kernel.setLastLoc({offset:1107,line:53,span:37,id:"stx.ss"})&&stx_dash_e(plt.Kernel.setLastLoc({offset:1114,line:53,span:29,id:"stx.ss"})&&plt.Kernel.first(plt.Kernel.setLastLoc({offset:1121,line:53,span:21,id:"stx.ss"})&&stx_colon_list_dash_elts(f))))&&plt.Kernel.setLastLoc({offset:1156,line:54,span:74,id:"stx.ss"})&&plt.Kernel.symbol_equal__question_(plt.Kernel.setLastLoc({offset:1166,
line:54,span:37,id:"stx.ss"})&&stx_dash_e(plt.Kernel.setLastLoc({offset:1173,line:54,span:29,id:"stx.ss"})&&plt.Kernel.first(plt.Kernel.setLastLoc({offset:1180,line:54,span:21,id:"stx.ss"})&&stx_colon_list_dash_elts(f))),r):plt.Kernel.setLastLoc({offset:980,line:48,span:253,id:"stx.ss"})&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),plt.types.String.makeInstance('cond: fell out of cond around "offset=980 line=48 span=253 id=\\"stx.ss\\""'))}
function datum_dash__greaterthan_stx(f,r){return plt.Kernel.setLastLoc({offset:1461,line:65,span:14,id:"stx.ss"})&&stx_question_(f)?f:plt.Kernel.setLastLoc({offset:1499,line:67,span:15,id:"stx.ss"})&&plt.Kernel.pair_question_(f)||plt.Kernel.setLastLoc({offset:1515,line:67,span:16,id:"stx.ss"})&&plt.Kernel.empty_question_(f)?plt.Kernel.setLastLoc({offset:1538,line:68,span:89,id:"stx.ss"})&&make_dash_stx_colon_list(plt.Kernel.setLastLoc({offset:1553,line:68,span:47,id:"stx.ss"})&&plt.Kernel.map(function(){plt.Kernel.setLastLoc({offset:1558,
line:68,span:33,id:"stx.ss"});function M(C){C=C[0];return plt.Kernel.setLastLoc({offset:1570,line:68,span:20,id:"stx.ss"})&&datum_dash__greaterthan_stx(C,r)}M.toWrittenString=function(){return"<function:lambda>"};M.toDisplayedString=M.toWrittenString;return M}(),[f]),r):plt.types.Logic.TRUE?plt.Kernel.setLastLoc({offset:1644,line:71,span:29,id:"stx.ss"})&&make_dash_stx_colon_atom(f,r):plt.Kernel.setLastLoc({offset:1450,line:64,span:225,id:"stx.ss"})&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),
plt.types.String.makeInstance('cond: fell out of cond around "offset=1450 line=64 span=225 id=\\"stx.ss\\""'))}
function stx_dash__greaterthan_datum(f){return plt.Kernel.setLastLoc({offset:1787,line:84,span:17,id:"stx.ss"})&&stx_colon_atom_question_(f)?plt.Kernel.setLastLoc({offset:1810,line:85,span:22,id:"stx.ss"})&&stx_colon_atom_dash_datum(f):plt.Kernel.setLastLoc({offset:1839,line:86,span:17,id:"stx.ss"})&&stx_colon_list_question_(f)?plt.Kernel.setLastLoc({offset:1862,line:87,span:38,id:"stx.ss"})&&plt.Kernel.map(function(){function r(M){return stx_dash__greaterthan_datum(M[0])}r.toWrittenString=function(){return"<function:stx->datum>"};
r.toDisplayedString=function(){return"<function:stx->datum>"};return r}(),[plt.Kernel.setLastLoc({offset:1878,line:87,span:21,id:"stx.ss"})&&stx_colon_list_dash_elts(f)]):plt.Kernel.setLastLoc({offset:1776,line:83,span:126,id:"stx.ss"})&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),plt.types.String.makeInstance('cond: fell out of cond around "offset=1776 line=83 span=126 id=\\"stx.ss\\""'))}(function(f){(function(){})(f||plt.Kernel.identity)})();plt.world={};plt.world.config={};
(function(){function f(z,B){var G={};for(var J in z)if(z.hasOwnProperty(J))G[J]=z[J];for(J in B)if(B.hasOwnProperty(J))G[J]=B[J];return G}function r(){this.vals={changeWorld:false,shutdownWorld:false,initialEffect:false,onRedraw:false,onDraw:false,onDrawCss:false,tickDelay:false,onTick:false,onTickEffect:false,onKey:false,onKeyEffect:false,onTilt:false,onTiltEffect:false,onAcceleration:false,onAccelerationEffect:false,onShake:false,onShakeEffect:false,onLocationChange:false,onLocationChangeEffect:false,
onAnnounce:false,onAnnounceEffect:false,stopWhen:false,stopWhenEffect:false,connectToGame:false,onGameStart:false,onOpponentTurn:false,onMyTurn:false,afterMyTurn:false,onGameFinish:false}}r.prototype.lookup=function(z){plt.Kernel.check(z,plt.Kernel.isString,"WorldConfig.lookup","string",1);if(z in this.vals)return this.vals[z];else throw Error("Can't find "+z+" in the configuration");};r.prototype.updateAll=function(z){var B=new r;B.vals=f(this.vals,z);return B};plt.world.config.WorldConfig=r;plt.world.config.CONFIG=
new r;function M(){return make_dash_effect_colon_none()}function C(z,B){z.toWrittenString=function(){return"("+B+" ...)"};z.toDisplayedString=z.toWrittenString;return z}plt.world.config.Kernel=plt.world.config.Kernel||{};plt.world.config.Kernel.onRedraw=function(z){plt.Kernel.check(z,plt.Kernel.isFunction,"on-redraw","function",1);return C(function(B){return B.updateAll({onRedraw:z})},"on-redraw")};plt.world.config.Kernel.initialEffect=function(z){return C(function(B){return B.updateAll({initialEffect:z})},
"initial-effect")};plt.world.config.Kernel.onDraw=function(z,B){plt.Kernel.check(z,plt.Kernel.isFunction,"on-draw","function",1);plt.Kernel.check(B,plt.Kernel.isFunction,"on-draw","function",2);return C(function(G){return G.updateAll({onDraw:z,onDrawCss:B})},"on-draw")};plt.world.config.Kernel.onTick=function(z,B){plt.Kernel.check(z,plt.Kernel.isNumber,"on-tick","number",1);plt.Kernel.check(B,plt.Kernel.isFunction,"on-tick","function",2);return plt.world.config.Kernel.onTick_star_(z,B,function(){return M()})};
plt.world.config.Kernel.onTick_star_=function(z,B,G){plt.Kernel.check(z,plt.Kernel.isNumber,"on-tick!","number",1);plt.Kernel.check(B,plt.Kernel.isFunction,"on-tick!","function",2);plt.Kernel.check(G,plt.Kernel.isFunction,"on-tick!","function",3);return C(function(J){var o={onTick:B,onTickEffect:G,tickDelay:plt.types.NumberTower.toFixnum(plt.types.NumberTower.multiply(plt.types.Rational.makeInstance(1000,1),z))};return J.updateAll(o)},"on-tick")};plt.world.config.Kernel.onTilt=function(z){plt.Kernel.check(z,
plt.Kernel.isFunction,"on-tilt","function",1);return plt.world.config.Kernel.onTilt_star_(z,function(){return M()})};plt.world.config.Kernel.onTilt_star_=function(z,B){plt.Kernel.check(z,plt.Kernel.isFunction,"on-tilt!","function",1);plt.Kernel.check(B,plt.Kernel.isFunction,"on-tilt!","function",2);return C(function(G){return G.updateAll({onTilt:z,onTiltEffect:B})},"on-tilt")};plt.world.config.Kernel.onAnnounce=function(z){plt.Kernel.check(z,plt.Kernel.isFunction,"on-announce","function",1);return plt.world.config.Kernel.onAnnounce_star_(z,
function(){return M()})};plt.world.config.Kernel.onAnnounce_star_=function(z,B){plt.Kernel.check(z,plt.Kernel.isFunction,"on-announce!","function",1);plt.Kernel.check(B,plt.Kernel.isFunction,"on-announce!","function",2);return C(function(G){return G.updateAll({onAnnounce:z,onAnnounceEffect:B})},"on-announce")};plt.world.config.Kernel.onAcceleration=function(z){plt.Kernel.check(z,plt.Kernel.isFunction,"on-acceleration","function",1);return plt.world.config.Kernel.onAcceleration_star_(z,function(){return M()})};
plt.world.config.Kernel.onAcceleration_star_=function(z,B){plt.Kernel.check(z,plt.Kernel.isFunction,"on-acceleration!","function",1);plt.Kernel.check(B,plt.Kernel.isFunction,"on-acceleration!","function",2);return C(function(G){return G.updateAll({onAcceleration:z,onAccelerationEffect:B})},"on-acceleration")};plt.world.config.Kernel.onShake=function(z){plt.Kernel.check(z,plt.Kernel.isFunction,"on-shake","function",1);return plt.world.config.Kernel.onShake_star_(z,function(){return M()})};plt.world.config.Kernel.onShake_star_=
function(z,B){plt.Kernel.check(z,plt.Kernel.isFunction,"on-shake!","function",1);plt.Kernel.check(B,plt.Kernel.isFunction,"on-shake!","function",2);return C(function(G){return G.updateAll({onShake:z,onShakeEffect:B})},"on-shake")};plt.world.config.Kernel.onKey=function(z){plt.Kernel.check(z,plt.Kernel.isFunction,"on-key","function",1);return plt.world.config.Kernel.onKey_star_(z,function(){return M()})};plt.world.config.Kernel.onKey_star_=function(z,B){plt.Kernel.check(z,plt.Kernel.isFunction,"on-key!",
"function",1);plt.Kernel.check(B,plt.Kernel.isFunction,"on-key!","function",2);return C(function(G){return G.updateAll({onKey:z,onKeyEffect:B})},"on-key")};plt.world.config.Kernel.onLocationChange=function(z){plt.Kernel.check(z,plt.Kernel.isFunction,"on-location-change","function",1);return plt.world.config.Kernel.onLocationChange_star_(z,function(){return M()})};plt.world.config.Kernel.onLocationChange_star_=function(z,B){plt.Kernel.check(z,plt.Kernel.isFunction,"on-location-change!","function",
1);plt.Kernel.check(B,plt.Kernel.isFunction,"on-location-change!","function",2);return C(function(G){return G.updateAll({onLocationChange:z,onLocationChangeEffect:B})},"on-location-change")};plt.world.config.Kernel.stopWhen=function(z){plt.Kernel.check(z,plt.Kernel.isFunction,"stop-when","function",1);return plt.world.config.Kernel.stopWhen_star_(z,function(){return M()})};plt.world.config.Kernel.stopWhen_star_=function(z,B){plt.Kernel.check(z,plt.Kernel.isFunction,"stop-when!","function",1);plt.Kernel.check(B,
plt.Kernel.isFunction,"stop-when!","function",2);return C(function(G){return G.updateAll({stopWhen:z,stopWhenEffect:B})},"stop-when")};function S(z,B,G,J){return function(o){plt.Kernel.check(o,B,J,G,1);return C(function(p){return p.updateAll({propertyName:o})},J)}}plt.world.config.Kernel.connect_dash_to_dash_game=S("connectToGame",plt.Kernel.isString,"string","connect-to-game");plt.world.config.Kernel.on_dash_game_dash_start=S("onGameStart",plt.Kernel.isFunction,"function","on-game-start");plt.world.config.Kernel.on_dash_opponent_dash_turn=
S("onOpponentTurn",plt.Kernel.isFunction,"function","on-opponent-turn");plt.world.config.Kernel.on_dash_my_dash_turn=S("onMyTurn",plt.Kernel.isFunction,"function","on-my-turn");plt.world.config.Kernel.after_dash_my_dash_turn=S("afterMyTurn",plt.Kernel.isFunction,"function","after-my-turn");plt.world.config.Kernel.on_dash_game_dash_finish=S("onGameFinish",plt.Kernel.isFunction,"function","on-game-finish")})();plt.platform={};
(function(){plt.platform.Platform={};var f=false;plt.platform.Platform.getInstance=function(){f||(f=new r);return f};function r(){this.tiltService=q;this.shakeService=O();this.locationService=M();this.telephonyService=I();this.networkService=l();this.soundService=c();this.powerService=m();this.smsService=ia();this.pickPlaylistService=fa()}r.prototype.getTiltService=function(){return this.tiltService};r.prototype.getShakeService=function(){return this.shakeService};r.prototype.getLocationService=function(){return this.locationService};
r.prototype.getTelephonyService=function(){return this.telephonyService};r.prototype.getNetworkService=function(){return this.networkService};r.prototype.getSoundService=function(){return this.soundService};r.prototype.getPowerService=function(){return this.powerService};r.prototype.getSmsService=function(){return this.smsService};r.prototype.getPickPlaylistService=function(){return this.pickPlaylistService};function M(){return C()?new o:S()?new G:z()?new p:new J}function C(){return typeof Device!=
"undefined"}function S(){return window.google&&window.google.gears&&true}function z(){return typeof navigator!="undefined"&&typeof navigator.geolocation!="undefined"}function B(w,R,X,$){function ka(pa){return pa*Math.PI/180}function oa(pa,x){return Math.pow(Math.sin((ka(pa)-ka(x))/2),2)}return 12756000*Math.asin(Math.min(1,Math.sqrt(oa(w,X)+Math.cos(ka(w))*Math.cos(ka(X))*oa(R,$))))}function G(){this.geo=google.gears.factory.create("beta.geolocation");this.listeners=[];this.currentPosition={latitude:0,
longitude:0,altitude:0,bearing:0,speed:0};this.watchId=false}G.prototype.startService=function(){var w=this;function R(X){w.currentPosition.latitude=X.latitude;w.currentPosition.longitude=X.longitude;w.currentPosition.altitude=X.altitude;for(var $=0;$<w.listeners.length;$++)w.listeners[$](X.latitude,X.longitude)}this.watchId=this.geo.watchPosition(R)};G.prototype.shutdownService=function(){this.geo.clearWatch(this.watchId)};G.prototype.addLocationChangeListener=function(w){this.listeners.push(w)};
G.prototype.getLatitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.latitude)};G.prototype.getLongitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.longitude)};G.prototype.getAltitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.altitude)};G.prototype.getBearing=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.bearing)};G.prototype.getSpeed=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.speed)};
G.prototype.getDistanceBetween=function(w,R,X,$){return plt.types.FloatPoint.makeInstance(B(w.toFloat(),R.toFloat(),X.toFloat(),$.toFloat()))};function J(){}J.prototype.startService=function(){};J.prototype.shutdownService=function(){};J.prototype.addLocationChangeListener=function(){};J.prototype.getLatitude=function(){return plt.types.Rational.ZERO};J.prototype.getLongitude=function(){return plt.types.Rational.ZERO};J.prototype.getAltitude=function(){return plt.types.Rational.ZERO};J.prototype.getBearing=
function(){return plt.types.Rational.ZERO};J.prototype.getSpeed=function(){return plt.types.Rational.ZERO};J.prototype.getDistanceBetween=function(w,R,X,$){return plt.types.FloatPoint.makeInstance(B(w.toFloat(),R.toFloat(),X.toFloat(),$.toFloat()))};function o(){this.locationListeners=[];this.currentPosition={latitude:0,longitude:0,atttitude:0,bearing:0,speed:0};this.watchId=false}o.prototype.startService=function(){var w=this;function R(X){w.currentPosition.latitude=parseFloat(X.latitude);w.currentPosition.longitude=
parseFloat(X.longitude);for(X=0;X<w.locationListeners.length;X++){var $=w.locationListeners[X];$(w.currentPosition.latitude,w.currentPosition.longitude)}}this.watchId=navigator.geolocation.watchPosition(R,function(){},{})};o.prototype.shutdownService=function(){navigator.geolocation.clearWatch(this.watchId)};o.prototype.addLocationChangeListener=function(w){this.locationListeners.push(w)};o.prototype.getLatitude=function(){return plt.types.FloatPoint.makeInstance(navigator.geolocation.lastPosition.latitude)};
o.prototype.getLongitude=function(){return plt.types.FloatPoint.makeInstance(navigator.geolocation.lastPosition.longitude)};o.prototype.getAltitude=function(){return plt.types.Rational.ZERO};o.prototype.getBearing=function(){return plt.types.Rational.ZERO};o.prototype.getSpeed=function(){return plt.types.Rational.ZERO};o.prototype.getDistanceBetween=function(w,R,X,$){return plt.types.FloatPoint.makeInstance(navigator.geolocation.getDistanceBetween(w.toFloat(),R.toFloat(),X.toFloat(),$.toFloat()))};
function p(){this.locationListeners=[];this.currentPosition={latitude:0,longitude:0,atttitude:0,bearing:0,speed:0};this.watchId=false}p.prototype.startService=function(){var w=this;function R(X){w.currentPosition.latitude=X.coords.latitude;w.currentPosition.longitude=X.coords.longitude;for(var $=0;$<w.locationListeners.length;$++){var ka=w.locationListeners[$];ka(X.coords.latitude,X.coords.longitude)}}typeof navigator.geolocation!="undefined"&&typeof navigator.geolocation.getCurrentPosition!="undefined"&&
navigator.geolocation.watchPosition(R);setTimeout(function(){navigator.geolocation.getCurrentPosition(R)},10000)};p.prototype.shutdownService=function(){if(this.watchId){navigator.geolocation.clearWatch(this.watchId);this.watchId=false}};p.prototype.addLocationChangeListener=function(w){this.locationListeners.push(w)};p.prototype.getLatitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.latitude)};p.prototype.getLongitude=function(){return plt.types.FloatPOint.makeInstance(this.currentPosition.longitude)};
p.prototype.getAltitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.altitude)};p.prototype.getBearing=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.bearing)};p.prototype.getSpeed=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.speed)};p.prototype.getDistanceBetween=function(w,R,X,$){return plt.types.FloatPoint.makeInstance(B(w.toFloat(),R.toFloat(),X.toFloat(),$.toFloat()))};var N=[],V=[],D,H;function v(w){for(var R=
0;R<N.length;R++)N[R](parseFloat(w.x),parseFloat(w.y),parseFloat(w.z))}function y(w){for(var R=0;R<V.length;R++)V[R](parseFloat(w.azimuth),parseFloat(w.pitch),parseFloat(w.roll))}var q={startService:function(){if(typeof Accelerometer!="undefined"){D=navigator.accelerometer.watchAcceleration(v,function(){});H=navigator.accelerometer.watchOrientation(y,function(){})}},shutdownService:function(){if(typeof Accelerometer!="undefined"){navigator.accelerometer.clearWatch(D);navigator.accelerometer.clearWatch(H);
navigator.accelerometer.stopAllShakeWatches()}},addOrientationChangeListener:function(w){V.push(w)},addAccelerationChangeListener:function(w){N.push(w)}};function I(){return C()?new K:new Q}function Q(){}Q.prototype.getSignalStrengths=function(){return plt.types.Empty.EMPTY};function K(){}K.prototype.getSignalStrengths=function(){for(var w=plt.types.Empty.EMPTY,R=Device.getSignalStrengths(),X=0;X<R.length;X++){var $=R.get(X);w=plt.types.Cons.makeInstance(plt.Kernel.list([toNum($.getId()),toNum($.getStrength())]),
w)}return w};function O(){return C()?new U:new Y}function U(){this.listeners=[]}U.prototype.startService=function(){var w=this;function R(){for(var $=0;$<w.listeners.length;$++)w.listeners[$]()}function X(){}this.shakeId=navigator.accelerometer.watchShake(R,X)};U.prototype.shutdownService=function(){navigator.accelerometer.stopAllShakeWatches()};U.prototype.addListener=function(w){this.listeners.push(w)};function Y(){}Y.prototype.startService=function(){};Y.prototype.shutdownService=function(){};
Y.prototype.addListener=function(){};function l(){return C()?new g:new i}function g(){}g.prototype.getUrl=function(w){w=Device.getUrl(w);return plt.types.String.makeInstance(""+w)};function i(){}i.prototype.getUrl=function(w){var R=new XMLHttpRequest;w="/networkProxy?url="+encodeURIComponent(w);R.open("GET",w,false);R.send(null);return plt.types.String.makeInstance(R.responseText)};function c(){return C()?new n:e()?new E:new L}function e(){return!!document.createElement("audio").canPlayType}function n(){}
n.prototype.beep=function(){navigator.notification.beep(1)};n.prototype.playPlaylist=function(w){Device.playPlaylistRecord(w)};n.prototype.pausePlaylist=function(w){Device.pausePlaylistRecord(w)};n.prototype.stopPlaylist=function(w){Device.stopPlaylistRecord(w)};n.prototype.playSoundUrl=function(w){navigator.audio.playMusic(w)};n.prototype.playDtmfTone=function(w,R){navigator.audio.playDTMF(w);setTimeout(function(){navigator.audio.stopDTMF()},R)};n.prototype.stopSoundUrl=function(w){navigator.audio.stopMusic(w)};
n.prototype.pauseSoundUrl=function(w){navigator.audio.pauseMusic(w)};n.prototype.setVolume=function(w){navigator.audio.setMusicVolume(w)};n.prototype.raiseVolume=function(){navigator.audio.increaseMusicVolume()};n.prototype.lowerVolume=function(){navigator.audio.decreaseMusicVolume()};function E(){this.cachedUrls={};this.baseVolume=100}E.prototype.beep=function(){alert("Beep")};E.prototype.playPlaylistSound=function(){};E.prototype.pausePlaylistSound=function(){};E.prototype.stopPlaylistSound=function(){};
E.prototype.playSoundUrl=function(w){this.cachedUrls[w]||(this.cachedUrls[w]=new Audio(w));var R=this.cachedUrls[w];if(R.ended||R.paused)this.cachedUrls[w].play()};E.prototype.playDtmfTone=function(){alert("dtmf tone")};E.prototype.stopSoundUrl=function(w){if(this.cachedUrls[w]){this.cachedUrls[w].pause();this.cachedUrls[w].currentTime=0}};E.prototype.pauseSoundUrl=function(w){this.cachedUrls[w]&&this.cachedUrls[w].pause()};E.prototype.setVolume=function(w){for(var R in this.cachedUrls)this.cachedUrls[R].volume=
w/100;this.baseVolume=w};E.prototype.raiseVolume=function(){this.setVolume(Math.min(this.baseVolume+5,100))};E.prototype.lowerVolume=function(){this.setVolume(Math.max(this.baseVolume-5,0))};function L(){}L.prototype.beep=function(){alert("Beep")};L.prototype.playPlaylistSound=function(){};L.prototype.pausePlaylistSound=function(){};L.prototype.stopPlaylistSound=function(){};L.prototype.playSoundUrl=function(w){plt.Kernel.reportError("sound url "+w+" should play, but I don't have sound support.")};
L.prototype.playDtmfTone=function(){plt.Kernel.reportError("DTMF tone should play, but I don't have DTMF support")};L.prototype.stopSoundUrl=function(){};L.prototype.pauseSoundUrl=function(){};L.prototype.setVolume=function(){};L.prototype.raiseVolume=function(){};L.prototype.lowerVolume=function(){};function m(){return C()?new P:new ca}function P(){this.currentLockFlags=-1}P.prototype.setWakeLock=function(w){if(w!=this.currentLockFlags){navigator.power.setWakeLock(w);this.currentLockFlags=w}};P.prototype.releaseWakeLock=
function(){if(this.currentLockFlags!=-1){navigator.power.releaseWakeLock();this.currentLockFlags=-1}};function ca(){}ca.prototype.setWakeLock=function(){};ca.prototype.releaseWakeLock=function(){};function ia(){return C()?new ha:new da}function ha(){}ha.prototype.send=function(w,R){navigator.sms.send(w,R)};function da(){}da.prototype.send=function(w,R){alert("SMS should be sent to "+w+" with the content: "+R)};function fa(){return C()?new na:new ja}function na(){}na.prototype.pickPlaylist=function(w){function R(X){w(X)}
navigator.dialogPickers.pickPlaylist(R)};function ja(){}ja.prototype.pickPlaylist=function(){alert("pick playlist currently unavailable")}})();plt.lib={};
(function(){plt.lib.Telephony={};plt.lib.Telephony.getSignalStrengths=function(){return plt.platform.Platform.getInstance().getTelephonyService().getSignalStrengths()};plt.lib.Location={};plt.lib.Location.getLatitude=function(){return plt.platform.Platform.getInstance().getLocationService().getLatitude()};plt.lib.Location.getLongitude=function(){return plt.platform.Platform.getInstance().getLocationService().getLongitude()};plt.lib.Location.getAttitude=function(){return plt.platform.Platform.getInstance().getLocationService().getAttitude()};
plt.lib.Location.getBearing=function(){return plt.platform.Platform.getInstance().getLocationService().getBearing()};plt.lib.Location.getSpeed=function(){return plt.platform.Platform.getInstance().getLocationService().getSpeed()};plt.lib.Location.getDistanceBetween=function(f,r,M,C){return plt.platform.Platform.getInstance().getLocationService().getDistanceBetween(f,r,M,C)};plt.lib.Net={};plt.lib.Net.getUrl=function(f){return plt.platform.Platform.getInstance().getNetworkService().getUrl(f)}})();
(function(f){function r(){plt.types.Struct.call(this,"make-effect:none",[])}r.prototype=new plt.types.Struct;function M(){return new r}function C(j){return j!=null&&j!=undefined&&j instanceof r}function S(){plt.types.Struct.call(this,"make-effect:beep",[])}S.prototype=new plt.types.Struct;function z(){return new S}function B(j){return j!=null&&j!=undefined&&j instanceof S}function G(j,T){plt.types.Struct.call(this,"make-effect:play-dtmf-tone",[j,T]);this.tone=j;this.duration=T}G.prototype=new plt.types.Struct;
function J(j,T){return new G(j,T)}function o(j){if(D(j))return j.tone;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:play-dtmf-tone-tone: not a effect:play-dtmf-tone: ~s",[j]));}function p(j){if(D(j))return j.duration;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:play-dtmf-tone-duration: not a effect:play-dtmf-tone: ~s",[j]));}function N(j,T){if(D(j)){j.tone=T;j._fields[0]=T}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_tone_bang_: not a effect:play-dtmf-tone: ~s",
[j]));}function V(j,T){if(D(j)){j.duration=T;j._fields[1]=T}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_duration_bang_: not a effect:play-dtmf-tone: ~s",[j]));}function D(j){return j!=null&&j!=undefined&&j instanceof G}function H(j,T){plt.types.Struct.call(this,"make-effect:send-sms",[j,T]);this.address=j;this.msg=T}H.prototype=new plt.types.Struct;function v(j,T){return new H(j,T)}function y(j){if(K(j))return j.address;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:send-sms-address: not a effect:send-sms: ~s",
[j]));}function q(j){if(K(j))return j.msg;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:send-sms-msg: not a effect:send-sms: ~s",[j]));}function I(j,T){if(K(j)){j.address=T;j._fields[0]=T}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_send_dash_sms_dash_address_bang_: not a effect:send-sms: ~s",[j]));}function Q(j,T){if(K(j)){j.msg=T;j._fields[1]=T}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_send_dash_sms_dash_msg_bang_: not a effect:send-sms: ~s",
[j]));}function K(j){return j!=null&&j!=undefined&&j instanceof H}function O(j){plt.types.Struct.call(this,"make-playlist-sound",[j]);this.playlist=j}O.prototype=new plt.types.Struct;function U(j){return new O(j)}function Y(j){if(g(j))return j.playlist;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("playlist-sound-playlist: not a playlist-sound: ~s",[j]));}function l(j,T){if(g(j)){j.playlist=T;j._fields[0]=T}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_playlist_dash_sound_dash_playlist_bang_: not a playlist-sound: ~s",
[j]));}function g(j){return j!=null&&j!=undefined&&j instanceof O}function i(j){return plt.Kernel.setLastLoc({offset:417,line:19,span:11,id:"effect-struct.ss"})&&plt.Kernel.string_question_(j)||plt.Kernel.setLastLoc({offset:435,line:20,span:19,id:"effect-struct.ss"})&&g(j)}function c(j){plt.types.Struct.call(this,"make-effect:play-sound",[j]);this.sound=j}c.prototype=new plt.types.Struct;function e(j){return new c(j)}function n(j){if(L(j))return j.sound;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:play-sound-sound: not a effect:play-sound: ~s",
[j]));}function E(j,T){if(L(j)){j.sound=T;j._fields[0]=T}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_play_dash_sound_dash_sound_bang_: not a effect:play-sound: ~s",[j]));}function L(j){return j!=null&&j!=undefined&&j instanceof c}function m(j){plt.types.Struct.call(this,"make-effect:pause-sound",[j]);this.sound=j}m.prototype=new plt.types.Struct;function P(j){return new m(j)}function ca(j){if(ha(j))return j.sound;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pause-sound-sound: not a effect:pause-sound: ~s",
[j]));}function ia(j,T){if(ha(j)){j.sound=T;j._fields[0]=T}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pause_dash_sound_dash_sound_bang_: not a effect:pause-sound: ~s",[j]));}function ha(j){return j!=null&&j!=undefined&&j instanceof m}function da(j){plt.types.Struct.call(this,"make-effect:stop-sound",[j]);this.sound=j}da.prototype=new plt.types.Struct;function fa(j){return new da(j)}function na(j){if(w(j))return j.sound;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:stop-sound-sound: not a effect:stop-sound: ~s",
[j]));}function ja(j,T){if(w(j)){j.sound=T;j._fields[0]=T}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_stop_dash_sound_dash_sound_bang_: not a effect:stop-sound: ~s",[j]));}function w(j){return j!=null&&j!=undefined&&j instanceof da}function R(j){plt.types.Struct.call(this,"make-effect:set-sound-volume",[j]);this.volume=j}R.prototype=new plt.types.Struct;function X(j){return new R(j)}function $(j){if(oa(j))return j.volume;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:set-sound-volume-volume: not a effect:set-sound-volume: ~s",
[j]));}function ka(j,T){if(oa(j)){j.volume=T;j._fields[0]=T}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_set_dash_sound_dash_volume_dash_volume_bang_: not a effect:set-sound-volume: ~s",[j]));}function oa(j){return j!=null&&j!=undefined&&j instanceof R}function pa(){plt.types.Struct.call(this,"make-effect:raise-sound-volume",[])}pa.prototype=new plt.types.Struct;function x(){return new pa}function ga(j){return j!=null&&j!=undefined&&j instanceof pa}function b(){plt.types.Struct.call(this,
"make-effect:lower-sound-volume",[])}b.prototype=new plt.types.Struct;function d(){return new b}function k(j){return j!=null&&j!=undefined&&j instanceof b}function s(j){plt.types.Struct.call(this,"make-effect:set-wake-lock",[j]);this.locks=j}s.prototype=new plt.types.Struct;function F(j){return new s(j)}function W(j){if(ea(j))return j.locks;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:set-wake-lock-locks: not a effect:set-wake-lock: ~s",[j]));}function aa(j,T){if(ea(j)){j.locks=
T;j._fields[0]=T}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_set_dash_wake_dash_lock_dash_locks_bang_: not a effect:set-wake-lock: ~s",[j]));}function ea(j){return j!=null&&j!=undefined&&j instanceof s}function ma(){plt.types.Struct.call(this,"make-effect:release-wake-lock",[])}ma.prototype=new plt.types.Struct;function sa(){return new ma}function Aa(j){return j!=null&&j!=undefined&&j instanceof ma}function Ba(j){plt.types.Struct.call(this,"make-effect:pick-playlist",
[j]);this.update_dash_f=j}Ba.prototype=new plt.types.Struct;function Ha(j){return new Ba(j)}function Ea(j){if(Ca(j))return j.update_dash_f;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pick-playlist-update-f: not a effect:pick-playlist: ~s",[j]));}function Ia(j,T){if(Ca(j)){j.update_dash_f=T;j._fields[0]=T}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pick_dash_playlist_dash_update_dash_f_bang_: not a effect:pick-playlist: ~s",[j]));}function Ca(j){return j!=
null&&j!=undefined&&j instanceof Ba}function xa(j,T){plt.types.Struct.call(this,"make-effect:pick-random",[j,T]);this.n=j;this.update_dash_f=T}xa.prototype=new plt.types.Struct;function Fa(j,T){return new xa(j,T)}function Da(j){if(va(j))return j.n;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pick-random-n: not a effect:pick-random: ~s",[j]));}function qa(j){if(va(j))return j.update_dash_f;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pick-random-update-f: not a effect:pick-random: ~s",
[j]));}function Ja(j,T){if(va(j)){j.n=T;j._fields[0]=T}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pick_dash_random_dash_n_bang_: not a effect:pick-random: ~s",[j]));}function Ka(j,T){if(va(j)){j.update_dash_f=T;j._fields[1]=T}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pick_dash_random_dash_update_dash_f_bang_: not a effect:pick-random: ~s",[j]));}function va(j){return j!=null&&j!=undefined&&j instanceof xa}function Ga(j){return plt.Kernel.setLastLoc({offset:1069,
line:43,span:20,id:"effect-struct.ss"})&&C(j)||plt.Kernel.setLastLoc({offset:1096,line:44,span:20,id:"effect-struct.ss"})&&B(j)||plt.Kernel.setLastLoc({offset:1123,line:45,span:30,id:"effect-struct.ss"})&&D(j)||plt.Kernel.setLastLoc({offset:1160,line:46,span:24,id:"effect-struct.ss"})&&K(j)||plt.Kernel.setLastLoc({offset:1191,line:47,span:26,id:"effect-struct.ss"})&&L(j)||plt.Kernel.setLastLoc({offset:1224,line:48,span:27,id:"effect-struct.ss"})&&ha(j)||plt.Kernel.setLastLoc({offset:1258,line:49,
span:26,id:"effect-struct.ss"})&&w(j)||plt.Kernel.setLastLoc({offset:1291,line:50,span:32,id:"effect-struct.ss"})&&oa(j)||plt.Kernel.setLastLoc({offset:1330,line:51,span:34,id:"effect-struct.ss"})&&ga(j)||plt.Kernel.setLastLoc({offset:1371,line:52,span:34,id:"effect-struct.ss"})&&k(j)||plt.Kernel.setLastLoc({offset:1412,line:53,span:29,id:"effect-struct.ss"})&&ea(j)||plt.Kernel.setLastLoc({offset:1448,line:54,span:33,id:"effect-struct.ss"})&&Aa(j)||plt.Kernel.setLastLoc({offset:1488,line:55,span:29,
id:"effect-struct.ss"})&&Ca(j)||plt.Kernel.setLastLoc({offset:1524,line:56,span:27,id:"effect-struct.ss"})&&va(j)}(function(j){(function(){})(j||plt.Kernel.identity);f.effect_colon_send_dash_sms_dash_msg=q;f.playlist_dash_sound_dash_playlist=Y;f.set_dash_effect_colon_send_dash_sms_dash_address_bang_=I;f.set_dash_playlist_dash_sound_dash_playlist_bang_=l;f.sound_question_=i;f.set_dash_effect_colon_set_dash_sound_dash_volume_dash_volume_bang_=ka;f.set_dash_effect_colon_stop_dash_sound_dash_sound_bang_=
ja;f.set_dash_effect_colon_set_dash_wake_dash_lock_dash_locks_bang_=aa;f.set_dash_effect_colon_send_dash_sms_dash_msg_bang_=Q;f.set_dash_effect_colon_pick_dash_random_dash_n_bang_=Ja;f.set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_duration_bang_=V;f.set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_tone_bang_=N;f.set_dash_effect_colon_play_dash_sound_dash_sound_bang_=E;f.set_dash_effect_colon_pick_dash_random_dash_update_dash_f_bang_=Ka;f.set_dash_effect_colon_pause_dash_sound_dash_sound_bang_=
ia;f.set_dash_effect_colon_pick_dash_playlist_dash_update_dash_f_bang_=Ia;f.playlist_dash_sound_question_=g;f.make_dash_effect_colon_play_dash_dtmf_dash_tone=J;f.make_dash_effect_colon_set_dash_sound_dash_volume=X;f.make_dash_playlist_dash_sound=U;f.playlist_dash_sound=O;f.make_dash_effect_colon_stop_dash_sound=fa;f.make_dash_effect_colon_set_dash_wake_dash_lock=F;f.make_dash_effect_colon_raise_dash_sound_dash_volume=x;f.make_dash_effect_colon_send_dash_sms=v;f.make_dash_effect_colon_release_dash_wake_dash_lock=
sa;f.make_dash_effect_colon_play_dash_sound=e;f.effect_colon_stop_dash_sound=da;f.make_dash_effect_colon_beep=z;f.make_dash_effect_colon_pause_dash_sound=P;f.make_dash_effect_colon_pick_dash_playlist=Ha;f.make_dash_effect_colon_pick_dash_random=Fa;f.make_dash_effect_colon_none=M;f.make_dash_effect_colon_lower_dash_sound_dash_volume=d;f.effect_colon_stop_dash_sound_question_=w;f.effect_question_=Ga;f.effect_colon_stop_dash_sound_dash_sound=na;f.effect_colon_set_dash_sound_dash_volume=R;f.effect_colon_set_dash_wake_dash_lock=
s;f.effect_colon_set_dash_wake_dash_lock_question_=ea;f.effect_colon_set_dash_wake_dash_lock_dash_locks=W;f.effect_colon_set_dash_sound_dash_volume_question_=oa;f.effect_colon_set_dash_sound_dash_volume_dash_volume=$;f.effect_colon_send_dash_sms_question_=K;f.effect_colon_pause_dash_sound_question_=ha;f.effect_colon_play_dash_dtmf_dash_tone_dash_tone=o;f.effect_colon_raise_dash_sound_dash_volume=pa;f.effect_colon_send_dash_sms=H;f.effect_colon_send_dash_sms_dash_address=y;f.effect_colon_release_dash_wake_dash_lock=
ma;f.effect_colon_release_dash_wake_dash_lock_question_=Aa;f.effect_colon_raise_dash_sound_dash_volume_question_=ga;f.effect_colon_play_dash_sound=c;f.effect_colon_play_dash_sound_question_=L;f.effect_colon_play_dash_sound_dash_sound=n;f.effect_colon_play_dash_dtmf_dash_tone_question_=D;f.effect_colon_pick_dash_random_dash_n=Da;f.effect_colon_pick_dash_random_question_=va;f.effect_colon_play_dash_dtmf_dash_tone=G;f.effect_colon_play_dash_dtmf_dash_tone_dash_duration=p;f.effect_colon_pick_dash_random_dash_update_dash_f=
qa;f.effect_colon_pick_dash_playlist_question_=Ca;f.effect_colon_pick_dash_random=xa;f.effect_colon_pick_dash_playlist=Ba;f.effect_colon_pick_dash_playlist_dash_update_dash_f=Ea;f.effect_colon_lower_dash_sound_dash_volume_question_=k;f.effect_colon_none_question_=C;f.effect_colon_pause_dash_sound=m;f.effect_colon_pause_dash_sound_dash_sound=ca;f.effect_colon_none=r;f.effect_colon_beep_question_=B;f.effect_colon_lower_dash_sound_dash_volume=b;f.effect_colon_beep=S})()})(this);plt.world.Kernel={};
(function(){var f,r=[],M,C=false;function S(i){function c(){}c.prototype=i;return new c}function z(i){function c(){}c.prototype=i;var e=new c;for(property in i)if(i.hasOwnProperty(property))e[property]=i[property];return e}var B=[];plt.world.Kernel.addAnnounceListener=function(i){B.push(i)};plt.world.Kernel.removeAnnounceListener=function(i){i=B.indexOf(i);i!=-1&&B.splice(i,1)};plt.world.Kernel.announce=function(i,c){for(var e=0;e<B.length;e++)try{B[e](i,c)}catch(n){}};function G(i){f=i;J()}plt.world.Kernel.updateWorld=
function(i){i=i(f);G(i)};plt.world.Kernel.shutdownWorld=function(){M=true};function J(){var i;for(i=0;i<r.length;i++)r[i](f)}function o(i){r.push(i)}function p(){if(C){clearInterval(C);C=false}M=false;r=[]}function N(){if(window.document.getElementById("canvas")!=undefined)return window;var i=window.open("big-bang.html","big-bang");if(i==null)throw new Error("Error: Not allowed to create a new window.");return i}plt.world.Kernel.bigBang=function(i,c,e,n){plt.Kernel.check(i,plt.Kernel.isNumber,"big-bang",
"number",1);plt.Kernel.check(c,plt.Kernel.isNumber,"big-bang","number",2);plt.Kernel.arrayEach(args,function(P,ca){plt.Kernel.check(P,plt.Kernel.isFunction,"big-bang","handler",ca+4)});var E=N(i,c),L=E.document.getElementById("canvas");L.width=i.toFixnum();L.height=c.toFixnum();p();var m=new plt.world.config.WorldConfig;for(i=0;i<n.length;i++)m=n[i](m);m=m.updateAll({changeWorld:plt.world.Kernel.updateWorld,shutdownWorld:plt.world.Kernel.shutdownWorld});plt.world.config.CONFIG=m;if(m.lookup("onKey"))E.onkeydown=
function(P){plt.world.stimuli.onKey(P)};m.lookup("onRedraw")&&o(function(P){var ca=L.getContext("2d");P=m.lookup("onRedraw")([P]);P.render(ca,0,0)});o(function(P){if(m.lookup("stopWhen"))if(m.lookup("stopWhen")([P]))M=true});m.lookup("onTick")&&V(E,m);G(e);if(m.lookup("initialEffect")){e=plt.world.Kernel.applyEffect(m.lookup("initialEffect"));for(i=0;i<e.length;i++)M||updateWorld(e)}};function V(i,c){C=i.setInterval(function(){if(M){i.clearTimeout(C);C=false}else plt.world.stimuli.onTick()},c.lookup("tickDelay"))}
plt.world.Kernel.isKeyEqual=function(i,c){return i=i.toString().toLowerCase()==c.toString().toLowerCase()};plt.world.Kernel.imageWidth=function(i){plt.Kernel.check(i,v,"image-width","image",1);return plt.types.Rational.makeInstance(i.getWidth(),1)};plt.world.Kernel.imageHeight=function(i){plt.Kernel.check(i,v,"image-height","image",1);return plt.types.Rational.makeInstance(i.getHeight(),1)};plt.world.Kernel.placeImage=function(i,c,e,n){plt.Kernel.check(i,v,"place-image","image",1);plt.Kernel.check(c,
plt.Kernel.isNumber,"place-image","number",2);plt.Kernel.check(e,plt.Kernel.isNumber,"place-image","number",3);plt.Kernel.check(n,function(L){return y(L)||v(L)},"place-image","image",4);if(y(n))return n.add(i,plt.types.NumberTower.toFixnum(c),plt.types.NumberTower.toFixnum(e));else{var E=new q(n.getWidth(),n.getHeight(),[]);E=E.add(n,0,0);return E=E.add(i,plt.types.NumberTower.toFixnum(c),plt.types.NumberTower.toFixnum(e))}};plt.world.Kernel.emptyScene=function(i,c){plt.Kernel.check(i,plt.Kernel.isNumber,
"empty-scene","number",1);plt.Kernel.check(c,plt.Kernel.isNumber,"empty-scene","number",2);return new q(plt.types.NumberTower.toFixnum(i),plt.types.NumberTower.toFixnum(c),[])};function D(i){return typeof g.get(i)!="undefined"}plt.world.Kernel.text=function(i,c,e){plt.Kernel.check(i,plt.Kernel.isString,"text","string",1);plt.Kernel.check(c,plt.Kernel.isNumber,"text","number",2);plt.Kernel.check(e,D,"text","color",3);if(g.get(e))e=g.get(e);return new O(i,plt.types.NumberTower.toFixnum(c),e)};plt.world.Kernel.circle=
function(i,c,e){plt.Kernel.check(i,plt.Kernel.isNumber,"circle","number",1);plt.Kernel.check(c,plt.Kernel.isString,"circle","string",2);plt.Kernel.check(e,D,"circle","color",3);if(g.get(e))e=g.get(e);return new U(plt.types.NumberTower.toFixnum(i),c,e)};plt.world.Kernel.openImageUrl=function(i){plt.Kernel.check(i,plt.Kernel.isString,"open-image-url","string",1);return I.makeInstance(i.toString())};plt.world.Kernel.nwRectangle=function(i,c,e,n){plt.Kernel.check(i,plt.Kernel.isNumber,"nw:rectangle",
"number",1);plt.Kernel.check(c,plt.Kernel.isNumber,"nw:rectangle","number",2);plt.Kernel.check(e,plt.Kernel.isString,"nw:rectangle","string",3);plt.Kernel.check(n,D,"nw:rectangle","color",4);if(g.get(n))n=g.get(n);i=new K(plt.types.NumberTower.toFixnum(i),plt.types.NumberTower.toFixnum(c),e,n);return i.updatePinhole(0,0)};plt.world.Kernel.rectangle=function(i,c,e,n){plt.Kernel.check(i,plt.Kernel.isNumber,"rectangle","number",1);plt.Kernel.check(c,plt.Kernel.isNumber,"rectangle","number",2);plt.Kernel.check(e,
plt.Kernel.isString,"rectangle","string",3);plt.Kernel.check(n,D,"rectangle","color",4);if(g.get(n))n=g.get(n);return new K(plt.types.NumberTower.toFixnum(i),plt.types.NumberTower.toFixnum(c),e,n)};function H(i,c){this.pinholeX=i;this.pinholeY=c}plt.world.Kernel.BaseImage=H;function v(i){return i!=null&&i!=undefined&&i instanceof H}plt.world.Kernel.isImage=v;plt.world.Kernel.put_dash_pinhole=function(i,c,e){plt.Kernel.check(i,v,"put-pinhole","image",1);plt.Kernel.check(c,plt.Kernel.isNumber,"put-pinhole",
"number",2);plt.Kernel.check(e,plt.Kernel.isNumber,"put-pinhole","number",3);return i.updatePinhole(c.toFixnum(),e.toFixnum())};H.prototype.updatePinhole=function(i,c){var e=z(this);e.pinholeX=i;e.pinholeY=c;return e};H.prototype.render=function(){throw new MobyRuntimeError("Unimplemented method render");};plt.world.Kernel.makeCanvas=function(i,c){var e=document.createElement("canvas");e.width=i;e.height=c;e.style.width=e.width+"px";e.style.height=e.height+"px";if(window&&typeof window.G_vmlCanvasManager!=
"undefined"){e.style.display="none";document.body.appendChild(e);e=window.G_vmlCanvasManager.initElement(e);document.body.removeChild(e);e.style.display=""}return e};H.prototype.toDomNode=function(){var i=this,c=plt.world.Kernel.imageWidth(i).toFixnum(),e=plt.world.Kernel.imageHeight(i).toFixnum();c=plt.world.Kernel.makeCanvas(c,e);c.style.display="none";document.body.appendChild(c);e=c.getContext("2d");i.render(e,0,0);document.body.removeChild(c);c.style.display="";return c};H.prototype.toWrittenString=
function(){return"<image>"};H.prototype.toDisplayedString=function(){return"<image>"};plt.world.Kernel.image_question_=function(i){return v(i)};plt.world.Kernel.image_equal__question_=function(i,c){check(i,v,"image=?","image",1);check(c,v,"image=?","image",2);return i==c?plt.types.Logic.TRUE:plt.types.Logic.FALSE};function y(i){return i!=undefined&&i!=null&&i instanceof q}function q(i,c,e){H.call(this,0,0);this.width=i;this.height=c;this.children=e}q.prototype=S(H.prototype);q.prototype.add=function(i,
c,e){return new q(this.width,this.height,this.children.concat([[i,c,e]]))};q.prototype.render=function(i,c,e){var n,E,L,m;i.clearRect(c-this.pinholeX,e-this.pinholeY,this.width,this.height);for(n=0;n<this.children.length;n++){E=this.children[n][0];L=this.children[n][1];m=this.children[n][2];i.save();E.render(i,L+c-E.pinholeX,m+e-E.pinholeY);i.restore()}};q.prototype.getWidth=function(){return this.width};q.prototype.getHeight=function(){return this.height};function I(i,c){H.call(this,0,0);var e=this;
this.isLoaded=false;if(c&&c.complete){this.img=c;this.isLoaded=true;this.pinholeX=e.img.width/2;this.pinholeY=e.img.height/2}else{this.img=new Image;this.img.onload=function(){e.isLoaded=true;e.pinholeX=e.img.width/2;e.pinholeY=e.img.height/2};this.img.onerror=function(){e.img.onerror="";e.img.src="http://www.wescheme.org/images/broken.png"};this.img.src=i}}I.prototype=S(H.prototype);plt.world.Kernel.FileImage=I;var Q={};I.makeInstance=function(i){i in Q||(Q[i]=new I(i));return Q[i]};I.installInstance=
function(i,c){Q[i]=new I(i,c)};I.installBrokenImage=function(i){Q[i]=new O("Unable to load "+i,10,g.get("red"))};I.prototype.render=function(i,c,e){i.drawImage(this.img,c,e)};I.prototype.getWidth=function(){return this.img.width};I.prototype.getHeight=function(){return this.img.height};I.prototype.toDomNode=function(){return this.img.cloneNode(true)};function K(i,c,e,n){H.call(this,i/2,c/2);this.width=i;this.height=c;this.style=e;this.color=n}K.prototype=S(H.prototype);K.prototype.render=function(i,
c,e){i.fillStyle=this.color.toString();this.style.toString().toLowerCase()=="outline"?i.strokeRect(c,e,this.width,this.height):i.fillRect(c,e,this.width,this.height)};K.prototype.getWidth=function(){return this.width};K.prototype.getHeight=function(){return this.height};function O(i,c,e){H.call(this,0,0);this.msg=i;this.size=c;this.color=e;this.font="Optimer"}O.prototype=S(H.prototype);O.prototype.render=function(i,c,e){if(i.fillText){i.font=this.size+"px Optimer";i.fillStyle=this.color.toRGBAString();
i.fillText(this.msg,c,e)}else if(typeof i.mozDrawText!=="undefined"){i.mozTextStyle=this.size+"px "+this.font;i.translate(c,e+this.size);i.fillStyle=this.color;i.mozDrawText(this.msg)}};O.prototype.getWidth=function(){return this.size*this.msg.length};O.prototype.getHeight=function(){return 10};function U(i,c,e){H.call(this,i,i);this.radius=i;this.style=c;this.color=e}U.prototype=S(H.prototype);U.prototype.render=function(i,c,e){i.translate(0,0);i.beginPath();i.fillStyle=this.color.toString();i.arc(c+
this.radius,e+this.radius,this.radius,0,2*Math.PI,false);this.style.toString().toLowerCase()=="outline"?i.stroke():i.fill();i.closePath()};U.prototype.getWidth=function(){return this.radius*2};U.prototype.getHeight=function(){return this.radius*2};plt.world.Kernel.applyEffect=function(i){var c=[];if(!plt.Kernel.empty_question_(i))if(plt.Kernel.pair_question_(i)){c=c.concat(plt.world.Kernel.applyEffect(i.first()));c=c.concat(plt.world.Kernel.applyEffect(i.rest()))}else if(i=i.run())c=c.concat(i);return c};
effect_colon_none.prototype.run=function(){};effect_colon_beep.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService().beep()};effect_colon_play_dash_dtmf_dash_tone.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService().playDtmfTone(this._fields[0].toFixnum(),this._fields[1].toFixnum())};effect_colon_send_dash_sms.prototype.run=function(){plt.platform.Platform.getInstance().getSmsService().send(this._fields[0],this._fields[1])};effect_colon_play_dash_sound.prototype.run=
function(){if(plt.Kernel.isString(this._fields[0]))plt.platform.Platform.getInstance().getSoundService().playSoundUrl(this._fields[0]);else playlist_dash_sound_question_(this._fields[0])&&plt.platform.Platform.getInstance().getSoundService().playPlaylist(this._fields[0]._fields[0])};effect_colon_pause_dash_sound.prototype.run=function(){if(plt.Kernel.isString(this._fields[0]))plt.platform.Platform.getInstance().getSoundService().pauseSoundUrl(this._fields[0]);else playlist_dash_sound_question_(this._fields[0])&&
plt.platform.Platform.getInstance().getSoundService().pausePlaylist(this._fields[0]._fields[0])};effect_colon_stop_dash_sound.prototype.run=function(){if(plt.Kernel.isString(this._fields[0]))plt.platform.Platform.getInstance().getSoundService().stopSoundUrl(this._fields[0]);else playlist_dash_sound_question_(this._fields[0])&&plt.platform.Platform.getInstance().getSoundService().stopPlaylist(this._fields[0]._fields[0])};effect_colon_set_dash_sound_dash_volume.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService().setVolume(this._fields[0].toFixnum())};
effect_colon_raise_dash_sound_dash_volume.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService.raiseVolume()};effect_colon_lower_dash_sound_dash_volume.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService.lowerVolume()};effect_colon_set_dash_wake_dash_lock.prototype.run=function(){plt.platform.Platform.getInstance().getPowerService().setWakeLock(this._fields[0].toFixnum())};effect_colon_release_dash_wake_dash_lock.prototype.run=function(){plt.platform.Platform.getInstance().getPowerService().releaseWakeLock()};
effect_colon_pick_dash_playlist.prototype.run=function(){var i=this._fields[0];function c(e){var n=make_dash_playlist_dash_sound(e);setTimeout(function(){var E=plt.world.config.CONFIG.lookup("changeWorld");E(function(L){return i([L,n])})},0)}plt.platform.Platform.getInstance().getPickPlaylistService().pickPlaylist(c)};effect_colon_pick_dash_random.prototype.run=function(){var i=plt.types.Rational.makeInstance(Math.floor(plt.types.NumberTower.toFixnum(this._fields[0])*Math.random()),1),c=this._fields[1];
return function(e){return c([e,i])}};function Y(){this.colors={}}Y.prototype.put=function(i,c){this.colors[i]=c};Y.prototype.get=function(i){return this.colors[i.toString().toUpperCase()]};function l(i,c,e){this.r=i;this.g=c;this.b=e}l.prototype.toString=function(){return"rgb("+this.r+","+this.g+","+this.b+")"};l.prototype.toRGBAString=function(){return"rgba("+this.r+","+this.g+","+this.b+", 1)"};var g=new Y;g.put("ORANGE",new l(255,165,0));g.put("RED",new l(255,0,0));g.put("ORANGERED",new l(255,
69,0));g.put("TOMATO",new l(255,99,71));g.put("DARKRED",new l(139,0,0));g.put("RED",new l(255,0,0));g.put("FIREBRICK",new l(178,34,34));g.put("CRIMSON",new l(220,20,60));g.put("DEEPPINK",new l(255,20,147));g.put("MAROON",new l(176,48,96));g.put("INDIAN RED",new l(205,92,92));g.put("INDIANRED",new l(205,92,92));g.put("MEDIUM VIOLET RED",new l(199,21,133));g.put("MEDIUMVIOLETRED",new l(199,21,133));g.put("VIOLET RED",new l(208,32,144));g.put("VIOLETRED",new l(208,32,144));g.put("LIGHTCORAL",new l(240,
128,128));g.put("HOTPINK",new l(255,105,180));g.put("PALEVIOLETRED",new l(219,112,147));g.put("LIGHTPINK",new l(255,182,193));g.put("ROSYBROWN",new l(188,143,143));g.put("PINK",new l(255,192,203));g.put("ORCHID",new l(218,112,214));g.put("LAVENDERBLUSH",new l(255,240,245));g.put("SNOW",new l(255,250,250));g.put("CHOCOLATE",new l(210,105,30));g.put("SADDLEBROWN",new l(139,69,19));g.put("BROWN",new l(132,60,36));g.put("DARKORANGE",new l(255,140,0));g.put("CORAL",new l(255,127,80));g.put("SIENNA",new l(160,
82,45));g.put("ORANGE",new l(255,165,0));g.put("SALMON",new l(250,128,114));g.put("PERU",new l(205,133,63));g.put("DARKGOLDENROD",new l(184,134,11));g.put("GOLDENROD",new l(218,165,32));g.put("SANDYBROWN",new l(244,164,96));g.put("LIGHTSALMON",new l(255,160,122));g.put("DARKSALMON",new l(233,150,122));g.put("GOLD",new l(255,215,0));g.put("YELLOW",new l(255,255,0));g.put("OLIVE",new l(128,128,0));g.put("BURLYWOOD",new l(222,184,135));g.put("TAN",new l(210,180,140));g.put("NAVAJOWHITE",new l(255,222,
173));g.put("PEACHPUFF",new l(255,218,185));g.put("KHAKI",new l(240,230,140));g.put("DARKKHAKI",new l(189,183,107));g.put("MOCCASIN",new l(255,228,181));g.put("WHEAT",new l(245,222,179));g.put("BISQUE",new l(255,228,196));g.put("PALEGOLDENROD",new l(238,232,170));g.put("BLANCHEDALMOND",new l(255,235,205));g.put("MEDIUM GOLDENROD",new l(234,234,173));g.put("MEDIUMGOLDENROD",new l(234,234,173));g.put("PAPAYAWHIP",new l(255,239,213));g.put("MISTYROSE",new l(255,228,225));g.put("LEMONCHIFFON",new l(255,
250,205));g.put("ANTIQUEWHITE",new l(250,235,215));g.put("CORNSILK",new l(255,248,220));g.put("LIGHTGOLDENRODYELLOW",new l(250,250,210));g.put("OLDLACE",new l(253,245,230));g.put("LINEN",new l(250,240,230));g.put("LIGHTYELLOW",new l(255,255,224));g.put("SEASHELL",new l(255,245,238));g.put("BEIGE",new l(245,245,220));g.put("FLORALWHITE",new l(255,250,240));g.put("IVORY",new l(255,255,240));g.put("GREEN",new l(0,255,0));g.put("LAWNGREEN",new l(124,252,0));g.put("CHARTREUSE",new l(127,255,0));g.put("GREEN YELLOW",
new l(173,255,47));g.put("GREENYELLOW",new l(173,255,47));g.put("YELLOW GREEN",new l(154,205,50));g.put("YELLOWGREEN",new l(154,205,50));g.put("MEDIUM FOREST GREEN",new l(107,142,35));g.put("OLIVEDRAB",new l(107,142,35));g.put("MEDIUMFORESTGREEN",new l(107,142,35));g.put("DARK OLIVE GREEN",new l(85,107,47));g.put("DARKOLIVEGREEN",new l(85,107,47));g.put("DARKSEAGREEN",new l(143,188,139));g.put("LIME",new l(0,255,0));g.put("DARK GREEN",new l(0,100,0));g.put("DARKGREEN",new l(0,100,0));g.put("LIME GREEN",
new l(50,205,50));g.put("LIMEGREEN",new l(50,205,50));g.put("FOREST GREEN",new l(34,139,34));g.put("FORESTGREEN",new l(34,139,34));g.put("SPRING GREEN",new l(0,255,127));g.put("SPRINGGREEN",new l(0,255,127));g.put("MEDIUM SPRING GREEN",new l(0,250,154));g.put("MEDIUMSPRINGGREEN",new l(0,250,154));g.put("SEA GREEN",new l(46,139,87));g.put("SEAGREEN",new l(46,139,87));g.put("MEDIUM SEA GREEN",new l(60,179,113));g.put("MEDIUMSEAGREEN",new l(60,179,113));g.put("AQUAMARINE",new l(112,216,144));g.put("LIGHTGREEN",
new l(144,238,144));g.put("PALE GREEN",new l(152,251,152));g.put("PALEGREEN",new l(152,251,152));g.put("MEDIUM AQUAMARINE",new l(102,205,170));g.put("MEDIUMAQUAMARINE",new l(102,205,170));g.put("TURQUOISE",new l(64,224,208));g.put("LIGHTSEAGREEN",new l(32,178,170));g.put("MEDIUM TURQUOISE",new l(72,209,204));g.put("MEDIUMTURQUOISE",new l(72,209,204));g.put("HONEYDEW",new l(240,255,240));g.put("MINTCREAM",new l(245,255,250));g.put("ROYALBLUE",new l(65,105,225));g.put("DODGERBLUE",new l(30,144,255));
g.put("DEEPSKYBLUE",new l(0,191,255));g.put("CORNFLOWERBLUE",new l(100,149,237));g.put("STEEL BLUE",new l(70,130,180));g.put("STEELBLUE",new l(70,130,180));g.put("LIGHTSKYBLUE",new l(135,206,250));g.put("DARK TURQUOISE",new l(0,206,209));g.put("DARKTURQUOISE",new l(0,206,209));g.put("CYAN",new l(0,255,255));g.put("AQUA",new l(0,255,255));g.put("DARKCYAN",new l(0,139,139));g.put("TEAL",new l(0,128,128));g.put("SKY BLUE",new l(135,206,235));g.put("SKYBLUE",new l(135,206,235));g.put("CADET BLUE",new l(96,
160,160));g.put("CADETBLUE",new l(95,158,160));g.put("DARK SLATE GRAY",new l(47,79,79));g.put("DARKSLATEGRAY",new l(47,79,79));g.put("LIGHTSLATEGRAY",new l(119,136,153));g.put("SLATEGRAY",new l(112,128,144));g.put("LIGHT STEEL BLUE",new l(176,196,222));g.put("LIGHTSTEELBLUE",new l(176,196,222));g.put("LIGHT BLUE",new l(173,216,230));g.put("LIGHTBLUE",new l(173,216,230));g.put("POWDERBLUE",new l(176,224,230));g.put("PALETURQUOISE",new l(175,238,238));g.put("LIGHTCYAN",new l(224,255,255));g.put("ALICEBLUE",
new l(240,248,255));g.put("AZURE",new l(240,255,255));g.put("MEDIUM BLUE",new l(0,0,205));g.put("MEDIUMBLUE",new l(0,0,205));g.put("DARKBLUE",new l(0,0,139));g.put("MIDNIGHT BLUE",new l(25,25,112));g.put("MIDNIGHTBLUE",new l(25,25,112));g.put("NAVY",new l(36,36,140));g.put("BLUE",new l(0,0,255));g.put("INDIGO",new l(75,0,130));g.put("BLUE VIOLET",new l(138,43,226));g.put("BLUEVIOLET",new l(138,43,226));g.put("MEDIUM SLATE BLUE",new l(123,104,238));g.put("MEDIUMSLATEBLUE",new l(123,104,238));g.put("SLATE BLUE",
new l(106,90,205));g.put("SLATEBLUE",new l(106,90,205));g.put("PURPLE",new l(160,32,240));g.put("DARK SLATE BLUE",new l(72,61,139));g.put("DARKSLATEBLUE",new l(72,61,139));g.put("DARKVIOLET",new l(148,0,211));g.put("DARK ORCHID",new l(153,50,204));g.put("DARKORCHID",new l(153,50,204));g.put("MEDIUMPURPLE",new l(147,112,219));g.put("CORNFLOWER BLUE",new l(68,64,108));g.put("MEDIUM ORCHID",new l(186,85,211));g.put("MEDIUMORCHID",new l(186,85,211));g.put("MAGENTA",new l(255,0,255));g.put("FUCHSIA",new l(255,
0,255));g.put("DARKMAGENTA",new l(139,0,139));g.put("VIOLET",new l(238,130,238));g.put("PLUM",new l(221,160,221));g.put("LAVENDER",new l(230,230,250));g.put("THISTLE",new l(216,191,216));g.put("GHOSTWHITE",new l(248,248,255));g.put("WHITE",new l(255,255,255));g.put("WHITESMOKE",new l(245,245,245));g.put("GAINSBORO",new l(220,220,220));g.put("LIGHT GRAY",new l(211,211,211));g.put("LIGHTGRAY",new l(211,211,211));g.put("SILVER",new l(192,192,192));g.put("GRAY",new l(190,190,190));g.put("DARK GRAY",new l(169,
169,169));g.put("DARKGRAY",new l(169,169,169));g.put("DIM GRAY",new l(105,105,105));g.put("DIMGRAY",new l(105,105,105));g.put("BLACK",new l(0,0,0))})();plt.Jsworld={};
(function(){var f=plt.Jsworld,r=false;function M(){}var C=new M,S=[],z=[];f.shutdown=function(){for(;z.length>0;){var h=z.pop();h&&h.pause()}J()};function B(h){S.push(h)}function G(h){h=S.indexOf(h);h!=-1&&S.splice(h,1)}function J(){C=new M;S=[]}function o(h){var u=C;try{C=h(C)}catch(t){C=u;throw t;}for(h=0;h<S.length;h++)try{S[h](C,u)}catch(A){C=u;throw A;}}f.change_world=o;Number.prototype.NaN0=function(){return isNaN(this)?0:this};function p(h){for(var u=0,t=0;h.offsetParent;){u+=h.offsetLeft+
(h.currentStyle?parseInt(h.currentStyle.borderLeftWidth).NaN0():0);t+=h.offsetTop+(h.currentStyle?parseInt(h.currentStyle.borderTopWidth).NaN0():0);h=h.offsetParent}u+=h.offsetLeft+(h.currentStyle?parseInt(h.currentStyle.borderLeftWidth).NaN0():0);t+=h.offsetTop+(h.currentStyle?parseInt(h.currentStyle.borderTopWidth).NaN0():0);return{x:u,y:t}}f.getPosition=p;var N=0;function V(){return N++}f.gensym=V;function D(h,u){for(var t=new Array(h.length),A=0;A<h.length;A++)t[A]=u(h[A]);return t}f.map=D;function H(h,
u){for(var t=[],A=0;A<h.length;A++)t=t.concat(u(h[A]));return t}function v(h,u){for(var t=new Array(h.length),A=0;A<h.length;A++)t[A]=u(h[A],A);return t}f.mapi=v;function y(h,u,t){for(var A=0;A<h.length;A++)u=t(h[A],u);return u}f.fold=y;function q(h,u){var t={};for(var A in h)t[A]=h[A];for(A in u)t[A]=u[A];return t}f.augment=q;function I(h,u,t){var A={};for(var Z in h)A[Z]=h[Z];A[u]=t;return A}f.assoc_cons=I;function Q(h,u){return h.concat([u])}f.cons=Q;function K(h,u){return h.concat(u)}f.append=
K;function O(h,u){for(var t=[],A=0;A<h.length;A++)t.push([h[A],u[A]]);return t}f.array_join=O;function U(h,u){for(var t=0;t<h.length;t++)if(h[t]===u)return h.slice(0,t).concat(h.slice(t+1));return h}f.removeq=U;function Y(h,u){for(var t=0;t<h.length;t++)if(u(h[t]))return h.slice(0,t).concat(h.slice(t+1));return h}f.removef=Y;function l(h,u){for(var t=0;t<h.length;t++)if(u(h[t]))return h.slice(0,t).concat(l(h.slice(t+1),u));return h}f.filter=l;function g(h,u){var t={};for(var A in h)if(A!=u)t[A]=h[A];
return t}f.without=g;function i(h,u){for(var t=0;t<h.length;t++)if(h[t]===u)return true;return false}f.memberq=i;function c(h,u){for(var t=0;t<h.length;t++)if(h[t]==u)return true;return false}f.member=c;function e(h){return h[0]}f.head=e;function n(h){return h.slice(1,h.length)}f.tail=n;function E(h){var u=[h];for(h=h.firstChild;h!=null;h=h.nextSibling)u.push(E(h));return u}f.node_to_tree=E;function L(h){var u=[h.node];if(h.node.jsworldOpaque==true)return u;for(var t=0;t<h.children.length;t++)u=u.concat(L(h.children[t]));
return u}function m(h,u){return h&&u&&h===u}function P(h,u){return!m(h,u)}function ca(h){var u=[];if(h.node.jsworldOpaque==true)return[];for(var t=0;t<h.children.length;t++)u.push({relation:"parent",parent:h.node,child:h.children[t].node});for(t=0;t<h.children.length-1;t++)u.push({relation:"neighbor",left:h.children[t].node,right:h.children[t+1].node});for(t=0;t<h.children.length;t++)u=u.concat(ca(h.children[t]));return u}function ia(h,u){h.appendChild(u)}function ha(h,u,t){for(var A=0;A<t.length;A++)if(t[A].relation==
"parent"){var Z=t[A].parent,ba=t[A].child;P(ba.parentNode,Z)&&ia(Z,ba)}for(;;){Z=false;for(A=0;A<t.length;A++)if(t[A].relation=="neighbor"){ba=t[A].left;var ra=t[A].right;if(P(ba.nextSibling,ra)){ba.parentNode.insertBefore(ba,ra);Z=true}}if(!Z)break}var la;function ya(wa,ua){ua=wa.compareDocumentPosition(ua);if(ua&wa.DOCUMENT_POSITION_CONTAINED_BY)return 1;if(ua&wa.DOCUMENT_POSITION_CONTAINS)return-1;if(ua&wa.DOCUMENT_POSITION_FOLLOWING)return-1;if(ua&wa.DOCUMENT_POSITION_PRECEDING)return 1;return 0}
try{la=u.concat(h).sort(ya)}catch(ta){la=null}t=h;for(h=h.parentNode;t!=h;){for(;;){if(t.firstChild==null||t.jsworldOpaque==true)break;t=t.firstChild}for(;t!=h;){ba=t.nextSibling;Z=t.parentNode;ra=false;var za=undefined;if(la!=null)for(;la.length>0&&ya(t,la[0])>=0;){A=la.shift();if(m(A,t)){ra=true;za=A;break}}else for(A=0;A<u.length;A++)if(m(u[A],t)){ra=true;za=u[A];break}if(ra)da(t,za);else{if(!t.isJsworldOpaque)for(;t.firstChild!=null;)ia(t.parentNode,t.firstChild);ba=t.nextSibling;t.parentNode.removeChild(t)}if(ba==
null)t=Z;else{t=ba;break}}}X(u)}function da(){}function fa(h){return h.replace(/\-(.)/g,function(u,t){return t.toUpperCase()})}function na(h,u){for(var t=0;t<u.length;t++)h.style[fa(u[t].attrib)]=u[t].values.join(" ")}function ja(h,u){return u.id.match(/^\./)?"class"in h&&c(h["class"].split(/\s+/),u.id.substring(1)):"id"in h&&h.id==u.id}function w(h,u){for(var t=0;t<h.length;t++)R(h[t]);for(t=0;t<u.length;t++)if("id"in u[t])for(var A=0;A<h.length;A++)ja(h[A],u[t])&&na(h[A],u[t].attribs);else na(u[t].node,
u[t].attribs)}function R(h){if("style"in h)h.style.cssText=""}function X(h){for(var u=0;u<h.length;u++)h[u].onWorldChange&&h[u].onWorldChange(C)}function $(h,u,t,A,Z){if(u instanceof M){var ba=Aa(A(h)),ra=L(ba);w(ra,Ea(Z(h)));ha(t,ra,ca(ba))}else ka(function(){var la=A(u),ya=A(h),ta=Z(u),za=Z(h),wa=Aa(ya),ua=L(wa);if(la!==ya){w(ua,Ea(za));ha(t,ua,ca(wa))}else ta!==za&&w(ua,Ea(za))})}function ka(h){var u;if(pa()){u=x();h();u.restore()}else h()}function oa(){this.focused=r;this.selectionStart=r.selectionStart;
this.selectionEnd=r.selectionEnd}oa.prototype.restore=function(){if(this.focused.parentNode){this.focused.selectionStart=this.selectionStart;this.focused.selectionEnd=this.selectionEnd;this.focused.focus()}else if(this.focused.id){var h=document.getElementById(this.focused.id);if(h){h.selectionStart=this.selectionStart;h.selectionEnd=this.selectionEnd;h.focus()}}};function pa(){return r!=undefined}function x(){return new oa}function ga(h,u,t,A,Z){this.top=h;this.world=u;this.handlers=A;this.handlerCreators=
t;this.attribs=Z}ga.prototype.restart=function(){b(this.top,this.world,this.handlerCreators,this.attribs)};ga.prototype.pause=function(){for(var h=0;h<this.handlers.length;h++)this.handlers[h]instanceof s||this.handlers[h].onUnregister(top)};function b(h,u,t,A){J();var Z=D(t,function(ta){return ta()});z.length>0&&z[z.length-1].pause();var ba=new ga(h,u,t,Z,A);z.push(ba);function ra(ta){ba.world=ta}B(ra);var la=new s(function(){return false},function(){});for(t=0;t<Z.length;t++)if(Z[t]instanceof s)la=
Z[t];else Z[t].onRegister(h);function ya(ta){if(la.test(ta)){la.receiver(C);(ta=z.pop())&&ta.pause();if(z.length>0){ta=z.pop();ta.restart()}}}B(ya);qa(h,A);o(function(){return u})}f.big_bang=b;function d(h,u){return function(){var t={watchId:-1,onRegister:function(){t.watchId=setInterval(function(){o(u)},h)},onUnregister:function(){clearInterval(t.watchId)}};return t}}f.on_tick=d;function k(h,u){function t(A){A=h(A);Fa(A,A);return A}return function(){var A={_top:null,_listener:function(Z,ba){$(Z,
ba,A._top,t,u)},onRegister:function(Z){A._top=Z;B(A._listener)},onUnregister:function(){G(A._listener)}};return A}}f.on_draw=k;function s(h,u){this.test=h;this.receiver=u}function F(h,u){return function(){if(u==undefined)u=function(){};return new s(h,u)}}f.stop_when=F;function W(h){function u(t){h(t)}return function(){return{onRegister:function(){B(u)},onUnregister:function(){G(u)}}}}f.on_world_change=W;function aa(h,u,t){h.addEventListener?h.addEventListener(u,t,false):h.attachEvent("on"+u,t,false)}
function ea(h,u,t){aa(h,u,function(A){o(function(Z){return t(Z,A)})})}function ma(h,u,t){aa(h,u,function(A){setTimeout(function(){o(function(Z){return t(Z,A)})},0)})}function sa(h){aa(h,"focus",function(){r=h});aa(h,"blur",function(){r=undefined});return h}function Aa(h){return h.length==undefined?{node:h,children:[]}:{node:h[0],children:D(h.slice(1),Aa)}}function Ba(h){return{attrib:h[0],values:h.slice(1)}}function Ha(h){var u=D(h.slice(1),Ba);return typeof h[0]=="string"?[{id:h[0],attribs:u}]:"length"in
h[0]?D(h[0],function(t){return{id:t,attribs:u}}):[{node:h[0],attribs:u}]}function Ea(h){return H(h,Ha)}function Ia(h){return h.nodeType==Node.TEXT_NODE}function Ca(h){return h.nodeType==Node.ELEMENT_NODE}function xa(h,u){throw new Da(plt.Kernel.format("Expected a non-empty array, received ~s within ~s",[h,u]),h);}function Fa(h,u){!h instanceof Array&&xa(h,u);h.length==0&&xa(h,u);if(Ia(h[0])){if(h.length>1)throw new Da(plt.Kernel.format("Text node ~s can not have children",[h]),h);}else if(Ca(h[0]))for(u=
1;u<h.length;u++)Fa(h[u],h);else throw new Da(plt.Kernel.format("expected a Text or an Element, received ~s within ~s",[h,u]),h[0]);}function Da(h,u){this.msg=h;this.elt=u}Da.prototype.toString=function(){return"on-draw: "+this.msg};function qa(h,u){if(u)for(a in u)if(u.hasOwnProperty(a))if(typeof u[a]=="function")ea(h,a,u[a]);else h[a]=u[a];return h}function Ja(h){return sa(qa(document.createElement("p"),h))}f.p=Ja;function Ka(h){return sa(qa(document.createElement("div"),h))}f.div=Ka;function va(h,
u){var t=document.createElement("button");ea(t,"click",h);return sa(qa(t,u))}f.button=va;function Ga(h){if(h.stopPropagation)h.stopPropagation();else h.cancelBubble=true}function j(h){aa(h,"click",function(u){Ga(u)});return h}function T(h,u,t){h=h.toLowerCase();var A={text:La,password:La,checkbox:Ma};if(A[h])return A[h](h,u,t);else throw new plt.Kernel.MobyRuntimeError("js-input: does not currently support type "+h);}f.input=T;function La(h,u,t){var A=document.createElement("input");A.type=h;function Z(la){return u(la,
A.value)}ma(A,"keypress",Z);h=1000;var ba=A.value,ra=setInterval(function(){if(A.parentNode){if(ba!=A.value){ba=A.value;o(function(la){return u(la,A.value)})}}else clearInterval(ra)},h);return j(sa(qa(A,t)))}function Ma(h,u,t){var A=document.createElement("input");A.type=h;function Z(ba){return u(ba,A.checked?plt.types.Logic.TRUE:plt.types.Logic.FALSE)}ma(A,"change",Z);aa(A,"click",function(ba){Ga(ba)});return qa(A,t)}function Na(h){return h=document.createTextNode(h)}f.text=Na;function Oa(h,u,t){for(var A=
document.createElement("select"),Z=0;Z<u.length;Z++)A.add(Pa({value:u[Z]}),null);A.jsworldOpaque=true;ea(A,"change",t);return h=sa(qa(A,h))}f.select=Oa;function Pa(h){var u=document.createElement("option");u.text=h.value;u.value=h.value;return u}function Qa(h){return sa(qa(document.createElement("textarea"),h))}f.textarea=Qa;function Ra(h){return sa(qa(document.createElement("h1"),h))}f.h1=Ra;function Sa(h){return sa(qa(document.createElement("canvas"),h))}f.canvas=Sa;function Ta(h,u){var t=document.createElement("img");
t.src=h;return sa(qa(t,u))}f.img=Ta;function Ua(h,u){return sa(qa(h,u))}f.raw_node=Ua})();plt.world.MobyJsWorld={};plt.world.MobyJsworld={};
(function(){var f=plt.world.MobyJsworld,r=plt.Jsworld,M=plt.Kernel.MobyTypeError;function C(v){return typeof v=="function"}function S(v){var y=v;if(plt.Kernel.empty_question_(y))return[];else if(plt.Kernel.pair_question_(y)){for(v=[];!y.isEmpty();){v.push(S(y.first()));y=y.rest()}return v}else return v}function z(v){for(var y={};!v.isEmpty();){var q=v.first().first(),I=v.first().rest().first();y[q]=I;v=v.rest()}return y}function B(){if(window.document.getElementById("jsworld-div")!=undefined)return window;
var v=window.open("big-bang.html","big-bang");if(v==null)throw new Error("Error: Not allowed to create a new window.");return v}f.makeToplevelNode=function(){return B().document.getElementById("jsworld-div")};function G(v){return v instanceof plt.types.Cons||v instanceof plt.types.Empty}f.printWorldHook=function(v,y){if(y.lastChild==null){v=plt.types.toDomNode(v);y.appendChild(v)}else{v=plt.types.toDomNode(v);y.replaceChild(v,y.lastChild)}};function J(v){return typeof v.nodeType!="undefined"}function o(v,
y,q){if(plt.Kernel.pair_question_(v)){var I=plt.Kernel.first(v);q=plt.Kernel.rest(v);if(!J(I))throw new M(plt.Kernel.format("on-draw: expected a dom-element, but received ~s instead, the first element within ~s",[I,y]));if(I.nodeType==Node.TEXT_NODE&&!plt.Kernel.empty_question_(q))throw new M(plt.Kernel.format("on-draw: the text node ~s must not have children.  It has ~s",[I,q]));for(y=2;!plt.Kernel.empty_question_(q);){o(plt.Kernel.first(q),v,y);q=plt.Kernel.rest(q);y++}}else throw new M(plt.Kernel.format("on-draw: expected a dom-s-expression, but received ~s instead~a",
[v,q!=undefined?plt.Kernel.format(", the ~a element within ~s.",[plt.Kernel.ordinalize(q),y]):"."]));}function p(v,y,q){plt.Kernel.attachEvent(v,y,q)}function N(v){if(v.preventDefault)v.preventDefault();else v.returnValue=false}function V(v){if(v.stopPropagation)v.stopPropagation();else v.cancelBubble=true}f.bigBang=function(v,y){var q=plt.types.Empty.EMPTY;plt.Kernel.arrayEach(y,function(l,g){plt.Kernel.check(l,function(i){return C(i)||G(i)},"js-big-bang","handler or attribute list",g+2)});var I=
f.makeToplevelNode();I.tabIndex=0;p(I,"click",function(l){N(l);V(l);return false},false);for(var Q=new plt.world.config.WorldConfig,K=0;K<y.length;K++)if(G(y[K]))q=y[K];else if(C(y[K]))Q=y[K](Q);Q=Q.updateAll({changeWorld:f.updateWorld,shutdownWorld:f.shutdownWorld});plt.world.config.CONFIG=Q;y=[];if(Q.lookup("onDraw")){wrappedRedraw=function(l){try{var g=Q.lookup("onDraw")([l]);plt.Kernel.setLastLoc(undefined);o(g,g,undefined);var i=[I,S(g)];return i}catch(c){D(c);throw c;}};K=function(l){try{var g=
S(Q.lookup("onDrawCss")([l]));plt.Kernel.setLastLoc(undefined);return g}catch(i){D(i);throw i;}};y.push(r.on_draw(wrappedRedraw,K))}else if(Q.lookup("onRedraw")){var O=undefined,U=undefined;wrappedRedraw=function(l){try{var g=Q.lookup("onRedraw")([l]);if(g!=null&&g!=undefined&&g instanceof plt.world.Kernel.BaseImage){var i=plt.world.Kernel.imageWidth(g).toFixnum(),c=plt.world.Kernel.imageHeight(g).toFixnum();if(!O){O=plt.world.Kernel.makeCanvas(i,c);O.jsworldOpaque=true;U=r.node_to_tree(O)}O.width=
i;O.height=c;var e=O.getContext("2d");g.render(e,0,0);return[I,U]}else return[I,r.node_to_tree(plt.types.toDomNode(g))]}catch(n){D(n);throw n;}};K=function(){return[[O,["width",O.width+"px"],["height",O.height+"px"]]]};y.push(r.on_draw(wrappedRedraw,K))}else y.push(r.on_world_change(function(l){f.printWorldHook(l,I)}));if(Q.lookup("tickDelay")){K=function(l){setTimeout(function(){plt.world.stimuli.onTick()},0);return l};var Y=Q.lookup("tickDelay");y.push(r.on_tick(Y,K))}Q.lookup("stopWhen")&&y.push(r.stop_when(function(l){return Q.lookup("stopWhen")([l])}));
if(Q.lookup("onKey")){p(I,"keydown",function(l){plt.world.stimuli.onKey(l);N(l);V(l);return false});p(I,"keypress",function(l){N(l);V(l);return false});I.focus()}if(Q.lookup("initialEffect")){Y=plt.world.Kernel.applyEffect(Q.lookup("initialEffect"));for(K=0;K<Y.length;K++)if(Q.lookup("stopWhen")&&Q.lookup("stopWhen")([v]))break;else v=Y[K](v)}return r.big_bang(I,v,y,z(q))};function D(v){plt.Kernel.reportError(v);plt.Kernel.reportError("Shutting down jsworld computations");plt.world.stimuli.onShutdown()}
f.updateWorld=function(v){function y(q){try{return v(q)}catch(I){D(I);return q}}r.change_world(y)};f.shutdownWorld=function(){r.shutdown()};function H(v){if(v.length==0)return[];if(v.length==1)return z(v[0]);else throw new Error;}f.p=function(v){v=H(v);var y=r.p(v);y.toWrittenString=function(){return plt.Kernel.format("(js-p)",[])};y.toDisplayedString=y.toWrittenString;y.toDomNode=function(){return y};return y};f.div=function(v){v=H(v);var y=r.div(v);y.toWrittenString=function(){return plt.Kernel.format("(js-div)",
[])};y.toDisplayedString=y.toWrittenString;y.toDomNode=function(){return y};return y};f.button=function(v,y){function q(){return make_dash_effect_colon_none()}var I=f.buttonStar(v,q,y);I.toWrittenString=function(){return"(js-button ...)"};I.toDisplayedString=I.toWrittenString;I.toDomNode=function(){return I};return I};f.buttonStar=function(v,y,q){q=H(q);function I(K){try{var O=y([K]),U=v([K]);plt.world.Kernel.applyEffect(O);return U}catch(Y){D(Y);return K}}var Q=r.button(I,q);Q.toWrittenString=function(){return"(js-button ...)"};
Q.toDisplayedString=Q.toWrittenString;Q.toDomNode=function(){return Q};return Q};f.input=function(v,y,q){plt.Kernel.check(v,plt.Kernel.isString,"js-input","string",1);plt.Kernel.check(y,plt.Kernel.isFunction,"js-input","(world string -> world)",1);q=H(q);var I=r.input(v,function(Q,K){return y([Q,K])},q);I.toWrittenString=function(){return"(js-input ...)"};I.toDisplayedString=I.toWrittenString;I.toDomNode=function(){return I};return I};f.get_dash_input_dash_value=function(v){plt.Kernel.check(v,function(){return plt.Kernel.isString(v)||
v.nodeType==Node.ELEMENT_NODE},"get-input-value","dom-node",1);return plt.Kernel.isString(v)?plt.types.String.makeInstance(document.getElementById(v).value||""):plt.types.String.makeInstance(v.value||"")};f.img=function(v,y){plt.Kernel.check(v,plt.Kernel.isString,"js-img","string",1);y=H(y);var q=r.img(v,y);q.toWrittenString=function(){return"(js-img ...)"};q.toDisplayedString=q.toWrittenString;q.toDomNode=function(){return q};return q};f.text=function(v){plt.Kernel.check(v,plt.Kernel.isString,"js-text",
"string",1);var y=r.text(v,[]);y.toWrittenString=function(){return"(js-text ...)"};y.toDisplayedString=y.toWrittenString;y.toDomNode=function(){return y};return y};f.select=function(v,y,q){plt.Kernel.checkListof(v,plt.Kernel.isString,"js-select","string",1);plt.Kernel.check(y,plt.Kernel.isFunction,"js-select","function",2);q=H(q);v=S(v);var I=r.select(q,v,function(Q){return y([Q,I.value])});I.toWrittenString=function(){return"(js-select ...)"};I.toDisplayedString=I.toWrittenString;I.toDomNode=function(){return I};
return I};f.rawNode=function(v,y){y=H(y);var q=r.raw_node(plt.types.toDomNode(v),y);q.toWrittenString=function(){return"(js-raw-node ...)"};q.toDisplayedString=q.toWrittenString;q.toDomNode=function(){return q};return q}})();plt.world.stimuli={};
(function(){var f={};plt.world.stimuli=f;function r(B,G,J){var o=[];S(function(N){var V=[N].concat(J);if(B){var D=B(V);o=z(D)}return G?G(V):N});for(var p=0;p<o.length;p++)S(o[p])}f.onTilt=function(B,G,J){var o=C("onTilt"),p=C("onTiltEffect");r(p,o,[M(B),M(G),M(J)])};f.onAcceleration=function(B,G,J){var o=C("onAcceleration"),p=C("onAccelerationEffect");r(p,o,[M(B),M(G),M(J)])};f.onShake=function(){var B=C("onShake"),G=C("onShakeEffect");r(G,B,[])};f.onLocation=function(B,G){var J=C("onLocationChange"),
o=C("onLocationChangeEffect");r(o,J,[M(B),M(G)])};f.onKey=function(B){function G(p){p=p.charCode||p.keyCode;return p=p==37?"left":p==38?"up":p==39?"right":p==40?"down":p==32?"space":p==13?"enter":String.fromCharCode(p)}B=G(B);var J=C("onKey"),o=C("onKeyEffect");r(o,J,[B])};f.onTick=function(){var B=C("onTick"),G=C("onTickEffect");r(G,B,[])};f.onAnnounce=function(B,G){for(var J=plt.types.Empty.EMPTY,o=0;o<G.length;o++)J=plt.types.Cons.makeInstance(G[G.length-o-1],J);G=C("onAnnounce");o=C("onAnnounceEffect");
r(G,o,[B,J])};f.onShutdown=function(){var B=C("shutdownWorld");B&&B()};var M=plt.types.FloatPoint.makeInstance;function C(B){return plt.world.config.CONFIG.lookup(B)}function S(B){C("changeWorld")&&C("changeWorld")(B)}function z(B){return plt.world.Kernel.applyEffect(B)}})();
(function(f){var r={};function M(){plt.types.Struct.call(this,"make-permission:location",[])}M.prototype=new plt.types.Struct;function C(){return new M}function S(x){return x!=null&&x!=undefined&&x instanceof M}function z(){plt.types.Struct.call(this,"make-permission:send-sms",[])}z.prototype=new plt.types.Struct;function B(){return new z}function G(x){return x!=null&&x!=undefined&&x instanceof z}function J(){plt.types.Struct.call(this,"make-permission:receive-sms",[])}J.prototype=new plt.types.Struct;
function o(){return new J}function p(x){return x!=null&&x!=undefined&&x instanceof J}function N(){plt.types.Struct.call(this,"make-permission:tilt",[])}N.prototype=new plt.types.Struct;function V(){return new N}function D(x){return x!=null&&x!=undefined&&x instanceof N}function H(){plt.types.Struct.call(this,"make-permission:shake",[])}H.prototype=new plt.types.Struct;function v(){return new H}function y(x){return x!=null&&x!=undefined&&x instanceof H}function q(){plt.types.Struct.call(this,"make-permission:internet",
[])}q.prototype=new plt.types.Struct;function I(){return new q}function Q(x){return x!=null&&x!=undefined&&x instanceof q}function K(){plt.types.Struct.call(this,"make-permission:telephony",[])}K.prototype=new plt.types.Struct;function O(){return new K}function U(x){return x!=null&&x!=undefined&&x instanceof K}function Y(){plt.types.Struct.call(this,"make-permission:wake-lock",[])}Y.prototype=new plt.types.Struct;function l(){return new Y}function g(x){return x!=null&&x!=undefined&&x instanceof Y}
function i(x){plt.types.Struct.call(this,"make-permission:open-image-url",[x]);this.url=x}i.prototype=new plt.types.Struct;function c(x){return new i(x)}function e(x){if(E(x))return x.url;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("permission:open-image-url-url: not a permission:open-image-url: ~s",[x]));}function n(x,ga){if(E(x)){x.url=ga;x._fields[0]=ga}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_permission_colon_open_dash_image_dash_url_dash_url_bang_: not a permission:open-image-url: ~s",
[x]));}function E(x){return x!=null&&x!=undefined&&x instanceof i}function L(x){plt.types.Struct.call(this,"make-permission:universe",[x]);this.url=x}L.prototype=new plt.types.Struct;function m(x){return new L(x)}function P(x){if(ia(x))return x.url;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("permission:universe-url: not a permission:universe: ~s",[x]));}function ca(x,ga){if(ia(x)){x.url=ga;x._fields[0]=ga}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_permission_colon_universe_dash_url_bang_: not a permission:universe: ~s",
[x]));}function ia(x){return x!=null&&x!=undefined&&x instanceof L}function ha(x){return plt.Kernel.setLastLoc({offset:554,line:18,span:28,id:"permission.ss"})&&S(x)||plt.Kernel.setLastLoc({offset:589,line:19,span:28,id:"permission.ss"})&&G(x)||plt.Kernel.setLastLoc({offset:624,line:20,span:31,id:"permission.ss"})&&p(x)||plt.Kernel.setLastLoc({offset:662,line:21,span:24,id:"permission.ss"})&&D(x)||plt.Kernel.setLastLoc({offset:693,line:22,span:25,id:"permission.ss"})&&y(x)||plt.Kernel.setLastLoc({offset:725,
line:23,span:28,id:"permission.ss"})&&Q(x)||plt.Kernel.setLastLoc({offset:760,line:24,span:29,id:"permission.ss"})&&U(x)||plt.Kernel.setLastLoc({offset:796,line:25,span:29,id:"permission.ss"})&&g(x)||plt.Kernel.setLastLoc({offset:832,line:26,span:34,id:"permission.ss"})&&E(x)||plt.Kernel.setLastLoc({offset:873,line:27,span:28,id:"permission.ss"})&&ia(x)}var da,fa,na,ja,w,R,X,$;function ka(x){return plt.Kernel.setLastLoc({offset:1594,line:45,span:35,id:"permission.ss"})&&S(x)?r[11]:plt.Kernel.setLastLoc({offset:1663,
line:47,span:35,id:"permission.ss"})&&G(x)?r[12]:plt.Kernel.setLastLoc({offset:1732,line:49,span:38,id:"permission.ss"})&&p(x)?r[13]:plt.Kernel.setLastLoc({offset:1807,line:51,span:31,id:"permission.ss"})&&D(x)?r[14]:plt.Kernel.setLastLoc({offset:1868,line:53,span:32,id:"permission.ss"})&&y(x)?r[15]:plt.Kernel.setLastLoc({offset:1931,line:55,span:35,id:"permission.ss"})&&Q(x)?r[16]:plt.Kernel.setLastLoc({offset:2000,line:57,span:36,id:"permission.ss"})&&U(x)?r[17]:plt.Kernel.setLastLoc({offset:2071,
line:59,span:36,id:"permission.ss"})&&g(x)?r[18]:plt.Kernel.setLastLoc({offset:2142,line:61,span:41,id:"permission.ss"})&&E(x)?plt.Kernel.setLastLoc({offset:2189,line:62,span:84,id:"permission.ss"})&&plt.Kernel.format(r[19],[plt.Kernel.setLastLoc({offset:2228,line:62,span:44,id:"permission.ss"})&&e(x)]):plt.Kernel.setLastLoc({offset:2280,line:63,span:35,id:"permission.ss"})&&ia(x)?plt.Kernel.setLastLoc({offset:2321,line:64,span:72,id:"permission.ss"})&&plt.Kernel.format(r[20],[plt.Kernel.setLastLoc({offset:2354,
line:64,span:38,id:"permission.ss"})&&P(x)]):plt.Kernel.setLastLoc({offset:1583,line:44,span:812,id:"permission.ss"})&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),r[21])}function oa(x){return function(){function ga(d,k){return plt.Kernel.setLastLoc({offset:2795,line:75,span:78,id:"permission.ss"})&&plt.Kernel._greaterthan_(plt.Kernel.setLastLoc({offset:2798,line:75,span:21,id:"permission.ss"})&&plt.Kernel.string_dash_length(k),plt.Kernel.setLastLoc({offset:2841,line:76,span:31,id:"permission.ss"})&&
plt.Kernel.string_dash_length(d),[])&&plt.Kernel.setLastLoc({offset:2892,line:77,span:106,id:"permission.ss"})&&plt.Kernel.string_equal__question_(plt.Kernel.setLastLoc({offset:2902,line:77,span:51,id:"permission.ss"})&&plt.Kernel.substring(k,r[23],plt.Kernel.setLastLoc({offset:2921,line:77,span:31,id:"permission.ss"})&&plt.Kernel.string_dash_length(d)),d,[])}function b(d,k,s){return plt.Kernel.setLastLoc({offset:3258,line:83,span:183,id:"permission.ss"})&&plt.Kernel.apply(s,plt.Kernel.list([plt.Kernel.setLastLoc({offset:3277,
line:83,span:163,id:"permission.ss"})&&plt.Kernel.substring(k,plt.Kernel.setLastLoc({offset:3337,line:84,span:38,id:"permission.ss"})&&plt.Kernel.add1(plt.Kernel.setLastLoc({offset:3343,line:84,span:31,id:"permission.ss"})&&plt.Kernel.string_dash_length(d)),plt.Kernel.setLastLoc({offset:3418,line:85,span:21,id:"permission.ss"})&&plt.Kernel.string_dash_length(k))]),[])}(function(){})(plt.Kernel.identity);return plt.Kernel.setLastLoc({offset:3461,line:87,span:38,id:"permission.ss"})&&plt.Kernel.string_equal__question_(x,
r[11],[])?da:plt.Kernel.setLastLoc({offset:3535,line:89,span:38,id:"permission.ss"})&&plt.Kernel.string_equal__question_(x,r[12],[])?fa:plt.Kernel.setLastLoc({offset:3614,line:91,span:41,id:"permission.ss"})&&plt.Kernel.string_equal__question_(x,r[13],[])?na:plt.Kernel.setLastLoc({offset:3694,line:93,span:34,id:"permission.ss"})&&plt.Kernel.string_equal__question_(x,r[14],[])?ja:plt.Kernel.setLastLoc({offset:3760,line:95,span:35,id:"permission.ss"})&&plt.Kernel.string_equal__question_(x,r[15],[])?
w:plt.Kernel.setLastLoc({offset:3828,line:97,span:38,id:"permission.ss"})&&plt.Kernel.string_equal__question_(x,r[16],[])?R:plt.Kernel.setLastLoc({offset:3902,line:99,span:39,id:"permission.ss"})&&plt.Kernel.string_equal__question_(x,r[17],[])?X:plt.Kernel.setLastLoc({offset:3978,line:101,span:39,id:"permission.ss"})&&plt.Kernel.string_equal__question_(x,r[18],[])?$:plt.Kernel.setLastLoc({offset:4054,line:103,span:52,id:"permission.ss"})&&ga(r[24],x)?plt.Kernel.setLastLoc({offset:4114,line:104,span:89,
id:"permission.ss"})&&b(r[24],x,plt.types.liftToplevelToFunctionValue(c,plt.types.String.makeInstance("make-permission:open-image-url"),1,plt.types.Rational.makeInstance(1,1))):plt.Kernel.setLastLoc({offset:4212,line:105,span:46,id:"permission.ss"})&&ga(r[25],x)?plt.Kernel.setLastLoc({offset:4266,line:106,span:77,id:"permission.ss"})&&b(r[25],x,plt.types.liftToplevelToFunctionValue(m,plt.types.String.makeInstance("make-permission:universe"),1,plt.types.Rational.makeInstance(1,1))):plt.Kernel.setLastLoc({offset:3448,
line:86,span:897,id:"permission.ss"})&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),r[26])}()}function pa(x){return plt.Kernel.setLastLoc({offset:4584,line:115,span:35,id:"permission.ss"})&&S(x)?plt.Kernel.setLastLoc({offset:4625,line:116,span:103,id:"permission.ss"})&&plt.Kernel.list([r[27],r[28]]):plt.Kernel.setLastLoc({offset:4735,line:118,span:35,id:"permission.ss"})&&G(x)?plt.Kernel.setLastLoc({offset:4776,line:119,span:36,id:"permission.ss"})&&plt.Kernel.list([r[29]]):plt.Kernel.setLastLoc({offset:4819,
line:120,span:38,id:"permission.ss"})&&p(x)?plt.Kernel.setLastLoc({offset:4863,line:121,span:39,id:"permission.ss"})&&plt.Kernel.list([r[30]]):plt.Kernel.setLastLoc({offset:4909,line:122,span:31,id:"permission.ss"})&&D(x)?plt.Kernel.setLastLoc({offset:4946,line:123,span:6,id:"permission.ss"})&&plt.Kernel.list([]):plt.Kernel.setLastLoc({offset:4959,line:124,span:32,id:"permission.ss"})&&y(x)?plt.Kernel.setLastLoc({offset:4997,line:125,span:6,id:"permission.ss"})&&plt.Kernel.list([]):plt.Kernel.setLastLoc({offset:5010,
line:126,span:35,id:"permission.ss"})&&Q(x)?plt.Kernel.setLastLoc({offset:5051,line:127,span:36,id:"permission.ss"})&&plt.Kernel.list([r[31]]):plt.Kernel.setLastLoc({offset:5094,line:128,span:36,id:"permission.ss"})&&U(x)?plt.Kernel.setLastLoc({offset:5136,line:129,span:49,id:"permission.ss"})&&plt.Kernel.list([r[32]]):plt.Kernel.setLastLoc({offset:5192,line:130,span:36,id:"permission.ss"})&&g(x)?plt.Kernel.setLastLoc({offset:5234,line:131,span:37,id:"permission.ss"})&&plt.Kernel.list([r[33]]):plt.Kernel.setLastLoc({offset:5278,
line:132,span:41,id:"permission.ss"})&&E(x)?plt.Kernel.setLastLoc({offset:5325,line:133,span:6,id:"permission.ss"})&&plt.Kernel.list([]):plt.Kernel.setLastLoc({offset:5338,line:134,span:35,id:"permission.ss"})&&ia(x)?plt.Kernel.setLastLoc({offset:5379,line:135,span:36,id:"permission.ss"})&&plt.Kernel.list([r[31]]):plt.Kernel.setLastLoc({offset:4573,line:114,span:844,id:"permission.ss"})&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),r[34])}r[15]=plt.types.String.makeInstance("PERMISSION:SHAKE");
r[27]=plt.types.String.makeInstance("android.permission.ACCESS_COARSE_LOCATION");r[21]=plt.types.String.makeInstance('cond: fell out of cond around "offset=1583 line=44 span=812 id=\\"permission.ss\\""');r[26]=plt.types.String.makeInstance('cond: fell out of cond around "offset=3448 line=86 span=897 id=\\"permission.ss\\""');r[34]=plt.types.String.makeInstance('cond: fell out of cond around "offset=4573 line=114 span=844 id=\\"permission.ss\\""');r[30]=plt.types.String.makeInstance("android.permission.RECEIVE_SMS");
r[29]=plt.types.String.makeInstance("android.permission.SEND_SMS");r[33]=plt.types.String.makeInstance("android.permission.WAKE_LOCK");r[28]=plt.types.String.makeInstance("android.permission.ACCESS_FINE_LOCATION");r[31]=plt.types.String.makeInstance("android.permission.INTERNET");r[32]=plt.types.String.makeInstance("android.permission.ACCESS_COARSE_UPDATES");r[20]=plt.types.String.makeInstance("PERMISSION:UNIVERSE ~a");r[18]=plt.types.String.makeInstance("PERMISSION:WAKE-LOCK");r[14]=plt.types.String.makeInstance("PERMISSION:TILT");
r[25]=plt.types.String.makeInstance("PERMISSION:UNIVERSE");r[17]=plt.types.String.makeInstance("PERMISSION:TELEPHONY");r[24]=plt.types.String.makeInstance("PERMISSION:OPEN-IMAGE-URL");r[13]=plt.types.String.makeInstance("PERMISSION:RECEIVE-SMS");r[12]=plt.types.String.makeInstance("PERMISSION:SEND-SMS");r[19]=plt.types.String.makeInstance("PERMISSION:OPEN-IMAGE-URL ~a");r[16]=plt.types.String.makeInstance("PERMISSION:INTERNET");r[11]=plt.types.String.makeInstance("PERMISSION:LOCATION");r[23]=plt.types.Rational.makeInstance(0,
1);(function(x){(function(){da=plt.Kernel.setLastLoc({offset:934,line:30,span:26,id:"permission.ss"})&&C();fa=plt.Kernel.setLastLoc({offset:990,line:31,span:26,id:"permission.ss"})&&B();na=plt.Kernel.setLastLoc({offset:1049,line:32,span:26,id:"permission.ss"})&&B();ja=plt.Kernel.setLastLoc({offset:1101,line:33,span:22,id:"permission.ss"})&&V();w=plt.Kernel.setLastLoc({offset:1150,line:34,span:23,id:"permission.ss"})&&v();R=plt.Kernel.setLastLoc({offset:1203,line:35,span:26,id:"permission.ss"})&&I();
X=plt.Kernel.setLastLoc({offset:1260,line:36,span:27,id:"permission.ss"})&&O();$=plt.Kernel.setLastLoc({offset:1318,line:37,span:27,id:"permission.ss"})&&l()})(x||plt.Kernel.identity);f.permission_colon_internet_question_=Q;f.permission_colon_shake_question_=y;f.permission_colon_tilt_question_=D;f.permission_colon_wake_dash_lock_question_=g;f.set_dash_permission_colon_universe_dash_url_bang_=ca;f.string_dash__greaterthan_permission=oa;f.set_dash_permission_colon_open_dash_image_dash_url_dash_url_bang_=
n;f.permission_question_=ha;f.permission_colon_universe_question_=ia;f.permission_colon_wake_dash_lock=Y;f.permission_colon_universe=L;f.permission_colon_universe_dash_url=P;f.permission_colon_telephony_question_=U;f.permission_colon_tilt=N;f.permission_colon_telephony=K;f.permission_colon_receive_dash_sms_question_=p;f.permission_colon_send_dash_sms_question_=G;f.permission_colon_shake=H;f.permission_colon_send_dash_sms=z;f.permission_colon_location_question_=S;f.permission_colon_open_dash_image_dash_url_question_=
E;f.permission_colon_receive_dash_sms=J;f.permission_colon_open_dash_image_dash_url=i;f.permission_colon_open_dash_image_dash_url_dash_url=e;f.permission_colon_location=M;f.make_dash_permission_colon_open_dash_image_dash_url=c;f.make_dash_permission_colon_tilt=V;f.make_dash_permission_colon_wake_dash_lock=l;f.permission_dash__greaterthan_string=ka;f.permission_colon_internet=q;f.permission_dash__greaterthan_android_dash_permissions=pa;f.make_dash_permission_colon_universe=m;f.make_dash_permission_colon_send_dash_sms=
B;f.make_dash_permission_colon_shake=v;f.make_dash_permission_colon_telephony=O;f.make_dash_permission_colon_receive_dash_sms=o;f.PERMISSION_colon_SHAKE=w;f.make_dash_permission_colon_internet=I;f.make_dash_permission_colon_location=C;f.PERMISSION_colon_TILT=ja;f.PERMISSION_colon_WAKE_dash_LOCK=$;f.PERMISSION_colon_TELEPHONY=X;f.PERMISSION_colon_RECEIVE_dash_SMS=na;f.PERMISSION_colon_SEND_dash_SMS=fa;f.PERMISSION_colon_LOCATION=da;f.PERMISSION_colon_INTERNET=R})()})(this);plt.permission={};
(function(){plt.permission={};function f(o){return permission_colon_location_question_(o)}function r(o){return permission_colon_send_dash_sms_question_(o)}function M(o){return permission_colon_receive_dash_sms_question_(o)}function C(o){return permission_colon_tilt_question_(o)}function S(o){return permission_colon_shake_question_(o)}function z(o){return permission_colon_internet_question_(o)}function B(o){return permission_colon_telephony_question_(o)}function G(o){return permission_colon_wake_dash_lock_question_(o)}
function J(o){return permission_colon_open_dash_image_dash_url_question_(o)}plt.permission.startupAllPermissions=function(o,p){if(o.length>0){var N=o.pop();plt.permission._runStartupCode(N,o,p)}else p()};plt.permission._runStartupCode=function(o,p,N){var V=plt.platform.Platform.getInstance(),D=plt.world.stimuli;function H(){setTimeout(function(){plt.permission.startupAllPermissions(p,N)},0)}if(f(o)){V.getLocationService().startService();V.getLocationService().addLocationChangeListener(function(I,
Q){D.onLocation(I,Q)});H()}else if(r(o))H();else if(M(o))H();else if(C(o)){V.getTiltService().startService();V.getTiltService().addOrientationChangeListener(function(I,Q,K){D.onTilt(I,Q,K)});V.getTiltService().addAccelerationChangeListener(function(I,Q,K){D.onAcceleration(I,Q,K)});H()}else if(S(o)){V.getShakeService().startService();V.getShakeService().addListener(function(){D.onShake()});H()}else if(z(o))H();else if(B(o))H();else if(G(o))H();else if(J(o)){var v=permission_colon_open_dash_image_dash_url_dash_url(o),
y=new Image,q=function(){plt.Kernel.detachEvent(y,"load",q);plt.world.Kernel.FileImage.installInstance(v,y);H()};plt.Kernel.attachEvent(y,"load",q);plt.Kernel.attachEvent(y,"error",function(){plt.world.Kernel.FileImage.installBrokenImage(v);H()});y.src=v}else H()};plt.permission.runShutdownCode=function(o){var p=plt.platform.Platform.getInstance();f(o)&&p.getLocationService().shutdownService();r(o);M(o);C(o)&&p.getTiltService().shutdownService();S(o);z(o);B(o);G(o);J(o)}})();
