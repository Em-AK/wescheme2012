(function(){if(!(window.google&&google.gears)){var c=null;if(typeof GearsFactory!="undefined")c=new GearsFactory;else try{c=new ActiveXObject("Gears.Factory");c.getBuildInfo().indexOf("ie_mobile")!=-1&&c.privateSetGlobalObject(this)}catch(l){if(typeof navigator.mimeTypes!="undefined"&&navigator.mimeTypes["application/x-googlegears"]){c=document.createElement("object");c.style.display="none";c.width=0;c.height=0;c.type="application/x-googlegears";document.documentElement.appendChild(c)}}if(c){window.google||
(google={});if(!google.gears)google.gears={factory:c}}}})();if(typeof plt=="undefined")plt={};
(function(){plt.types=plt.types||{};plt.types.Logic={TRUE:true,FALSE:false};Boolean.prototype.toWrittenString=function(){if(this.valueOf())return"true";return"false"};Boolean.prototype.toDisplayedString=Boolean.prototype.toWrittenString;Boolean.prototype.isEqual=function(e){return this==e};plt.types.Char=function(e){this.val=e};plt.types.Char.makeInstance=function(e){return new plt.types.Char(e)};plt.types.Char.prototype.toWrittenString=function(){return"#\\"+this.val};plt.types.Char.prototype.toDisplayedString=
function(){return this.val};plt.types.Char.prototype.getValue=function(){return this.val};plt.types.Char.prototype.isEqual=function(e){return e instanceof plt.types.Char&&this.val==e.val};plt.types.Symbol=function(e){this.val=e};var c={};plt.types.Symbol.makeInstance=function(e){e in c||(c[e]=new plt.types.Symbol(e));return c[e]};plt.types.Symbol.prototype.isEqual=function(e){return e instanceof plt.types.Symbol&&this.val==e.val};plt.types.Symbol.prototype.toString=function(){return this.val};plt.types.Symbol.prototype.toWrittenString=
function(){return this.val};plt.types.Symbol.prototype.toDisplayedString=function(){return this.val};plt.types.Empty=function(){};plt.types.Empty.EMPTY=new plt.types.Empty;plt.types.Empty.prototype.isEqual=function(e){return e instanceof plt.types.Empty};plt.types.Empty.prototype.first=function(){throw new plt.Kernel.MobyRuntimeError("first can't be applied on empty.");};plt.types.Empty.prototype.rest=function(){throw new plt.Kernel.MobyRuntimeError("rest can't be applied on empty.");};plt.types.Empty.prototype.isEmpty=
function(){return true};plt.types.Empty.prototype.toWrittenString=function(){return"empty"};plt.types.Empty.prototype.toDisplayedString=function(){return"empty"};plt.types.Empty.prototype.append=function(e){return e};plt.types.Cons=function(e,g){this.f=e;this.r=g};plt.types.Cons.makeInstance=function(e,g){return new plt.types.Cons(e,g)};plt.types.Cons.prototype.isEqual=function(e){if(!(e instanceof plt.types.Cons))return plt.types.Logic.FALSE;return plt.Kernel.equal_question_(this.first(),e.first())&&
plt.Kernel.equal_question_(this.rest(),e.rest())};plt.types.Cons.prototype.first=function(){return this.f};plt.types.Cons.prototype.rest=function(){return this.r};plt.types.Cons.prototype.isEmpty=function(){return false};plt.types.Cons.prototype.append=function(e){if(e.isEmpty())return this;e=e;for(var g=plt.Kernel.reverse(this);!g.isEmpty();){e=plt.types.Cons.makeInstance(g.first(),e);g=g.rest()}return e};plt.types.Cons.prototype.toWrittenString=function(e){e.put(this,true);for(var g=[],A=this;!A.isEmpty();){g.push(plt.Kernel.toWrittenString(A.first(),
e));A=A.rest()}return"("+g.join(" ")+")"};plt.types.Cons.prototype.toDisplayedString=function(e){e.put(this,true);for(var g=[],A=this;!A.isEmpty();){g.push(plt.Kernel.toDisplayedString(A.first(),e));A=A.rest()}return"("+g.join(" ")+")"};function l(e,g){e.appendChild(g)}plt.types.Cons.prototype.toDomNode=function(e){e.put(this,true);var g=document.createElement("div");g.appendChild(document.createTextNode("("));for(var A=this;!A.isEmpty();){l(g,plt.Kernel.toDomNode(A.first(),e));A=A.rest();A.isEmpty()||
l(g,document.createTextNode(" "))}g.appendChild(document.createTextNode(")"));return g};plt.types.Vector=function(e,g){this.elts=new Array(e);if(g)for(var A=0;A<e;A++)this.elts[A]=g[A];else for(A=0;A<e;A++)this.elts[A]=undefined};plt.types.Vector.makeInstance=function(e,g){return new plt.types.Vector(e,g)};plt.types.Vector.prototype.length=function(){return this.elts.length};plt.types.Vector.prototype.ref=function(e){return this.elts[e]};plt.types.Vector.prototype.set=function(e,g){this.elts[e]=g};
plt.types.Vector.prototype.toWrittenString=function(e){e.put(this,true);for(var g=[],A=0;A<this.length();A++)g.push(plt.Kernel.toWrittenString(this.ref(A),e));return"#("+g.join(" ")+")"};plt.types.Vector.prototype.toDisplayedString=function(e){e.put(this,true);for(var g=[],A=0;A<this.length();A++)g.push(plt.Kernel.toDisplayedStringString(this.ref(A),e));return"#("+g.join(" ")+")"};plt.types.Vector.prototype.toDomNode=function(e){e.put(this,true);var g=document.createElement("div");g.appendChild(document.createTextNode("#("));
for(var A=0;A<this.length();A++)l(g,plt.Kernel.toDomNode(this.ref(A),e));g.appendChild(document.createTextNode(")"));return g};function J(e,g){var A;if(isNaN(e)||!isFinite(e))throw new plt.Kernel.MobyRuntimeError("not a number: "+e);if(isNaN(g)||!isFinite(g))throw new plt.Kernel.MobyRuntimeError("not a number: "+g);for(;g!=0;){A=e;e=g;g=A%g}return e}plt.types.Rational=function(e,g){if(g==undefined)g=1;if(g==0)throw new plt.Kernel.MobyRuntimeError("cannot have zero denominator.");var A=J(Math.abs(e),
Math.abs(g));this.n=e/A;this.d=g/A};plt.types.Rational.prototype.toWrittenString=function(){return this.d==1?this.n+"":this.n+"/"+this.d};plt.types.Rational.prototype.toDisplayedString=plt.types.Rational.prototype.toWrittenString;plt.types.Rational.prototype.level=function(){return 0};plt.types.Rational.prototype.lift=function(e){if(e.level()==1)return plt.types.FloatPoint.makeInstance(this.n/this.d);if(e.level()==2)return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO);throw new plt.Kernel.MobyRuntimeError("invalid level of Number");
};plt.types.Rational.prototype.isFinite=function(){return true};plt.types.Rational.prototype.isEqual=function(e){return e instanceof plt.types.Rational&&this.n==e.n&&this.d==e.d};plt.types.Rational.prototype.isInteger=function(){return this.d==1};plt.types.Rational.prototype.isRational=function(){return true};plt.types.Rational.prototype.isReal=function(){return true};plt.types.Rational.prototype.add=function(e){return plt.types.Rational.makeInstance(this.n*e.d+this.d*e.n,this.d*e.d)};plt.types.Rational.prototype.subtract=
function(e){return plt.types.Rational.makeInstance(this.n*e.d-this.d*e.n,this.d*e.d)};plt.types.Rational.prototype.multiply=function(e){return plt.types.Rational.makeInstance(this.n*e.n,this.d*e.d)};plt.types.Rational.prototype.divide=function(e){if(this.d*e.n==0)throw new plt.Kernel.MobyRuntimeError("division by zero");return plt.types.Rational.makeInstance(this.n*e.d,this.d*e.n)};plt.types.Rational.prototype.toExact=function(){return this};plt.types.Rational.prototype.isExact=function(){return true};
plt.types.Rational.prototype.toInteger=function(){return Math.floor(this.n/this.d)};plt.types.Rational.prototype.numerator=function(){return plt.types.Rational.makeInstance(this.n)};plt.types.Rational.prototype.denominator=function(){return plt.types.Rational.makeInstance(this.d)};plt.types.Rational.prototype.toFloat=function(){return this.n/this.d};plt.types.Rational.prototype.toComplex=function(){return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO)};plt.types.Rational.prototype.greaterThan=
function(e){return this.n*e.d>this.d*e.n};plt.types.Rational.prototype.greaterThanOrEqual=function(e){return this.n*e.d>=this.d*e.n};plt.types.Rational.prototype.lessThan=function(e){return this.n*e.d<this.d*e.n};plt.types.Rational.prototype.lessThanOrEqual=function(e){return this.n*e.d<=this.d*e.n};plt.types.Rational.prototype.sqrt=function(){if(this.n>=0){var e=Math.sqrt(this.n),g=Math.sqrt(this.d);return Math.floor(e)==e&&Math.floor(g)==g?plt.types.Rational.makeInstance(e,g):plt.types.FloatPoint.makeInstance(e/
g)}else{e=Math.sqrt(-this.n);g=Math.sqrt(this.d);return Math.floor(e)==e&&Math.floor(g)==g?plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.makeInstance(e,g)):plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.FloatPoint.makeInstance(e/g))}};plt.types.Rational.prototype.abs=function(){return plt.types.Rational.makeInstance(Math.abs(this.n),this.d)};plt.types.Rational.prototype.floor=function(){return plt.types.Rational.makeInstance(Math.floor(this.n/this.d),
1)};plt.types.Rational.prototype.ceiling=function(){return plt.types.Rational.makeInstance(Math.ceil(this.n/this.d),1)};plt.types.Rational.prototype.conjugate=plt.types.Rational.prototype.abs;plt.types.Rational.prototype.magnitude=plt.types.Rational.prototype.abs;plt.types.Rational.prototype.log=function(){return plt.types.FloatPoint.makeInstance(Math.log(this.n/this.d))};plt.types.Rational.prototype.angle=function(){if(0==this.n)return plt.types.Rational.ZERO;return this.n>0?plt.types.Rational.ZERO:
plt.Kernel.pi};plt.types.Rational.prototype.atan=function(){return plt.types.FloatPoint.makeInstance(Math.atan(this.n/this.d))};plt.types.Rational.prototype.cos=function(){return plt.types.FloatPoint.makeInstance(Math.cos(this.n/this.d))};plt.types.Rational.prototype.sin=function(){return plt.types.FloatPoint.makeInstance(Math.sin(this.n/this.d))};plt.types.Rational.prototype.expt=function(e){return plt.types.FloatPoint.makeInstance(Math.pow(this.n/this.d,e.n/e.d))};plt.types.Rational.prototype.exp=
function(){return plt.types.FloatPoint.makeInstance(Math.exp(this.n/this.d))};plt.types.Rational.prototype.acos=function(){return plt.types.FloatPoint.makeInstance(Math.acos(this.n/this.d))};plt.types.Rational.prototype.asin=function(){return plt.types.FloatPoint.makeInstance(Math.asin(this.n/this.d))};plt.types.Rational.prototype.imag_dash_part=function(){return plt.types.Rational.ZERO};plt.types.Rational.prototype.real_dash_part=function(){return this};plt.types.Rational.prototype.timesI=function(){return plt.types.Complex.makeInstance(plt.types.Rational.ZERO,
this)};plt.types.Rational.prototype.round=function(){if(this.d==2){var e=this.n/this.d,g=Math.floor(e);e=Math.ceil(e);return g%2==0?plt.types.Rational.makeInstance(g):plt.types.Rational.makeInstance(e)}else return plt.types.Rational.makeInstance(Math.round(this.n/this.d))};plt.types.Rational.prototype.half=function(){return plt.types.Rational.makeInstance(this.n,this.d*2)};plt.types.Rational.prototype.minus=function(){return plt.types.Rational.makeInstance(0-this.n,this.d)};var y={};plt.types.Rational.makeInstance=
function(e,g){if(e==undefined)throw new plt.Kernel.MobyRuntimeError("n undefined");if(g==undefined)g=1;if(g<0){e=-e;g=-g}return g==1&&e in y?y[e]:new plt.types.Rational(e,g)};y={};(function(){var e;for(e=-500;e<500;e++)y[e]=new plt.types.Rational(e,1)})();plt.types.Rational.NEGATIVE_ONE=y[-1];plt.types.Rational.ZERO=y[0];plt.types.Rational.ONE=y[1];plt.types.Rational.TWO=y[2];plt.types.FloatPoint=function(e){this.n=e};plt.types.FloatPoint.makeInstance=function(e){return new plt.types.FloatPoint(e)};
var v=plt.types.FloatPoint.makeInstance(Number.NaN),B=plt.types.FloatPoint.makeInstance(Number.POSITIVE_INFINITY),z=plt.types.FloatPoint.makeInstance(Number.NEGATIVE_INFINITY);plt.types.FloatPoint.prototype.isFinite=function(){return isFinite(this.n)};plt.types.FloatPoint.prototype.toExact=function(){return plt.types.Rational.makeInstance(Math.floor(this.n),1)};plt.types.FloatPoint.prototype.isExact=function(){return false};plt.types.FloatPoint.prototype.level=function(){return 1};plt.types.FloatPoint.prototype.lift=
function(){return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO)};plt.types.FloatPoint.prototype.toWrittenString=function(){return this.n==Number.POSITIVE_INFINITY?"+inf.0":this.n==Number.NEGATIVE_INFINITY?"-inf.0":this.n==Number.NaN?"+nan.0":this.n.toString()};plt.types.FloatPoint.prototype.toDisplayedString=plt.types.FloatPoint.prototype.toWrittenString;plt.types.FloatPoint.prototype.isEqual=function(e){return e instanceof plt.types.FloatPoint&&(this.n==e.n||isNaN(this.n)&&isNaN(e.n))};
plt.types.FloatPoint.prototype.isRational=function(){return this.isFinite()&&this.n==Math.floor(this.n)};plt.types.FloatPoint.prototype.isInteger=function(){return this.isFinite()&&this.n==Math.floor(this.n)};plt.types.FloatPoint.prototype.isReal=function(){return true};function C(e){return plt.types.NumberTower.lessThan(e,plt.types.Rational.ZERO)?-1:plt.types.NumberTower.greaterThan(e,plt.types.Rational.ZERO)?1:0}plt.types.FloatPoint.prototype.add=function(e){return this.isFinite()&&e.isFinite()?
plt.types.FloatPoint.makeInstance(this.n+e.n):isNaN(this.n)||isNaN(e.n)?v:this.isFinite()&&!e.isFinite()?e:!this.isFinite()&&e.isFinite()?this:C(this)*C(e)==1?this:v};plt.types.FloatPoint.prototype.subtract=function(e){return this.isFinite()&&e.isFinite()?plt.types.FloatPoint.makeInstance(this.n-e.n):isNaN(this.n)||isNaN(e.n)?v:!this.isFinite()&&!e.isFinite()?C(this)==C(e)?v:this:this.isFinite()?plt.types.NumberTower.multiply(e,plt.types.Rational.NEGATIVE_ONE):this};plt.types.FloatPoint.prototype.multiply=
function(e){if(this.n==0||e.n==0)return plt.types.Rational.ZERO;return this.isFinite()&&e.isFinite()?plt.types.FloatPoint.makeInstance(this.n*e.n):isNaN(this.n)||isNaN(e.n)?v:C(this)*C(e)==1?B:z};plt.types.FloatPoint.prototype.divide=function(e){if(this.isFinite()&&e.isFinite()){if(e.n==0)throw new plt.Kernel.MobyRuntimeError("division by zero");return plt.types.FloatPoint.makeInstance(this.n/e.n)}else if(isNaN(this.n)||isNaN(e.n))return v;else if(!this.isFinite()&&!e.isFinite())return v;else if(this.isFinite()&&
!e.isFinite())return plt.types.FloatPoint.makeInstance(0);else if(!this.isFinite()&&e.isFinite())return C(this)*C(e)==1?B:z};plt.types.FloatPoint.prototype.toInteger=function(){return Math.floor(this.n)};plt.types.FloatPoint.prototype.numerator=function(){var e=this.n.toString();return(e=e.match(/^(.*)\.(.*)$/))?plt.types.FloatPoint.makeInstance(parseFloat(e[1]+e[2])):this};plt.types.FloatPoint.prototype.denominator=function(){var e=this.n.toString();return(e=e.match(/^(.*)\.(.*)$/))?plt.types.FloatPoint.makeInstance(Math.pow(10,
e[2].length)):plt.types.FloatPoint.makeInstance(1)};plt.types.FloatPoint.prototype.toFloat=function(){return this.n};plt.types.FloatPoint.prototype.toComplex=function(){return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO)};plt.types.FloatPoint.prototype.floor=function(){if(!isFinite(this.n))return this;return plt.types.Rational.makeInstance(Math.floor(this.n),1)};plt.types.FloatPoint.prototype.ceiling=function(){if(!isFinite(this.n))return this;return plt.types.Rational.makeInstance(Math.ceil(this.n),
1)};plt.types.FloatPoint.prototype.greaterThan=function(e){return this.n>e.n};plt.types.FloatPoint.prototype.greaterThanOrEqual=function(e){return this.n>=e.n};plt.types.FloatPoint.prototype.lessThan=function(e){return this.n<e.n};plt.types.FloatPoint.prototype.lessThanOrEqual=function(e){return this.n<=e.n};plt.types.FloatPoint.prototype.sqrt=function(){if(this.n<0){var e=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.FloatPoint.makeInstance(Math.sqrt(-this.n)));return e}else return plt.types.FloatPoint.makeInstance(Math.sqrt(this.n))};
plt.types.FloatPoint.prototype.abs=function(){return plt.types.FloatPoint.makeInstance(Math.abs(this.n))};plt.types.FloatPoint.prototype.log=function(){return this.n<0?this.toComplex().log():plt.types.FloatPoint.makeInstance(Math.log(this.n))};plt.types.FloatPoint.prototype.angle=function(){if(0==this.n)return plt.types.Rational.ZERO;return this.n>0?plt.types.Rational.ZERO:plt.Kernel.pi};plt.types.FloatPoint.prototype.atan=function(){return plt.types.FloatPoint.makeInstance(Math.atan(this.n))};plt.types.FloatPoint.prototype.cos=
function(){return plt.types.FloatPoint.makeInstance(Math.cos(this.n))};plt.types.FloatPoint.prototype.sin=function(){return plt.types.FloatPoint.makeInstance(Math.sin(this.n))};plt.types.FloatPoint.prototype.expt=function(e){if(this.n==1){e.isFinite()||isNaN(e.n);return this}else return plt.types.FloatPoint.makeInstance(Math.pow(this.n,e.n))};plt.types.FloatPoint.prototype.exp=function(){return plt.types.FloatPoint.makeInstance(Math.exp(this.n))};plt.types.FloatPoint.prototype.acos=function(){return plt.types.FloatPoint.makeInstance(Math.acos(this.n))};
plt.types.FloatPoint.prototype.asin=function(){return plt.types.FloatPoint.makeInstance(Math.asin(this.n))};plt.types.FloatPoint.prototype.imag_dash_part=function(){return plt.types.Rational.ZERO};plt.types.FloatPoint.prototype.real_dash_part=function(){return this};plt.types.FloatPoint.prototype.round=function(){if(isFinite(this.n))if(Math.abs(Math.floor(this.n)-this.n)==0.5){if(Math.floor(this.n)%2==0)return plt.types.Rational.makeInstance(Math.floor(this.n));return plt.types.Rational.makeInstance(Math.ceil(this.n))}else return plt.types.Rational.makeInstance(Math.round(this.n));
else return this};plt.types.FloatPoint.prototype.conjugate=plt.types.FloatPoint.prototype.abs;plt.types.FloatPoint.prototype.magnitude=plt.types.FloatPoint.prototype.abs;plt.types.FloatPoint.prototype.minus=function(){return plt.types.FloatPoint.makeInstance(0-this.n)};plt.types.FloatPoint.prototype.half=function(){return plt.types.FloatPoint.makeInstance(this.n/2)};plt.types.FloatPoint.prototype.timesI=function(){return plt.types.Complex.makeInstance(plt.types.Rational.ZERO,this)};plt.types.Complex=
function(e,g){this.r=e;this.i=g};plt.types.Complex.makeInstance=function(e,g){if(typeof e=="number")e=e==Math.floor(e)?plt.types.Rational.makeInstance(e):plt.types.FloatPoint.makeInstance(e);if(typeof g=="number")g=g==Math.floor(g)?plt.types.Rational.makeInstance(g):plt.types.FloatPoint.makeInstance(g);return e=new plt.types.Complex(e,g)};plt.types.Complex.prototype.toWrittenString=function(){return plt.types.NumberTower.greaterThanOrEqual(this.i,plt.types.Rational.ZERO)?plt.Kernel.toWrittenString(this.r)+
"+"+plt.Kernel.toWrittenString(this.i)+"i":plt.Kernel.toWrittenString(this.r)+plt.Kernel.toWrittenString(this.i)+"i"};plt.types.Complex.prototype.toDisplayedString=plt.types.Complex.prototype.toWrittenString;plt.types.Complex.prototype.isFinite=function(){return this.r.isFinite()&&this.i.isFinite()};plt.types.Complex.prototype.isRational=function(){return this.r.isRational()&&plt.types.NumberTower.equal(this.i,plt.types.Rational.ZERO)};plt.types.Complex.prototype.isInteger=function(){return this.r.isInteger()&&
plt.types.NumberTower.equal(this.i,plt.types.Rational.ZERO)};plt.types.Complex.prototype.toExact=function(){if(!this.isReal())throw new plt.Kernel.MobyRuntimeError("inexact->exact: expects argument of type real number");return this.r.toExact()};plt.types.Complex.prototype.isExact=function(){return this.r.isExact()&&this.i.isExact()};plt.types.Complex.prototype.level=function(){return 2};plt.types.Complex.prototype.lift=function(){throw new plt.Kernel.MobyRuntimeError("Don't know how to lift Complex number");
};plt.types.Complex.prototype.isEqual=function(e){return e=e instanceof plt.types.Complex&&plt.types.NumberTower.equal(this.r,e.r)&&plt.types.NumberTower.equal(this.i,e.i)};plt.types.Complex.prototype.greaterThan=function(e){if(!this.isReal()||!e.isReal())throw new plt.Kernel.MobyRuntimeError(">: expects argument of type real number");return plt.types.NumberTower.greaterThan(this.r,e.r)};plt.types.Complex.prototype.greaterThanOrEqual=function(e){if(!this.isReal()||!e.isReal())throw new plt.Kernel.MobyRuntimeError(">: expects argument of type real number");
return plt.types.NumberTower.greaterThanOrEqual(this.r,e.r)};plt.types.Complex.prototype.lessThan=function(e){if(!this.isReal()||!e.isReal())throw new plt.Kernel.MobyRuntimeError(">: expects argument of type real number");return plt.types.NumberTower.lessThan(this.r,e.r)};plt.types.Complex.prototype.lessThanOrEqual=function(e){if(!this.isReal()||!e.isReal())throw new plt.Kernel.MobyRuntimeError(">: expects argument of type real number");return plt.types.NumberTower.lessThanOrEqual(this.r,e.r)};plt.types.Complex.prototype.abs=
function(){if(!plt.types.NumberTower.equal(this.i,plt.types.Rational.ZERO).valueOf())throw new plt.Kernel.MobyRuntimeError("abs: expects argument of type real number");return this.r.abs()};plt.types.Complex.prototype.toInteger=function(){if(!plt.types.NumberTower.equal(this.i,plt.types.Rational.ZERO).valueOf())throw new plt.Kernel.MobyRuntimeError("toInteger: expects argument of type real number");return this.r.toInteger()};plt.types.Complex.prototype.numerator=function(){if(!this.isReal())throw new plt.Kernel.MobyRuntimeError("numerator: can only be applied to real number");
return this.n.numerator()};plt.types.Complex.prototype.denominator=function(){if(!this.isReal())throw new plt.Kernel.MobyRuntimeError("floor: can only be applied to real number");return this.n.denominator()};plt.types.Complex.prototype.toFloat=function(){if(!plt.types.NumberTower.equal(this.i,plt.types.Rational.ZERO).valueOf())throw new plt.Kernel.MobyRuntimeError("toFloat: expects argument of type real number");return this.r.toFloat()};plt.types.Complex.prototype.toComplex=function(){return this};
plt.types.Complex.prototype.add=function(e){return plt.types.Complex.makeInstance(plt.types.NumberTower.add(this.r,e.r),plt.types.NumberTower.add(this.i,e.i))};plt.types.Complex.prototype.subtract=function(e){return plt.types.Complex.makeInstance(plt.types.NumberTower.subtract(this.r,e.r),plt.types.NumberTower.subtract(this.i,e.i))};plt.types.Complex.prototype.multiply=function(e){if(e.isReal())return plt.types.Complex.makeInstance(plt.types.NumberTower.multiply(this.r,e.r),plt.types.NumberTower.multiply(this.i,
e.r));var g=plt.types.NumberTower.subtract(plt.types.NumberTower.multiply(this.r,e.r),plt.types.NumberTower.multiply(this.i,e.i));e=plt.types.NumberTower.add(plt.types.NumberTower.multiply(this.r,e.i),plt.types.NumberTower.multiply(this.i,e.r));if(plt.types.NumberTower.equal(e,plt.types.Rational.ZERO))return g;return plt.types.Complex.makeInstance(g,e)};plt.types.Complex.prototype.divide=function(e){if(e.isReal())return plt.types.Complex.makeInstance(plt.types.NumberTower.divide(this.r,e.r),plt.types.NumberTower.divide(this.i,
e.r));var g=e.conjugate(),A=plt.types.NumberTower.multiply(this,g).toComplex();e=plt.types.NumberTower.multiply(e,g);return A=plt.types.Complex.makeInstance(plt.types.NumberTower.divide(A.r,e),plt.types.NumberTower.divide(A.i,e))};plt.types.Complex.prototype.conjugate=function(){var e=plt.types.Complex.makeInstance(this.r,plt.types.NumberTower.subtract(plt.types.Rational.ZERO,this.i));return e};plt.types.Complex.prototype.magnitude=function(){var e=plt.types.NumberTower.add(plt.types.NumberTower.multiply(this.r,
this.r),plt.types.NumberTower.multiply(this.i,this.i));return e.sqrt()};plt.types.Complex.prototype.isReal=function(){return plt.types.NumberTower.equal(this.i,plt.types.Rational.ZERO)};plt.types.Complex.prototype.sqrt=function(){if(this.isReal())return this.r.sqrt();var e=plt.types.NumberTower.add(this.magnitude(),this.r),g=e.half().sqrt();e=plt.types.NumberTower.divide(this.i,plt.types.NumberTower.multiply(e,plt.types.FloatPoint.makeInstance(2)).sqrt());return plt.types.Complex.makeInstance(g,e)};
plt.types.Complex.prototype.log=function(){var e=this.magnitude(),g=this.angle();return e=plt.types.NumberTower.add(e.log(),g.timesI())};plt.types.Complex.prototype.angle=function(){if(this.isReal())return this.r.angle();if(plt.types.NumberTower.equal(plt.types.Rational.ZERO,this.r)){var e=plt.Kernel.pi.half();return plt.types.NumberTower.greaterThan(this.i,plt.types.Rational.ZERO)?e:e.minus()}else{e=plt.types.NumberTower.divide(this.i.abs(),this.r.abs()).atan();return plt.types.NumberTower.greaterThan(this.r,
plt.types.Rational.ZERO)?plt.types.NumberTower.greaterThan(this.i,plt.types.Rational.ZERO)?e:e.minus():plt.types.NumberTower.greaterThan(this.i,plt.types.Rational.ZERO)?plt.Kernel.pi.subtract(e):e.subtract(plt.Kernel.pi)}};var K=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.ONE),x=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.NEGATIVE_ONE);plt.types.Complex.prototype.atan=function(){if(plt.types.NumberTower.equal(this,K)||plt.types.NumberTower.equal(this,
x))return plt.types.FloatPoint.makeInstance(Number.NEGATIVE_INFINITY);return plt.types.NumberTower.multiply(K,plt.types.NumberTower.multiply(plt.types.FloatPoint.makeInstance(0.5),plt.types.NumberTower.divide(plt.types.NumberTower.add(K,this),plt.types.NumberTower.add(K,plt.types.NumberTower.subtract(plt.types.Rational.ZERO,this))).log()))};plt.types.Complex.prototype.cos=function(){if(this.isReal())return this.r.cos();var e=this.timesI(),g=e.minus();return plt.types.NumberTower.add(e.exp(),g.exp()).half()};
plt.types.Complex.prototype.sin=function(){if(this.isReal())return this.r.sin();var e=this.timesI(),g=e.minus(),A=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.TWO);e=plt.types.NumberTower.subtract(e.exp(),g.exp());return A=plt.types.NumberTower.divide(e,A)};plt.types.Complex.prototype.expt=function(e){e=plt.types.NumberTower.multiply(e,this.log());return e.exp()};plt.types.Complex.prototype.exp=function(){var e=this.r.exp(),g=this.i.cos(),A=this.i.sin();return plt.types.NumberTower.multiply(e,
plt.types.NumberTower.add(g,A.timesI()))};plt.types.Complex.prototype.acos=function(){if(this.isReal())return this.r.acos();var e=plt.Kernel.pi.half(),g=this.timesI(),A=plt.types.NumberTower.subtract(plt.types.Rational.ONE,this.multiply(this)).sqrt();g=plt.types.NumberTower.add(g,A).log().timesI();return plt.types.NumberTower.add(e,g)};plt.types.Complex.prototype.asin=function(){if(this.isReal())return this.r.asin();var e=this.timesI(),g=plt.types.NumberTower.subtract(plt.types.Rational.ONE,this.multiply(this)).sqrt();
plt.types.NumberTower.add(e,g).log().timesI().minus();throw new plt.Kernel.MobyRuntimeError("");};plt.types.Complex.prototype.ceiling=function(){if(!this.isReal())throw new plt.Kernel.MobyRuntimeError("ceiling: can only be applied to real number");return this.r.ceiling()};plt.types.Complex.prototype.floor=function(){if(!this.isReal())throw new plt.Kernel.MobyRuntimeError("floor: can only be applied to real number");return this.r.floor()};plt.types.Complex.prototype.imag_dash_part=function(){return this.i};
plt.types.Complex.prototype.real_dash_part=function(){return this.r};plt.types.Complex.prototype.round=function(){return this.r.round()};plt.types.Complex.prototype.timesI=function(){return this.multiply(plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.ONE))};plt.types.Complex.prototype.minus=function(){return plt.types.Complex.makeInstance(plt.types.NumberTower.subtract(plt.types.Rational.ZERO,this.r),plt.types.NumberTower.subtract(plt.types.Rational.ZERO,this.i))};plt.types.Complex.prototype.half=
function(){return plt.types.Complex.makeInstance(this.r.half(),this.i.half())};plt.types.NumberTower={};plt.types.NumberTower.toInteger=function(e){return e.toInteger()};plt.types.NumberTower.toFloat=function(e){return e.toFloat()};plt.types.NumberTower.abs=function(e){return e.abs()};plt.types.NumberTower.isFinite=function(e){return e.isFinite()};plt.types.NumberTower.toExact=function(e){return e.toExact()};plt.types.NumberTower.add=function(e,g){if(e.level()<g.level())e=e.lift(g);if(g.level()<e.level())g=
g.lift(e);return e.add(g)};plt.types.NumberTower.subtract=function(e,g){if(e.level()<g.level())e=e.lift(g);if(g.level()<e.level())g=g.lift(e);return e.subtract(g)};plt.types.NumberTower.multiply=function(e,g){if(e.level()<g.level())e=e.lift(g);if(g.level()<e.level())g=g.lift(e);return e.multiply(g)};plt.types.NumberTower.divide=function(e,g){if(e.level()<g.level())e=e.lift(g);if(g.level()<e.level())g=g.lift(e);return e.divide(g)};plt.types.NumberTower.equal=function(e,g){if(e.level()<g.level())e=
e.lift(g);if(g.level()<e.level())g=g.lift(e);return e.isEqual(g)};plt.types.NumberTower.approxEqual=function(e,g,A){return plt.types.NumberTower.lessThan(plt.types.NumberTower.abs(plt.types.NumberTower.subtract(e,g)),A)};plt.types.NumberTower.greaterThanOrEqual=function(e,g){if(e.level()<g.level())e=e.lift(g);if(g.level()<e.level())g=g.lift(e);if(!(e.isReal()&&g.isReal()))throw new plt.Kernel.MobyRuntimeError("greaterThanOrEqual: couldn't be applied to complex number");return e.greaterThanOrEqual(g)};
plt.types.NumberTower.lessThanOrEqual=function(e,g){if(e.level()<g.level())e=e.lift(g);if(g.level()<e.level())g=g.lift(e);if(!(e.isReal()&&g.isReal()))throw new plt.Kernel.MobyRuntimeError("lessThanOrEqual: couldn't be applied to complex number");return e.lessThanOrEqual(g)};plt.types.NumberTower.greaterThan=function(e,g){if(e.level()<g.level())e=e.lift(g);if(g.level()<e.level())g=g.lift(e);if(!(e.isReal()&&g.isReal()))throw new plt.Kernel.MobyRuntimeError("greaterThan: couldn't be applied to complex number");
return e.greaterThan(g)};plt.types.NumberTower.lessThan=function(e,g){if(e.level()<g.level())e=e.lift(g);if(g.level()<e.level())g=g.lift(e);if(!(e.isReal()&&g.isReal()))throw new plt.Kernel.MobyRuntimeError("lessThan: couldn't be applied to complex number");return e.lessThan(g)};plt.types.NumberTower.modulo=function(e,g){e=plt.types.Rational.makeInstance(e.toInteger()%g.toInteger(),1);if(plt.types.NumberTower.lessThan(g,plt.types.Rational.ZERO)){if(plt.types.NumberTower.lessThanOrEqual(e,plt.types.Rational.ZERO))return e;
return plt.types.NumberTower.add(e,g)}else{if(plt.types.NumberTower.lessThan(e,plt.types.Rational.ZERO))return plt.types.NumberTower.add(e,g);return e}};plt.types.NumberTower.sqr=function(e){return plt.types.NumberTower.multiply(e,e)};plt.types.NumberTower.expt=function(e,g){if(e.level()<g.level())e=e.lift(g);if(g.level()<e.level())g=g.lift(e);return e.expt(g)};plt.types.String=String;plt.types.String.makeInstance=function(e){return e.valueOf()};plt.types.String.prototype.isEqual=function(e){return this==
e};plt.types.String.prototype.toWrittenString=function(){return'"'+this.replace(/["\\]/g,function(e){return"\\"+e})+'"'};plt.types.String.prototype.toDisplayedString=function(){return this}})();if(typeof plt=="undefined")plt={};
plt._Hashtable=function(){function c(f){return typeof f==="undefined"}function l(f){return typeof f==="function"}function J(f){return typeof f==="string"}function y(f,n){return l(f[n])}function v(f){return y(f,"equals")}function B(f){return y(f,"hashCode")}function z(f){if(J(f))return f;else if(B(f)){var n=f.hashCode();if(!J(n))return z(n);return n}else return y(f,"toString")?f.toString():String(f)}function C(f,n){return f.equals(n)}function K(f,n){return v(n)?n.equals(f):f===n}function x(f,n){return f===
n}function e(f,n,p,G,L){for(var N,H=0,X=f.length;H<X;H++){N=f[H];if(L(n,p(N)))return G?[H,N]:true}return false}function g(f,n){if(y(f,"splice"))f.splice(n,1);else if(n===f.length-1)f.length=n;else{var p=f.slice(n+1);f.length=n;for(var G=0,L=p.length;G<L;G++)f[n+G]=p[G]}}function A(f,n){if(f===null)throw new Error("null is not a valid "+n);else if(c(f))throw new Error(n+" must not be undefined");}var F="key",t="value";function s(f){A(f,F)}function E(f){A(f,t)}function I(f,n,p){this.entries=[];this.addEntry(f,
n);if(p!==null)this.getEqualityFunction=function(){return p}}function M(f){return f[0]}function O(f){return f[1]}I.prototype={getEqualityFunction:function(f){return v(f)?C:K},searchForEntry:function(f){return e(this.entries,f,M,true,this.getEqualityFunction(f))},getEntryForKey:function(f){return this.searchForEntry(f)[1]},getEntryIndexForKey:function(f){return this.searchForEntry(f)[0]},removeEntryForKey:function(f){var n=this.searchForEntry(f);if(n){g(this.entries,n[0]);return true}return false},
addEntry:function(f,n){this.entries[this.entries.length]=[f,n]},size:function(){return this.entries.length},keys:function(f){for(var n=f.length,p=0,G=this.entries.length;p<G;p++)f[n+p]=this.entries[p][0]},values:function(f){for(var n=f.length,p=0,G=this.entries.length;p<G;p++)f[n+p]=this.entries[p][1]},containsKey:function(f){return e(this.entries,f,M,false,this.getEqualityFunction(f))},containsValue:function(f){return e(this.entries,f,O,false,x)}};function T(){}T.prototype=[];function Z(f){return f[0]}
function S(f,n,p){return e(f,n,Z,true,p)}function j(f,n){var p=f[n];if(p&&p instanceof T)return p[1];return null}function h(f,n){var p=[],G={};f=l(f)?f:z;n=l(n)?n:null;this.put=function(L,N){s(L);E(N);var H=f(L),X=j(G,H);if(X){var aa=X.getEntryForKey(L);if(aa)aa[1]=N;else X.addEntry(L,N)}else{var m=new T;m[0]=H;m[1]=new I(L,N,n);p[p.length]=m;G[H]=m}};this.get=function(L){s(L);var N=f(L),H=j(G,N);if(H){var X=H.getEntryForKey(L);if(X)return X[1]}return null};this.containsKey=function(L){s(L);var N=
f(L),H=j(G,N);if(H)return H.containsKey(L);return false};this.containsValue=function(L){E(L);for(var N=0,H=p.length;N<H;N++)if(p[N][1].containsValue(L))return true;return false};this.clear=function(){p.length=0;G={}};this.isEmpty=function(){return p.length===0};this.keys=function(){for(var L=[],N=0,H=p.length;N<H;N++)p[N][1].keys(L);return L};this.values=function(){for(var L=[],N=0,H=p.length;N<H;N++)p[N][1].values(L);return L};this.remove=function(L){s(L);var N=f(L),H=j(G,N);if(H)if(H.removeEntryForKey(L))if(H.size()===
0){var X=S(p,N,H.getEqualityFunction(L));g(p,X[0]);delete G[N]}};this.size=function(){for(var L=0,N=0,H=p.length;N<H;N++)L+=p[N][1].size();return L}}return h}();if(typeof plt=="undefined")plt={};
(function(){if(!Array.indexOf)Array.prototype.indexOf=function(b){for(var d=0;d<this.length;d++)if(this[d]==b)return d;return-1};function c(b,d,k){b.addEventListener?b.addEventListener(d,k,false):b.attachEvent("on"+d,k,false)}function l(b,d,k){b.addEventListener?b.removeEventListener(d,k,false):b.detachEvent("on"+d,k,false)}function J(b){function d(){}d.prototype=b;return new d}function y(b){this.msg=b}y.prototype.name="MobyError";y.prototype.toString=function(){return this.name+": "+this.msg};function v(b,
d){y.call(this,b);this.loc=d}v.prototype=J(y.prototype);v.prototype.name="MobyParserError";function B(b,d){y.call(this,b);this.stx=d}B.prototype=J(y.prototype);B.prototype.name="MobySyntaxError";function z(b){y.call(this,b)}z.prototype=J(y.prototype);z.prototype.name="MobyTypeError";function C(b){y.call(this,b)}C.prototype=J(y.prototype);C.prototype.name="MobyRuntimeError";function K(b){y.call(this,b)}K.prototype=J(C.prototype);K.prototype.name="MobyTestingError";function x(b,d){for(;d!=0;){var k=
b;b=d;d=k%d}return Math.abs(b)}function e(b,d){return Math.abs(b*d/x(b,d))}function g(b){return b!=null&&b!=undefined&&(b instanceof plt.types.Rational||b instanceof plt.types.FloatPoint||b instanceof plt.types.Complex)}function A(b){return b!=null&&b!=undefined&&b instanceof plt.types.Symbol}function F(b){return b!=null&&b!=undefined&&b instanceof plt.types.Char}function t(b){return stx_question_(b)}function s(b){return typeof b=="string"}function E(b){return b==plt.types.Logic.TRUE||b==plt.types.Logic.FALSE}
function I(b){return b!=null&&b!=undefined&&b instanceof plt.types.Cons}function M(b){return b!=null&&b!=undefined&&b instanceof plt.types.Empty}function O(b){return g(b)&&b.isReal()}function T(b){return g(b)&&b.isRational()}function Z(b){return g(b)}function S(b){return typeof b=="function"}function j(b){return g(b)&&b.isInteger()}function h(b){return g(b)&&b.isInteger()&&b.toInteger()>=0}function f(b){for(var d=0;d<b.length;d++)if(!(b[d]>="a"&&b[d]<="z"||b[d]>="A"&&b[d]<="Z"))return false;return true}
var n=function(){var b=/^\s*$/;return function(d){return d.match(b)?true:false}}();function p(b){return b!=null&&b!=undefined&&b instanceof plt.types.Vector}function G(b,d){for(var k=0;k<b.length;k++)d.apply(b[k],[b[k],k])}function L(b,d,k,r){if(!b(d,k).valueOf())return false;if(r.length==0)return true;if(!b(k,r[0]).valueOf())return false;for(d=0;d<r.length-1;d++)if(!b(r[d],r[d+1]).valueOf())return false;return true}function N(b,d,k){var r=d;for(d=0;d<k.length;d++)b(r,k[d]).valueOf()||(r=k[d]);return r}
function H(b){return b!=null&&b!=undefined&&(b instanceof plt.types.Cons||b instanceof plt.types.Empty)}function X(b){var d=["th","st","nd","rd","th","th","th","th","th","th"];return Math.floor(b/10)%10==1?b+"th":b+d[b%10]}function aa(b,d,k,r){return plt.Kernel.format("~a: expects type <~a> as ~a argument, given: ~s",[b,d,X(k),r])}function m(b,d,k,r,D){if(!d(b))throw new z(aa(k,r,D,b));}function R(b,d,k){if(!H(b))throw new z(aa(d,"list",k,b));}function la(b,d,k,r,D){if(!H(b))throw new z(aa(k,"listof "+
r,D,b));for(;!b.isEmpty();){if(!d(b.first()))throw new z(aa(k,"listof "+r,D,b));b=b.rest()}}function oa(b,d,k,r){return function(D,P,Y){m(D,b,r,d,1);m(P,b,r,d,2);G(Y,function(ea,ma){m(ea,b,r,d,ma+3)});return k(D,P,Y)}}function ja(b,d){return oa(g,"number",function(k,r,D){return L(b,k,r,D)},d)}function da(b,d){return oa(F,"char",function(k,r,D){return L(b,k,r,D)},d)}function ba(b,d){return oa(s,"string",function(k,r,D){return L(b,k,r,D)},d)}plt.Kernel={_heir:J,pi:plt.types.FloatPoint.makeInstance(Math.PI),
e:plt.types.FloatPoint.makeInstance(Math.E),Struct:function(b,d){this._constructorName=b;this._fields=d},struct_question_:function(b){return b!=null&&b!=undefined&&b instanceof plt.Kernel.Struct},number_question_:function(b){return g(b)},equal_question_:function(b,d){return plt.Kernel.number_question_(b)&&plt.Kernel.number_question_(d)?"isEqual"in b?plt.types.NumberTower.equal(b,d):"isEqual"in d?plt.types.NumberTower.equal(d,b):b==d:b.isEqual(d)},equal_tilde__question_:function(b,d,k){m(k,g,"equal~?",
"number",3);return plt.Kernel.number_question_(b).valueOf()&&plt.Kernel.number_question_(d).valueOf()?"isEqual"in b?plt.types.NumberTower.approxEqual(b,d,k):"isEqual"in d?plt.types.NumberTower.approxEqual(d,b,k):b==d:b.isEqual(d)},eq_question_:function(b,d){return b==d},eqv_question_:function(b,d){if(g(b)&&g(d)&&b.level()==d.level())return plt.types.NumberTower.equal(b,d);else if(F(b)&&F(d))return b.getValue()==d.getValue();return b===d},identity:function(b){return b},cons:function(b,d){R(d,"cons",
2);return plt.types.Cons.makeInstance(b,d)},first:function(b){R(b,"first",1);return b.first()},rest:function(b){R(b,"rest",1);return b.rest()},second:function(b){R(b,"second",1);return b.rest().first()},third:function(b){R(b,"third",1);return b.rest().rest().first()},fourth:function(b){R(b,"fourth",1);return b.rest().rest().rest().first()},fifth:function(b){R(b,"fifth",1);return b.rest().rest().rest().rest().first()},random:function(b){m(b,j,"random","integer",1);return plt.types.Rational.makeInstance(Math.floor(plt.types.NumberTower.toInteger(b)*
Math.random()),1)},current_dash_seconds:function(){return plt.types.Rational.makeInstance((new Date).getMilliseconds()/1000)},floor:function(b){m(b,g,"floor","number",1);return b.floor()},ceiling:function(b){m(b,g,"ceiling","number",1);return b.ceiling()},sqrt:function(b){m(b,g,"sqrt","number",1);return b.sqrt()},integer_dash_sqrt:function(b){m(b,j,"integer-sqrt","integer",1);b=b.sqrt();return T(b)?plt.types.Rational.makeInstance(b.toInteger()):O(b)?plt.types.Rational.makeInstance(b.toInteger()):
plt.types.Complex.makeInstance(plt.types.Rational.makeInstance(plt.Kernel.real_dash_part(b).toInteger()),plt.types.Rational.makeInstance(plt.Kernel.imag_dash_part(b).toInteger()))},sqr:function(b){m(b,g,"sqr","number",1);return plt.types.NumberTower.sqr(b)},sin:function(b){m(b,g,"sin","number",1);return b.sin()},cos:function(b){m(b,g,"cos","number",1);return b.cos()},modulo:function(b,d){m(b,g,"modulo","number",1);m(d,g,"modulo","number",2);return plt.types.NumberTower.modulo(b,d)},zero_question_:function(b){m(b,
g,"zero?","number",1);return plt.types.NumberTower.equal(b,plt.types.Rational.ZERO)},_equal__tilde_:function(b,d,k){m(b,g,"=~","number",1);m(d,g,"=~","number",2);m(k,g,"=~","number",3);return plt.types.NumberTower.approxEqual(b,d,k)},abs:function(b){m(b,g,"abs","number",1);return plt.types.NumberTower.abs(b)},add1:function(b){m(b,g,"add1","number",1);return plt.types.NumberTower.add(b,plt.types.Rational.ONE)},sub1:function(b){m(b,g,"sub1","number",1);return plt.types.NumberTower.subtract(b,plt.types.Rational.ONE)},
_plus_:function(b){G(b,function(r,D){m(r,g,"+","number",D+1)});var d,k=plt.types.Rational.ZERO;for(d=0;d<b.length;d++)k=plt.types.NumberTower.add(k,b[d]);return k},_dash_:function(b,d){m(b,g,"-","number",1);G(d,function(r,D){m(r,g,"-","number",D+2)});if(d.length==0)return plt.types.NumberTower.subtract(plt.types.Rational.ZERO,b);var k=b;for(b=0;b<d.length;b++)k=plt.types.NumberTower.subtract(k,d[b]);return k},_star_:function(b){G(b,function(r,D){m(r,g,"*","number",D+1)});var d,k=plt.types.Rational.ONE;
for(d=0;d<b.length;d++)k=plt.types.NumberTower.multiply(k,b[d]);return k},_slash_:function(b,d){m(b,g,"/","number",1);G(d,function(r,D){m(r,g,"/","number",D+2)});var k=b;if(d.length==0)return plt.types.NumberTower.divide(plt.types.Rational.ONE,k);else{for(b=0;b<d.length;b++)k=plt.types.NumberTower.divide(k,d[b]);return k}},_equal_:ja(plt.types.NumberTower.equal,"="),_greaterthan__equal_:ja(plt.types.NumberTower.greaterThanOrEqual,">="),_lessthan__equal_:ja(plt.types.NumberTower.lessThanOrEqual,"<="),
_greaterthan_:ja(plt.types.NumberTower.greaterThan,">"),_lessthan_:ja(plt.types.NumberTower.lessThan,"<"),min:function(b,d){m(b,g,"min","number",1);G(d,function(k,r){m(this,g,"min","number",r+2)});return N(plt.types.NumberTower.lessThanOrEqual,b,d)},max:function(b,d){m(b,g,"max","number",1);G(d,function(k,r){m(this,g,"max","number",r+2)});return N(plt.types.NumberTower.greaterThanOrEqual,b,d)},lcm:function(b,d){m(b,j,"lcm","number",1);G(d,function(r,D){m(this,j,"lcm","number",D+2)});b=Math.abs(b.toInteger());
if(b==0)return plt.types.Rational.ZERO;for(var k=0;k<d.length;k++){if(d[k].toInteger()==0)return plt.types.Rational.ZERO;b=e(b,d[k].toInteger())}return plt.types.Rational.makeInstance(b)},gcd:function(b,d){m(b,j,"gcd","number",1);G(d,function(r,D){m(this,j,"gcd","number",D+2)});b=Math.abs(b.toInteger());for(var k=0;k<d.length;k++)b=x(b,d[k].toInteger());return plt.types.Rational.makeInstance(b)},exact_dash__greaterthan_inexact:function(b){m(b,g,"exact->inexact","number",1);return plt.types.FloatPoint.makeInstance(b.toFloat())},
inexact_dash__greaterthan_exact:function(b){m(b,g,"inexact->exact","number",1);return plt.types.NumberTower.toExact(b)},exact_question_:function(b){m(b,g,"exact?","number",1);return b.isExact()},inexact_question_:function(b){m(b,g,"inexact?","number",1);return!b.isExact()},rational_question_:function(b){return plt.Kernel.number_question_(b)&&b.isRational()},number_dash__greaterthan_string:function(b){m(b,g,"number->string","number",1);return plt.types.String.makeInstance(plt.Kernel.toWrittenString(b))},
conjugate:function(b){m(b,g,"conjugate","number",1);return b.conjugate()},magnitude:function(b){m(b,g,"magnitude","number",1);return b.magnitude()},log:function(b){m(b,g,"log","number",1);return b.log()},angle:function(b){m(b,g,"angle","number",1);return b.angle()},atan:function(b,d){if(d.length==0){m(b,g,"atan","number",1);return b.atan()}else if(d.length==1){m(b,O,"atan","number",1);m(d[0],O,"atan","number",2);return plt.types.FloatPoint.makeInstance(Math.atan2(plt.types.NumberTower.toFloat(b),
plt.types.NumberTower.toFloat(d[0])))}else throw new C(plt.Kernel.format("atan: expects 1 to 2 arguments, given ~a.",[plt.types.Rational.makeInstance(d.length)]));},expt:function(b,d){m(b,g,"expt","number",1);m(d,g,"expt","number",2);return plt.types.NumberTower.expt(b,d)},exp:function(b){m(b,g,"exp","number",1);return b.exp()},acos:function(b){m(b,g,"acos","number",1);return b.acos()},asin:function(b){m(b,g,"asin","number",1);return b.asin()},tan:function(b){m(b,g,"tan","number",1);return plt.types.NumberTower.divide(b.sin(),
b.cos())},complex_question_:function(b){return Z(b)},cosh:function(b){m(b,g,"cosh","number",1);return this._plus_([this.exp(b),this.exp(b.minus())]).half()},sinh:function(b){m(b,g,"sinh","number",1);return plt.types.NumberTower.subtract(this.exp(b),this.exp(b.minus())).half()},denominator:function(b){m(b,T,"denominator","rational",1);return b.denominator()},numerator:function(b){m(b,T,"numerator","rational",1);return b.numerator()},odd_question_:function(b){m(b,g,"odd?","number",1);return Math.abs(b.toInteger()%
2)==1},even_question_:function(b){m(b,g,"even?","number",1);return Math.abs(b.toInteger()%2)==0},positive_question_:function(b){m(b,g,"positive?","number",1);return this._greaterthan_(b,plt.types.Rational.ZERO,[])},negative_question_:function(b){m(b,g,"negative?","number",1);return this._lessthan_(b,plt.types.Rational.ZERO,[])},imag_dash_part:function(b){m(b,g,"imag-part","number",1);return b.imag_dash_part()},real_dash_part:function(b){m(b,g,"real-part","number",1);return b.real_dash_part()},make_dash_polar:function(b,
d){if(plt.types.NumberTower.equal(d,plt.types.Rational.ZERO))return b;var k=plt.types.NumberTower.multiply(b,d.cos());b=plt.types.NumberTower.multiply(b,d.sin());return plt.types.Complex.makeInstance(k,b)},integer_question_:function(b){return j(b)},make_dash_rectangular:function(b,d){return plt.types.Complex.makeInstance(b,d)},quotient:function(b,d){m(b,j,"quotient","integer",1);m(d,j,"quotient","integer",2);b=plt.types.NumberTower.divide(b,d);return plt.Kernel.positive_question_(b)?plt.types.Rational.makeInstance(b.floor().toInteger(),
1):plt.types.Rational.makeInstance(b.ceiling().toInteger(),1)},remainder:function(b,d){m(b,g,"remainder","number",1);m(d,g,"remainder","number",2);return plt.types.Rational.makeInstance(b.toInteger()%d.toInteger(),1)},real_question_:function(b){return O(b)},round:function(b){m(b,g,"round","number",1);return b.round()},sgn:function(b){m(b,g,"sgn","number",1);if(this.positive_question_(b).valueOf())return plt.types.Rational.ONE;return this.negative_question_(b).valueOf()?plt.types.Rational.NEGATIVE_ONE:
plt.types.Rational.ZERO},boolean_equal__question_:function(b,d){m(b,E,"boolean=?","boolean",1);m(d,E,"boolean=?","boolean",2);return b==d},boolean_question_:function(b){return E(b)},false_question_:function(b){return b==plt.types.Logic.FALSE},not:function(b){if(!b||b===plt.types.Logic.FALSE)return plt.types.Logic.TRUE;return plt.types.Logic.FALSE},symbol_dash__greaterthan_string:function(b){m(b,A,"symbol->string","symbol",1);return plt.types.String.makeInstance(b.val)},symbol_equal__question_:function(b,
d){m(b,A,"symbol=?","symbol",1);m(d,A,"symbol=?","symbol",2);return b.val==d.val},symbol_question_:function(b){return A(b)},append:function(b,d){R(b,"append",1);b=b;var k;for(k=0;k<d.length;k++){R(d[k],"append",k+2);b=b.append(d[k])}return b},reverse:function(b){R(b,"reverse",1);for(var d=plt.types.Empty.EMPTY;!b.isEmpty();){d=plt.types.Cons.makeInstance(b.first(),d);b=b.rest()}return d},assq:function(b,d){for(R(d,"assq",2);!d.isEmpty()&&!plt.Kernel.eq_question_(b,d.first().first());)d=d.rest();return d.isEmpty()?
plt.types.Logic.FALSE:d.first()},caaar:function(b){R(b,"caaar",1);return b.first().first().first()},caadr:function(b){R(b,"caadr",1);return b.first().first().rest()},caar:function(b){R(b,"caar",1);return b.first().first()},cadar:function(b){R(b,"cadar",1);return b.first().rest().first()},cadddr:function(b){R(b,"cadddr",1);return b.rest().rest().rest().first()},caddr:function(b){R(b,"caddr",1);return b.rest().rest().first()},cadr:function(b){R(b,"cadr",1);return b.rest().first()},car:function(b){R(b,
"car",1);return b.first()},cdaar:function(b){R(b,"cdaar",1);return b.first().first().rest()},cdadr:function(b){R(b,"cdadr",1);return b.rest().first().rest()},cdar:function(b){R(b,"cdar",1);return b.first().rest()},cddar:function(b){R(b,"cddar",1);return b.first().rest().rest()},cdddr:function(b){R(b,"cdddr",1);return b.rest().rest().rest()},cddr:function(b){R(b,"cddr",1);return b.rest().rest()},cdr:function(b){R(b,"cdr",1);return b.rest()},null_question_:function(b){return M(b)},empty_question_:function(b){return M(b)},
pair_question_:function(b){return I(b)},cons_question_:function(b){return I(b)},list_question_:function(b){return H(b)},sixth:function(b){R(b,"sixth",1);return b.rest().rest().rest().rest().rest().first()},seventh:function(b){R(b,"seventh",1);return b.rest().rest().rest().rest().rest().rest().first()},eighth:function(b){R(b,"eighth",1);return b.rest().rest().rest().rest().rest().rest().rest().first()},set_dash_car_bang_:function(b,d){R(b,"set-car!",1);b.f=d},set_dash_cdr_bang_:function(b,d){R(b,"set-cdr!",
1);R(d,"set-cdr!",2);b.r=d},length:function(b){R(b,"length",1);for(var d=plt.types.Rational.ZERO;!b.isEmpty();b=b.rest())d=plt.Kernel.add1(d);return d},list:function(b){for(var d=plt.types.Empty.EMPTY,k=b.length-1;k>=0;k--)d=plt.types.Cons.makeInstance(b[k],d);return d},list_star_:function(b,d){var k=d.pop();if(k==undefined||!k instanceof plt.types.Cons)throw new z("list*: "+k+" not a list");d.unshift(b);return plt.Kernel.append(plt.Kernel.list(d),[k])},list_dash_ref:function(b,d){R(b,"list-ref",
1);m(d,h,"list-ref","natural",2);for(var k=plt.types.Rational.ZERO;plt.Kernel._lessthan_(k,d,[]);k=plt.Kernel.add1(k))if(b.isEmpty())throw new C("list-ref: index too small");else b=b.rest();return b.first()},remove:function(b,d){R(d,"member",2);for(var k=d,r=plt.types.Empty.EMPTY;!d.isEmpty();)if(plt.Kernel.equal_question_(b,d.first()).valueOf())return plt.Kernel.append(plt.Kernel.reverse(r),[d.rest()]);else{r=plt.types.Cons.makeInstance(d.first(),r);d=d.rest()}return k},member:function(b,d){for(R(d,
"member",2);!d.isEmpty();){if(plt.Kernel.equal_question_(b,d.first()).valueOf())return plt.types.Logic.TRUE;d=d.rest()}return plt.types.Logic.FALSE},memq:function(b,d){for(R(d,"memq",2);!d.isEmpty();){if(plt.Kernel.eq_question_(b,d.first()).valueOf())return d;d=d.rest()}return plt.types.Logic.FALSE},memv:function(b,d){for(R(d,"memv",2);!d.isEmpty();){if(plt.Kernel.eqv_question_(b,d.first()).valueOf())return d;d=d.rest()}return plt.types.Logic.FALSE},memf:function(b,d){m(b,S,"memf","function",1);for(R(d,
"memf",2);!d.isEmpty();){if(b([d.first()]))return d;d=d.rest()}return plt.types.Logic.FALSE},compose:function(b){return function(d){d=d;for(var k=b.length-1;k>=0;k--)d=[b[k](d)];return d[0]}},string_dash__greaterthan_number:function(b){m(b,s,"string->number","string",1);try{var d=plt.reader.readSchemeExpressions(b,"");if(plt.types.NumberTower.equal(plt.Kernel.length(d),plt.types.Rational.ONE)){var k=stx_dash_e(d.first());return g(k)?k:plt.types.Logic.FALSE}else return plt.types.Logic.FALSE}catch(r){return plt.types.Logic.FALSE}},
string_dash__greaterthan_symbol:function(b){m(b,s,"string->symbol","string",1);return plt.types.Symbol.makeInstance(b)},string_dash__greaterthan_int:function(b){m(b,s,"string->int","string",1);return plt.types.Rational.makeInstance(b.toString().charCodeAt(0),1)},string_dash_append:function(b){G(b,function(d,k){m(d,s,"string-append","string",k+1)});return plt.types.String.makeInstance(b.join(""))},replicate:function(b,d){m(b,h,"replicate","natural",1);m(d,s,"replicate","string",2);for(var k=[],r=0;r<
b.toInteger();r++)k.push(d);return plt.types.String.makeInstance(k.join(""))},string_equal__question_:ba(function(b,d){return b==d},"string=?"),string_lessthan__equal__question_:ba(function(b,d){return b<=d},"string<=?"),string_lessthan__question_:ba(function(b,d){return b<d},"string<?"),string_greaterthan__equal__question_:ba(function(b,d){return b>=d},"string>=?"),string_greaterthan__question_:ba(function(b,d){return b>d},"string>?"),string_dash_ci_equal__question_:ba(function(b,d){return b.toUpperCase()==
d.toUpperCase()},"string-ci=?"),string_dash_ci_lessthan__equal__question_:ba(function(b,d){return b.toUpperCase()<=d.toUpperCase()},"string-ci<=?"),string_dash_ci_lessthan__question_:ba(function(b,d){return b.toUpperCase()<d.toUpperCase()},"string-ci<?"),string_dash_ci_greaterthan__question_:ba(function(b,d){return b.toUpperCase()>d.toUpperCase()},"string-ci>?"),string_dash_ci_greaterthan__equal__question_:ba(function(b,d){return b.toUpperCase()>=d.toUpperCase()},"string-ci>=?"),string_dash_copy:function(b){m(b,
s,"string-copy","string",1);return b.substring(0,b.length)},string_dash_length:function(b){m(b,s,"string-length","string",1);return plt.types.Rational.makeInstance(b.length,1)},string_dash_ref:function(b,d){m(b,s,"string-ref","string",1);m(d,h,"string-ref","natural",2);if(d.toInteger()>=b.length)throw new C("string-ref: index >= length");return plt.types.String.makeInstance(b.charAt(d.toInteger()))},string_dash_ith:function(b,d){m(b,s,"string-ith","string",1);m(d,h,"string-ith","natural",2);if(d.toInteger()>=
b.length)throw new C("string-ith: index >= string length");return plt.types.String.makeInstance(b.substring(d.toInteger(),d.toInteger()+1))},int_dash__greaterthan_string:function(b){m(b,j,"int->string","integer",1);return plt.types.String.makeInstance(String.fromCharCode(b.toInteger()))},string_question_:function(b){return s(b)},substring:function(b,d,k){m(b,s,"substring","string",1);m(d,h,"substring","natural",2);m(k,h,"substring","natural",3);if(d.toInteger()>k.toInteger())throw new C("substring: begin > end");
if(k.toInteger()>b.length)throw new C("substring: end > length");return String.makeInstance(b.substring(d.toInteger(),k.toInteger()))},char_question_:function(b){return F(b)},char_dash__greaterthan_integer:function(b){m(b,F,"char->integer","char",1);b=new String(b.val);return plt.types.Rational.makeInstance(b.charCodeAt(0),1)},integer_dash__greaterthan_char:function(b){m(b,j,"integer->char","integer",1);b=String.fromCharCode(b.toInteger());return plt.types.Char.makeInstance(b)},char_equal__question_:da(function(b,
d){return b.val==d.val},"char=?"),char_lessthan__question_:da(function(b,d){return b.val<d.val},"char<?"),char_lessthan__equal__question_:da(function(b,d){return b.val<=d.val},"char<=?"),char_greaterthan__question_:da(function(b,d){return b.val>d.val},"char>?"),char_greaterthan__equal__question_:da(function(b,d){return b.val>=d.val},"char>=?"),char_dash_ci_equal__question_:da(function(b,d){return b.val.toUpperCase()==d.val.toUpperCase()},"char-ci=?"),char_dash_ci_lessthan__question_:da(function(b,
d){return b.val.toUpperCase()<d.val.toUpperCase()},"char-ci<?"),char_dash_ci_lessthan__equal__question_:da(function(b,d){return b.val.toUpperCase()<=d.val.toUpperCase()},"char-ci<=?"),char_dash_ci_greaterthan__question_:da(function(b,d){return b.val.toUpperCase()>d.val.toUpperCase()},"char-ci>?"),char_dash_ci_greaterthan__equal__question_:da(function(b,d){return b.val.toUpperCase()>=d.val.toUpperCase()},"char-ci>=?"),char_dash_numeric_question_:function(b){m(b,F,"char-numeric?","char",1);b=b.val;
return b>="0"&&b<="9"},char_dash_alphabetic_question_:function(b){m(b,F,"char-alphabetic?","char",1);b=b.val;return f(b)},char_dash_whitespace_question_:function(b){m(b,F,"char-whitespace?","char",1);b=b.val;return n(b)},char_dash_upper_dash_case_question_:function(b){m(b,F,"char-upper-case?","char",1);return f(b.val)&&b.val.toUpperCase()==b.val},char_dash_lower_dash_case_question_:function(b){m(b,F,"char-lower-case?","char",1);return f(b.val)&&b.val.toLowerCase()==b.val},char_dash_upcase:function(b){m(b,
F,"char-upcase","char",1);return plt.types.Char.makeInstance(b.val.toUpperCase())},char_dash_downcase:function(b){m(b,F,"char-downcase","char",1);return plt.types.Char.makeInstance(b.val.toLowerCase())},list_dash__greaterthan_string:function(b){la(b,F,"list->string","char",1);for(var d="";!b.isEmpty();){d+=b.first().val;b=b.rest()}return plt.types.String.makeInstance(d)},implode:function(b){la(b,s,"implode","string",1);for(var d=[];!b.isEmpty();){d.push(b.first().toString());b=b.rest()}return plt.types.String.makeInstance(d.join(""))},
string_dash_numeric_question_:function(b){m(b,s,"string-numeric?","string",1);for(var d=0;d<b.length;d++)if(b[d]<"0"||b[d]>"9")return plt.types.Logic.FALSE;return plt.types.Logic.TRUE},string_dash_alphabetic_question_:function(b){m(b,s,"string-alphabetic?","string",1);return f(b)?plt.types.Logic.TRUE:plt.types.Logic.FALSE},string_dash_whitespace_question_:function(b){m(b,s,"string-whitespace?","string",1);return n(b)?plt.types.Logic.TRUE:plt.types.Logic.FALSE},string_dash_upper_dash_case_question_:function(b){m(b,
s,"string-upper-case?","string",1);return f(b)&&b.toUpperCase()==b},string_dash_lower_dash_case_question_:function(b){m(b,s,"string-lower-case?","string",1);return f(b)&&b.toLowerCase()==b},string:function(b){G(b,function(r,D){m(this,F,"string","char",D+1)});for(var d=[],k=0;k<b.length;k++)d.push(b[k].val);return String.makeInstance(d.join(""))},make_dash_string:function(b,d){m(b,h,"make-string","natural",1);m(d,F,"make-string","char",2);var k="";d=d.val;for(var r=plt.types.Rational.ZERO;plt.Kernel._lessthan_(r,
b,[]);r=plt.Kernel.add1(r))k+=d;return plt.types.String.makeInstance(k)},string_dash__greaterthan_list:function(b){m(b,s,"string->list","string",1);b=b;for(var d=plt.types.Empty.EMPTY,k=b.length-1;k>=0;k--)d=plt.types.Cons.makeInstance(plt.types.Char.makeInstance(b.charAt(k)),d);return d},explode:function(b){m(b,s,"explode","string",1);b=b;for(var d=plt.types.Empty.EMPTY,k=b.length-1;k>=0;k--)d=plt.types.Cons.makeInstance(plt.types.String.makeInstance(b.charAt(k)),d);return d}};plt.Kernel._dumpKernelSymbols=
function(){var b=plt.types.Empty.EMPTY;for(var d in plt.Kernel)b=plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance(d),b);return b};plt.Kernel.openInputStx=function(){throw new C("open-input-stx currently unsupported");};function u(){this.hash=new plt._Hashtable}u.prototype.toWrittenString=function(){return"<hash>"};u.prototype.toDisplayedString=function(){return"<hash>"};u.prototype.isEqual=function(b){return this===b};plt.Kernel.makeHashEq=function(){var b=new u;return b};plt.Kernel.hashSetBang=
function(b,d,k){m(b,Q,"hash-set!","hash",1);b.hash.put(d,k)};plt.Kernel.hashRef=function(b,d,k){m(b,Q,"hash-ref","hash",1);if(b.hash.containsKey(d))return b.hash.get(d);else{if(S(k))return k([]);return k}};plt.Kernel.hashRemoveBang=function(b,d){m(b,Q,"hash-remove!","hash",1);b.hash.remove(d)};plt.Kernel.hashMap=function(b,d){m(b,Q,"hash-map","hash",1);for(var k=plt.types.Empty.EMPTY,r=b.hash.keys(),D=0;D<r.length;D++){var P=b.hash.get(r[D]);k=plt.Kernel.cons(d([r[D],P]),k)}return k};function Q(b){return b!=
null&&b!=undefined&&b instanceof u}plt.Kernel.isHash=Q;plt.Kernel.apply=function(b,d,k){var r,D=[];m(b,S,"apply","function",1);if(k.length==0){r=d;for(R(r,"apply",2);!r.isEmpty();){var P=r.first();D.push(P);r=r.rest()}}else{r=k.pop();for(R(r,"apply",3);!r.isEmpty();){P=r.first();D.push(P);r=r.rest()}for(;k.length>0;)D.unshift(k.pop());D.unshift(d)}if(U(b,D.length))return b(D);else throw new C(plt.Kernel.format("~a: expects ~a, given ~a: ~s",[b,W(b),D.length,plt.Kernel.list(D)]));};plt.Kernel.map=
function(b,d){m(b,S,"map","function",1);G(d,function(P,Y){R(P,"map",Y+2)});for(var k=plt.types.Empty.EMPTY;!d[0].isEmpty();){for(var r=[],D=0;D<d.length;D++){r.push(d[D].first());d[D]=d[D].rest()}k=plt.Kernel.cons(b(r),k)}return plt.Kernel.reverse(k)};plt.Kernel.for_dash_each=function(b,d){m(b,S,"for-each","function",1);for(G(d,function(D,P){R(D,"for-each",P+2)});!d[0].isEmpty();){for(var k=[],r=0;r<d.length;r++){k.push(d[r].first());d[r]=d[r].rest()}b(k)}};plt.Kernel.andmap=function(b,d){m(b,S,"andmap",
"function",1);for(G(d,function(D,P){R(D,"andmap",P+2)});!d[0].isEmpty();){for(var k=[],r=0;r<d.length;r++){k.push(d[r].first());d[r]=d[r].rest()}if(!b(k))return plt.types.Logic.FALSE}return plt.types.Logic.TRUE};plt.Kernel.ormap=function(b,d){m(b,S,"ormap","function",1);for(G(d,function(D,P){R(D,"ormap",P+2)});!d[0].isEmpty();){for(var k=[],r=0;r<d.length;r++){k.push(d[r].first());d[r]=d[r].rest()}if(b(k))return plt.types.Logic.TRUE}return plt.types.Logic.FALSE};plt.Kernel.filter=function(b,d){m(b,
S,"filter","function",1);m(d,H,"filter","list",2);for(var k=plt.types.Empty.EMPTY;!d.isEmpty();){if(b([d.first()]))k=plt.types.Cons.makeInstance(d.first(),k);d=d.rest()}return plt.Kernel.reverse(k)};plt.Kernel.foldl=function(b,d,k){m(b,S,"foldl","function",1);G(k,function(P,Y){m(P,H,"foldl","list",Y+3)});for(d=d;!k[0].isEmpty();){for(var r=[],D=0;D<k.length;D++){r.push(k[D].first());k[D]=k[D].rest()}r.push(d);d=b(r)}return d};plt.Kernel.foldr=function(b,d,k){m(b,S,"foldr","function",1);G(k,function(P,
Y){m(P,H,"foldr","list",Y+3)});d=d;for(var r=0;r<k.length;r++)k[r]=plt.Kernel.reverse(k[r]);for(;!k[0].isEmpty();){var D=[];for(r=0;r<k.length;r++){D.push(k[r].first());k[r]=k[r].rest()}D.push(d);d=b(D)}return d};plt.Kernel.argmin=function(b,d){m(b,S,"argmin","function",1);m(d,I,"argmin","nonempty list",2);var k=d.first(),r=b([d.first()]).toFloat();for(d=d.rest();!d.isEmpty();){var D=b([d.first()]).toFloat();if(D<r){k=d.first();r=D}d=d.rest()}return k};plt.Kernel.argmax=function(b,d){m(b,S,"argmax",
"function",1);m(d,I,"argmax","nonempty list",2);var k=d.first(),r=b([d.first()]).toFloat();for(d=d.rest();!d.isEmpty();){var D=b([d.first()]).toFloat();if(D>r){k=d.first();r=D}d=d.rest()}return k};plt.Kernel.sort=function(b,d){m(b,H,"sort","list",1);m(d,S,"sort","function",2);for(var k=[];!b.isEmpty();){k.push(b.first());b=b.rest()}k.sort(function(r,D){return d([r,D])?-1:1});return plt.Kernel.list(k)};plt.Kernel.quicksort=plt.Kernel.sort;plt.Kernel.build_dash_list=function(b,d){m(b,h,"build-list",
"natural",1);m(d,S,"build-list","function",2);for(var k=plt.types.Empty.EMPTY,r=0;r<b.toInteger();r++)k=plt.Kernel.cons(d([plt.types.Rational.makeInstance(r,1)]),k);return plt.Kernel.reverse(k)};plt.Kernel.build_dash_string=function(b,d){m(b,h,"build-string","natural",1);m(d,S,"build-string","function",2);for(var k=[],r=0;r<b.toInteger();r++){var D=d([plt.types.Rational.makeInstance(r,1)]);k.push(D.val)}return plt.types.String.makeInstance(k.join(""))};plt.Kernel.format=function(b,d){m(b,s,"format",
"string",1);var k=new RegExp("~[sSaAn%~]","g"),r=d;function D(P){if(P=="~~")return"~";else if(P=="~n"||P=="~%")return"\n";else if(P=="~s"||P=="~S"){if(r.length==0)throw new C("format: fewer arguments passed than expected");return plt.Kernel.toWrittenString(r.shift())}else if(P=="~a"||P=="~A"){if(r.length==0)throw new C("format: fewer arguments passed than expected");return plt.Kernel.toDisplayedString(r.shift())}else throw new C("Unimplemented format "+P);}b=plt.types.String.makeInstance(b.replace(k,
D));if(r.length>0)throw new C("format: More arguments passed than expected");return b};plt.Kernel.string=function(b){for(var d=[],k=0;k<b.length;k++)d.push(b[k].getValue());return plt.types.String.makeInstance(d.join(""))};plt.Kernel.procedure_question_=function(b){return S(b)};plt.Kernel.procedure_dash_arity=function(b){m(b,S,"procedure-arity","function",1);return b.procedureArity};function U(b,d){return I(b.procedureArity)?d>=b.procedureArity.rest().first().toInteger():d==b.procedureArity.toInteger()}
function W(b){return I(b.procedureArity)?"at least "+(b.procedureArity.rest().first().toInteger()==1)?"one argument":b.procedureArity.rest().first().toInteger()+" arguments":b.procedureArity.toInteger()==1?"one argument":b.procedureArity.toInteger()+" arguments"}plt.Kernel.xml_dash__greaterthan_s_dash_exp=function(b){m(b,s,"xml->s-exp","string",1);if(b.length==0)return plt.types.String.makeInstance("");var d;try{d=new ActiveXObject("Microsoft.XMLDOM");d.async="false";d.loadXML(b)}catch(k){d=new DOMParser;
d=d.parseFromString(b,"text/xml")}function r(P){for(var Y=plt.types.Empty.EMPTY,ea=0;ea<P.length;ea++){var ma=plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance(P.item(ea).nodeName),plt.types.Cons.makeInstance(P.item(ea).nodeValue,plt.types.Empty.EMPTY));Y=plt.types.Cons.makeInstance(ma,Y)}return plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance("@"),plt.Kernel.reverse(Y))}function D(P){if(P.nodeType==Node.ELEMENT_NODE){for(var Y=plt.types.Empty.EMPTY,ea=P.firstChild;ea!=null;){var ma=
D(ea);Y=s(ma)&&!Y.isEmpty()&&s(Y.first())?plt.types.Cons.makeInstance(Y.first()+ma,Y.rest()):plt.types.Cons.makeInstance(ma,Y);ea=ea.nextSibling}Y=plt.Kernel.reverse(Y);Y=plt.types.Cons.makeInstance(r(P.attributes),Y);return Y=plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance(P.nodeName),Y)}else return P.nodeType==Node.TEXT_NODE?P.textContent:P.nodeType==Node.CDATA_SECTION_NODE?P.data:plt.types.Empty.EMPTY}return b=D(d.firstChild)};plt.Kernel.split_dash_whitespace=function(b){b=b.replace(/^\s+/,
"");b=b.replace(/\s+$/,"");return plt.Kernel.list(b.split(/\s+/))};function ha(b){plt.Kernel.Struct.call(this,"box",[b])}ha.prototype=J(plt.Kernel.Struct.prototype);plt.Kernel.box=function(b){return new ha(b)};plt.Kernel.unbox=function(b){m(b,plt.Kernel.box_question_,"unbox","box",1);return b._fields[0]};plt.Kernel.box_question_=function(b){return b!=null&&b!=undefined&&b instanceof ha};plt.Kernel.set_dash_box_bang_=function(b,d){m(b,plt.Kernel.box_question_,"set-box!","box",1);b._fields[0]=d};function pa(b,
d){plt.Kernel.Struct.call(this,"make-posn",[b,d])}pa.prototype=J(plt.Kernel.Struct.prototype);function na(b,d){return new pa(b,d)}function ta(b){m(b,va,"posn-x","posn",1);return b._fields[0]}function xa(b){m(b,va,"posn-y","posn",1);return b._fields[1]}function va(b){return b!=null&&b!=undefined&&b instanceof pa}plt.Kernel.make_dash_posn=na;plt.Kernel.posn_question_=va;plt.Kernel.posn_dash_x=ta;plt.Kernel.posn_dash_y=xa;plt.Kernel.error=function(b,d){m(b,A,"error","symbol",1);m(d,s,"error","string",
2);throw new C(plt.Kernel.format("~a: ~a",[b,d]).toString());};plt.Kernel.syntax_dash_error=function(b,d){m(b,s,"syntax-error","string",1);m(d,t,"syntax-error","stx",2);throw new B(b,d);};plt.Kernel.toWrittenString=function(b,d){d||(d=new plt._Hashtable);if(d.containsKey(b))return"...";if(b==undefined||b==null)return"<undefined>";if(typeof b=="string")return b.toWrittenString();if(typeof b!="object"&&typeof b!="function")return b.toString();if("toWrittenString"in b)return b.toWrittenString(d);return"toDisplayedString"in
b?b.toDisplayedString(d):b.toString()};plt.Kernel.toDisplayedString=function(b,d){d||(d=new plt._Hashtable);if(d.containsKey(b))return"...";if(b==undefined||b==null)return"<undefined>";if(typeof b=="string")return b.toDisplayedString();if(typeof b!="object"&&typeof b!="function")return b.toString();if("toWrittenString"in b)return b.toWrittenString(d);return"toDisplayedString"in b?b.toDisplayedString(d):b.toString()};plt.Kernel.toDomNode=function(b,d){d||(d=new plt._Hashtable);if(d.containsKey(b))return document.createTextNode("...");
if(b==undefined||b==null)return b=document.createTextNode("<undefined>");if(typeof b=="string")return b=document.createTextNode(b.toWrittenString());if(typeof b!="object"&&typeof b!="function")return b=document.createTextNode(b.toString());if(b.nodeType)return b;if("toDomNode"in b)return b.toDomNode(d);if("toWrittenString"in b)return b=document.createTextNode(plt.Kernel.toWrittenString(b,d));return b="toDisplayedString"in b?document.createTextNode(plt.Kernel.toDisplayedString(b,d)):document.createTextNode(b.toString())};
plt.Kernel.Struct.prototype.toWrittenString=function(b){b.put(this,true);var d=[];d.push("(");d.push(this._constructorName);for(var k=0;k<this._fields.length;k++){d.push(" ");d.push(plt.Kernel.toWrittenString(this._fields[k],b))}d.push(")");return plt.types.String.makeInstance(d.join(""))};plt.Kernel.Struct.prototype.toDisplayedString=plt.Kernel.Struct.prototype.toWrittenString;function ua(b,d){b.appendChild(d)}plt.Kernel.Struct.prototype.toDomNode=function(b){b.put(this,true);var d=document.createElement("div");
d.appendChild(document.createTextNode("("));d.appendChild(document.createTextNode(this._constructorName));for(var k=0;k<this._fields.length;k++){d.appendChild(document.createTextNode(" "));ua(d,plt.Kernel.toDomNode(this._fields[k],b))}d.appendChild(document.createTextNode(")"));return d};plt.Kernel.Struct.prototype.isEqual=function(b){if(typeof b!="object")return false;if(!b._constructorName)return false;if(b._constructorName!=this._constructorName)return false;if(false in b)return false;if(this._fields.length!=
b._fields.length)return false;for(var d=0;d<this._fields.length;d++)if(!plt.Kernel.equal_question_(this._fields[d],b._fields[d]))return false;return true};plt.Kernel.reportError=function(b){var d;d=typeof console!="undefined"&&typeof console.log!="undefined"?function(k){console.log(k)}:function(k){alert(k)};if(typeof b=="string")d(b);else b.msg?d(b.msg):d(b.toString());plt.Kernel.lastLoc&&d("Error was raised around "+plt.Kernel.lastLoc)};plt.Kernel._void_=function(){};plt.Kernel.build_dash_vector=
function(b,d){m(b,h,"build-vector","natural",1);m(d,S,"build-vector","function",2);for(var k=[],r=0;r<b.toInteger();r++)k[r]=d([plt.types.Rational.makeInstance(r,1)]);return plt.types.Vector.makeInstance(b.toInteger(),k)};plt.Kernel.make_dash_vector=function(b){m(b,h,"make-vector","natural",1);return plt.types.Vector.makeInstance(b.toInteger())};plt.Kernel.vector=function(b){return plt.types.Vector.makeInstance(b.length,b)};plt.Kernel.vector_dash_length=function(b){m(b,p,"vector-length","vector",
1);return plt.types.Rational.makeInstance(b.length())};plt.Kernel.vector_dash_ref=function(b,d){m(b,p,"vector-ref","vector",1);m(d,function(k){return h(k)&&k.toInteger()<b.length()},"vector-ref","natural < vector length",2);return b.ref(d.toInteger())};plt.Kernel.vector_dash_set_bang_=function(b,d,k){m(b,p,"vector-set!","vector",1);m(d,function(r){return h(r)&&r.toInteger()<b.length()},"vector-set!","natural < vector length",2);return b.set(d.toInteger(),k)};plt.Kernel.vector_question_=function(b){return p(b)?
plt.types.Logic.TRUE:plt.types.Logic.FALSE};plt.Kernel.check_dash_expect=function(b,d){b=b([]);d=d([]);if(!plt.Kernel.equal_question_(b,d))throw new K(plt.Kernel.format("~s doesn't match the expected value ~s",[b,d]));};plt.Kernel.check_dash_within=function(b,d,k){b=b([]);d=d([]);k=k([]);if(!plt.Kernel._equal__tilde_(b,d,k))throw new K(plt.Kernel.format("~s doesn't match the expected value ~s within ~s",[b,d,k]));};plt.Kernel.check_dash_error=function(b,d){d=d([]);var k;try{k=b([])}catch(r){if(plt.Kernel.equal_question_(r.msg,
d))return;else throw new K(plt.Kernel.format("check-error encountered the error ~s instead of the expected error ~s.",[r.msg,d]));}throw new K(plt.Kernel.format("check-error expected the error ~s, but instead received the value ~s.",[d,k]));};plt.Kernel.lastLoc=undefined;plt.Kernel.setLastLoc=function(b){plt.Kernel.lastLoc=b;return true};plt.Kernel.printf=function(b,d){b=plt.Kernel.format(b,d);plt.Kernel.printHook(b)};plt.Kernel.printHook=function(){};plt.Kernel.isSymbol=A;plt.Kernel.isChar=F;plt.Kernel.isString=
s;plt.Kernel.isBoolean=E;plt.Kernel.isPair=I;plt.Kernel.isEmpty=M;plt.Kernel.isReal=O;plt.Kernel.isRational=T;plt.Kernel.isComplex=Z;plt.Kernel.isInteger=j;plt.Kernel.isNatural=h;plt.Kernel.isNumber=g;plt.Kernel.isAlphabeticString=f;plt.Kernel.isWhitespaceString=n;plt.Kernel.isList=H;plt.Kernel.isVector=p;plt.Kernel.isFunction=S;plt.Kernel.arrayEach=G;plt.Kernel.check=m;plt.Kernel.checkList=R;plt.Kernel.checkListof=la;plt.Kernel.MobyError=y;plt.Kernel.MobyParserError=v;plt.Kernel.MobySyntaxError=
B;plt.Kernel.MobyTypeError=z;plt.Kernel.MobyRuntimeError=C;plt.Kernel.attachEvent=c;plt.Kernel.detachEvent=l;plt.Kernel.ordinalize=X})();if(typeof plt=="undefined")plt={};plt.reader={};
(function(){function c(B){return B.replace(/\\./g,function(z){switch(z){case "\\b":return"\u0008";case "\\f":return"\u000c";case "\\n":return"\n";case "\\r":return"\r";case "\\t":return"\t";case "\\v":return"\u000b";default:return z.substring(1)}})}function l(B){var z,C=0;for(z=0;z<B.length;z++)B[z]=="\n"&&C++;return C}var J=[["whitespace",/^(\s+)/],["#;",/^([#][;])/],["comment",/^([#][|](?:(?:\|[^\#])|[^\|])*[|][#])/],["comment",/(^;[^\n]*)/],["(",/^(\(|\[|\{)/],[")",/^(\)|\]|\})/],["'",/^(\')/],
["`",/^(`)/],[",@",/^(,@)/],[",",/^(,)/],["char",/^\#\\(newline|backspace)/],["char",/^\#\\(.)/],["complex",/^((?:\#[ei])?[+\-]?(?:\d+\/\d+|\d+\.\d+|\d+\.|\.\d+|\d+)?[+\-](?:\d+\/\d+|\d+\.\d+|\d+\.|\.\d+|\d+)i)/],["number",/^((?:\#[ei])?[+-]inf.0)/],["number",/^((?:\#[ei])?[+-]nan.0)/],["number",/^((?:\#[ei])?[+\-]?(?:\d+\/\d+|\d+\.\d+|\d+\.|\.\d+|\d+))/],["string",/^"((?:([^\\"]|(\\.)))*)"/],["symbol",/^([a-zA-Z\:\+\=\~\_\?\!\@\#\$\%\^\&\*\-\/\.\>\<][\w\:\+\=\~\_\?\!\@\#\$\%\^\&\*\-\/\.\>\<]*)/]];
function y(B,z){var C=0,K=1,x=[];for(z||(z="");1;){for(var e=false,g=0;g<J.length;g++){var A=J[g][0],F=J[g][1];F=B.match(F);if(F!=null){if(A=="string")F[1]=c(F[1]);A!="whitespace"&&A!="comment"&&x.push([A,F[1],new Loc(C,K,F[0].length,z)]);C+=F[0].length;K+=l(F[0]);B=B.substring(F[0].length);e=true;break}}if(!e)break}return[x,B]}function v(B,z){var C=make_dash_stx_colon_list,K=make_dash_stx_colon_atom,x=y(B,z),e=x[0],g=undefined;if(x[1].length>0)throw new plt.Kernel.MobyParserError("Error while tokenizing: the rest of the stream is: "+
x[1],new Loc(B.length-x[1].length,l(B.substring(0,B.length-x[1].length)),x[1].length,z));var A=plt.types.Symbol.makeInstance("quote"),F=plt.types.Symbol.makeInstance("quasiquote"),t=plt.types.Symbol.makeInstance("unquote"),s=plt.types.Symbol.makeInstance("unquote-splicing"),E=plt.types.Empty.EMPTY;function I(h){return e.length>0&&e[0][0]==h}function M(h){if(e.length==0)if(g)throw new plt.Kernel.MobyParserError("token stream exhausted while trying to eat "+h,g[2]);else throw new plt.Kernel.MobyParserError("token stream exhausted while trying to eat "+
h,new Loc(0,0,B.length,z));var f=e.shift();g=f;if(f[0]==h)return f;else throw new plt.Kernel.MobyParserError("Unexpected token "+f,f[2]);}var O,T,Z;Z=function(h,f){h=M(h);var n=O();return C(plt.Kernel.cons(K(f,h[2]),plt.Kernel.cons(n,E)),new Loc(h[2].offset,h[2].line,n.loc.offset-h[2].offset+n.loc.span,""))};function S(h){switch(h){case "(":return")";case "[":return"]";case "{":return"}";default:throw new Error;}}function j(h,f){var n=h.match(/([+\-]?\d+)\/(\d+)/);if(h=="+inf.0")return plt.types.FloatPoint.makeInstance(Number.POSITIVE_INFINITY);
else if(h=="-inf.0")return plt.types.FloatPoint.makeInstance(Number.NEGATIVE_INFINITY);else if(h=="+nan.0"||h=="-nan.0")return plt.types.FloatPoint.makeInstance(Number.NaN);else if(h.match(/\./))if(f){h=h.match("^(.*)[.](.*)$");return plt.types.NumberTower.add(plt.types.Rational.makeInstance(parseInt(h[1]||"0")),plt.types.Rational.makeInstance(parseInt(h[2]),Math.pow(10,h[2].length)))}else return plt.types.FloatPoint.makeInstance(parseFloat(h));else return n?f?plt.types.Rational.makeInstance(parseInt(n[1]),
parseInt(n[2])):plt.types.FloatPoint.makeInstance(parseInt(n[1])/parseInt(n[2])):f?plt.types.Rational.makeInstance(parseInt(h),1):plt.types.FloatPoint.makeInstance(parseInt(h))}O=function(){if(e.length==0)if(g)throw new plt.Kernel.MobyParserError("Parse broke with empty token stream",g[2]);else throw new plt.Kernel.MobyParserError("Parse broke with empty token stream",new Loc(0,0,B.length,z));switch(e[0][0]){case "(":var h=M("("),f=h[1],n=S(h[1]),p=T();if(e.length==0)throw new plt.Kernel.MobyParserError("Expected a "+
n+" to close "+f,h[2]);else if(e[0][1]!=n)throw new plt.Kernel.MobyParserError("Expected a "+n+" to close "+f,e[0][2]);f=M(")");return make_dash_stx_colon_list(p,new Loc(h[2].offset,h[2].line,f[2].offset-h[2].offset+1,""));case "#;":M("#;");O();return O();case "'":return Z("'",A);case "`":return Z("`",F);case ",":return Z(",",t);case ",@":return Z(",@",s);case "number":h=M("number");return(p=h[1].match(/^(\#[ie])(.+)$/))?p[1]=="#i"?K(j(p[2],false),h[2]):K(j(p[2],true),h[2]):K(j(h[1],true),h[2]);case "complex":h=
M("complex");p=h[1].match(/^((?:\#[ei])?)([+\-]?(?:\d+\/\d+|\d+\.\d+|\d+\.|\.\d+|\d+)?)([+\-](?:\d+\/\d+|\d+\.\d+|\d+\.|\.\d+|\d+))i/);f=p[1]=="#i"?false:true;h=p[2]!=""?j(p[2],f):plt.types.Rational.ZERO;p=j(p[3],f);return h=K(plt.types.Complex.makeInstance(h,p));case "string":h=M("string");return K(plt.types.String.makeInstance(h[1]),h[2]);case "char":h=M("char");return h[1]=="newline"?K(plt.types.Char.makeInstance("\n"),h[2]):h[1]=="backspace"?K(plt.types.Char.makeInstance(String.fromCharCode(8)),
h[2]):K(plt.types.Char.makeInstance(h[1]),h[2]);case "symbol":h=M("symbol");if(h[1]==".")throw new plt.Kernel.MobyParserError("Dotted pairs are not currently accepted by Moby",h[2]);return K(plt.types.Symbol.makeInstance(h[1]),h[2]);default:throw new plt.Kernel.MobyParserError("Parse broke with token stream "+e,e[0][2]);}};T=function(){for(var h=plt.types.Empty.EMPTY;1;)if(e.length==0||I(")"))break;else if(I("#;")){M("#;");O()}else{var f=O();h=plt.types.Cons.makeInstance(f,h)}return plt.Kernel.reverse(h)};
x=T();if(e.length>0)throw new plt.Kernel.MobyParserError("More elements in the program's token stream than expected: the next unconsumed token is: "+e[0][1],e[0][2]);return x}plt.reader.tokenize=y;plt.reader.readSchemeExpressions=v})();function stx_colon_atom(c,l){plt.Kernel.Struct.call(this,"make-stx:atom",[c,l]);this.datum=c;this.loc=l}stx_colon_atom.prototype=new plt.Kernel.Struct;function make_dash_stx_colon_atom(c,l){return c=new stx_colon_atom(c,l)}
function stx_colon_atom_dash_datum(c){if(stx_colon_atom_question_(c))return c.datum;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx_colon_atom_dash_datum: not a stx:atom: ~s",[c]));}function stx_colon_atom_dash_loc(c){if(stx_colon_atom_question_(c))return c.loc;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx_colon_atom_dash_loc: not a stx:atom: ~s",[c]));}
function set_dash_stx_colon_atom_dash_datum_bang_(c,l){if(stx_colon_atom_question_(c))c.datum=l;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_atom_dash_datum_bang_: not a stx:atom: ~s",[c]));}function set_dash_stx_colon_atom_dash_loc_bang_(c,l){if(stx_colon_atom_question_(c))c.loc=l;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_atom_dash_loc_bang_: not a stx:atom: ~s",[c]));}
function stx_colon_atom_question_(c){return c!=null&&c!=undefined&&c instanceof stx_colon_atom}function stx_colon_list(c,l){plt.Kernel.Struct.call(this,"make-stx:list",[c,l]);this.elts=c;this.loc=l}stx_colon_list.prototype=new plt.Kernel.Struct;function make_dash_stx_colon_list(c,l){return new stx_colon_list(c,l)}
function stx_colon_list_dash_elts(c){if(stx_colon_list_question_(c))return c.elts;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx_colon_list_dash_elts: not a stx:list: ~s",[c]));}function stx_colon_list_dash_loc(c){if(stx_colon_list_question_(c))return c.loc;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx_colon_list_dash_loc: not a stx:list: ~s",[c]));}
function set_dash_stx_colon_list_dash_elts_bang_(c,l){if(stx_colon_list_question_(c))c.elts=l;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_list_dash_elts_bang_: not a stx:list: ~s",[c]));}function set_dash_stx_colon_list_dash_loc_bang_(c,l){if(stx_colon_list_question_(c))c.loc=l;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_list_dash_loc_bang_: not a stx:list: ~s",[c]));}
function stx_colon_list_question_(c){return c!=null&&c!=undefined&&c instanceof stx_colon_list}function Loc(c,l,J,y){plt.Kernel.Struct.call(this,"make-Loc",[c,l,J,y]);this.offset=c;this.line=l;this.span=J;this.id=y}Loc.prototype=new plt.Kernel.Struct;function make_dash_Loc(c,l,J,y){return new Loc(c,l,J,y)}function Loc_dash_offset(c){if(Loc_question_(c))return c.offset;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc_dash_offset: not a Loc: ~s",[c]));}
function Loc_dash_line(c){if(Loc_question_(c))return c.line;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc_dash_line: not a Loc: ~s",[c]));}function Loc_dash_span(c){if(Loc_question_(c))return c.span;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc_dash_span: not a Loc: ~s",[c]));}function Loc_dash_id(c){if(Loc_question_(c))return c.id;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc_dash_id: not a Loc: ~s",[c]));}
function set_dash_Loc_dash_offset_bang_(c,l){if(Loc_question_(c))c.offset=l;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_offset_bang_: not a Loc: ~s",[c]));}function set_dash_Loc_dash_line_bang_(c,l){if(Loc_question_(c))c.line=l;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_line_bang_: not a Loc: ~s",[c]));}
function set_dash_Loc_dash_span_bang_(c,l){if(Loc_question_(c))c.span=l;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_span_bang_: not a Loc: ~s",[c]));}function set_dash_Loc_dash_id_bang_(c,l){if(Loc_question_(c))c.id=l;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_id_bang_: not a Loc: ~s",[c]));}function Loc_question_(c){return c!=null&&c!=undefined&&c instanceof Loc}
function Loc_dash__greaterthan_string(c){return plt.Kernel.setLastLoc('offset=284 line=14 span=154 id="stx.ss"')&&plt.Kernel.format(plt.types.String.makeInstance("offset=~a line=~a span=~a id=~s"),[plt.Kernel.setLastLoc('offset=337 line=15 span=18 id="stx.ss"')&&Loc_dash_offset(c),plt.Kernel.setLastLoc('offset=367 line=16 span=16 id="stx.ss"')&&Loc_dash_line(c),plt.Kernel.setLastLoc('offset=395 line=17 span=16 id="stx.ss"')&&Loc_dash_span(c),plt.Kernel.setLastLoc('offset=423 line=18 span=14 id="stx.ss"')&&
Loc_dash_id(c)])}function stx_question_(c){return plt.Kernel.setLastLoc('offset=489 line=23 span=13 id="stx.ss"')&&stx_colon_atom_question_(c)||plt.Kernel.setLastLoc('offset=509 line=24 span=13 id="stx.ss"')&&stx_colon_list_question_(c)}
function stx_dash_e(c){return plt.Kernel.setLastLoc('offset=635 line=31 span=17 id="stx.ss"')&&stx_colon_atom_question_(c)?plt.Kernel.setLastLoc('offset=658 line=32 span=22 id="stx.ss"')&&stx_colon_atom_dash_datum(c):plt.Kernel.setLastLoc('offset=687 line=33 span=17 id="stx.ss"')&&stx_colon_list_question_(c)?plt.Kernel.setLastLoc('offset=710 line=34 span=21 id="stx.ss"')&&stx_colon_list_dash_elts(c):plt.Kernel.setLastLoc('offset=624 line=30 span=109 id="stx.ss"')&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),
plt.types.String.makeInstance('cond: fell out of cond around "offset=624 line=30 span=109 id=\\"stx.ss\\""'))}
function stx_dash_loc(c){return plt.Kernel.setLastLoc('offset=797 line=40 span=17 id="stx.ss"')&&stx_colon_atom_question_(c)?plt.Kernel.setLastLoc('offset=820 line=41 span=20 id="stx.ss"')&&stx_colon_atom_dash_loc(c):plt.Kernel.setLastLoc('offset=847 line=42 span=17 id="stx.ss"')&&stx_colon_list_question_(c)?plt.Kernel.setLastLoc('offset=870 line=43 span=20 id="stx.ss"')&&stx_colon_list_dash_loc(c):plt.Kernel.setLastLoc('offset=786 line=39 span=106 id="stx.ss"')&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),
plt.types.String.makeInstance('cond: fell out of cond around "offset=786 line=39 span=106 id=\\"stx.ss\\""'))}
function stx_dash_begins_dash_with_question_(c,l){return plt.Kernel.setLastLoc('offset=991 line=49 span=17 id="stx.ss"')&&stx_colon_atom_question_(c)?plt.types.Logic.FALSE:plt.Kernel.setLastLoc('offset=1023 line=51 span=17 id="stx.ss"')&&stx_colon_list_question_(c)?plt.Kernel.setLastLoc('offset=1051 line=52 span=36 id="stx.ss"')&&plt.Kernel.not(plt.Kernel.setLastLoc('offset=1056 line=52 span=30 id="stx.ss"')&&plt.Kernel.empty_question_(plt.Kernel.setLastLoc('offset=1064 line=52 span=21 id="stx.ss"')&&
stx_colon_list_dash_elts(c)))&&plt.Kernel.setLastLoc('offset=1098 line=53 span=47 id="stx.ss"')&&plt.Kernel.symbol_question_(plt.Kernel.setLastLoc('offset=1107 line=53 span=37 id="stx.ss"')&&stx_dash_e(plt.Kernel.setLastLoc('offset=1114 line=53 span=29 id="stx.ss"')&&plt.Kernel.first(plt.Kernel.setLastLoc('offset=1121 line=53 span=21 id="stx.ss"')&&stx_colon_list_dash_elts(c))))&&plt.Kernel.setLastLoc('offset=1156 line=54 span=74 id="stx.ss"')&&plt.Kernel.symbol_equal__question_(plt.Kernel.setLastLoc('offset=1166 line=54 span=37 id="stx.ss"')&&
stx_dash_e(plt.Kernel.setLastLoc('offset=1173 line=54 span=29 id="stx.ss"')&&plt.Kernel.first(plt.Kernel.setLastLoc('offset=1180 line=54 span=21 id="stx.ss"')&&stx_colon_list_dash_elts(c))),l):plt.Kernel.setLastLoc('offset=980 line=48 span=253 id="stx.ss"')&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),plt.types.String.makeInstance('cond: fell out of cond around "offset=980 line=48 span=253 id=\\"stx.ss\\""'))}
function datum_dash__greaterthan_stx(c,l){return plt.Kernel.setLastLoc('offset=1461 line=65 span=14 id="stx.ss"')&&stx_question_(c)?c:plt.Kernel.setLastLoc('offset=1499 line=67 span=15 id="stx.ss"')&&plt.Kernel.pair_question_(c)||plt.Kernel.setLastLoc('offset=1515 line=67 span=16 id="stx.ss"')&&plt.Kernel.empty_question_(c)?plt.Kernel.setLastLoc('offset=1538 line=68 span=89 id="stx.ss"')&&make_dash_stx_colon_list(plt.Kernel.setLastLoc('offset=1553 line=68 span=47 id="stx.ss"')&&plt.Kernel.map(function(){plt.Kernel.setLastLoc('offset=1558 line=68 span=33 id="stx.ss"');
function J(y){y=y[0];return plt.Kernel.setLastLoc('offset=1570 line=68 span=20 id="stx.ss"')&&datum_dash__greaterthan_stx(y,l)}J.toWrittenString=function(){return"<function:lambda>"};J.toDisplayedString=J.toWrittenString;return J}(),[c]),l):plt.types.Logic.TRUE?plt.Kernel.setLastLoc('offset=1644 line=71 span=29 id="stx.ss"')&&make_dash_stx_colon_atom(c,l):plt.Kernel.setLastLoc('offset=1450 line=64 span=225 id="stx.ss"')&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),plt.types.String.makeInstance('cond: fell out of cond around "offset=1450 line=64 span=225 id=\\"stx.ss\\""'))}
function stx_dash__greaterthan_datum(c){return plt.Kernel.setLastLoc('offset=1787 line=84 span=17 id="stx.ss"')&&stx_colon_atom_question_(c)?plt.Kernel.setLastLoc('offset=1810 line=85 span=22 id="stx.ss"')&&stx_colon_atom_dash_datum(c):plt.Kernel.setLastLoc('offset=1839 line=86 span=17 id="stx.ss"')&&stx_colon_list_question_(c)?plt.Kernel.setLastLoc('offset=1862 line=87 span=38 id="stx.ss"')&&plt.Kernel.map(function(){function l(J){return stx_dash__greaterthan_datum(J[0])}l.toWrittenString=function(){return"<function:stx->datum>"};
l.toDisplayedString=function(){return"<function:stx->datum>"};return l}(),[plt.Kernel.setLastLoc('offset=1878 line=87 span=21 id="stx.ss"')&&stx_colon_list_dash_elts(c)]):plt.Kernel.setLastLoc('offset=1776 line=83 span=126 id="stx.ss"')&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),plt.types.String.makeInstance('cond: fell out of cond around "offset=1776 line=83 span=126 id=\\"stx.ss\\""'))}(function(c){(function(){})(c||plt.Kernel.identity)})();if(typeof plt=="undefined")plt={};
plt.world=plt.world||{};plt.world.config=plt.world.config||{};
(function(){function c(v,B){var z={};for(var C in v)z[C]=v[C];for(C in B)z[C]=B[C];return z}function l(){this.vals={changeWorld:false,shutdownWorld:false,initialEffect:false,onRedraw:false,onDraw:false,onDrawCss:false,tickDelay:false,onTick:false,onTickEffect:false,onKey:false,onKeyEffect:false,onTilt:false,onTiltEffect:false,onAcceleration:false,onAccelerationEffect:false,onShake:false,onShakeEffect:false,onLocationChange:false,onLocationChangeEffect:false,onAnnounce:false,onAnnounceEffect:false,
stopWhen:false,stopWhenEffect:false}}l.prototype.lookup=function(v){plt.Kernel.check(v,plt.Kernel.isString,"WorldConfig.lookup","string",1);if(v in this.vals)return this.vals[v];else throw Error("Can't find "+v+" in the configuration");};l.prototype.updateAll=function(v){var B=new l;B.vals=c(this.vals,v);return B};plt.world.config.WorldConfig=l;plt.world.config.CONFIG=new l;function J(){return make_dash_effect_colon_none()}function y(v,B){v.toWrittenString=function(){return"("+B+" ...)"};v.toDisplayedString=
v.toWrittenString;return v}plt.world.config.Kernel=plt.world.config.Kernel||{};plt.world.config.Kernel.onRedraw=function(v){plt.Kernel.check(v,plt.Kernel.isFunction,"on-redraw","function",1);return y(function(B){return B.updateAll({onRedraw:v})},"on-redraw")};plt.world.config.Kernel.initialEffect=function(v){return y(function(B){return B.updateAll({initialEffect:v})},"initial-effect")};plt.world.config.Kernel.onDraw=function(v,B){plt.Kernel.check(v,plt.Kernel.isFunction,"on-draw","function",1);plt.Kernel.check(B,
plt.Kernel.isFunction,"on-draw","function",2);return y(function(z){return z.updateAll({onDraw:v,onDrawCss:B})},"on-draw")};plt.world.config.Kernel.onTick=function(v,B){plt.Kernel.check(v,plt.Kernel.isNumber,"on-tick","number",1);plt.Kernel.check(B,plt.Kernel.isFunction,"on-tick","function",2);return plt.world.config.Kernel.onTick_star_(v,B,function(){return J()})};plt.world.config.Kernel.onTick_star_=function(v,B,z){plt.Kernel.check(v,plt.Kernel.isNumber,"on-tick*","number",1);plt.Kernel.check(B,
plt.Kernel.isFunction,"on-tick*","function",2);plt.Kernel.check(z,plt.Kernel.isFunction,"on-tick*","function",3);return y(function(C){var K={onTick:B,onTickEffect:z,tickDelay:plt.types.NumberTower.toInteger(plt.types.NumberTower.multiply(plt.types.Rational.makeInstance(1000,1),v))};return C.updateAll(K)},"on-tick")};plt.world.config.Kernel.onTilt=function(v){plt.Kernel.check(v,plt.Kernel.isFunction,"on-tilt","function",1);return plt.world.config.Kernel.onTilt_star_(v,function(){return J()})};plt.world.config.Kernel.onTilt_star_=
function(v,B){plt.Kernel.check(v,plt.Kernel.isFunction,"on-tilt*","function",1);plt.Kernel.check(B,plt.Kernel.isFunction,"on-tilt*","function",2);return y(function(z){return z.updateAll({onTilt:v,onTiltEffect:B})},"on-tilt")};plt.world.config.Kernel.onAnnounce=function(v){plt.Kernel.check(v,plt.Kernel.isFunction,"on-announce","function",1);return plt.world.config.Kernel.onAnnounce_star_(v,function(){return J()})};plt.world.config.Kernel.onAnnounce_star_=function(v,B){plt.Kernel.check(v,plt.Kernel.isFunction,
"on-announce*","function",1);plt.Kernel.check(B,plt.Kernel.isFunction,"on-announce*","function",2);return y(function(z){return z.updateAll({onAnnounce:v,onAnnounceEffect:B})},"on-announce")};plt.world.config.Kernel.onAcceleration=function(v){plt.Kernel.check(v,plt.Kernel.isFunction,"on-acceleration","function",1);return plt.world.config.Kernel.onAcceleration_star_(v,function(){return J()})};plt.world.config.Kernel.onAcceleration_star_=function(v,B){plt.Kernel.check(v,plt.Kernel.isFunction,"on-acceleration*",
"function",1);plt.Kernel.check(B,plt.Kernel.isFunction,"on-acceleration*","function",2);return y(function(z){return z.updateAll({onAcceleration:v,onAccelerationEffect:B})},"on-acceleration")};plt.world.config.Kernel.onShake=function(v){plt.Kernel.check(v,plt.Kernel.isFunction,"on-shake","function",1);return plt.world.config.Kernel.onShake_star_(v,function(){return J()})};plt.world.config.Kernel.onShake_star_=function(v,B){plt.Kernel.check(v,plt.Kernel.isFunction,"on-shake*","function",1);plt.Kernel.check(B,
plt.Kernel.isFunction,"on-shake*","function",2);return y(function(z){return z.updateAll({onShake:v,onShakeEffect:B})},"on-shake")};plt.world.config.Kernel.onKey=function(v){plt.Kernel.check(v,plt.Kernel.isFunction,"on-key","function",1);return plt.world.config.Kernel.onKey_star_(v,function(){return J()})};plt.world.config.Kernel.onKey_star_=function(v,B){plt.Kernel.check(v,plt.Kernel.isFunction,"on-key*","function",1);plt.Kernel.check(B,plt.Kernel.isFunction,"on-key*","function",2);return y(function(z){return z.updateAll({onKey:v,
onKeyEffect:B})},"on-key")};plt.world.config.Kernel.onLocationChange=function(v){plt.Kernel.check(v,plt.Kernel.isFunction,"on-location-change","function",1);return plt.world.config.Kernel.onLocationChange_star_(v,function(){return J()})};plt.world.config.Kernel.onLocationChange_star_=function(v,B){plt.Kernel.check(v,plt.Kernel.isFunction,"on-location-change*","function",1);plt.Kernel.check(B,plt.Kernel.isFunction,"on-location-change*","function",2);return y(function(z){return z.updateAll({onLocationChange:v,
onLocationChangeEffect:B})},"on-location-change")};plt.world.config.Kernel.stopWhen=function(v){plt.Kernel.check(v,plt.Kernel.isFunction,"stop-when","function",1);return plt.world.config.Kernel.stopWhen_star_(v,function(){return J()})};plt.world.config.Kernel.stopWhen_star_=function(v,B){plt.Kernel.check(v,plt.Kernel.isFunction,"stop-when*","function",1);plt.Kernel.check(B,plt.Kernel.isFunction,"stop-when*","function",2);return y(function(z){return z.updateAll({stopWhen:v,stopWhenEffect:B})},"stop-when")}})();
if(typeof plt=="undefined")plt={};plt.platform={};
(function(){plt.platform.Platform={};var c=false;plt.platform.Platform.getInstance=function(){c||(c=new l);return c};function l(){this.tiltService=I;this.shakeService=Z();this.locationService=J();this.telephonyService=M();this.networkService=h();this.soundService=p();this.powerService=X();this.smsService=R();this.pickPlaylistService=ja()}l.prototype.getTiltService=function(){return this.tiltService};l.prototype.getShakeService=function(){return this.shakeService};l.prototype.getLocationService=function(){return this.locationService};
l.prototype.getTelephonyService=function(){return this.telephonyService};l.prototype.getNetworkService=function(){return this.networkService};l.prototype.getSoundService=function(){return this.soundService};l.prototype.getPowerService=function(){return this.powerService};l.prototype.getSmsService=function(){return this.smsService};l.prototype.getPickPlaylistService=function(){return this.pickPlaylistService};function J(){return y()?new x:v()?new C:B()?new e:new K}function y(){return typeof Device!=
"undefined"}function v(){return window.google&&window.google.gears&&true}function B(){return typeof navigator!="undefined"&&typeof navigator.geolocation!="undefined"}function z(u,Q,U,W){function ha(na){return na*Math.PI/180}function pa(na,ta){return Math.pow(Math.sin((ha(na)-ha(ta))/2),2)}return 12756000*Math.asin(Math.min(1,Math.sqrt(pa(u,U)+Math.cos(ha(u))*Math.cos(ha(U))*pa(Q,W))))}function C(){this.geo=google.gears.factory.create("beta.geolocation");this.listeners=[];this.currentPosition={latitude:0,
longitude:0,altitude:0,bearing:0,speed:0};this.watchId=false}C.prototype.startService=function(){var u=this;function Q(U){u.currentPosition.latitude=U.latitude;u.currentPosition.longitude=U.longitude;u.currentPosition.altitude=U.altitude;for(var W=0;W<u.listeners.length;W++)u.listeners[W](U.latitude,U.longitude)}this.watchId=this.geo.watchPosition(Q)};C.prototype.shutdownService=function(){this.geo.clearWatch(this.watchId)};C.prototype.addLocationChangeListener=function(u){this.listeners.push(u)};
C.prototype.getLatitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.latitude)};C.prototype.getLongitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.longitude)};C.prototype.getAltitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.altitude)};C.prototype.getBearing=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.bearing)};C.prototype.getSpeed=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.speed)};
C.prototype.getDistanceBetween=function(u,Q,U,W){return plt.types.FloatPoint.makeInstance(z(u.toFloat(),Q.toFloat(),U.toFloat(),W.toFloat()))};function K(){}K.prototype.startService=function(){};K.prototype.shutdownService=function(){};K.prototype.addLocationChangeListener=function(){};K.prototype.getLatitude=function(){return plt.types.Rational.ZERO};K.prototype.getLongitude=function(){return plt.types.Rational.ZERO};K.prototype.getAltitude=function(){return plt.types.Rational.ZERO};K.prototype.getBearing=
function(){return plt.types.Rational.ZERO};K.prototype.getSpeed=function(){return plt.types.Rational.ZERO};K.prototype.getDistanceBetween=function(u,Q,U,W){return plt.types.FloatPoint.makeInstance(z(u.toFloat(),Q.toFloat(),U.toFloat(),W.toFloat()))};function x(){this.locationListeners=[];this.currentPosition={latitude:0,longitude:0,atttitude:0,bearing:0,speed:0};this.watchId=false}x.prototype.startService=function(){var u=this;function Q(U){u.currentPosition.latitude=parseFloat(U.latitude);u.currentPosition.longitude=
parseFloat(U.longitude);for(U=0;U<u.locationListeners.length;U++){var W=u.locationListeners[U];W(u.currentPosition.latitude,u.currentPosition.longitude)}}this.watchId=navigator.geolocation.watchPosition(Q,function(){},{})};x.prototype.shutdownService=function(){navigator.geolocation.clearWatch(this.watchId)};x.prototype.addLocationChangeListener=function(u){this.locationListeners.push(u)};x.prototype.getLatitude=function(){return plt.types.FloatPoint.makeInstance(navigator.geolocation.lastPosition.latitude)};
x.prototype.getLongitude=function(){return plt.types.FloatPoint.makeInstance(navigator.geolocation.lastPosition.longitude)};x.prototype.getAltitude=function(){return plt.types.Rational.ZERO};x.prototype.getBearing=function(){return plt.types.Rational.ZERO};x.prototype.getSpeed=function(){return plt.types.Rational.ZERO};x.prototype.getDistanceBetween=function(u,Q,U,W){return plt.types.FloatPoint.makeInstance(navigator.geolocation.getDistanceBetween(u.toFloat(),Q.toFloat(),U.toFloat(),W.toFloat()))};
function e(){this.locationListeners=[];this.currentPosition={latitude:0,longitude:0,atttitude:0,bearing:0,speed:0};this.watchId=false}e.prototype.startService=function(){var u=this;function Q(U){u.currentPosition.latitude=U.coords.latitude;u.currentPosition.longitude=U.coords.longitude;for(var W=0;W<u.locationListeners.length;W++){var ha=u.locationListeners[W];ha(U.coords.latitude,U.coords.longitude)}}typeof navigator.geolocation!="undefined"&&typeof navigator.geolocation.getCurrentPosition!="undefined"&&
navigator.geolocation.watchPosition(Q);setTimeout(function(){navigator.geolocation.getCurrentPosition(Q)},10000)};e.prototype.shutdownService=function(){if(this.watchId){navigator.geolocation.clearWatch(this.watchId);this.watchId=false}};e.prototype.addLocationChangeListener=function(u){this.locationListeners.push(u)};e.prototype.getLatitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.latitude)};e.prototype.getLongitude=function(){return plt.types.FloatPOint.makeInstance(this.currentPosition.longitude)};
e.prototype.getAltitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.altitude)};e.prototype.getBearing=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.bearing)};e.prototype.getSpeed=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.speed)};e.prototype.getDistanceBetween=function(u,Q,U,W){return plt.types.FloatPoint.makeInstance(z(u.toFloat(),Q.toFloat(),U.toFloat(),W.toFloat()))};var g=[],A=[],F,t;function s(u){for(var Q=
0;Q<g.length;Q++)g[Q](parseFloat(u.x),parseFloat(u.y),parseFloat(u.z))}function E(u){for(var Q=0;Q<A.length;Q++)A[Q](parseFloat(u.azimuth),parseFloat(u.pitch),parseFloat(u.roll))}var I={startService:function(){if(typeof Accelerometer!="undefined"){F=navigator.accelerometer.watchAcceleration(s,function(){});t=navigator.accelerometer.watchOrientation(E,function(){})}},shutdownService:function(){if(typeof Accelerometer!="undefined"){navigator.accelerometer.clearWatch(F);navigator.accelerometer.clearWatch(t);
navigator.accelerometer.stopAllShakeWatches()}},addOrientationChangeListener:function(u){A.push(u)},addAccelerationChangeListener:function(u){g.push(u)}};function M(){return y()?new T:new O}function O(){}O.prototype.getSignalStrengths=function(){return plt.types.Empty.EMPTY};function T(){}T.prototype.getSignalStrengths=function(){for(var u=plt.types.Empty.EMPTY,Q=Device.getSignalStrengths(),U=0;U<Q.length;U++){var W=Q.get(U);u=plt.types.Cons.makeInstance(plt.Kernel.list([toNum(W.getId()),toNum(W.getStrength())]),
u)}return u};function Z(){return y()?new S:new j}function S(){this.listeners=[]}S.prototype.startService=function(){var u=this;function Q(){for(var W=0;W<u.listeners.length;W++)u.listeners[W]()}function U(){}this.shakeId=navigator.accelerometer.watchShake(Q,U)};S.prototype.shutdownService=function(){navigator.accelerometer.stopAllShakeWatches()};S.prototype.addListener=function(u){this.listeners.push(u)};function j(){}j.prototype.startService=function(){};j.prototype.shutdownService=function(){};
j.prototype.addListener=function(){};function h(){return y()?new f:new n}function f(){}f.prototype.getUrl=function(u){u=Device.getUrl(u);return plt.types.String.makeInstance(""+u)};function n(){}n.prototype.getUrl=function(u){var Q=new XMLHttpRequest;u="/networkProxy?url="+encodeURIComponent(u);Q.open("GET",u,false);Q.send(null);return plt.types.String.makeInstance(Q.responseText)};function p(){return y()?new L:G()?new N:new H}function G(){return!!document.createElement("audio").canPlayType}function L(){}
L.prototype.beep=function(){navigator.notification.beep(1)};L.prototype.playPlaylist=function(u){Device.playPlaylistRecord(u)};L.prototype.pausePlaylist=function(u){Device.pausePlaylistRecord(u)};L.prototype.stopPlaylist=function(u){Device.stopPlaylistRecord(u)};L.prototype.playSoundUrl=function(u){navigator.audio.playMusic(u)};L.prototype.playDtmfTone=function(u,Q){navigator.audio.playDTMF(u);setTimeout(function(){navigator.audio.stopDTMF()},Q)};L.prototype.stopSoundUrl=function(u){navigator.audio.stopMusic(u)};
L.prototype.pauseSoundUrl=function(u){navigator.audio.pauseMusic(u)};L.prototype.setVolume=function(u){navigator.audio.setMusicVolume(u)};L.prototype.raiseVolume=function(){navigator.audio.increaseMusicVolume()};L.prototype.lowerVolume=function(){navigator.audio.decreaseMusicVolume()};function N(){this.cachedUrls={};this.baseVolume=100}N.prototype.beep=function(){alert("Beep")};N.prototype.playPlaylistSound=function(){};N.prototype.pausePlaylistSound=function(){};N.prototype.stopPlaylistSound=function(){};
N.prototype.playSoundUrl=function(u){this.cachedUrls[u]||(this.cachedUrls[u]=new Audio(u));var Q=this.cachedUrls[u];if(Q.ended||Q.paused)this.cachedUrls[u].play()};N.prototype.playDtmfTone=function(){alert("dtmf tone")};N.prototype.stopSoundUrl=function(u){if(this.cachedUrls[u]){this.cachedUrls[u].pause();this.cachedUrls[u].currentTime=0}};N.prototype.pauseSoundUrl=function(u){this.cachedUrls[u]&&this.cachedUrls[u].pause()};N.prototype.setVolume=function(u){for(var Q in this.cachedUrls)this.cachedUrls[Q].volume=
u/100;this.baseVolume=u};N.prototype.raiseVolume=function(){this.setVolume(Math.min(this.baseVolume+5,100))};N.prototype.lowerVolume=function(){this.setVolume(Math.max(this.baseVolume-5,0))};function H(){}H.prototype.beep=function(){alert("Beep")};H.prototype.playPlaylistSound=function(){};H.prototype.pausePlaylistSound=function(){};H.prototype.stopPlaylistSound=function(){};H.prototype.playSoundUrl=function(u){alert("sound url "+u)};H.prototype.playDtmfTone=function(){alert("dtmf tone")};H.prototype.stopSoundUrl=
function(){};H.prototype.pauseSoundUrl=function(){};H.prototype.setVolume=function(){};H.prototype.raiseVolume=function(){};H.prototype.lowerVolume=function(){};function X(){return y()?new aa:new m}function aa(){this.currentLockFlags=-1}aa.prototype.setWakeLock=function(u){if(u!=this.currentLockFlags){navigator.power.setWakeLock(u);this.currentLockFlags=u}};aa.prototype.releaseWakeLock=function(){if(this.currentLockFlags!=-1){navigator.power.releaseWakeLock();this.currentLockFlags=-1}};function m(){}
m.prototype.setWakeLock=function(){};m.prototype.releaseWakeLock=function(){};function R(){return y()?new la:new oa}function la(){}la.prototype.send=function(u,Q){navigator.sms.send(u,Q)};function oa(){}oa.prototype.send=function(u,Q){alert("SMS should be sent to "+u+" with the content: "+Q)};function ja(){return y()?new da:new ba}function da(){}da.prototype.pickPlaylist=function(u){function Q(U){u(U)}navigator.dialogPickers.pickPlaylist(Q)};function ba(){}ba.prototype.pickPlaylist=function(){alert("pick playlist currently unavailable")}})();
if(typeof plt=="undefined")plt={};plt.lib={};
(function(){plt.lib.Telephony={};plt.lib.Telephony.getSignalStrengths=function(){return plt.platform.Platform.getInstance().getTelephonyService().getSignalStrengths()};plt.lib.Location={};plt.lib.Location.getLatitude=function(){return plt.platform.Platform.getInstance().getLocationService().getLatitude()};plt.lib.Location.getLongitude=function(){return plt.platform.Platform.getInstance().getLocationService().getLongitude()};plt.lib.Location.getAttitude=function(){return plt.platform.Platform.getInstance().getLocationService().getAttitude()};
plt.lib.Location.getBearing=function(){return plt.platform.Platform.getInstance().getLocationService().getBearing()};plt.lib.Location.getSpeed=function(){return plt.platform.Platform.getInstance().getLocationService().getSpeed()};plt.lib.Location.getDistanceBetween=function(c,l,J,y){return plt.platform.Platform.getInstance().getLocationService().getDistanceBetween(c,l,J,y)};plt.lib.Net={};plt.lib.Net.getUrl=function(c){return plt.platform.Platform.getInstance().getNetworkService().getUrl(c)}})();
function effect_colon_none(){plt.Kernel.Struct.call(this,"make-effect:none",[])}effect_colon_none.prototype=new plt.Kernel.Struct;function make_dash_effect_colon_none(){return new effect_colon_none}function effect_colon_none_question_(c){return c!=null&&c!=undefined&&c instanceof effect_colon_none}function effect_colon_beep(){plt.Kernel.Struct.call(this,"make-effect:beep",[])}effect_colon_beep.prototype=new plt.Kernel.Struct;function make_dash_effect_colon_beep(){return new effect_colon_beep}
function effect_colon_beep_question_(c){return c!=null&&c!=undefined&&c instanceof effect_colon_beep}function effect_colon_play_dash_dtmf_dash_tone(c,l){plt.Kernel.Struct.call(this,"make-effect:play-dtmf-tone",[c,l]);this.tone=c;this.duration=l}effect_colon_play_dash_dtmf_dash_tone.prototype=new plt.Kernel.Struct;function make_dash_effect_colon_play_dash_dtmf_dash_tone(c,l){return new effect_colon_play_dash_dtmf_dash_tone(c,l)}
function effect_colon_play_dash_dtmf_dash_tone_dash_tone(c){if(effect_colon_play_dash_dtmf_dash_tone_question_(c))return c.tone;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:play-dtmf-tone-tone: not a effect:play-dtmf-tone: ~s",[c]));}
function effect_colon_play_dash_dtmf_dash_tone_dash_duration(c){if(effect_colon_play_dash_dtmf_dash_tone_question_(c))return c.duration;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:play-dtmf-tone-duration: not a effect:play-dtmf-tone: ~s",[c]));}
function set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_tone_bang_(c,l){if(effect_colon_play_dash_dtmf_dash_tone_question_(c)){c.tone=l;c._fields[0]=l}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_tone_bang_: not a effect:play-dtmf-tone: ~s",[c]));}
function set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_duration_bang_(c,l){if(effect_colon_play_dash_dtmf_dash_tone_question_(c)){c.duration=l;c._fields[1]=l}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_duration_bang_: not a effect:play-dtmf-tone: ~s",[c]));}function effect_colon_play_dash_dtmf_dash_tone_question_(c){return c!=null&&c!=undefined&&c instanceof effect_colon_play_dash_dtmf_dash_tone}
function effect_colon_send_dash_sms(c,l){plt.Kernel.Struct.call(this,"make-effect:send-sms",[c,l]);this.address=c;this.msg=l}effect_colon_send_dash_sms.prototype=new plt.Kernel.Struct;function make_dash_effect_colon_send_dash_sms(c,l){return new effect_colon_send_dash_sms(c,l)}
function effect_colon_send_dash_sms_dash_address(c){if(effect_colon_send_dash_sms_question_(c))return c.address;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:send-sms-address: not a effect:send-sms: ~s",[c]));}function effect_colon_send_dash_sms_dash_msg(c){if(effect_colon_send_dash_sms_question_(c))return c.msg;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:send-sms-msg: not a effect:send-sms: ~s",[c]));}
function set_dash_effect_colon_send_dash_sms_dash_address_bang_(c,l){if(effect_colon_send_dash_sms_question_(c)){c.address=l;c._fields[0]=l}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_send_dash_sms_dash_address_bang_: not a effect:send-sms: ~s",[c]));}
function set_dash_effect_colon_send_dash_sms_dash_msg_bang_(c,l){if(effect_colon_send_dash_sms_question_(c)){c.msg=l;c._fields[1]=l}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_send_dash_sms_dash_msg_bang_: not a effect:send-sms: ~s",[c]));}function effect_colon_send_dash_sms_question_(c){return c!=null&&c!=undefined&&c instanceof effect_colon_send_dash_sms}
function playlist_dash_sound(c){plt.Kernel.Struct.call(this,"make-playlist-sound",[c]);this.playlist=c}playlist_dash_sound.prototype=new plt.Kernel.Struct;function make_dash_playlist_dash_sound(c){return new playlist_dash_sound(c)}function playlist_dash_sound_dash_playlist(c){if(playlist_dash_sound_question_(c))return c.playlist;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("playlist-sound-playlist: not a playlist-sound: ~s",[c]));}
function set_dash_playlist_dash_sound_dash_playlist_bang_(c,l){if(playlist_dash_sound_question_(c)){c.playlist=l;c._fields[0]=l}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_playlist_dash_sound_dash_playlist_bang_: not a playlist-sound: ~s",[c]));}function playlist_dash_sound_question_(c){return c!=null&&c!=undefined&&c instanceof playlist_dash_sound}
function sound_question_(c){return plt.Kernel.setLastLoc('offset=417 line=19 span=11 id="effect-struct.ss"')&&plt.Kernel.string_question_(c)||plt.Kernel.setLastLoc('offset=435 line=20 span=19 id="effect-struct.ss"')&&playlist_dash_sound_question_(c)}function effect_colon_play_dash_sound(c){plt.Kernel.Struct.call(this,"make-effect:play-sound",[c]);this.sound=c}effect_colon_play_dash_sound.prototype=new plt.Kernel.Struct;
function make_dash_effect_colon_play_dash_sound(c){return new effect_colon_play_dash_sound(c)}function effect_colon_play_dash_sound_dash_sound(c){if(effect_colon_play_dash_sound_question_(c))return c.sound;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:play-sound-sound: not a effect:play-sound: ~s",[c]));}
function set_dash_effect_colon_play_dash_sound_dash_sound_bang_(c,l){if(effect_colon_play_dash_sound_question_(c)){c.sound=l;c._fields[0]=l}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_play_dash_sound_dash_sound_bang_: not a effect:play-sound: ~s",[c]));}function effect_colon_play_dash_sound_question_(c){return c!=null&&c!=undefined&&c instanceof effect_colon_play_dash_sound}
function effect_colon_pause_dash_sound(c){plt.Kernel.Struct.call(this,"make-effect:pause-sound",[c]);this.sound=c}effect_colon_pause_dash_sound.prototype=new plt.Kernel.Struct;function make_dash_effect_colon_pause_dash_sound(c){return new effect_colon_pause_dash_sound(c)}
function effect_colon_pause_dash_sound_dash_sound(c){if(effect_colon_pause_dash_sound_question_(c))return c.sound;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pause-sound-sound: not a effect:pause-sound: ~s",[c]));}
function set_dash_effect_colon_pause_dash_sound_dash_sound_bang_(c,l){if(effect_colon_pause_dash_sound_question_(c)){c.sound=l;c._fields[0]=l}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pause_dash_sound_dash_sound_bang_: not a effect:pause-sound: ~s",[c]));}function effect_colon_pause_dash_sound_question_(c){return c!=null&&c!=undefined&&c instanceof effect_colon_pause_dash_sound}
function effect_colon_stop_dash_sound(c){plt.Kernel.Struct.call(this,"make-effect:stop-sound",[c]);this.sound=c}effect_colon_stop_dash_sound.prototype=new plt.Kernel.Struct;function make_dash_effect_colon_stop_dash_sound(c){return new effect_colon_stop_dash_sound(c)}
function effect_colon_stop_dash_sound_dash_sound(c){if(effect_colon_stop_dash_sound_question_(c))return c.sound;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:stop-sound-sound: not a effect:stop-sound: ~s",[c]));}
function set_dash_effect_colon_stop_dash_sound_dash_sound_bang_(c,l){if(effect_colon_stop_dash_sound_question_(c)){c.sound=l;c._fields[0]=l}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_stop_dash_sound_dash_sound_bang_: not a effect:stop-sound: ~s",[c]));}function effect_colon_stop_dash_sound_question_(c){return c!=null&&c!=undefined&&c instanceof effect_colon_stop_dash_sound}
function effect_colon_set_dash_sound_dash_volume(c){plt.Kernel.Struct.call(this,"make-effect:set-sound-volume",[c]);this.volume=c}effect_colon_set_dash_sound_dash_volume.prototype=new plt.Kernel.Struct;function make_dash_effect_colon_set_dash_sound_dash_volume(c){return new effect_colon_set_dash_sound_dash_volume(c)}
function effect_colon_set_dash_sound_dash_volume_dash_volume(c){if(effect_colon_set_dash_sound_dash_volume_question_(c))return c.volume;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:set-sound-volume-volume: not a effect:set-sound-volume: ~s",[c]));}
function set_dash_effect_colon_set_dash_sound_dash_volume_dash_volume_bang_(c,l){if(effect_colon_set_dash_sound_dash_volume_question_(c)){c.volume=l;c._fields[0]=l}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_set_dash_sound_dash_volume_dash_volume_bang_: not a effect:set-sound-volume: ~s",[c]));}function effect_colon_set_dash_sound_dash_volume_question_(c){return c!=null&&c!=undefined&&c instanceof effect_colon_set_dash_sound_dash_volume}
function effect_colon_raise_dash_sound_dash_volume(){plt.Kernel.Struct.call(this,"make-effect:raise-sound-volume",[])}effect_colon_raise_dash_sound_dash_volume.prototype=new plt.Kernel.Struct;function make_dash_effect_colon_raise_dash_sound_dash_volume(){return new effect_colon_raise_dash_sound_dash_volume}function effect_colon_raise_dash_sound_dash_volume_question_(c){return c!=null&&c!=undefined&&c instanceof effect_colon_raise_dash_sound_dash_volume}
function effect_colon_lower_dash_sound_dash_volume(){plt.Kernel.Struct.call(this,"make-effect:lower-sound-volume",[])}effect_colon_lower_dash_sound_dash_volume.prototype=new plt.Kernel.Struct;function make_dash_effect_colon_lower_dash_sound_dash_volume(){return new effect_colon_lower_dash_sound_dash_volume}function effect_colon_lower_dash_sound_dash_volume_question_(c){return c!=null&&c!=undefined&&c instanceof effect_colon_lower_dash_sound_dash_volume}
function effect_colon_set_dash_wake_dash_lock(c){plt.Kernel.Struct.call(this,"make-effect:set-wake-lock",[c]);this.locks=c}effect_colon_set_dash_wake_dash_lock.prototype=new plt.Kernel.Struct;function make_dash_effect_colon_set_dash_wake_dash_lock(c){return new effect_colon_set_dash_wake_dash_lock(c)}
function effect_colon_set_dash_wake_dash_lock_dash_locks(c){if(effect_colon_set_dash_wake_dash_lock_question_(c))return c.locks;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:set-wake-lock-locks: not a effect:set-wake-lock: ~s",[c]));}
function set_dash_effect_colon_set_dash_wake_dash_lock_dash_locks_bang_(c,l){if(effect_colon_set_dash_wake_dash_lock_question_(c)){c.locks=l;c._fields[0]=l}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_set_dash_wake_dash_lock_dash_locks_bang_: not a effect:set-wake-lock: ~s",[c]));}function effect_colon_set_dash_wake_dash_lock_question_(c){return c!=null&&c!=undefined&&c instanceof effect_colon_set_dash_wake_dash_lock}
function effect_colon_release_dash_wake_dash_lock(){plt.Kernel.Struct.call(this,"make-effect:release-wake-lock",[])}effect_colon_release_dash_wake_dash_lock.prototype=new plt.Kernel.Struct;function make_dash_effect_colon_release_dash_wake_dash_lock(){return new effect_colon_release_dash_wake_dash_lock}function effect_colon_release_dash_wake_dash_lock_question_(c){return c!=null&&c!=undefined&&c instanceof effect_colon_release_dash_wake_dash_lock}
function effect_colon_pick_dash_playlist(c){plt.Kernel.Struct.call(this,"make-effect:pick-playlist",[c]);this.update_dash_f=c}effect_colon_pick_dash_playlist.prototype=new plt.Kernel.Struct;function make_dash_effect_colon_pick_dash_playlist(c){return new effect_colon_pick_dash_playlist(c)}
function effect_colon_pick_dash_playlist_dash_update_dash_f(c){if(effect_colon_pick_dash_playlist_question_(c))return c.update_dash_f;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pick-playlist-update-f: not a effect:pick-playlist: ~s",[c]));}
function set_dash_effect_colon_pick_dash_playlist_dash_update_dash_f_bang_(c,l){if(effect_colon_pick_dash_playlist_question_(c)){c.update_dash_f=l;c._fields[0]=l}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pick_dash_playlist_dash_update_dash_f_bang_: not a effect:pick-playlist: ~s",[c]));}function effect_colon_pick_dash_playlist_question_(c){return c!=null&&c!=undefined&&c instanceof effect_colon_pick_dash_playlist}
function effect_colon_pick_dash_random(c,l){plt.Kernel.Struct.call(this,"make-effect:pick-random",[c,l]);this.n=c;this.update_dash_f=l}effect_colon_pick_dash_random.prototype=new plt.Kernel.Struct;function make_dash_effect_colon_pick_dash_random(c,l){return new effect_colon_pick_dash_random(c,l)}
function effect_colon_pick_dash_random_dash_n(c){if(effect_colon_pick_dash_random_question_(c))return c.n;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pick-random-n: not a effect:pick-random: ~s",[c]));}function effect_colon_pick_dash_random_dash_update_dash_f(c){if(effect_colon_pick_dash_random_question_(c))return c.update_dash_f;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pick-random-update-f: not a effect:pick-random: ~s",[c]));}
function set_dash_effect_colon_pick_dash_random_dash_n_bang_(c,l){if(effect_colon_pick_dash_random_question_(c)){c.n=l;c._fields[0]=l}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pick_dash_random_dash_n_bang_: not a effect:pick-random: ~s",[c]));}
function set_dash_effect_colon_pick_dash_random_dash_update_dash_f_bang_(c,l){if(effect_colon_pick_dash_random_question_(c)){c.update_dash_f=l;c._fields[1]=l}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pick_dash_random_dash_update_dash_f_bang_: not a effect:pick-random: ~s",[c]));}function effect_colon_pick_dash_random_question_(c){return c!=null&&c!=undefined&&c instanceof effect_colon_pick_dash_random}
function effect_question_(c){return plt.Kernel.setLastLoc('offset=1069 line=43 span=20 id="effect-struct.ss"')&&effect_colon_none_question_(c)||plt.Kernel.setLastLoc('offset=1096 line=44 span=20 id="effect-struct.ss"')&&effect_colon_beep_question_(c)||plt.Kernel.setLastLoc('offset=1123 line=45 span=30 id="effect-struct.ss"')&&effect_colon_play_dash_dtmf_dash_tone_question_(c)||plt.Kernel.setLastLoc('offset=1160 line=46 span=24 id="effect-struct.ss"')&&effect_colon_send_dash_sms_question_(c)||plt.Kernel.setLastLoc('offset=1191 line=47 span=26 id="effect-struct.ss"')&&
effect_colon_play_dash_sound_question_(c)||plt.Kernel.setLastLoc('offset=1224 line=48 span=27 id="effect-struct.ss"')&&effect_colon_pause_dash_sound_question_(c)||plt.Kernel.setLastLoc('offset=1258 line=49 span=26 id="effect-struct.ss"')&&effect_colon_stop_dash_sound_question_(c)||plt.Kernel.setLastLoc('offset=1291 line=50 span=32 id="effect-struct.ss"')&&effect_colon_set_dash_sound_dash_volume_question_(c)||plt.Kernel.setLastLoc('offset=1330 line=51 span=34 id="effect-struct.ss"')&&effect_colon_raise_dash_sound_dash_volume_question_(c)||
plt.Kernel.setLastLoc('offset=1371 line=52 span=34 id="effect-struct.ss"')&&effect_colon_lower_dash_sound_dash_volume_question_(c)||plt.Kernel.setLastLoc('offset=1412 line=53 span=29 id="effect-struct.ss"')&&effect_colon_set_dash_wake_dash_lock_question_(c)||plt.Kernel.setLastLoc('offset=1448 line=54 span=33 id="effect-struct.ss"')&&effect_colon_release_dash_wake_dash_lock_question_(c)||plt.Kernel.setLastLoc('offset=1488 line=55 span=29 id="effect-struct.ss"')&&effect_colon_pick_dash_playlist_question_(c)||
plt.Kernel.setLastLoc('offset=1524 line=56 span=27 id="effect-struct.ss"')&&effect_colon_pick_dash_random_question_(c)}(function(c){(function(){})(c||plt.Kernel.identity)})();if(typeof plt=="undefined")plt={};plt.world=plt.world||{};plt.world.Kernel=plt.world.Kernel||{};
(function(){var c,l=[],J,y=false;function v(f){function n(){}n.prototype=f;return new n}var B=[];plt.world.Kernel.addAnnounceListener=function(f){B.push(f)};plt.world.Kernel.removeAnnounceListener=function(f){f=B.indexOf(f);f!=-1&&B.splice(f,1)};plt.world.Kernel.announce=function(f,n){for(var p=0;p<B.length;p++)try{B[p](f,n)}catch(G){}};function z(f){c=f;C()}plt.world.Kernel.updateWorld=function(f){f=f(c);z(f)};plt.world.Kernel.shutdownWorld=function(){J=true};function C(){var f;for(f=0;f<l.length;f++)l[f](c)}
function K(f){l.push(f)}function x(){if(y){clearInterval(y);y=false}J=false;l=[]}function e(){if(window.document.getElementById("canvas")!=undefined)return window;var f=window.open("big-bang.html","big-bang");if(f==null)throw new Error("Error: Not allowed to create a new window.");return f}plt.world.Kernel.bigBang=function(f,n,p,G){plt.Kernel.check(f,plt.Kernel.isNumber,"big-bang","number",1);plt.Kernel.check(n,plt.Kernel.isNumber,"big-bang","number",2);plt.Kernel.arrayEach(args,function(X,aa){plt.Kernel.check(X,
plt.Kernel.isFunction,"big-bang","handler",aa+4)});var L=e(f,n),N=L.document.getElementById("canvas");N.width=f.toInteger();N.height=n.toInteger();x();var H=new plt.world.config.WorldConfig;for(f=0;f<G.length;f++)H=G[f](H);H=H.updateAll({changeWorld:plt.world.Kernel.updateWorld,shutdownWorld:plt.world.Kernel.shutdownWorld});plt.world.config.CONFIG=H;if(H.lookup("onKey"))L.onkeydown=function(X){plt.world.stimuli.onKey(X)};H.lookup("onRedraw")&&K(function(X){var aa=N.getContext("2d");X=H.lookup("onRedraw")([X]);
X.render(aa,0,0)});K(function(X){if(H.lookup("stopWhen"))if(H.lookup("stopWhen")([X]))J=true});H.lookup("onTick")&&g(L,H);z(p);if(H.lookup("initialEffect")){p=plt.world.Kernel.applyEffect(H.lookup("initialEffect"));for(f=0;f<p.length;f++)J||updateWorld(p)}};function g(f,n){y=f.setInterval(function(){if(J){f.clearTimeout(y);y=false}else plt.world.stimuli.onTick()},n.lookup("tickDelay"))}plt.world.Kernel.isKeyEqual=function(f,n){return f=f.toString().toLowerCase()==n.toString().toLowerCase()};plt.world.Kernel.imageWidth=
function(f){plt.Kernel.check(f,t,"image-width","image",1);return plt.types.Rational.makeInstance(f.getWidth(),1)};plt.world.Kernel.imageHeight=function(f){plt.Kernel.check(f,t,"image-height","image",1);return plt.types.Rational.makeInstance(f.getHeight(),1)};plt.world.Kernel.placeImage=function(f,n,p,G){plt.Kernel.check(f,t,"place-image","image",1);plt.Kernel.check(n,plt.Kernel.isNumber,"place-image","number",2);plt.Kernel.check(p,plt.Kernel.isNumber,"place-image","number",3);plt.Kernel.check(G,s,
"place-image","scene",4);return G.add(f,plt.types.NumberTower.toInteger(n),plt.types.NumberTower.toInteger(p))};plt.world.Kernel.emptyScene=function(f,n){plt.Kernel.check(f,plt.Kernel.isNumber,"empty-scene","number",1);plt.Kernel.check(n,plt.Kernel.isNumber,"empty-scene","number",2);return new E(plt.types.NumberTower.toInteger(f),plt.types.NumberTower.toInteger(n),[])};function A(f){return typeof h.get(f)!="undefined"}plt.world.Kernel.text=function(f,n,p){plt.Kernel.check(f,plt.Kernel.isString,"text",
"string",1);plt.Kernel.check(n,plt.Kernel.isNumber,"text","number",2);plt.Kernel.check(p,A,"text","color",3);if(h.get(p))p=h.get(p);return new T(f,plt.types.NumberTower.toInteger(n),p)};plt.world.Kernel.circle=function(f,n,p){plt.Kernel.check(f,plt.Kernel.isNumber,"circle","number",1);plt.Kernel.check(n,plt.Kernel.isString,"circle","string",2);plt.Kernel.check(p,A,"circle","color",3);if(h.get(p))p=h.get(p);return new Z(plt.types.NumberTower.toInteger(f),n,p)};plt.world.Kernel.openImageUrl=function(f){plt.Kernel.check(f,
plt.Kernel.isString,"open-image-url","string",1);return I.makeInstance(f.toString())};plt.world.Kernel.nwRectangle=function(f,n,p,G){plt.Kernel.check(f,plt.Kernel.isNumber,"nw:rectangle","number",1);plt.Kernel.check(n,plt.Kernel.isNumber,"nw:rectangle","number",2);plt.Kernel.check(p,plt.Kernel.isString,"nw:rectangle","string",3);plt.Kernel.check(G,A,"nw:rectangle","color",4);if(h.get(G))G=h.get(G);f=new O(plt.types.NumberTower.toInteger(f),plt.types.NumberTower.toInteger(n),p,G);return f.updatePinhole(0,
0)};plt.world.Kernel.rectangle=function(f,n,p,G){plt.Kernel.check(f,plt.Kernel.isNumber,"rectangle","number",1);plt.Kernel.check(n,plt.Kernel.isNumber,"rectangle","number",2);plt.Kernel.check(p,plt.Kernel.isString,"rectangle","string",3);plt.Kernel.check(G,A,"rectangle","color",4);if(h.get(G))G=h.get(G);return new O(plt.types.NumberTower.toInteger(f),plt.types.NumberTower.toInteger(n),p,G)};function F(f,n){this.pinholeX=f;this.pinholeY=n}plt.world.Kernel.BaseImage=F;function t(f){return f!=null&&
f!=undefined&&f instanceof F}plt.world.Kernel.isImage=t;plt.world.Kernel.put_dash_pinhole=function(f,n,p){plt.Kernel.check(f,t,"put-pinhole","image",1);plt.Kernel.check(n,plt.Kernel.isNumber,"put-pinhole","number",2);plt.Kernel.check(p,plt.Kernel.isNumber,"put-pinhole","number",3);return f.updatePinhole(n.toInteger(),p.toInteger())};F.prototype.updatePinhole=function(f,n){var p={};for(attr in this)p[attr]=this[attr];p.__proto__=this.__proto__;p.pinholeX=f;p.pinholeY=n;return p};F.prototype.render=
function(){throw new MobyRuntimeError("Unimplemented method render");};plt.world.Kernel.makeCanvas=function(f,n){var p=document.createElement("canvas");p.width=f;p.height=n;p.style.width=p.width+"px";p.style.height=p.height+"px";if(window&&typeof window.G_vmlCanvasManager!="undefined"){p.style.display="none";document.body.appendChild(p);p=window.G_vmlCanvasManager.initElement(p);document.body.removeChild(p);p.style.display=""}return p};F.prototype.toDomNode=function(){var f=this,n=plt.world.Kernel.imageWidth(f).toInteger(),
p=plt.world.Kernel.imageHeight(f).toInteger();n=plt.world.Kernel.makeCanvas(n,p);n.style.display="none";document.body.appendChild(n);p=n.getContext("2d");f.render(p,0,0);document.body.removeChild(n);n.style.display="";return n};F.prototype.toWrittenString=function(){return"<image>"};F.prototype.toDisplayedString=function(){return"<image>"};plt.world.Kernel.image_question_=function(f){return t(f)};plt.world.Kernel.image_equal__question_=function(f,n){check(f,t,"image=?","image",1);check(n,t,"image=?",
"image",2);return f==n?plt.types.Logic.TRUE:plt.types.Logic.FALSE};function s(f){return f!=undefined&&f!=null&&f instanceof E}function E(f,n,p){F.call(this,0,0);this.width=f;this.height=n;this.children=p}E.prototype=v(F.prototype);E.prototype.add=function(f,n,p){return new E(this.width,this.height,this.children.concat([[f,n,p]]))};E.prototype.render=function(f,n,p){var G,L,N,H;f.clearRect(n-this.pinholeX,p-this.pinholeY,this.width,this.height);for(G=0;G<this.children.length;G++){L=this.children[G][0];
N=this.children[G][1];H=this.children[G][2];f.save();L.render(f,N+n-L.pinholeX,H+p-L.pinholeY);f.restore()}};E.prototype.getWidth=function(){return this.width};E.prototype.getHeight=function(){return this.height};function I(f,n){F.call(this,0,0);var p=this;this.isLoaded=false;if(n&&n.complete){this.img=n;this.isLoaded=true;this.pinholeX=p.img.width/2;this.pinholeY=p.img.height/2}else{this.img=new Image;this.img.onload=function(){p.isLoaded=true;p.pinholeX=p.img.width/2;p.pinholeY=p.img.height/2};
this.img.onerror=function(){p.img.onerror="";p.img.src="http://www.wescheme.org/images/broken.png"};this.img.src=f}}I.prototype=v(F.prototype);plt.world.Kernel.FileImage=I;var M={};I.makeInstance=function(f){f in M||(M[f]=new I(f));return M[f]};I.installInstance=function(f,n){M[f]=new I(f,n)};I.prototype.render=function(f,n,p){f.drawImage(this.img,n,p)};I.prototype.getWidth=function(){return this.img.width};I.prototype.getHeight=function(){return this.img.height};I.prototype.toDomNode=function(){return this.img.cloneNode(true)};
function O(f,n,p,G){F.call(this,f/2,n/2);this.width=f;this.height=n;this.style=p;this.color=G}O.prototype=v(F.prototype);O.prototype.render=function(f,n,p){f.fillStyle=this.color.toString();this.style.toString().toLowerCase()=="outline"?f.strokeRect(n,p,this.width,this.height):f.fillRect(n,p,this.width,this.height)};O.prototype.getWidth=function(){return this.width};O.prototype.getHeight=function(){return this.height};function T(f,n,p){F.call(this,0,0);this.msg=f;this.size=n;this.color=p;this.font=
"Optimer"}T.prototype=v(F.prototype);T.prototype.render=function(f,n,p){if(f.fillText){f.font=this.size+"px Optimer";f.fillStyle=this.color.toRGBAString();f.fillText(this.msg,n,p)}else if("mozDrawText"in f){f.mozTextStyle=this.size+"px "+this.font;f.translate(n,p+this.size);f.fillStyle=this.color;f.mozDrawText(this.msg)}};T.prototype.getWidth=function(){return this.size*this.msg.length};T.prototype.getHeight=function(){return 10};function Z(f,n,p){F.call(this,f,f);this.radius=f;this.style=n;this.color=
p}Z.prototype=v(F.prototype);Z.prototype.render=function(f,n,p){f.translate(0,0);f.beginPath();f.fillStyle=this.color.toString();f.arc(n+this.radius,p+this.radius,this.radius,0,2*Math.PI,false);this.style.toString().toLowerCase()=="outline"?f.stroke():f.fill();f.closePath()};Z.prototype.getWidth=function(){return this.radius*2};Z.prototype.getHeight=function(){return this.radius*2};plt.world.Kernel.applyEffect=function(f){var n=[];if(!plt.Kernel.empty_question_(f))if(plt.Kernel.pair_question_(f)){n=
n.concat(plt.world.Kernel.applyEffect(f.first()));n=n.concat(plt.world.Kernel.applyEffect(f.rest()))}else if(f=f.run())n=n.concat(f);return n};effect_colon_none.prototype.run=function(){};effect_colon_beep.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService().beep()};effect_colon_play_dash_dtmf_dash_tone.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService().playDtmfTone(this._fields[0].toInteger(),this._fields[1].toInteger())};effect_colon_send_dash_sms.prototype.run=
function(){plt.platform.Platform.getInstance().getSmsService().send(this._fields[0],this._fields[1])};effect_colon_play_dash_sound.prototype.run=function(){if(plt.Kernel.isString(this._fields[0]))plt.platform.Platform.getInstance().getSoundService().playSoundUrl(this._fields[0]);else playlist_dash_sound_question_(this._fields[0])&&plt.platform.Platform.getInstance().getSoundService().playPlaylist(this._fields[0]._fields[0])};effect_colon_pause_dash_sound.prototype.run=function(){if(plt.Kernel.isString(this._fields[0]))plt.platform.Platform.getInstance().getSoundService().pauseSoundUrl(this._fields[0]);
else playlist_dash_sound_question_(this._fields[0])&&plt.platform.Platform.getInstance().getSoundService().pausePlaylist(this._fields[0]._fields[0])};effect_colon_stop_dash_sound.prototype.run=function(){if(plt.Kernel.isString(this._fields[0]))plt.platform.Platform.getInstance().getSoundService().stopSoundUrl(this._fields[0]);else playlist_dash_sound_question_(this._fields[0])&&plt.platform.Platform.getInstance().getSoundService().stopPlaylist(this._fields[0]._fields[0])};effect_colon_set_dash_sound_dash_volume.prototype.run=
function(){plt.platform.Platform.getInstance().getSoundService().setVolume(this._fields[0].toInteger())};effect_colon_raise_dash_sound_dash_volume.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService.raiseVolume()};effect_colon_lower_dash_sound_dash_volume.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService.lowerVolume()};effect_colon_set_dash_wake_dash_lock.prototype.run=function(){plt.platform.Platform.getInstance().getPowerService().setWakeLock(this._fields[0].toInteger())};
effect_colon_release_dash_wake_dash_lock.prototype.run=function(){plt.platform.Platform.getInstance().getPowerService().releaseWakeLock()};effect_colon_pick_dash_playlist.prototype.run=function(){var f=this._fields[0];function n(p){var G=make_dash_playlist_dash_sound(p);setTimeout(function(){var L=plt.world.config.CONFIG.lookup("changeWorld");L(function(N){return f([N,G])})},0)}plt.platform.Platform.getInstance().getPickPlaylistService().pickPlaylist(n)};effect_colon_pick_dash_random.prototype.run=
function(){var f=plt.types.Rational.makeInstance(Math.floor(plt.types.NumberTower.toInteger(this._fields[0])*Math.random()),1),n=this._fields[1];return function(p){return n([p,f])}};function S(){this.colors={}}S.prototype.put=function(f,n){this.colors[f]=n};S.prototype.get=function(f){return this.colors[f.toString().toUpperCase()]};function j(f,n,p){this.r=f;this.g=n;this.b=p}j.prototype.toString=function(){return"rgb("+this.r+","+this.g+","+this.b+")"};j.prototype.toRGBAString=function(){return"rgba("+
this.r+","+this.g+","+this.b+", 1)"};var h=new S;h.put("ORANGE",new j(255,165,0));h.put("RED",new j(255,0,0));h.put("ORANGERED",new j(255,69,0));h.put("TOMATO",new j(255,99,71));h.put("DARKRED",new j(139,0,0));h.put("RED",new j(255,0,0));h.put("FIREBRICK",new j(178,34,34));h.put("CRIMSON",new j(220,20,60));h.put("DEEPPINK",new j(255,20,147));h.put("MAROON",new j(176,48,96));h.put("INDIAN RED",new j(205,92,92));h.put("INDIANRED",new j(205,92,92));h.put("MEDIUM VIOLET RED",new j(199,21,133));h.put("MEDIUMVIOLETRED",
new j(199,21,133));h.put("VIOLET RED",new j(208,32,144));h.put("VIOLETRED",new j(208,32,144));h.put("LIGHTCORAL",new j(240,128,128));h.put("HOTPINK",new j(255,105,180));h.put("PALEVIOLETRED",new j(219,112,147));h.put("LIGHTPINK",new j(255,182,193));h.put("ROSYBROWN",new j(188,143,143));h.put("PINK",new j(255,192,203));h.put("ORCHID",new j(218,112,214));h.put("LAVENDERBLUSH",new j(255,240,245));h.put("SNOW",new j(255,250,250));h.put("CHOCOLATE",new j(210,105,30));h.put("SADDLEBROWN",new j(139,69,19));
h.put("BROWN",new j(132,60,36));h.put("DARKORANGE",new j(255,140,0));h.put("CORAL",new j(255,127,80));h.put("SIENNA",new j(160,82,45));h.put("ORANGE",new j(255,165,0));h.put("SALMON",new j(250,128,114));h.put("PERU",new j(205,133,63));h.put("DARKGOLDENROD",new j(184,134,11));h.put("GOLDENROD",new j(218,165,32));h.put("SANDYBROWN",new j(244,164,96));h.put("LIGHTSALMON",new j(255,160,122));h.put("DARKSALMON",new j(233,150,122));h.put("GOLD",new j(255,215,0));h.put("YELLOW",new j(255,255,0));h.put("OLIVE",
new j(128,128,0));h.put("BURLYWOOD",new j(222,184,135));h.put("TAN",new j(210,180,140));h.put("NAVAJOWHITE",new j(255,222,173));h.put("PEACHPUFF",new j(255,218,185));h.put("KHAKI",new j(240,230,140));h.put("DARKKHAKI",new j(189,183,107));h.put("MOCCASIN",new j(255,228,181));h.put("WHEAT",new j(245,222,179));h.put("BISQUE",new j(255,228,196));h.put("PALEGOLDENROD",new j(238,232,170));h.put("BLANCHEDALMOND",new j(255,235,205));h.put("MEDIUM GOLDENROD",new j(234,234,173));h.put("MEDIUMGOLDENROD",new j(234,
234,173));h.put("PAPAYAWHIP",new j(255,239,213));h.put("MISTYROSE",new j(255,228,225));h.put("LEMONCHIFFON",new j(255,250,205));h.put("ANTIQUEWHITE",new j(250,235,215));h.put("CORNSILK",new j(255,248,220));h.put("LIGHTGOLDENRODYELLOW",new j(250,250,210));h.put("OLDLACE",new j(253,245,230));h.put("LINEN",new j(250,240,230));h.put("LIGHTYELLOW",new j(255,255,224));h.put("SEASHELL",new j(255,245,238));h.put("BEIGE",new j(245,245,220));h.put("FLORALWHITE",new j(255,250,240));h.put("IVORY",new j(255,255,
240));h.put("GREEN",new j(0,255,0));h.put("LAWNGREEN",new j(124,252,0));h.put("CHARTREUSE",new j(127,255,0));h.put("GREEN YELLOW",new j(173,255,47));h.put("GREENYELLOW",new j(173,255,47));h.put("YELLOW GREEN",new j(154,205,50));h.put("YELLOWGREEN",new j(154,205,50));h.put("MEDIUM FOREST GREEN",new j(107,142,35));h.put("OLIVEDRAB",new j(107,142,35));h.put("MEDIUMFORESTGREEN",new j(107,142,35));h.put("DARK OLIVE GREEN",new j(85,107,47));h.put("DARKOLIVEGREEN",new j(85,107,47));h.put("DARKSEAGREEN",
new j(143,188,139));h.put("LIME",new j(0,255,0));h.put("DARK GREEN",new j(0,100,0));h.put("DARKGREEN",new j(0,100,0));h.put("LIME GREEN",new j(50,205,50));h.put("LIMEGREEN",new j(50,205,50));h.put("FOREST GREEN",new j(34,139,34));h.put("FORESTGREEN",new j(34,139,34));h.put("SPRING GREEN",new j(0,255,127));h.put("SPRINGGREEN",new j(0,255,127));h.put("MEDIUM SPRING GREEN",new j(0,250,154));h.put("MEDIUMSPRINGGREEN",new j(0,250,154));h.put("SEA GREEN",new j(46,139,87));h.put("SEAGREEN",new j(46,139,
87));h.put("MEDIUM SEA GREEN",new j(60,179,113));h.put("MEDIUMSEAGREEN",new j(60,179,113));h.put("AQUAMARINE",new j(112,216,144));h.put("LIGHTGREEN",new j(144,238,144));h.put("PALE GREEN",new j(152,251,152));h.put("PALEGREEN",new j(152,251,152));h.put("MEDIUM AQUAMARINE",new j(102,205,170));h.put("MEDIUMAQUAMARINE",new j(102,205,170));h.put("TURQUOISE",new j(64,224,208));h.put("LIGHTSEAGREEN",new j(32,178,170));h.put("MEDIUM TURQUOISE",new j(72,209,204));h.put("MEDIUMTURQUOISE",new j(72,209,204));
h.put("HONEYDEW",new j(240,255,240));h.put("MINTCREAM",new j(245,255,250));h.put("ROYALBLUE",new j(65,105,225));h.put("DODGERBLUE",new j(30,144,255));h.put("DEEPSKYBLUE",new j(0,191,255));h.put("CORNFLOWERBLUE",new j(100,149,237));h.put("STEEL BLUE",new j(70,130,180));h.put("STEELBLUE",new j(70,130,180));h.put("LIGHTSKYBLUE",new j(135,206,250));h.put("DARK TURQUOISE",new j(0,206,209));h.put("DARKTURQUOISE",new j(0,206,209));h.put("CYAN",new j(0,255,255));h.put("AQUA",new j(0,255,255));h.put("DARKCYAN",
new j(0,139,139));h.put("TEAL",new j(0,128,128));h.put("SKY BLUE",new j(135,206,235));h.put("SKYBLUE",new j(135,206,235));h.put("CADET BLUE",new j(96,160,160));h.put("CADETBLUE",new j(95,158,160));h.put("DARK SLATE GRAY",new j(47,79,79));h.put("DARKSLATEGRAY",new j(47,79,79));h.put("LIGHTSLATEGRAY",new j(119,136,153));h.put("SLATEGRAY",new j(112,128,144));h.put("LIGHT STEEL BLUE",new j(176,196,222));h.put("LIGHTSTEELBLUE",new j(176,196,222));h.put("LIGHT BLUE",new j(173,216,230));h.put("LIGHTBLUE",
new j(173,216,230));h.put("POWDERBLUE",new j(176,224,230));h.put("PALETURQUOISE",new j(175,238,238));h.put("LIGHTCYAN",new j(224,255,255));h.put("ALICEBLUE",new j(240,248,255));h.put("AZURE",new j(240,255,255));h.put("MEDIUM BLUE",new j(0,0,205));h.put("MEDIUMBLUE",new j(0,0,205));h.put("DARKBLUE",new j(0,0,139));h.put("MIDNIGHT BLUE",new j(25,25,112));h.put("MIDNIGHTBLUE",new j(25,25,112));h.put("NAVY",new j(36,36,140));h.put("BLUE",new j(0,0,255));h.put("INDIGO",new j(75,0,130));h.put("BLUE VIOLET",
new j(138,43,226));h.put("BLUEVIOLET",new j(138,43,226));h.put("MEDIUM SLATE BLUE",new j(123,104,238));h.put("MEDIUMSLATEBLUE",new j(123,104,238));h.put("SLATE BLUE",new j(106,90,205));h.put("SLATEBLUE",new j(106,90,205));h.put("PURPLE",new j(160,32,240));h.put("DARK SLATE BLUE",new j(72,61,139));h.put("DARKSLATEBLUE",new j(72,61,139));h.put("DARKVIOLET",new j(148,0,211));h.put("DARK ORCHID",new j(153,50,204));h.put("DARKORCHID",new j(153,50,204));h.put("MEDIUMPURPLE",new j(147,112,219));h.put("CORNFLOWER BLUE",
new j(68,64,108));h.put("MEDIUM ORCHID",new j(186,85,211));h.put("MEDIUMORCHID",new j(186,85,211));h.put("MAGENTA",new j(255,0,255));h.put("FUCHSIA",new j(255,0,255));h.put("DARKMAGENTA",new j(139,0,139));h.put("VIOLET",new j(238,130,238));h.put("PLUM",new j(221,160,221));h.put("LAVENDER",new j(230,230,250));h.put("THISTLE",new j(216,191,216));h.put("GHOSTWHITE",new j(248,248,255));h.put("WHITE",new j(255,255,255));h.put("WHITESMOKE",new j(245,245,245));h.put("GAINSBORO",new j(220,220,220));h.put("LIGHT GRAY",
new j(211,211,211));h.put("LIGHTGRAY",new j(211,211,211));h.put("SILVER",new j(192,192,192));h.put("GRAY",new j(190,190,190));h.put("DARK GRAY",new j(169,169,169));h.put("DARKGRAY",new j(169,169,169));h.put("DIM GRAY",new j(105,105,105));h.put("DIMGRAY",new j(105,105,105));h.put("BLACK",new j(0,0,0))})();if(typeof plt=="undefined")var plt={};plt.Jsworld={};
(function(){var c=plt.Jsworld,l=false;function J(){}var y=new J,v=[],B=[];c.shutdown=function(){for(;B.length>0;){var i=B.pop();i&&i.pause()}K()};function z(i){v.push(i)}function C(i){i=v.indexOf(i);i!=-1&&v.splice(i,1)}function K(){y=new J;v=[]}function x(i){var q=y;try{y=i(y)}catch(o){return}if(q!=y)for(i=0;i<v.length;i++)try{v[i](y,q)}catch(w){y=q;throw w;}}c.change_world=x;Number.prototype.NaN0=function(){return isNaN(this)?0:this};function e(i){for(var q=0,o=0;i.offsetParent;){q+=i.offsetLeft+
(i.currentStyle?parseInt(i.currentStyle.borderLeftWidth).NaN0():0);o+=i.offsetTop+(i.currentStyle?parseInt(i.currentStyle.borderTopWidth).NaN0():0);i=i.offsetParent}q+=i.offsetLeft+(i.currentStyle?parseInt(i.currentStyle.borderLeftWidth).NaN0():0);o+=i.offsetTop+(i.currentStyle?parseInt(i.currentStyle.borderTopWidth).NaN0():0);return{x:q,y:o}}c.getPosition=e;var g=0;function A(){return g++}c.gensym=A;function F(i,q){for(var o=new Array(i.length),w=0;w<i.length;w++)o[w]=q(i[w]);return o}c.map=F;function t(i,
q){for(var o=[],w=0;w<i.length;w++)o=o.concat(q(i[w]));return o}function s(i,q){for(var o=new Array(i.length),w=0;w<i.length;w++)o[w]=q(i[w],w);return o}c.mapi=s;function E(i,q,o){for(var w=0;w<i.length;w++)q=o(i[w],q);return q}c.fold=E;function I(i,q){var o={};for(var w in i)o[w]=i[w];for(w in q)o[w]=q[w];return o}c.augment=I;function M(i,q,o){var w={};for(var V in i)w[V]=i[V];w[q]=o;return w}c.assoc_cons=M;function O(i,q){return i.concat([q])}c.cons=O;function T(i,q){return i.concat(q)}c.append=
T;function Z(i,q){for(var o=[],w=0;w<i.length;w++)o.push([i[w],q[w]]);return o}c.array_join=Z;function S(i,q){for(var o=0;o<i.length;o++)if(i[o]===q)return i.slice(0,o).concat(i.slice(o+1));return i}c.removeq=S;function j(i,q){for(var o=0;o<i.length;o++)if(q(i[o]))return i.slice(0,o).concat(i.slice(o+1));return i}c.removef=j;function h(i,q){for(var o=0;o<i.length;o++)if(q(i[o]))return i.slice(0,o).concat(h(i.slice(o+1),q));return i}c.filter=h;function f(i,q){var o={};for(var w in i)if(w!=q)o[w]=i[w];
return o}c.without=f;function n(i,q){for(var o=0;o<i.length;o++)if(i[o]===q)return true;return false}c.memberq=n;function p(i,q){for(var o=0;o<i.length;o++)if(i[o]==q)return true;return false}c.member=p;function G(i){return i[0]}c.head=G;function L(i){return i.slice(1,i.length)}c.tail=L;function N(i){var q=[i];for(i=i.firstChild;i!=null;i=i.nextSibling)q.push(N(i));return q}c.node_to_tree=N;function H(i){var q=[i.node];if(i.node.jsworldOpaque==true)return q;for(var o=0;o<i.children.length;o++)q=q.concat(H(i.children[o]));
return q}function X(i,q){return i&&q&&i===q}function aa(i,q){return!X(i,q)}function m(i){var q=[];if(i.node.jsworldOpaque==true)return[];for(var o=0;o<i.children.length;o++)q.push({relation:"parent",parent:i.node,child:i.children[o].node});for(o=0;o<i.children.length-1;o++)q.push({relation:"neighbor",left:i.children[o].node,right:i.children[o+1].node});for(o=0;o<i.children.length;o++)q=q.concat(m(i.children[o]));return q}function R(i,q){i.appendChild(q)}function la(i,q,o){for(var w=0;w<o.length;w++)if(o[w].relation==
"parent"){var V=o[w].parent,$=o[w].child;aa($.parentNode,V)&&R(V,$)}for(;;){V=false;for(w=0;w<o.length;w++)if(o[w].relation=="neighbor"){$=o[w].left;var fa=o[w].right;if(aa($.nextSibling,fa)){$.parentNode.insertBefore($,fa);V=true}}if(!V)break}var ca;function ra(qa,ka){ka=qa.compareDocumentPosition(ka);if(ka&qa.DOCUMENT_POSITION_CONTAINED_BY)return 1;if(ka&qa.DOCUMENT_POSITION_CONTAINS)return-1;if(ka&qa.DOCUMENT_POSITION_FOLLOWING)return-1;if(ka&qa.DOCUMENT_POSITION_PRECEDING)return 1;return 0}try{ca=
q.concat(i).sort(ra)}catch(ia){ca=null}o=i;for(i=i.parentNode;o!=i;){for(;;){if(o.firstChild==null||o.jsworldOpaque==true)break;o=o.firstChild}for(;o!=i;){$=o.nextSibling;V=o.parentNode;if(o.jsworldOpaque!=true){fa=false;var sa=undefined;if(ca!=null)for(;ca.length>0&&ra(o,ca[0])>=0;){w=ca.shift();if(X(w,o)){fa=true;sa=w;break}}else for(w=0;w<q.length;w++)if(X(q[w],o)){fa=true;sa=q[w];break}if(fa)oa(o,sa);else{for(;o.firstChild!=null;)R(o.parentNode,o.firstChild);$=o.nextSibling;o.parentNode.removeChild(o)}}if($==
null)o=V;else{o=$;break}}}u(q)}function oa(){}function ja(i,q){for(var o=0;o<q.length;o++)i.style[q[o].attrib]=q[o].values.join(" ")}function da(i,q){return q.id.match(/^\./)?"class"in i&&p(i["class"].split(/\s+/),q.id.substring(1)):"id"in i&&i.id==q.id}function ba(i,q){for(var o=0;o<i.length;o++)if("style"in i[o])i[o].style.cssText="";for(o=0;o<q.length;o++)if("id"in q[o])for(var w=0;w<i.length;w++)da(i[w],q[o])&&ja(i[w],q[o].attribs);else ja(q[o].node,q[o].attribs)}function u(i){for(var q=0;q<i.length;q++)i[q].onWorldChange&&
i[q].onWorldChange(y)}function Q(i,q,o,w,V){if(q instanceof J){var $=Y(w(i)),fa=H($);ba(fa,ya(V(i)));la(o,fa,m($))}else U(function(){var ca=w(q),ra=w(i),ia=V(q),sa=V(i),qa=Y(ra),ka=H(qa);if(ca!==ra){ba(ka,ya(sa));la(o,ka,m(qa))}else ia!==sa&&ba(ka,ya(sa))})}function U(i){var q;if(ha()){q=pa();i();q.restore()}else i()}function W(){this.focused=l;this.selectionStart=l.selectionStart;this.selectionEnd=l.selectionEnd}W.prototype.restore=function(){if(this.focused.parentNode){this.focused.selectionStart=
this.selectionStart;this.focused.selectionEnd=this.selectionEnd;this.focused.focus()}else if(this.focused.id){var i=document.getElementById(this.focused.id);if(i){i.selectionStart=this.selectionStart;i.selectionEnd=this.selectionEnd;i.focus()}}};function ha(){return l!=undefined}function pa(){return new W}function na(i,q,o,w,V){this.top=i;this.world=q;this.handlers=w;this.handlerCreators=o;this.attribs=V}na.prototype.restart=function(){ta(this.top,this.world,this.handlerCreators,this.attribs)};na.prototype.pause=
function(){for(var i=0;i<this.handlers.length;i++)this.handlers[i]instanceof ua||this.handlers[i].onUnregister(top)};function ta(i,q,o,w){K();var V=F(o,function(ia){return ia()});B.length>0&&B[B.length-1].pause();var $=new na(i,q,o,V,w);B.push($);function fa(ia){$.world=ia}z(fa);var ca=new ua(function(){return false},function(){});for(o=0;o<V.length;o++)if(V[o]instanceof ua)ca=V[o];else V[o].onRegister(i);function ra(ia){if(ca.test(ia)){ca.receiver(y);(ia=B.pop())&&ia.pause();if(B.length>0){ia=B.pop();
ia.restart()}}}z(ra);ga(i,w);x(function(){return q})}c.big_bang=ta;function xa(i,q){return function(){var o={watchId:-1,onRegister:function(){o.watchId=setInterval(function(){x(q)},i)},onUnregister:function(){clearInterval(o.watchId)}};return o}}c.on_tick=xa;function va(i,q){function o(w){w=i(w);za(w,w);return w}return function(){var w={_top:null,_listener:function(V,$){Q(V,$,w._top,o,q)},onRegister:function(V){w._top=V;z(w._listener)},onUnregister:function(){C(w._listener)}};return w}}c.on_draw=
va;function ua(i,q){this.test=i;this.receiver=q}function b(i,q){return function(){if(q==undefined)q=function(){};return new ua(i,q)}}c.stop_when=b;function d(i){function q(o){i(o)}return function(){return{onRegister:function(){z(q)},onUnregister:function(){C(q)}}}}c.on_world_change=d;function k(i,q,o){i.addEventListener?i.addEventListener(q,o,false):i.attachEvent("on"+q,o,false)}function r(i,q,o){k(i,q,function(w){x(function(V){return o(V,w)})})}function D(i,q,o){k(i,q,function(w){setTimeout(function(){x(function(V){return o(V,
w)})},0)})}function P(i){k(i,"focus",function(){l=i});k(i,"blur",function(){l=undefined});return i}function Y(i){return i.length==undefined?{node:i,children:[]}:{node:i[0],children:F(i.slice(1),Y)}}function ea(i){return{attrib:i[0],values:i.slice(1)}}function ma(i){var q=F(i.slice(1),ea);return typeof i[0]=="string"?[{id:i[0],attribs:q}]:"length"in i[0]?F(i[0],function(o){return{id:o,attribs:q}}):[{node:i[0],attribs:q}]}function ya(i){return t(i,ma)}function Ca(i){return i.nodeType==Node.TEXT_NODE}
function Da(i){return i.nodeType==Node.ELEMENT_NODE}function Aa(i,q){throw new wa(plt.Kernel.format("Expected a non-empty array, received ~s within ~s",[i,q]),i);}function za(i,q){!i instanceof Array&&Aa(i,q);i.length==0&&Aa(i,q);if(Ca(i[0])){if(i.length>1)throw new wa(plt.Kernel.format("Text node ~s can not have children",[i]),i);}else if(Da(i[0]))for(q=1;q<i.length;q++)za(i[q],i);else throw new wa(plt.Kernel.format("expected a Text or an Element, received ~s within ~s",[i,q]),i[0]);}function wa(i,
q){this.msg=i;this.elt=q}wa.prototype.toString=function(){return"on-draw: "+this.msg};function ga(i,q){if(q)for(a in q)if(typeof q[a]=="function")r(i,a,q[a]);else i[a]=q[a];return i}function Ea(i){return P(ga(document.createElement("p"),i))}c.p=Ea;function Fa(i){return P(ga(document.createElement("div"),i))}c.div=Fa;function Ga(i,q){var o=document.createElement("button");r(o,"click",i);return P(ga(o,q))}c.button=Ga;function Ha(i){if(i.stopPropagation)i.stopPropagation();else i.cancelBubble=true}function Ia(i){k(i,
"click",function(q){Ha(q)});return i}function Ja(i,q,o){var w=document.createElement("input");w.type=i;function V(ca){return q(ca,w.value)}D(w,"keypress",V);i=1000;var $=w.value,fa=setInterval(function(){if(w.parentNode){if($!=w.value){$=w.value;x(function(ca){return q(ca,w.value)})}}else clearInterval(fa)},i);return Ia(P(ga(w,o)))}c.input=Ja;function Ka(i,q){return P(ga(document.createTextNode(i),q))}c.text=Ka;function La(i,q,o){for(var w=document.createElement("select"),V=0;V<q.length;V++)R(w,Ba({value:q[V]}));
r(w,"change",o);return P(ga(w,i))}c.select=La;function Ba(i){return P(ga(document.createElement("option"),i))}c.option=Ba;function Ma(i){return P(ga(document.createElement("textarea"),i))}c.textarea=Ma;function Na(i){return P(ga(document.createElement("h1"),i))}c.h1=Na;function Oa(i){return P(ga(document.createElement("canvas"),i))}c.canvas=Oa;function Pa(i,q){var o=document.createElement("img");o.src=i;return P(ga(o,q))}c.img=Pa;function Qa(i,q){return P(ga(i,q))}c.raw_node=Qa})();
if(typeof plt=="undefined")plt={};plt.world=plt.world||{};plt.world.MobyJsworld={};
(function(){var c=plt.world.MobyJsworld,l=plt.Jsworld,J=plt.Kernel.MobyTypeError;function y(t){return typeof t=="function"}function v(t){var s=t;if(plt.Kernel.empty_question_(s))return[];else if(plt.Kernel.pair_question_(s)){for(t=[];!s.isEmpty();){t.push(v(s.first()));s=s.rest()}return t}else return t}function B(t){for(var s={};!t.isEmpty();){var E=t.first().first(),I=t.first().rest().first();s[E]=I;t=t.rest()}return s}function z(){if(window.document.getElementById("jsworld-div")!=undefined)return window;
var t=window.open("big-bang.html","big-bang");if(t==null)throw new Error("Error: Not allowed to create a new window.");return t}c.makeToplevelNode=function(){return z().document.getElementById("jsworld-div")};function C(t){return t instanceof plt.types.Cons||t instanceof plt.types.Empty}c.printWorldHook=function(t,s){if(s.lastChild==null){t=plt.Kernel.toDomNode(t);s.appendChild(t)}else{t=plt.Kernel.toDomNode(t);s.replaceChild(t,s.lastChild)}};function K(t){return typeof t.nodeType!="undefined"}function x(t,
s,E){if(plt.Kernel.pair_question_(t)){var I=plt.Kernel.first(t);E=plt.Kernel.rest(t);if(!K(I))throw new J(plt.Kernel.format("on-draw: expected a dom-element, but received ~s instead, the first element within ~s",[I,s]));if(I.nodeType==Node.TEXT_NODE&&!plt.Kernel.empty_question_(E))throw new J(plt.Kernel.format("on-draw: the text node ~s must not have children.  It has ~s",[I,E]));for(s=2;!plt.Kernel.empty_question_(E);){x(plt.Kernel.first(E),t,s);E=plt.Kernel.rest(E);s++}}else throw new J(plt.Kernel.format("on-draw: expected a dom-s-expression, but received ~s instead~a",
[t,E!=undefined?plt.Kernel.format(", the ~a element within ~s.",[plt.Kernel.ordinalize(E),s]):"."]));}function e(t,s,E){plt.Kernel.attachEvent(t,s,E)}function g(t){if(t.preventDefault)t.preventDefault();else t.returnValue=false}function A(t){if(t.stopPropagation)t.stopPropagation();else t.cancelBubble=true}c.bigBang=function(t,s){var E=plt.types.Empty.EMPTY;plt.Kernel.arrayEach(s,function(j,h){plt.Kernel.check(j,function(f){return y(f)||C(f)},"js-big-bang","handler or attribute list",h+2)});var I=
c.makeToplevelNode();I.tabIndex=0;e(I,"click",function(j){g(j);A(j);return false},false);for(var M=new plt.world.config.WorldConfig,O=0;O<s.length;O++)if(C(s[O]))E=s[O];else if(y(s[O]))M=s[O](M);M=M.updateAll({changeWorld:c.updateWorld,shutdownWorld:c.shutdownWorld});plt.world.config.CONFIG=M;s=[];if(M.lookup("onDraw")){wrappedRedraw=function(j){j=M.lookup("onDraw")([j]);plt.Kernel.setLastLoc(undefined);x(j,j,undefined);return j=[I,v(j)]};O=function(j){j=v(M.lookup("onDrawCss")([j]));plt.Kernel.setLastLoc(undefined);
return j};s.push(l.on_draw(wrappedRedraw,O))}else if(M.lookup("onRedraw")){var T=undefined,Z=undefined;wrappedRedraw=function(j){j=M.lookup("onRedraw")([j]);if(j!=null&&j!=undefined&&j instanceof plt.world.Kernel.BaseImage){var h=plt.world.Kernel.imageWidth(j).toInteger(),f=plt.world.Kernel.imageHeight(j).toInteger();if(!T){T=plt.world.Kernel.makeCanvas(h,f);T.jsworldOpaque=true;Z=l.node_to_tree(T)}T.width=h;T.height=f;h=T.getContext("2d");j.render(h,0,0);return[I,Z]}else return[I,l.node_to_tree(plt.Kernel.toDomNode(j))]};
O=function(){return[[T,["width",T.width+"px"],["height",T.height+"px"]]]};s.push(l.on_draw(wrappedRedraw,O))}else s.push(l.on_world_change(function(j){c.printWorldHook(j,I)}));if(M.lookup("tickDelay")){O=function(j){setTimeout(function(){plt.world.stimuli.onTick()},0);return j};var S=M.lookup("tickDelay");s.push(l.on_tick(S,O))}M.lookup("stopWhen")&&s.push(l.stop_when(function(j){return M.lookup("stopWhen")([j])}));if(M.lookup("onKey")){e(I,"keydown",function(j){plt.world.stimuli.onKey(j);g(j);A(j);
return false});e(I,"keypress",function(j){g(j);A(j);return false});I.focus()}if(M.lookup("initialEffect")){S=plt.world.Kernel.applyEffect(M.lookup("initialEffect"));for(O=0;O<S.length;O++)if(M.lookup("stopWhen")&&M.lookup("stopWhen")([t]))break;else t=S[O](t)}return l.big_bang(I,t,s,B(E))};c.updateWorld=function(t){function s(E){try{return t(E)}catch(I){plt.Kernel.reportError(I);plt.Kernel.reportError("Shutting down jsworld computations");plt.world.stimuli.onShutdown();return E}}l.change_world(s)};
c.shutdownWorld=function(){l.shutdown()};function F(t){if(t.length==0)return[];if(t.length==1)return B(t[0]);else throw new Error;}c.p=function(t){t=F(t);var s=l.p(t);s.toWrittenString=function(){return plt.Kernel.format("(js-p)",[])};s.toDisplayedString=s.toWrittenString;s.toDomNode=function(){return s};return s};c.div=function(t){t=F(t);var s=l.div(t);s.toWrittenString=function(){return plt.Kernel.format("(js-div)",[])};s.toDisplayedString=s.toWrittenString;s.toDomNode=function(){return s};return s};
c.button=function(t,s){function E(){return make_dash_effect_colon_none()}var I=c.buttonStar(t,E,s);I.toWrittenString=function(){return"(js-button ...)"};I.toDisplayedString=I.toWrittenString;I.toDomNode=function(){return I};return I};c.buttonStar=function(t,s,E){E=F(E);function I(O){try{var T=s([O]),Z=t([O]);plt.world.Kernel.applyEffect(T);return Z}catch(S){plt.Kernel.reportError(S);return O}}var M=l.button(I,E);M.toWrittenString=function(){return"(js-button ...)"};M.toDisplayedString=M.toWrittenString;
M.toDomNode=function(){return M};return M};c.input=function(t,s,E){plt.Kernel.check(t,plt.Kernel.isString,"js-input","string",1);plt.Kernel.check(s,plt.Kernel.isFunction,"js-input","(world string -> world)",1);E=F(E);var I=l.input(t,function(M,O){return s([M,O])},E);I.toWrittenString=function(){return"(js-input ...)"};I.toDisplayedString=I.toWrittenString;I.toDomNode=function(){return I};return I};c.get_dash_input_dash_value=function(t){plt.Kernel.check(t,function(){return plt.Kernel.isString(t)||
t.nodeType==Node.ELEMENT_NODE},"get-input-value","dom-node",1);return plt.Kernel.isString(t)?plt.types.String.makeInstance(document.getElementById(t).value||""):plt.types.String.makeInstance(t.value||"")};c.img=function(t,s){s=F(s);var E=l.img(t,s);E.toWrittenString=function(){return"(js-img ...)"};E.toDisplayedString=E.toWrittenString;E.toDomNode=function(){return E};return E};c.text=function(t){var s=l.text(t,[]);s.toWrittenString=function(){return"(js-img ...)"};s.toDisplayedString=s.toWrittenString;
s.toDomNode=function(){return s};return s};c.rawNode=function(t,s){s=F(s);var E=l.raw_node(plt.Kernel.toDomNode(t),s);E.toWrittenString=function(){return"(js-img ...)"};E.toDisplayedString=E.toWrittenString;E.toDomNode=function(){return E};return E}})();if(typeof plt=="undefined")plt={};plt.world=plt.world||{};
(function(){var c={};plt.world.stimuli=c;function l(z,C,K){var x=[];v(function(g){var A=[g].concat(K);if(z){var F=z(A);x=B(F)}return C?C(A):g});for(var e=0;e<x.length;e++)v(x[e])}c.onTilt=function(z,C,K){var x=y("onTilt"),e=y("onTiltEffect");l(e,x,[J(z),J(C),J(K)])};c.onAcceleration=function(z,C,K){var x=y("onAcceleration"),e=y("onAccelerationEffect");l(e,x,[J(z),J(C),J(K)])};c.onShake=function(){var z=y("onShake"),C=y("onShakeEffect");l(C,z,[])};c.onLocation=function(z,C){var K=y("onLocationChange"),
x=y("onLocationChangeEffect");l(x,K,[J(z),J(C)])};c.onKey=function(z){function C(e){e=e.charCode||e.keyCode;return e=e==37?"left":e==38?"up":e==39?"right":e==40?"down":e==32?"space":e==13?"enter":String.fromCharCode(e)}z=C(z);var K=y("onKey"),x=y("onKeyEffect");l(x,K,[z])};c.onTick=function(){var z=y("onTick"),C=y("onTickEffect");l(C,z,[])};c.onAnnounce=function(z,C){for(var K=plt.types.Empty.EMPTY,x=0;x<C.length;x++)K=plt.types.Cons.makeInstance(C[C.length-x-1],K);C=y("onAnnounce");x=y("onAnnounceEffect");
l(C,x,[z,K])};c.onShutdown=function(){var z=y("shutdownWorld");z&&z()};var J=plt.types.FloatPoint.makeInstance;function y(z){return plt.world.config.CONFIG.lookup(z)}function v(z){y("changeWorld")(z)}function B(z){return plt.world.Kernel.applyEffect(z)}})();function permission_colon_location(){plt.Kernel.Struct.call(this,"make-permission:location",[])}permission_colon_location.prototype=new plt.Kernel.Struct;function make_dash_permission_colon_location(){return new permission_colon_location}
function permission_colon_location_question_(c){return c!=null&&c!=undefined&&c instanceof permission_colon_location}function permission_colon_send_dash_sms(){plt.Kernel.Struct.call(this,"make-permission:send-sms",[])}permission_colon_send_dash_sms.prototype=new plt.Kernel.Struct;function make_dash_permission_colon_send_dash_sms(){return new permission_colon_send_dash_sms}
function permission_colon_send_dash_sms_question_(c){return c!=null&&c!=undefined&&c instanceof permission_colon_send_dash_sms}function permission_colon_receive_dash_sms(){plt.Kernel.Struct.call(this,"make-permission:receive-sms",[])}permission_colon_receive_dash_sms.prototype=new plt.Kernel.Struct;function make_dash_permission_colon_receive_dash_sms(){return new permission_colon_receive_dash_sms}
function permission_colon_receive_dash_sms_question_(c){return c!=null&&c!=undefined&&c instanceof permission_colon_receive_dash_sms}function permission_colon_tilt(){plt.Kernel.Struct.call(this,"make-permission:tilt",[])}permission_colon_tilt.prototype=new plt.Kernel.Struct;function make_dash_permission_colon_tilt(){return new permission_colon_tilt}function permission_colon_tilt_question_(c){return c!=null&&c!=undefined&&c instanceof permission_colon_tilt}
function permission_colon_shake(){plt.Kernel.Struct.call(this,"make-permission:shake",[])}permission_colon_shake.prototype=new plt.Kernel.Struct;function make_dash_permission_colon_shake(){return new permission_colon_shake}function permission_colon_shake_question_(c){return c!=null&&c!=undefined&&c instanceof permission_colon_shake}function permission_colon_internet(){plt.Kernel.Struct.call(this,"make-permission:internet",[])}permission_colon_internet.prototype=new plt.Kernel.Struct;
function make_dash_permission_colon_internet(){return new permission_colon_internet}function permission_colon_internet_question_(c){return c!=null&&c!=undefined&&c instanceof permission_colon_internet}function permission_colon_telephony(){plt.Kernel.Struct.call(this,"make-permission:telephony",[])}permission_colon_telephony.prototype=new plt.Kernel.Struct;function make_dash_permission_colon_telephony(){return new permission_colon_telephony}
function permission_colon_telephony_question_(c){return c!=null&&c!=undefined&&c instanceof permission_colon_telephony}function permission_colon_wake_dash_lock(){plt.Kernel.Struct.call(this,"make-permission:wake-lock",[])}permission_colon_wake_dash_lock.prototype=new plt.Kernel.Struct;function make_dash_permission_colon_wake_dash_lock(){return new permission_colon_wake_dash_lock}
function permission_colon_wake_dash_lock_question_(c){return c!=null&&c!=undefined&&c instanceof permission_colon_wake_dash_lock}function permission_colon_open_dash_image_dash_url(c){plt.Kernel.Struct.call(this,"make-permission:open-image-url",[c]);this.url=c}permission_colon_open_dash_image_dash_url.prototype=new plt.Kernel.Struct;function make_dash_permission_colon_open_dash_image_dash_url(c){return new permission_colon_open_dash_image_dash_url(c)}
function permission_colon_open_dash_image_dash_url_dash_url(c){if(permission_colon_open_dash_image_dash_url_question_(c))return c.url;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("permission:open-image-url-url: not a permission:open-image-url: ~s",[c]));}
function set_dash_permission_colon_open_dash_image_dash_url_dash_url_bang_(c,l){if(permission_colon_open_dash_image_dash_url_question_(c)){c.url=l;c._fields[0]=l}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_permission_colon_open_dash_image_dash_url_dash_url_bang_: not a permission:open-image-url: ~s",[c]));}function permission_colon_open_dash_image_dash_url_question_(c){return c!=null&&c!=undefined&&c instanceof permission_colon_open_dash_image_dash_url}
function permission_question_(c){return plt.Kernel.setLastLoc('offset=512 line=17 span=28 id="permission.ss"')&&permission_colon_location_question_(c)||plt.Kernel.setLastLoc('offset=547 line=18 span=28 id="permission.ss"')&&permission_colon_send_dash_sms_question_(c)||plt.Kernel.setLastLoc('offset=582 line=19 span=31 id="permission.ss"')&&permission_colon_receive_dash_sms_question_(c)||plt.Kernel.setLastLoc('offset=620 line=20 span=24 id="permission.ss"')&&permission_colon_tilt_question_(c)||plt.Kernel.setLastLoc('offset=651 line=21 span=25 id="permission.ss"')&&
permission_colon_shake_question_(c)||plt.Kernel.setLastLoc('offset=683 line=22 span=28 id="permission.ss"')&&permission_colon_internet_question_(c)||plt.Kernel.setLastLoc('offset=718 line=23 span=29 id="permission.ss"')&&permission_colon_telephony_question_(c)||plt.Kernel.setLastLoc('offset=754 line=24 span=29 id="permission.ss"')&&permission_colon_wake_dash_lock_question_(c)||plt.Kernel.setLastLoc('offset=790 line=25 span=34 id="permission.ss"')&&permission_colon_open_dash_image_dash_url_question_(c)}
var PERMISSION_colon_LOCATION,PERMISSION_colon_SEND_dash_SMS,PERMISSION_colon_RECEIVE_dash_SMS,PERMISSION_colon_TILT,PERMISSION_colon_SHAKE,PERMISSION_colon_INTERNET,PERMISSION_colon_TELEPHONY,PERMISSION_colon_WAKE_dash_LOCK;
function permission_dash__greaterthan_string(c){return plt.Kernel.setLastLoc('offset=1465 line=42 span=35 id="permission.ss"')&&permission_colon_location_question_(c)?plt.types.String.makeInstance("PERMISSION:LOCATION"):plt.Kernel.setLastLoc('offset=1534 line=44 span=35 id="permission.ss"')&&permission_colon_send_dash_sms_question_(c)?plt.types.String.makeInstance("PERMISSION:SEND-SMS"):plt.Kernel.setLastLoc('offset=1603 line=46 span=38 id="permission.ss"')&&permission_colon_receive_dash_sms_question_(c)?
plt.types.String.makeInstance("PERMISSION:RECEIVE-SMS"):plt.Kernel.setLastLoc('offset=1678 line=48 span=31 id="permission.ss"')&&permission_colon_tilt_question_(c)?plt.types.String.makeInstance("PERMISSION:TILT"):plt.Kernel.setLastLoc('offset=1739 line=50 span=32 id="permission.ss"')&&permission_colon_shake_question_(c)?plt.types.String.makeInstance("PERMISSION:SHAKE"):plt.Kernel.setLastLoc('offset=1802 line=52 span=35 id="permission.ss"')&&permission_colon_internet_question_(c)?plt.types.String.makeInstance("PERMISSION:INTERNET"):
plt.Kernel.setLastLoc('offset=1871 line=54 span=36 id="permission.ss"')&&permission_colon_telephony_question_(c)?plt.types.String.makeInstance("PERMISSION:TELEPHONY"):plt.Kernel.setLastLoc('offset=1942 line=56 span=36 id="permission.ss"')&&permission_colon_wake_dash_lock_question_(c)?plt.types.String.makeInstance("PERMISSION:WAKE-LOCK"):plt.Kernel.setLastLoc('offset=2013 line=58 span=41 id="permission.ss"')&&permission_colon_open_dash_image_dash_url_question_(c)?plt.Kernel.setLastLoc('offset=2060 line=59 span=84 id="permission.ss"')&&
plt.Kernel.format(plt.types.String.makeInstance("PERMISSION:OPEN-IMAGE-URL ~a"),[plt.Kernel.setLastLoc('offset=2099 line=59 span=44 id="permission.ss"')&&permission_colon_open_dash_image_dash_url_dash_url(c)]):plt.Kernel.setLastLoc('offset=1454 line=41 span=692 id="permission.ss"')&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),plt.types.String.makeInstance('cond: fell out of cond around "offset=1454 line=41 span=692 id=\\"permission.ss\\""'))}
function string_dash__greaterthan_permission(c){return plt.Kernel.setLastLoc('offset=2242 line=65 span=38 id="permission.ss"')&&plt.Kernel.string_equal__question_(c,plt.types.String.makeInstance("PERMISSION:LOCATION"),[])?PERMISSION_colon_LOCATION:plt.Kernel.setLastLoc('offset=2312 line=67 span=38 id="permission.ss"')&&plt.Kernel.string_equal__question_(c,plt.types.String.makeInstance("PERMISSION:SEND-SMS"),[])?PERMISSION_colon_SEND_dash_SMS:plt.Kernel.setLastLoc('offset=2387 line=69 span=41 id="permission.ss"')&&
plt.Kernel.string_equal__question_(c,plt.types.String.makeInstance("PERMISSION:RECEIVE-SMS"),[])?PERMISSION_colon_RECEIVE_dash_SMS:plt.Kernel.setLastLoc('offset=2463 line=71 span=34 id="permission.ss"')&&plt.Kernel.string_equal__question_(c,plt.types.String.makeInstance("PERMISSION:TILT"),[])?PERMISSION_colon_TILT:plt.Kernel.setLastLoc('offset=2525 line=73 span=35 id="permission.ss"')&&plt.Kernel.string_equal__question_(c,plt.types.String.makeInstance("PERMISSION:SHAKE"),[])?PERMISSION_colon_SHAKE:
plt.Kernel.setLastLoc('offset=2589 line=75 span=38 id="permission.ss"')&&plt.Kernel.string_equal__question_(c,plt.types.String.makeInstance("PERMISSION:INTERNET"),[])?PERMISSION_colon_INTERNET:plt.Kernel.setLastLoc('offset=2659 line=77 span=39 id="permission.ss"')&&plt.Kernel.string_equal__question_(c,plt.types.String.makeInstance("PERMISSION:TELEPHONY"),[])?PERMISSION_colon_TELEPHONY:plt.Kernel.setLastLoc('offset=2731 line=79 span=39 id="permission.ss"')&&plt.Kernel.string_equal__question_(c,plt.types.String.makeInstance("PERMISSION:WAKE-LOCK"),
[])?PERMISSION_colon_WAKE_dash_LOCK:plt.Kernel.setLastLoc('offset=2808 line=81 span=82 id="permission.ss"')&&plt.Kernel._greaterthan_(plt.Kernel.setLastLoc('offset=2811 line=81 span=21 id="permission.ss"')&&plt.Kernel.string_dash_length(c),plt.Kernel.setLastLoc('offset=2846 line=82 span=43 id="permission.ss"')&&plt.Kernel.string_dash_length(plt.types.String.makeInstance("PERMISSION:OPEN-IMAGE-URL")),[])&&plt.Kernel.setLastLoc('offset=2901 line=83 span=122 id="permission.ss"')&&plt.Kernel.string_equal__question_(plt.Kernel.setLastLoc('offset=2911 line=83 span=63 id="permission.ss"')&&
plt.Kernel.substring(c,plt.types.Rational.makeInstance(0,1),plt.Kernel.setLastLoc('offset=2930 line=83 span=43 id="permission.ss"')&&plt.Kernel.string_dash_length(plt.types.String.makeInstance("PERMISSION:OPEN-IMAGE-URL"))),plt.types.String.makeInstance("PERMISSION:OPEN-IMAGE-URL"),[])?plt.Kernel.setLastLoc('offset=3030 line=85 span=220 id="permission.ss"')&&make_dash_permission_colon_open_dash_image_dash_url(plt.Kernel.setLastLoc('offset=3062 line=85 span=187 id="permission.ss"')&&plt.Kernel.substring(c,
plt.Kernel.setLastLoc('offset=3128 line=86 span=50 id="permission.ss"')&&plt.Kernel.add1(plt.Kernel.setLastLoc('offset=3134 line=86 span=43 id="permission.ss"')&&plt.Kernel.string_dash_length(plt.types.String.makeInstance("PERMISSION:OPEN-IMAGE-URL"))),plt.Kernel.setLastLoc('offset=3227 line=87 span=21 id="permission.ss"')&&plt.Kernel.string_dash_length(c))):plt.Kernel.setLastLoc('offset=2231 line=64 span=1021 id="permission.ss"')&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),plt.types.String.makeInstance('cond: fell out of cond around "offset=2231 line=64 span=1021 id=\\"permission.ss\\""'))}
function permission_dash__greaterthan_android_dash_permissions(c){return plt.Kernel.setLastLoc('offset=3392 line=95 span=35 id="permission.ss"')&&permission_colon_location_question_(c)?plt.Kernel.setLastLoc('offset=3433 line=96 span=103 id="permission.ss"')&&plt.Kernel.list([plt.types.String.makeInstance("android.permission.ACCESS_COARSE_LOCATION"),plt.types.String.makeInstance("android.permission.ACCESS_FINE_LOCATION")]):plt.Kernel.setLastLoc('offset=3543 line=98 span=35 id="permission.ss"')&&permission_colon_send_dash_sms_question_(c)?
plt.Kernel.setLastLoc('offset=3584 line=99 span=36 id="permission.ss"')&&plt.Kernel.list([plt.types.String.makeInstance("android.permission.SEND_SMS")]):plt.Kernel.setLastLoc('offset=3627 line=100 span=38 id="permission.ss"')&&permission_colon_receive_dash_sms_question_(c)?plt.Kernel.setLastLoc('offset=3671 line=101 span=39 id="permission.ss"')&&plt.Kernel.list([plt.types.String.makeInstance("android.permission.RECEIVE_SMS")]):plt.Kernel.setLastLoc('offset=3717 line=102 span=31 id="permission.ss"')&&
permission_colon_tilt_question_(c)?plt.Kernel.setLastLoc('offset=3754 line=103 span=6 id="permission.ss"')&&plt.Kernel.list([]):plt.Kernel.setLastLoc('offset=3767 line=104 span=32 id="permission.ss"')&&permission_colon_shake_question_(c)?plt.Kernel.setLastLoc('offset=3805 line=105 span=6 id="permission.ss"')&&plt.Kernel.list([]):plt.Kernel.setLastLoc('offset=3818 line=106 span=35 id="permission.ss"')&&permission_colon_internet_question_(c)?plt.Kernel.setLastLoc('offset=3859 line=107 span=36 id="permission.ss"')&&
plt.Kernel.list([plt.types.String.makeInstance("android.permission.INTERNET")]):plt.Kernel.setLastLoc('offset=3902 line=108 span=36 id="permission.ss"')&&permission_colon_telephony_question_(c)?plt.Kernel.setLastLoc('offset=3944 line=109 span=49 id="permission.ss"')&&plt.Kernel.list([plt.types.String.makeInstance("android.permission.ACCESS_COARSE_UPDATES")]):plt.Kernel.setLastLoc('offset=4000 line=110 span=36 id="permission.ss"')&&permission_colon_wake_dash_lock_question_(c)?plt.Kernel.setLastLoc('offset=4042 line=111 span=37 id="permission.ss"')&&
plt.Kernel.list([plt.types.String.makeInstance("android.permission.WAKE_LOCK")]):plt.Kernel.setLastLoc('offset=4086 line=112 span=41 id="permission.ss"')&&permission_colon_open_dash_image_dash_url_question_(c)?plt.Kernel.setLastLoc('offset=4133 line=113 span=6 id="permission.ss"')&&plt.Kernel.list([]):plt.Kernel.setLastLoc('offset=3381 line=94 span=760 id="permission.ss"')&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),plt.types.String.makeInstance('cond: fell out of cond around "offset=3381 line=94 span=760 id=\\"permission.ss\\""'))}
function permission_dash__greaterthan_on_dash_start_dash_code(c){return plt.Kernel.setLastLoc('offset=4258 line=119 span=35 id="permission.ss"')&&permission_colon_location_question_(c)?plt.types.String.makeInstance("plt.platform.Platform.getInstance().getLocationService().startService();\n      plt.platform.Platform.getInstance().getLocationService().addLocationChangeListener(listener);"):plt.Kernel.setLastLoc('offset=4480 line=122 span=35 id="permission.ss"')&&permission_colon_send_dash_sms_question_(c)?
plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=4530 line=124 span=38 id="permission.ss"')&&permission_colon_receive_dash_sms_question_(c)?plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=4583 line=126 span=31 id="permission.ss"')&&permission_colon_tilt_question_(c)?plt.types.String.makeInstance("plt.platform.Platform.getInstance().getTiltService().startService();\n      plt.platform.Platform.getInstance().getTiltService().addOrientationChangeListener(listener);\n      plt.platform.Platform.getInstance().getTiltService().addAccelerationChangeListener(listener);\n      plt.platform.Platform.getInstance().getTiltService().addShakeListener(listener);"):
plt.Kernel.setLastLoc('offset=4988 line=132 span=32 id="permission.ss"')&&permission_colon_shake_question_(c)?plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=5042 line=135 span=35 id="permission.ss"')&&permission_colon_internet_question_(c)?plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=5092 line=137 span=36 id="permission.ss"')&&permission_colon_telephony_question_(c)?plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=5143 line=139 span=36 id="permission.ss"')&&
permission_colon_wake_dash_lock_question_(c)?plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=5194 line=141 span=41 id="permission.ss"')&&permission_colon_open_dash_image_dash_url_question_(c)?plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=4247 line=118 span=998 id="permission.ss"')&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),plt.types.String.makeInstance('cond: fell out of cond around "offset=4247 line=118 span=998 id=\\"permission.ss\\""'))}
function permission_dash__greaterthan_on_dash_pause_dash_code(c){return plt.Kernel.setLastLoc('offset=5362 line=148 span=35 id="permission.ss"')&&permission_colon_location_question_(c)?plt.types.String.makeInstance("plt.platform.Platform.getInstance().getLocationService().shutdownService();"):plt.Kernel.setLastLoc('offset=5487 line=150 span=35 id="permission.ss"')&&permission_colon_send_dash_sms_question_(c)?plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=5537 line=152 span=38 id="permission.ss"')&&
permission_colon_receive_dash_sms_question_(c)?plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=5590 line=154 span=31 id="permission.ss"')&&permission_colon_tilt_question_(c)?plt.types.String.makeInstance("plt.platform.Platform.getInstance().getTiltService().shutdownService();"):plt.Kernel.setLastLoc('offset=5707 line=156 span=32 id="permission.ss"')&&permission_colon_shake_question_(c)?plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=5754 line=158 span=35 id="permission.ss"')&&
permission_colon_internet_question_(c)?plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=5804 line=160 span=36 id="permission.ss"')&&permission_colon_telephony_question_(c)?plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=5855 line=162 span=36 id="permission.ss"')&&permission_colon_wake_dash_lock_question_(c)?plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=5906 line=164 span=41 id="permission.ss"')&&permission_colon_open_dash_image_dash_url_question_(c)?
plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=5351 line=147 span=606 id="permission.ss"')&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),plt.types.String.makeInstance('cond: fell out of cond around "offset=5351 line=147 span=606 id=\\"permission.ss\\""'))}
function permission_dash__greaterthan_on_dash_destroy_dash_code(c){return plt.Kernel.setLastLoc('offset=6078 line=171 span=35 id="permission.ss"')&&permission_colon_location_question_(c)?plt.types.String.makeInstance("plt.platform.Platform.getInstance().getLocationService().shutdownService();"):plt.Kernel.setLastLoc('offset=6203 line=173 span=35 id="permission.ss"')&&permission_colon_send_dash_sms_question_(c)?plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=6253 line=175 span=38 id="permission.ss"')&&
permission_colon_receive_dash_sms_question_(c)?plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=6306 line=177 span=31 id="permission.ss"')&&permission_colon_tilt_question_(c)?plt.types.String.makeInstance("plt.platform.Platform.getInstance().getTiltService().shutdownService();"):plt.Kernel.setLastLoc('offset=6423 line=179 span=32 id="permission.ss"')&&permission_colon_shake_question_(c)?plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=6470 line=181 span=35 id="permission.ss"')&&
permission_colon_internet_question_(c)?plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=6520 line=183 span=36 id="permission.ss"')&&permission_colon_telephony_question_(c)?plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=6571 line=185 span=36 id="permission.ss"')&&permission_colon_wake_dash_lock_question_(c)?plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=6622 line=187 span=41 id="permission.ss"')&&permission_colon_open_dash_image_dash_url_question_(c)?
plt.types.String.makeInstance(""):plt.Kernel.setLastLoc('offset=6067 line=170 span=606 id="permission.ss"')&&plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),plt.types.String.makeInstance('cond: fell out of cond around "offset=6067 line=170 span=606 id=\\"permission.ss\\""'))}
(function(c){(function(){PERMISSION_colon_LOCATION=plt.Kernel.setLastLoc('offset=857 line=28 span=26 id="permission.ss"')&&make_dash_permission_colon_location();PERMISSION_colon_SEND_dash_SMS=plt.Kernel.setLastLoc('offset=913 line=29 span=26 id="permission.ss"')&&make_dash_permission_colon_send_dash_sms();PERMISSION_colon_RECEIVE_dash_SMS=plt.Kernel.setLastLoc('offset=972 line=30 span=26 id="permission.ss"')&&make_dash_permission_colon_send_dash_sms();PERMISSION_colon_TILT=plt.Kernel.setLastLoc('offset=1024 line=31 span=22 id="permission.ss"')&&
make_dash_permission_colon_tilt();PERMISSION_colon_SHAKE=plt.Kernel.setLastLoc('offset=1073 line=32 span=23 id="permission.ss"')&&make_dash_permission_colon_shake();PERMISSION_colon_INTERNET=plt.Kernel.setLastLoc('offset=1126 line=33 span=26 id="permission.ss"')&&make_dash_permission_colon_internet();PERMISSION_colon_TELEPHONY=plt.Kernel.setLastLoc('offset=1183 line=34 span=27 id="permission.ss"')&&make_dash_permission_colon_telephony();PERMISSION_colon_WAKE_dash_LOCK=plt.Kernel.setLastLoc('offset=1241 line=35 span=27 id="permission.ss"')&&
make_dash_permission_colon_wake_dash_lock()})(c||plt.Kernel.identity)})();if(typeof plt=="undefined")plt={};
(function(){plt.permission={};function c(x){return permission_colon_location_question_(x)}function l(x){return permission_colon_send_dash_sms_question_(x)}function J(x){return permission_colon_receive_dash_sms_question_(x)}function y(x){return permission_colon_tilt_question_(x)}function v(x){return permission_colon_shake_question_(x)}function B(x){return permission_colon_internet_question_(x)}function z(x){return permission_colon_telephony_question_(x)}function C(x){return permission_colon_wake_dash_lock_question_(x)}
function K(x){return permission_colon_open_dash_image_dash_url_question_(x)}plt.permission.startupAllPermissions=function(x,e){if(x.length>0){var g=x.pop();plt.permission._runStartupCode(g,x,e)}else e()};plt.permission._runStartupCode=function(x,e,g){var A=plt.platform.Platform.getInstance(),F=plt.world.stimuli;function t(){setTimeout(function(){plt.permission.startupAllPermissions(e,g)},0)}if(c(x)){A.getLocationService().startService();A.getLocationService().addLocationChangeListener(function(M,
O){F.onLocation(M,O)});t()}else if(l(x))t();else if(J(x))t();else if(y(x)){A.getTiltService().startService();A.getTiltService().addOrientationChangeListener(function(M,O,T){F.onTilt(M,O,T)});A.getTiltService().addAccelerationChangeListener(function(M,O,T){F.onAcceleration(M,O,T)});t()}else if(v(x)){A.getShakeService().startService();A.getShakeService().addListener(function(){F.onShake()});t()}else if(B(x))t();else if(z(x))t();else if(C(x))t();else if(K(x)){var s=permission_colon_open_dash_image_dash_url_dash_url(x),
E=new Image,I=function(){plt.Kernel.detachEvent(E,"load",I);plt.world.Kernel.FileImage.installInstance(s,E);t()};plt.Kernel.attachEvent(E,"load",I);plt.Kernel.attachEvent(E,"error",function(){E.src="http://www.wescheme.org/images/broken.png";plt.Kernel.detachEvent(E,"load",I);t()});E.src=s}else t()};plt.permission.runShutdownCode=function(x){var e=plt.platform.Platform.getInstance();c(x)&&e.getLocationService().shutdownService();l(x);J(x);y(x)&&e.getTiltService().shutdownService();v(x);B(x);z(x);
C(x);K(x)}})();
