(function(){if(!(window.google&&google.gears)){var j=null;if(typeof GearsFactory!="undefined")j=new GearsFactory;else try{j=new ActiveXObject("Gears.Factory");j.getBuildInfo().indexOf("ie_mobile")!=-1&&j.privateSetGlobalObject(this)}catch(v){if(typeof navigator.mimeTypes!="undefined"&&navigator.mimeTypes["application/x-googlegears"]){j=document.createElement("object");j.style.display="none";j.width=0;j.height=0;j.type="application/x-googlegears";document.documentElement.appendChild(j)}}if(j){window.google||
(google={});if(!google.gears)google.gears={factory:j}}}})();var plt={};plt.types={};
(function(){plt.types=plt.types||{};function j(c,f){c.appendChild(f)}function v(c){function f(){}f.prototype=c;return new f}var S=0;plt.types.makeEqHashCode=function(){S++;return S};plt.types.getEqHashCode=function(c){if(c&&c._eqHashCode)return c._eqHashCode;if(typeof c=="string")return c;return 0};function F(c,f){this._constructorName=c;this._fields=f;this._eqHashCode=plt.types.makeEqHashCode()}plt.types.Struct=F;F.prototype.toWrittenString=function(c){c.put(this,true);var f=[];f.push("(");f.push(this._constructorName);
for(var g=0;g<this._fields.length;g++){f.push(" ");f.push(plt.types.toWrittenString(this._fields[g],c))}f.push(")");return plt.types.String.makeInstance(f.join(""))};F.prototype.toDisplayedString=F.prototype.toWrittenString;F.prototype.toDomNode=function(c){c.put(this,true);var f=document.createElement("div");f.appendChild(document.createTextNode("("));f.appendChild(document.createTextNode(this._constructorName));for(var g=0;g<this._fields.length;g++){f.appendChild(document.createTextNode(" "));j(f,
plt.types.toDomNode(this._fields[g],c))}f.appendChild(document.createTextNode(")"));return f};F.prototype.isEqual=function(c,f){if(typeof c!="object")return false;if(!c._constructorName)return false;if(c._constructorName!=this._constructorName)return false;if(typeof c._fields==="undefined")return false;if(this._fields.length!=c._fields.length)return false;for(var g=0;g<this._fields.length;g++)if(!plt.types.isEqual(this._fields[g],c._fields[g],f))return false;return true};function R(c){plt.types.Struct.call(this,
"box",[c]);this._eqHashCode=plt.types.makeEqHashCode()}R.prototype=v(plt.types.Struct.prototype);R.prototype.unbox=function(){return this._fields[0]};R.prototype.set=function(c){this._fields[0]=c};plt.types.Logic={TRUE:true,FALSE:false};Boolean.prototype.toWrittenString=function(){if(this.valueOf())return"true";return"false"};Boolean.prototype.toDisplayedString=Boolean.prototype.toWrittenString;Boolean.prototype.isEqual=function(c){return this==c};plt.types.Char=function(c){this.val=c;this._eqHashCode=
plt.types.makeEqHashCode()};plt.types.Char.makeInstance=function(c){return new plt.types.Char(c)};plt.types.Char.prototype.toWrittenString=function(){return"#\\"+this.val};plt.types.Char.prototype.toDisplayedString=function(){return this.val};plt.types.Char.prototype.getValue=function(){return this.val};plt.types.Char.prototype.isEqual=function(c){return c instanceof plt.types.Char&&this.val==c.val};plt.types.Symbol=function(c){this.val=c;this._eqHashCode=plt.types.makeEqHashCode()};var B={};plt.types.Symbol.makeInstance=
function(c){c in B||(B[c]=new plt.types.Symbol(c));return B[c]};plt.types.Symbol.prototype.isEqual=function(c){return c instanceof plt.types.Symbol&&this.val==c.val};plt.types.Symbol.prototype.toString=function(){return this.val};plt.types.Symbol.prototype.toWrittenString=function(){return this.val};plt.types.Symbol.prototype.toDisplayedString=function(){return this.val};plt.types.Empty=function(){this._eqHashCode=plt.types.makeEqHashCode()};plt.types.Empty.EMPTY=new plt.types.Empty;plt.types.Empty.prototype.isEqual=
function(c){return c instanceof plt.types.Empty};plt.types.Empty.prototype.first=function(){throw new E("first can't be applied on empty.");};plt.types.Empty.prototype.rest=function(){throw new E("rest can't be applied on empty.");};plt.types.Empty.prototype.isEmpty=function(){return true};plt.types.Empty.prototype.toWrittenString=function(){return"empty"};plt.types.Empty.prototype.toDisplayedString=function(){return"empty"};plt.types.Empty.prototype.append=function(c){return c};plt.types.Cons=function(c,
f){this.f=c;this.r=f;this._eqHashCode=plt.types.makeEqHashCode()};plt.types.Cons.reverse=function(c){for(var f=plt.types.Empty.EMPTY;!c.isEmpty();){f=plt.types.Cons.makeInstance(c.first(),f);c=c.rest()}return f};plt.types.Cons.makeInstance=function(c,f){return new plt.types.Cons(c,f)};plt.types.Cons.prototype.isEqual=function(c,f){if(!(c instanceof plt.types.Cons))return plt.types.Logic.FALSE;return plt.types.isEqual(this.first(),c.first(),f)&&plt.types.isEqual(this.rest(),c.rest(),f)};plt.types.Cons.prototype.first=
function(){return this.f};plt.types.Cons.prototype.rest=function(){return this.r};plt.types.Cons.prototype.isEmpty=function(){return false};plt.types.Cons.prototype.append=function(c){if(c.isEmpty())return this;c=c;for(var f=plt.types.Cons.reverse(this);!f.isEmpty();){c=plt.types.Cons.makeInstance(f.first(),c);f=f.rest()}return c};plt.types.Cons.prototype.toWrittenString=function(c){c.put(this,true);for(var f=[],g=this;!g.isEmpty();){f.push(plt.types.toWrittenString(g.first(),c));g=g.rest()}return"("+
f.join(" ")+")"};plt.types.Cons.prototype.toDisplayedString=function(c){c.put(this,true);for(var f=[],g=this;!g.isEmpty();){f.push(plt.types.toDisplayedString(g.first(),c));g=g.rest()}return"("+f.join(" ")+")"};plt.types.Cons.prototype.toDomNode=function(c){c.put(this,true);var f=document.createElement("div");f.appendChild(document.createTextNode("("));for(var g=this;!g.isEmpty();){j(f,plt.types.toDomNode(g.first(),c));g=g.rest();g.isEmpty()||j(f,document.createTextNode(" "))}f.appendChild(document.createTextNode(")"));
return f};plt.types.Vector=function(c,f){this.elts=new Array(c);if(f)for(var g=0;g<c;g++)this.elts[g]=f[g];else for(g=0;g<c;g++)this.elts[g]=undefined;this._eqHashCode=plt.types.makeEqHashCode()};plt.types.Vector.makeInstance=function(c,f){return new plt.types.Vector(c,f)};plt.types.Vector.prototype.length=function(){return this.elts.length};plt.types.Vector.prototype.ref=function(c){return this.elts[c]};plt.types.Vector.prototype.set=function(c,f){this.elts[c]=f};plt.types.Vector.prototype.isEqual=
function(c,f){if(c!=null&&c!=undefined&&c instanceof plt.types.Vector){if(c.length()!=this.length())return false;for(var g=0;g<this.length();g++)if(!plt.types.isEqual(this.elts[g],c.elts[g],f))return false;return true}else return false};plt.types.Vector.prototype.toWrittenString=function(c){c.put(this,true);for(var f=[],g=0;g<this.length();g++)f.push(plt.types.toWrittenString(this.ref(g),c));return"#("+f.join(" ")+")"};plt.types.Vector.prototype.toDisplayedString=function(c){c.put(this,true);for(var f=
[],g=0;g<this.length();g++)f.push(plt.types.toDisplayedString(this.ref(g),c));return"#("+f.join(" ")+")"};plt.types.Vector.prototype.toDomNode=function(c){c.put(this,true);var f=document.createElement("div");f.appendChild(document.createTextNode("#("));for(var g=0;g<this.length();g++)j(f,plt.types.toDomNode(this.ref(g),c));f.appendChild(document.createTextNode(")"));return f};function C(c,f){for(;f!=0;){var g=c;c=f;f=g%f}return Math.abs(c)}function K(c,f){return Math.abs(c*f/C(c,f))}function O(c,
f){var g;if(isNaN(c)||!isFinite(c))throw new E("not a number: "+c);if(isNaN(f)||!isFinite(f))throw new E("not a number: "+f);for(;f!=0;){g=c;c=f;f=g%f}return c}plt.types.Rational=function(c,f){if(f==undefined)f=1;if(f==0)throw new E("cannot have zero denominator.");var g=O(Math.abs(c),Math.abs(f));this.n=c/g;this.d=f/g;this._eqHashCode=plt.types.makeEqHashCode()};plt.types.Rational.prototype.toWrittenString=function(){return this.d==1?this.n+"":this.n+"/"+this.d};plt.types.Rational.prototype.toDisplayedString=
plt.types.Rational.prototype.toWrittenString;plt.types.Rational.prototype.level=function(){return 0};plt.types.Rational.prototype.lift=function(c){if(c.level()==1)return n.makeInstance(this.n/this.d);if(c.level()==2)return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO);throw new E("invalid level of Number");};plt.types.Rational.prototype.isFinite=function(){return true};plt.types.Rational.prototype.isEqual=function(c){return this.equals(c)};plt.types.Rational.prototype.equals=function(c){return c instanceof
plt.types.Rational&&this.n==c.n&&this.d==c.d};plt.types.Rational.prototype.isInteger=function(){return this.d==1};plt.types.Rational.prototype.isRational=function(){return true};plt.types.Rational.prototype.isReal=function(){return true};plt.types.Rational.prototype.add=function(c){return plt.types.Rational.makeInstance(this.n*c.d+this.d*c.n,this.d*c.d)};plt.types.Rational.prototype.subtract=function(c){return plt.types.Rational.makeInstance(this.n*c.d-this.d*c.n,this.d*c.d)};plt.types.Rational.prototype.multiply=
function(c){return plt.types.Rational.makeInstance(this.n*c.n,this.d*c.d)};plt.types.Rational.prototype.divide=function(c){if(this.d*c.n==0)throw new E("division by zero");return plt.types.Rational.makeInstance(this.n*c.d,this.d*c.n)};plt.types.Rational.prototype.toExact=function(){return this};plt.types.Rational.prototype.isExact=function(){return true};plt.types.Rational.prototype.toFixnum=function(){return Math.floor(this.n/this.d)};plt.types.Rational.prototype.numerator=function(){return plt.types.Rational.makeInstance(this.n)};
plt.types.Rational.prototype.denominator=function(){return plt.types.Rational.makeInstance(this.d)};plt.types.Rational.prototype.toFloat=function(){return this.n/this.d};plt.types.Rational.prototype.toComplex=function(){return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO)};plt.types.Rational.prototype.greaterThan=function(c){return this.n*c.d>this.d*c.n};plt.types.Rational.prototype.greaterThanOrEqual=function(c){return this.n*c.d>=this.d*c.n};plt.types.Rational.prototype.lessThan=
function(c){return this.n*c.d<this.d*c.n};plt.types.Rational.prototype.lessThanOrEqual=function(c){return this.n*c.d<=this.d*c.n};plt.types.Rational.prototype.sqrt=function(){if(this.n>=0){var c=Math.sqrt(this.n),f=Math.sqrt(this.d);return Math.floor(c)==c&&Math.floor(f)==f?plt.types.Rational.makeInstance(c,f):n.makeInstance(c/f)}else{c=Math.sqrt(-this.n);f=Math.sqrt(this.d);return Math.floor(c)==c&&Math.floor(f)==f?plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.makeInstance(c,
f)):plt.types.Complex.makeInstance(plt.types.Rational.ZERO,n.makeInstance(c/f))}};plt.types.Rational.prototype.abs=function(){return plt.types.Rational.makeInstance(Math.abs(this.n),this.d)};plt.types.Rational.prototype.floor=function(){return plt.types.Rational.makeInstance(Math.floor(this.n/this.d),1)};plt.types.Rational.prototype.ceiling=function(){return plt.types.Rational.makeInstance(Math.ceil(this.n/this.d),1)};plt.types.Rational.prototype.conjugate=plt.types.Rational.prototype.abs;plt.types.Rational.prototype.magnitude=
plt.types.Rational.prototype.abs;plt.types.Rational.prototype.log=function(){return n.makeInstance(Math.log(this.n/this.d))};plt.types.Rational.prototype.angle=function(){if(0==this.n)return plt.types.Rational.ZERO;return this.n>0?plt.types.Rational.ZERO:n.pi};plt.types.Rational.prototype.atan=function(){return n.makeInstance(Math.atan(this.n/this.d))};plt.types.Rational.prototype.cos=function(){return n.makeInstance(Math.cos(this.n/this.d))};plt.types.Rational.prototype.sin=function(){return n.makeInstance(Math.sin(this.n/
this.d))};plt.types.Rational.prototype.expt=function(c){return n.makeInstance(Math.pow(this.n/this.d,c.n/c.d))};plt.types.Rational.prototype.exp=function(){return n.makeInstance(Math.exp(this.n/this.d))};plt.types.Rational.prototype.acos=function(){return n.makeInstance(Math.acos(this.n/this.d))};plt.types.Rational.prototype.asin=function(){return n.makeInstance(Math.asin(this.n/this.d))};plt.types.Rational.prototype.imag_dash_part=function(){return plt.types.Rational.ZERO};plt.types.Rational.prototype.real_dash_part=
function(){return this};plt.types.Rational.prototype.timesI=function(){return plt.types.Complex.makeInstance(plt.types.Rational.ZERO,this)};plt.types.Rational.prototype.round=function(){if(this.d==2){var c=this.n/this.d,f=Math.floor(c);c=Math.ceil(c);return f%2==0?plt.types.Rational.makeInstance(f):plt.types.Rational.makeInstance(c)}else return plt.types.Rational.makeInstance(Math.round(this.n/this.d))};plt.types.Rational.prototype.half=function(){return plt.types.Rational.makeInstance(this.n,this.d*
2)};plt.types.Rational.prototype.minus=function(){return plt.types.Rational.makeInstance(0-this.n,this.d)};var o={};plt.types.Rational.makeInstance=function(c,f){if(c==undefined)throw new E("n undefined");if(f==undefined)f=1;if(f<0){c=-c;f=-f}if(isNaN(c)||isNaN(f))return n.nan;if(!isFinite(f))return Rational.ZERO;if(!isFinite(c))return n.makeInstance(c);return f==1&&c in o?o[c]:new plt.types.Rational(c,f)};o={};(function(){var c;for(c=-500;c<500;c++)o[c]=new plt.types.Rational(c,1)})();plt.types.Rational.NEGATIVE_ONE=
o[-1];plt.types.Rational.ZERO=o[0];plt.types.Rational.ONE=o[1];plt.types.Rational.TWO=o[2];function n(c){this.n=c;this._eqHashCode=plt.types.makeEqHashCode()}plt.types.FloatPoint=n;var Q=new n(Number.NaN),W=new n(Number.POSITIVE_INFINITY),H=new n(Number.NEGATIVE_INFINITY);n.pi=new n(Math.PI);n.e=new n(Math.E);n.nan=Q;n.inf=W;n.neginf=H;n.makeInstance=function(c){if(isNaN(c))return n.nan;else if(c===Number.POSITIVE_INFINITY)return n.inf;else if(c===Number.NEGATIVE_INFINITY)return n.neginf;return new n(c)};
n.prototype.isFinite=function(){return isFinite(this.n)};n.prototype.toExact=function(){return plt.types.Rational.makeInstance(Math.floor(this.n),1)};n.prototype.isExact=function(){return false};n.prototype.level=function(){return 1};n.prototype.lift=function(){return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO)};n.prototype.toWrittenString=function(){return this.n==Number.POSITIVE_INFINITY?"+inf.0":this.n==Number.NEGATIVE_INFINITY?"-inf.0":this.n==Number.NaN?"+nan.0":this.n.toString()};
n.prototype.toDisplayedString=n.prototype.toWrittenString;n.prototype.isEqual=function(c){return c instanceof n&&(this.n==c.n||isNaN(this.n)&&isNaN(c.n))};n.prototype.equals=function(c){return c instanceof n&&this.n==c.n};n.prototype.isRational=function(){return this.isFinite()&&this.n==Math.floor(this.n)};n.prototype.isInteger=function(){return this.isFinite()&&this.n==Math.floor(this.n)};n.prototype.isReal=function(){return true};function M(c){return q.lessThan(c,plt.types.Rational.ZERO)?-1:q.greaterThan(c,
plt.types.Rational.ZERO)?1:0}n.prototype.add=function(c){return this.isFinite()&&c.isFinite()?n.makeInstance(this.n+c.n):isNaN(this.n)||isNaN(c.n)?Q:this.isFinite()&&!c.isFinite()?c:!this.isFinite()&&c.isFinite()?this:M(this)*M(c)==1?this:Q};n.prototype.subtract=function(c){return this.isFinite()&&c.isFinite()?n.makeInstance(this.n-c.n):isNaN(this.n)||isNaN(c.n)?Q:!this.isFinite()&&!c.isFinite()?M(this)==M(c)?Q:this:this.isFinite()?q.multiply(c,plt.types.Rational.NEGATIVE_ONE):this};n.prototype.multiply=
function(c){if(this.n==0||c.n==0)return plt.types.Rational.ZERO;return this.isFinite()&&c.isFinite()?n.makeInstance(this.n*c.n):isNaN(this.n)||isNaN(c.n)?Q:M(this)*M(c)==1?W:H};n.prototype.divide=function(c){if(this.isFinite()&&c.isFinite()){if(c.n==0)throw new E("division by zero");return n.makeInstance(this.n/c.n)}else if(isNaN(this.n)||isNaN(c.n))return Q;else if(!this.isFinite()&&!c.isFinite())return Q;else if(this.isFinite()&&!c.isFinite())return n.makeInstance(0);else if(!this.isFinite()&&c.isFinite())return M(this)*
M(c)==1?W:H};n.prototype.toFixnum=function(){return Math.floor(this.n)};n.prototype.numerator=function(){var c=this.n.toString();return(c=c.match(/^(.*)\.(.*)$/))?n.makeInstance(parseFloat(c[1]+c[2])):this};n.prototype.denominator=function(){var c=this.n.toString();return(c=c.match(/^(.*)\.(.*)$/))?n.makeInstance(Math.pow(10,c[2].length)):n.makeInstance(1)};n.prototype.toFloat=function(){return this.n};n.prototype.toComplex=function(){return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO)};
n.prototype.floor=function(){if(!isFinite(this.n))return this;return plt.types.Rational.makeInstance(Math.floor(this.n),1)};n.prototype.ceiling=function(){if(!isFinite(this.n))return this;return plt.types.Rational.makeInstance(Math.ceil(this.n),1)};n.prototype.greaterThan=function(c){return this.n>c.n};n.prototype.greaterThanOrEqual=function(c){return this.n>=c.n};n.prototype.lessThan=function(c){return this.n<c.n};n.prototype.lessThanOrEqual=function(c){return this.n<=c.n};n.prototype.sqrt=function(){if(this.n<
0){var c=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,n.makeInstance(Math.sqrt(-this.n)));return c}else return n.makeInstance(Math.sqrt(this.n))};n.prototype.abs=function(){return n.makeInstance(Math.abs(this.n))};n.prototype.log=function(){return this.n<0?this.toComplex().log():n.makeInstance(Math.log(this.n))};n.prototype.angle=function(){if(0==this.n)return plt.types.Rational.ZERO;return this.n>0?plt.types.Rational.ZERO:n.pi};n.prototype.atan=function(){return n.makeInstance(Math.atan(this.n))};
n.prototype.cos=function(){return n.makeInstance(Math.cos(this.n))};n.prototype.sin=function(){return n.makeInstance(Math.sin(this.n))};n.prototype.expt=function(c){if(this.n==1){c.isFinite()||isNaN(c.n);return this}else return n.makeInstance(Math.pow(this.n,c.n))};n.prototype.exp=function(){return n.makeInstance(Math.exp(this.n))};n.prototype.acos=function(){return n.makeInstance(Math.acos(this.n))};n.prototype.asin=function(){return n.makeInstance(Math.asin(this.n))};n.prototype.imag_dash_part=
function(){return plt.types.Rational.ZERO};n.prototype.real_dash_part=function(){return this};n.prototype.round=function(){if(isFinite(this.n))if(Math.abs(Math.floor(this.n)-this.n)==0.5){if(Math.floor(this.n)%2==0)return plt.types.Rational.makeInstance(Math.floor(this.n));return plt.types.Rational.makeInstance(Math.ceil(this.n))}else return plt.types.Rational.makeInstance(Math.round(this.n));else return this};n.prototype.conjugate=n.prototype.abs;n.prototype.magnitude=n.prototype.abs;n.prototype.minus=
function(){return n.makeInstance(0-this.n)};n.prototype.half=function(){return n.makeInstance(this.n/2)};n.prototype.timesI=function(){return plt.types.Complex.makeInstance(plt.types.Rational.ZERO,this)};plt.types.Complex=function(c,f){this.r=c;this.i=f;this._eqHashCode=plt.types.makeEqHashCode()};plt.types.Complex.makeInstance=function(c,f){if(typeof c=="number")c=c==Math.floor(c)?plt.types.Rational.makeInstance(c):n.makeInstance(c);if(typeof f=="number")f=f==Math.floor(f)?plt.types.Rational.makeInstance(f):
n.makeInstance(f);return c=new plt.types.Complex(c,f)};plt.types.Complex.prototype.toWrittenString=function(){return q.greaterThanOrEqual(this.i,plt.types.Rational.ZERO)?plt.types.toWrittenString(this.r)+"+"+plt.types.toWrittenString(this.i)+"i":plt.types.toWrittenString(this.r)+plt.types.toWrittenString(this.i)+"i"};plt.types.Complex.prototype.toDisplayedString=plt.types.Complex.prototype.toWrittenString;plt.types.Complex.prototype.isFinite=function(){return this.r.isFinite()&&this.i.isFinite()};
plt.types.Complex.prototype.isRational=function(){return this.r.isRational()&&q.equal(this.i,plt.types.Rational.ZERO)};plt.types.Complex.prototype.isInteger=function(){return this.r.isInteger()&&q.equal(this.i,plt.types.Rational.ZERO)};plt.types.Complex.prototype.toExact=function(){if(!this.isReal())throw new E("inexact->exact: expects argument of type real number");return this.r.toExact()};plt.types.Complex.prototype.isExact=function(){return this.r.isExact()&&this.i.isExact()};plt.types.Complex.prototype.level=
function(){return 2};plt.types.Complex.prototype.lift=function(){throw new E("Don't know how to lift Complex number");};plt.types.Complex.prototype.isEqual=function(c){return this.equals(c)};plt.types.Complex.prototype.equals=function(c){return c=c instanceof plt.types.Complex&&q.equal(this.r,c.r)&&q.equal(this.i,c.i)};plt.types.Complex.prototype.greaterThan=function(c){if(!this.isReal()||!c.isReal())throw new E(">: expects argument of type real number");return q.greaterThan(this.r,c.r)};plt.types.Complex.prototype.greaterThanOrEqual=
function(c){if(!this.isReal()||!c.isReal())throw new E(">: expects argument of type real number");return q.greaterThanOrEqual(this.r,c.r)};plt.types.Complex.prototype.lessThan=function(c){if(!this.isReal()||!c.isReal())throw new E(">: expects argument of type real number");return q.lessThan(this.r,c.r)};plt.types.Complex.prototype.lessThanOrEqual=function(c){if(!this.isReal()||!c.isReal())throw new E(">: expects argument of type real number");return q.lessThanOrEqual(this.r,c.r)};plt.types.Complex.prototype.abs=
function(){if(!q.equal(this.i,plt.types.Rational.ZERO).valueOf())throw new E("abs: expects argument of type real number");return this.r.abs()};plt.types.Complex.prototype.toFixnum=function(){if(!q.equal(this.i,plt.types.Rational.ZERO).valueOf())throw new E("toFixnum: expects argument of type real number");return this.r.toFixnum()};plt.types.Complex.prototype.numerator=function(){if(!this.isReal())throw new E("numerator: can only be applied to real number");return this.n.numerator()};plt.types.Complex.prototype.denominator=
function(){if(!this.isReal())throw new E("floor: can only be applied to real number");return this.n.denominator()};plt.types.Complex.prototype.toFloat=function(){if(!q.equal(this.i,plt.types.Rational.ZERO).valueOf())throw new E("toFloat: expects argument of type real number");return this.r.toFloat()};plt.types.Complex.prototype.toComplex=function(){return this};plt.types.Complex.prototype.add=function(c){return plt.types.Complex.makeInstance(q.add(this.r,c.r),q.add(this.i,c.i))};plt.types.Complex.prototype.subtract=
function(c){return plt.types.Complex.makeInstance(q.subtract(this.r,c.r),q.subtract(this.i,c.i))};plt.types.Complex.prototype.multiply=function(c){if(c.isReal())return plt.types.Complex.makeInstance(q.multiply(this.r,c.r),q.multiply(this.i,c.r));var f=q.subtract(q.multiply(this.r,c.r),q.multiply(this.i,c.i));c=q.add(q.multiply(this.r,c.i),q.multiply(this.i,c.r));if(q.equal(c,plt.types.Rational.ZERO))return f;return plt.types.Complex.makeInstance(f,c)};plt.types.Complex.prototype.divide=function(c){if(c.isReal())return plt.types.Complex.makeInstance(q.divide(this.r,
c.r),q.divide(this.i,c.r));var f=c.conjugate(),g=q.multiply(this,f).toComplex();c=q.multiply(c,f);return g=plt.types.Complex.makeInstance(q.divide(g.r,c),q.divide(g.i,c))};plt.types.Complex.prototype.conjugate=function(){var c=plt.types.Complex.makeInstance(this.r,q.subtract(plt.types.Rational.ZERO,this.i));return c};plt.types.Complex.prototype.magnitude=function(){var c=q.add(q.multiply(this.r,this.r),q.multiply(this.i,this.i));return c.sqrt()};plt.types.Complex.prototype.isReal=function(){return q.equal(this.i,
plt.types.Rational.ZERO)};plt.types.Complex.prototype.sqrt=function(){if(this.isReal())return this.r.sqrt();var c=q.add(this.magnitude(),this.r),f=c.half().sqrt();c=q.divide(this.i,q.multiply(c,n.makeInstance(2)).sqrt());return plt.types.Complex.makeInstance(f,c)};plt.types.Complex.prototype.log=function(){var c=this.magnitude(),f=this.angle();return c=q.add(c.log(),f.timesI())};plt.types.Complex.prototype.angle=function(){if(this.isReal())return this.r.angle();if(q.equal(plt.types.Rational.ZERO,
this.r)){var c=n.pi.half();return q.greaterThan(this.i,plt.types.Rational.ZERO)?c:c.minus()}else{c=q.divide(this.i.abs(),this.r.abs()).atan();return q.greaterThan(this.r,plt.types.Rational.ZERO)?q.greaterThan(this.i,plt.types.Rational.ZERO)?c:c.minus():q.greaterThan(this.i,plt.types.Rational.ZERO)?n.pi.subtract(c):c.subtract(n.pi)}};var r=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.ONE),y=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.NEGATIVE_ONE);
plt.types.Complex.prototype.atan=function(){if(q.equal(this,r)||q.equal(this,y))return n.makeInstance(Number.NEGATIVE_INFINITY);return q.multiply(r,q.multiply(n.makeInstance(0.5),q.divide(q.add(r,this),q.add(r,q.subtract(plt.types.Rational.ZERO,this))).log()))};plt.types.Complex.prototype.cos=function(){if(this.isReal())return this.r.cos();var c=this.timesI(),f=c.minus();return q.add(c.exp(),f.exp()).half()};plt.types.Complex.prototype.sin=function(){if(this.isReal())return this.r.sin();var c=this.timesI(),
f=c.minus(),g=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.TWO);c=q.subtract(c.exp(),f.exp());return g=q.divide(c,g)};plt.types.Complex.prototype.expt=function(c){c=q.multiply(c,this.log());return c.exp()};plt.types.Complex.prototype.exp=function(){var c=this.r.exp(),f=this.i.cos(),g=this.i.sin();return q.multiply(c,q.add(f,g.timesI()))};plt.types.Complex.prototype.acos=function(){if(this.isReal())return this.r.acos();var c=n.pi.half(),f=this.timesI(),g=q.subtract(plt.types.Rational.ONE,
this.multiply(this)).sqrt();f=q.add(f,g).log().timesI();return q.add(c,f)};plt.types.Complex.prototype.asin=function(){if(this.isReal())return this.r.asin();var c=q.subtract(plt.types.Rational.ONE,this.multiply(this));c=c.sqrt();return q.multiply(plt.types.Rational.TWO,q.divide(this,q.add(plt.types.Rational.ONE,c)).atan())};plt.types.Complex.prototype.ceiling=function(){if(!this.isReal())throw new E("ceiling: can only be applied to real number");return this.r.ceiling()};plt.types.Complex.prototype.floor=
function(){if(!this.isReal())throw new E("floor: can only be applied to real number");return this.r.floor()};plt.types.Complex.prototype.imag_dash_part=function(){return this.i};plt.types.Complex.prototype.real_dash_part=function(){return this.r};plt.types.Complex.prototype.round=function(){return this.r.round()};plt.types.Complex.prototype.timesI=function(){return this.multiply(plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.ONE))};plt.types.Complex.prototype.minus=function(){return plt.types.Complex.makeInstance(q.subtract(plt.types.Rational.ZERO,
this.r),q.subtract(plt.types.Rational.ZERO,this.i))};plt.types.Complex.prototype.half=function(){return plt.types.Complex.makeInstance(this.r.half(),this.i.half())};var q={};plt.types.NumberTower=q;q.toFixnum=function(c){return c.toFixnum()};q.toFloat=function(c){return c.toFloat()};q.abs=function(c){return c.abs()};q.isFinite=function(c){return c.isFinite()};q.toExact=function(c){return c.toExact()};q.add=function(c,f){if(c.level()<f.level())c=c.lift(f);if(f.level()<c.level())f=f.lift(c);return c.add(f)};
q.subtract=function(c,f){if(c.level()<f.level())c=c.lift(f);if(f.level()<c.level())f=f.lift(c);return c.subtract(f)};q.multiply=function(c,f){if(c.level()<f.level())c=c.lift(f);if(f.level()<c.level())f=f.lift(c);return c.multiply(f)};q.divide=function(c,f){if(c.level()<f.level())c=c.lift(f);if(f.level()<c.level())f=f.lift(c);return c.divide(f)};q.equal=function(c,f){if(c.level()<f.level())c=c.lift(f);if(f.level()<c.level())f=f.lift(c);return c.equals(f)};q.eqv=function(c,f){return c===f||c.level()===
f.level()&&c.equals(f)};q.approxEqual=function(c,f,g){return q.lessThan(q.abs(q.subtract(c,f)),g)};q.greaterThanOrEqual=function(c,f){if(c.level()<f.level())c=c.lift(f);if(f.level()<c.level())f=f.lift(c);if(!(c.isReal()&&f.isReal()))throw new E("greaterThanOrEqual: couldn't be applied to complex number");return c.greaterThanOrEqual(f)};q.lessThanOrEqual=function(c,f){if(c.level()<f.level())c=c.lift(f);if(f.level()<c.level())f=f.lift(c);if(!(c.isReal()&&f.isReal()))throw new E("lessThanOrEqual: couldn't be applied to complex number");
return c.lessThanOrEqual(f)};q.greaterThan=function(c,f){if(c.level()<f.level())c=c.lift(f);if(f.level()<c.level())f=f.lift(c);if(!(c.isReal()&&f.isReal()))throw new E("greaterThan: couldn't be applied to complex number");return c.greaterThan(f)};q.lessThan=function(c,f){if(c.level()<f.level())c=c.lift(f);if(f.level()<c.level())f=f.lift(c);if(!(c.isReal()&&f.isReal()))throw new E("lessThan: couldn't be applied to complex number");return c.lessThan(f)};q.modulo=function(c,f){c=plt.types.Rational.makeInstance(c.toFixnum()%
f.toFixnum(),1);if(q.lessThan(f,plt.types.Rational.ZERO)){if(q.lessThanOrEqual(c,plt.types.Rational.ZERO))return c;return q.add(c,f)}else{if(q.lessThan(c,plt.types.Rational.ZERO))return q.add(c,f);return c}};q.sqr=function(c){return q.multiply(c,c)};q.expt=function(c,f){if(c.level()<f.level())c=c.lift(f);if(f.level()<c.level())f=f.lift(c);return c.expt(f)};q.gcd=function(c,f){c=Math.abs(c.toFixnum());for(var g=0;g<f.length;g++)c=C(c,f[g].toFixnum());return plt.types.Rational.makeInstance(c)};q.lcm=
function(c,f){c=Math.abs(c.toFixnum());if(c==0)return plt.types.Rational.ZERO;for(var g=0;g<f.length;g++){if(f[g].toFixnum()==0)return plt.types.Rational.ZERO;c=K(c,f[g].toFixnum())}return plt.types.Rational.makeInstance(c)};plt.types.String=String;plt.types.String.makeInstance=function(c){return c.valueOf()};plt.types.String.prototype.isEqual=function(c){return this==c};var J=new RegExp('["\\\\]',"g");plt.types.String.prototype.toWrittenString=function(){return'"'+this.replace(J,function(c){return"\\"+
c})+'"'};plt.types.String.prototype.toDisplayedString=function(){return this};function P(){return new plt._Hashtable(function(c){return plt.types.getEqHashCode(c)},function(c,f){return c===f})}plt.types.makeLowLevelEqHash=P;function L(){this.hash=P();this._eqHashCode=plt.types.makeEqHashCode()}plt.types.EqHashTable=L;L.prototype.toWrittenString=function(){return"<hash>"};L.prototype.toDisplayedString=function(){return"<hash>"};L.prototype.isEqual=function(c){if(c==undefined||c==null||!(c instanceof
L))return false;if(this.hash.keys().length!=c.hash.keys().length)return false;for(var f=this.hash.keys(),g=0;g<f.length;g++)if(this.hash.get(f[g])!==c.hash.get(f[g]))return false;return true};function X(){this.hash=new plt._Hashtable(function(c){return plt.types.toWrittenString(c)},function(c,f){return plt.Kernel.equal_question_(c,f)});this._eqHashCode=plt.types.makeEqHashCode()}plt.types.EqualHashTable=X;X.prototype.toWrittenString=function(){return"<hash>"};X.prototype.toDisplayedString=function(){return"<hash>"};
X.prototype.isEqual=function(c,f){if(c==undefined||c==null||!(c instanceof X))return false;if(this.hash.keys().length!=c.hash.keys().length)return false;for(var g=this.hash.keys(),e=0;e<g.length;e++)if(!plt.Kernel.isEqual(this.hash.get(g[e]),c.hash.get(g[e]),f))return false;return true};plt.types.toWrittenString=function(c,f){f||(f=P());if(c&&f.containsKey(c))return"...";if(c==undefined||c==null)return"<undefined>";if(typeof c=="string")return c.toWrittenString();if(typeof c!="object"&&typeof c!=
"function")return c.toString();if(typeof c.toWrittenString!=="undefined")return c.toWrittenString(f);return typeof c.toDisplayedString!=="undefined"?c.toDisplayedString(f):c.toString()};plt.types.toDisplayedString=function(c,f){f||(f=P());if(c&&f.containsKey(c))return"...";if(c==undefined||c==null)return"<undefined>";if(typeof c=="string")return c.toDisplayedString();if(typeof c!="object"&&typeof c!="function")return c.toString();if(typeof c.toWrittenString!=="undefined")return c.toWrittenString(f);
return typeof c.toDisplayedString!=="undefined"?c.toDisplayedString(f):c.toString()};plt.types.toDomNode=function(c,f){f||(f=P());if(c&&f.containsKey(c))return document.createTextNode("...");if(c==undefined||c==null)return c=document.createTextNode("<undefined>");if(typeof c=="string")return c=document.createTextNode(c.toWrittenString());if(typeof c!="object"&&typeof c!="function")return c=document.createTextNode(c.toString());if(c.nodeType)return c;if(typeof c.toDomNode!=="undefined")return c.toDomNode(f);
if(typeof c.toWrittenString!=="undefined")return c=document.createTextNode(plt.types.toWrittenString(c,f));return c=typeof c.toDisplayedString!=="undefined"?document.createTextNode(plt.types.toDisplayedString(c,f)):document.createTextNode(c.toString())};function T(c){return c!=null&&c!=undefined&&(c instanceof plt.types.Rational||c instanceof plt.types.FloatPoint||c instanceof plt.types.Complex)}plt.types.isNumber=T;plt.types.isEqual=function(c,f,g){if(c===f)return true;if(T(c)&&T(f))return q.equal(c,
f);if(c==undefined||c==null)return f==undefined||f==null;if(typeof c=="object"&&typeof f=="object"&&g.find(c)===g.find(f))return true;else{typeof c=="object"&&typeof f=="object"&&g.merge(c,f);return c.isEqual(f,g)}};plt.types.liftToplevelToFunctionValue=function(c,f,g,e){if(!c._mobyLiftedFunction){var h=function(p){return c.apply(null,p.slice(0,g).concat([p.slice(g)]))};h._eqHashCode=plt.types.makeEqHashCode();h.isEqual=function(p){return this===p};h.toWrittenString=function(){return"<function:"+
f+">"};h.toDisplayedString=h.toWrittenString;h.procedureArity=e;c._mobyLiftedFunction=h}return c._mobyLiftedFunction};function U(c){this.msg=c}U.prototype.name="MobyError";U.prototype.toString=function(){return this.name+": "+this.msg};function Y(c,f){U.call(this,c);this.loc=f}Y.prototype=v(U.prototype);Y.prototype.name="MobyParserError";function w(c,f){U.call(this,c);this.stx=f}w.prototype=v(U.prototype);w.prototype.name="MobySyntaxError";function G(c){U.call(this,c)}G.prototype=v(U.prototype);G.prototype.name=
"MobyTypeError";function E(c){U.call(this,c)}E.prototype=v(U.prototype);E.prototype.name="MobyRuntimeError";function A(c){U.call(this,c)}A.prototype=v(E.prototype);A.prototype.name="MobyTestingError";plt.types.MobyError=U;plt.types.MobyParserError=Y;plt.types.MobySyntaxError=w;plt.types.MobyTypeError=G;plt.types.MobyRuntimeError=E;plt.types.MobyTestingError=A;plt.types.Box=R})();
plt._Hashtable=function(){function j(w){return typeof w==="undefined"}function v(w){return typeof w==="function"}function S(w){return typeof w==="string"}function F(w,G){return v(w[G])}function R(w){return F(w,"equals")}function B(w){return F(w,"hashCode")}function C(w){if(S(w))return w;else if(B(w)){var G=w.hashCode();if(!S(G))return C(G);return G}else return F(w,"toString")?w.toString():String(w)}function K(w,G){return w.equals(G)}function O(w,G){return R(G)?G.equals(w):w===G}function o(w,G){return w===
G}function n(w,G,E,A,c){for(var f,g=0,e=w.length;g<e;g++){f=w[g];if(c(G,E(f)))return A?[g,f]:true}return false}function Q(w,G){if(F(w,"splice"))w.splice(G,1);else if(G===w.length-1)w.length=G;else{var E=w.slice(G+1);w.length=G;for(var A=0,c=E.length;A<c;A++)w[G+A]=E[A]}}function W(w,G){if(w===null)throw new Error("null is not a valid "+G);else if(j(w))throw new Error(G+" must not be undefined");}var H="key",M="value";function r(w){W(w,H)}function y(w){W(w,M)}function q(w,G,E){this.entries=[];this.addEntry(w,
G);if(E!==null)this.getEqualityFunction=function(){return E}}function J(w){return w[0]}function P(w){return w[1]}q.prototype={getEqualityFunction:function(w){return R(w)?K:O},searchForEntry:function(w){return n(this.entries,w,J,true,this.getEqualityFunction(w))},getEntryForKey:function(w){return this.searchForEntry(w)[1]},getEntryIndexForKey:function(w){return this.searchForEntry(w)[0]},removeEntryForKey:function(w){var G=this.searchForEntry(w);if(G){Q(this.entries,G[0]);return true}return false},
addEntry:function(w,G){this.entries[this.entries.length]=[w,G]},size:function(){return this.entries.length},keys:function(w){for(var G=w.length,E=0,A=this.entries.length;E<A;E++)w[G+E]=this.entries[E][0]},values:function(w){for(var G=w.length,E=0,A=this.entries.length;E<A;E++)w[G+E]=this.entries[E][1]},containsKey:function(w){return n(this.entries,w,J,false,this.getEqualityFunction(w))},containsValue:function(w){return n(this.entries,w,P,false,o)}};function L(){}L.prototype=[];function X(w){return w[0]}
function T(w,G,E){return n(w,G,X,true,E)}function U(w,G){var E=w[G];if(E&&E instanceof L)return E[1];return null}function Y(w,G){var E=[],A={};w=v(w)?w:C;G=v(G)?G:null;this.put=function(c,f){r(c);y(f);var g=w(c),e=U(A,g);if(e){var h=e.getEntryForKey(c);if(h)h[1]=f;else e.addEntry(c,f)}else{var p=new L;p[0]=g;p[1]=new q(c,f,G);E[E.length]=p;A[g]=p}};this.get=function(c){r(c);var f=w(c),g=U(A,f);if(g){var e=g.getEntryForKey(c);if(e)return e[1]}return null};this.containsKey=function(c){r(c);var f=w(c),
g=U(A,f);if(g)return g.containsKey(c);return false};this.containsValue=function(c){y(c);for(var f=0,g=E.length;f<g;f++)if(E[f][1].containsValue(c))return true;return false};this.clear=function(){E.length=0;A={}};this.isEmpty=function(){return E.length===0};this.keys=function(){for(var c=[],f=0,g=E.length;f<g;f++)E[f][1].keys(c);return c};this.values=function(){for(var c=[],f=0,g=E.length;f<g;f++)E[f][1].values(c);return c};this.remove=function(c){r(c);var f=w(c),g=U(A,f);if(g)if(g.removeEntryForKey(c))if(g.size()===
0){var e=T(E,f,g.getEqualityFunction(c));Q(E,e[0]);delete A[f]}};this.size=function(){for(var c=0,f=0,g=E.length;f<g;f++)c+=E[f][1].size();return c}}return Y}();plt.Kernel={};
(function(){var j=plt.types.NumberTower,v=plt.types.MobySyntaxError,S=plt.types.MobyTypeError,F=plt.types.MobyRuntimeError,R=plt.types.MobyTestingError;if(!Array.indexOf)Array.prototype.indexOf=function(b){for(var d=0;d<this.length;d++)if(this[d]==b)return d;return-1};function B(b,d,m){b.addEventListener?b.addEventListener(d,m,false):b.attachEvent("on"+d,m,false)}function C(b,d,m){b.addEventListener?b.removeEventListener(d,m,false):b.detachEvent("on"+d,m,false)}function K(b){function d(){}d.prototype=
b;return new d}function O(){this.parentMap=plt.types.makeLowLevelEqHash()}O.prototype.find=function(b){var d=this.parentMap.containsKey(b)?this.parentMap.get(b):b;if(d===b)return d;else{d=this.find(d);this.parentMap.put(b,d);return d}};O.prototype.merge=function(b,d){this.parentMap.put(this.find(b),this.find(d))};var o=plt.types.isNumber;function n(b){return b!=null&&b!=undefined&&b instanceof plt.types.Symbol}function Q(b){return b!=null&&b!=undefined&&b instanceof plt.types.Char}function W(b){return stx_question_(b)}
function H(b){return typeof b=="string"}function M(b){return b==plt.types.Logic.TRUE||b==plt.types.Logic.FALSE}function r(b){return b!=null&&b!=undefined&&b instanceof plt.types.Cons}function y(b){return b!=null&&b!=undefined&&b instanceof plt.types.Empty}function q(b){return o(b)&&b.isReal()}function J(b){return o(b)&&b.isRational()}function P(b){return o(b)}function L(b){return typeof b=="function"}function X(b){return o(b)&&b.isInteger()}function T(b){return o(b)&&b.isInteger()&&b.toFixnum()>=
0}function U(b){for(var d=0;d<b.length;d++)if(!(b[d]>="a"&&b[d]<="z"||b[d]>="A"&&b[d]<="Z"))return false;return true}var Y=function(){var b=/^\s*$/;return function(d){return d.match(b)?true:false}}();function w(b){return b!=null&&b!=undefined&&b instanceof plt.types.Vector}function G(b,d){for(var m=0;m<b.length;m++)d.apply(b[m],[b[m],m])}function E(b,d,m,u){if(!b(d,m).valueOf())return false;if(u.length==0)return true;if(!b(m,u[0]).valueOf())return false;for(d=0;d<u.length-1;d++)if(!b(u[d],u[d+1]).valueOf())return false;
return true}function A(b,d,m){var u=d;for(d=0;d<m.length;d++)b(u,m[d]).valueOf()||(u=m[d]);return u}function c(b){return b!=null&&b!=undefined&&(b instanceof plt.types.Cons||b instanceof plt.types.Empty)}function f(b){var d=["th","st","nd","rd","th","th","th","th","th","th"];return Math.floor(b/10)%10==1?b+"th":b+d[b%10]}function g(b,d,m,u){return plt.Kernel.format("~a: expects type <~a> as ~a argument, given: ~s",[b,d,f(m),u])}function e(b,d,m,u,I){if(!d(b))throw new S(g(m,u,I,b));}function h(b,
d,m){if(!c(b))throw new S(g(d,"list",m,b));}function p(b,d,m,u,I){if(!c(b))throw new S(g(m,"listof "+u,I,b));for(;!b.isEmpty();){if(!d(b.first()))throw new S(g(m,"listof "+u,I,b));b=b.rest()}}function i(b,d,m,u){return function(I,Z,ea){e(I,b,u,d,1);e(Z,b,u,d,2);G(ea,function(ka,na){e(ka,b,u,d,na+3)});return m(I,Z,ea)}}function x(b,d){return i(o,"number",function(m,u,I){return E(b,m,u,I)},d)}function N(b,d){return i(Q,"char",function(m,u,I){return E(b,m,u,I)},d)}function $(b,d){return i(H,"string",
function(m,u,I){return E(b,m,u,I)},d)}plt.Kernel={_heir:K,pi:plt.types.FloatPoint.pi,e:plt.types.FloatPoint.e,struct_question_:function(b){return b!=null&&b!=undefined&&b instanceof plt.types.Struct},number_question_:function(b){return o(b)},equal_question_:function(b,d){return plt.types.isEqual(b,d,new O)},equal_tilde__question_:function(b,d,m){e(m,o,"equal~?","number",3);return o(b)&&o(d)?j.approxEqual(b,d,m):plt.types.isEqual(b,d,new O)},eq_question_:function(b,d){return b==d},eqv_question_:function(b,
d){if(o(b)&&o(d))return j.eqv(b,d);else if(Q(b)&&Q(d))return b.getValue()==d.getValue();return b===d},identity:function(b){return b},cons:function(b,d){h(d,"cons",2);return plt.types.Cons.makeInstance(b,d)},first:function(b){h(b,"first",1);return b.first()},rest:function(b){h(b,"rest",1);return b.rest()},second:function(b){h(b,"second",1);return b.rest().first()},third:function(b){h(b,"third",1);return b.rest().rest().first()},fourth:function(b){h(b,"fourth",1);return b.rest().rest().rest().first()},
fifth:function(b){h(b,"fifth",1);return b.rest().rest().rest().rest().first()},random:function(b){e(b,X,"random","integer",1);return plt.types.Rational.makeInstance(Math.floor(j.toFixnum(b)*Math.random()),1)},current_dash_seconds:function(){return plt.types.Rational.makeInstance(Math.floor((new Date).getTime()/1000))},floor:function(b){e(b,o,"floor","number",1);return b.floor()},ceiling:function(b){e(b,o,"ceiling","number",1);return b.ceiling()},sqrt:function(b){e(b,o,"sqrt","number",1);return b.sqrt()},
integer_dash_sqrt:function(b){e(b,X,"integer-sqrt","integer",1);b=b.sqrt();return J(b)?plt.types.Rational.makeInstance(b.toFixnum()):q(b)?plt.types.Rational.makeInstance(b.toFixnum()):plt.types.Complex.makeInstance(plt.types.Rational.makeInstance(plt.Kernel.real_dash_part(b).toFixnum()),plt.types.Rational.makeInstance(plt.Kernel.imag_dash_part(b).toFixnum()))},sqr:function(b){e(b,o,"sqr","number",1);return j.sqr(b)},sin:function(b){e(b,o,"sin","number",1);return b.sin()},cos:function(b){e(b,o,"cos",
"number",1);return b.cos()},modulo:function(b,d){e(b,o,"modulo","number",1);e(d,o,"modulo","number",2);return j.modulo(b,d)},zero_question_:function(b){e(b,o,"zero?","number",1);return j.equal(b,plt.types.Rational.ZERO)},_equal__tilde_:function(b,d,m){e(b,o,"=~","number",1);e(d,o,"=~","number",2);e(m,o,"=~","number",3);return j.approxEqual(b,d,m)},abs:function(b){e(b,o,"abs","number",1);return j.abs(b)},add1:function(b){e(b,o,"add1","number",1);return j.add(b,plt.types.Rational.ONE)},sub1:function(b){e(b,
o,"sub1","number",1);return j.subtract(b,plt.types.Rational.ONE)},_plus_:function(b){G(b,function(u,I){e(u,o,"+","number",I+1)});var d,m=plt.types.Rational.ZERO;for(d=0;d<b.length;d++)m=j.add(m,b[d]);return m},_dash_:function(b,d){e(b,o,"-","number",1);G(d,function(u,I){e(u,o,"-","number",I+2)});if(d.length==0)return j.subtract(plt.types.Rational.ZERO,b);var m=b;for(b=0;b<d.length;b++)m=j.subtract(m,d[b]);return m},_star_:function(b){G(b,function(u,I){e(u,o,"*","number",I+1)});var d,m=plt.types.Rational.ONE;
for(d=0;d<b.length;d++)m=j.multiply(m,b[d]);return m},_slash_:function(b,d){e(b,o,"/","number",1);G(d,function(u,I){e(u,o,"/","number",I+2)});var m=b;if(d.length==0)return j.divide(plt.types.Rational.ONE,m);else{for(b=0;b<d.length;b++)m=j.divide(m,d[b]);return m}},_equal_:x(j.equal,"="),_greaterthan__equal_:x(j.greaterThanOrEqual,">="),_lessthan__equal_:x(j.lessThanOrEqual,"<="),_greaterthan_:x(j.greaterThan,">"),_lessthan_:x(j.lessThan,"<"),min:function(b,d){e(b,o,"min","number",1);G(d,function(m,
u){e(this,o,"min","number",u+2)});return A(j.lessThanOrEqual,b,d)},max:function(b,d){e(b,o,"max","number",1);G(d,function(m,u){e(this,o,"max","number",u+2)});return A(j.greaterThanOrEqual,b,d)},lcm:function(b,d){e(b,X,"lcm","number",1);G(d,function(m,u){e(this,X,"lcm","number",u+2)});return j.lcm(b,d)},gcd:function(b,d){e(b,X,"gcd","number",1);G(d,function(m,u){e(this,X,"gcd","number",u+2)});return j.gcd(b,d)},exact_dash__greaterthan_inexact:function(b){e(b,o,"exact->inexact","number",1);return plt.types.FloatPoint.makeInstance(b.toFloat())},
inexact_dash__greaterthan_exact:function(b){e(b,o,"inexact->exact","number",1);return j.toExact(b)},exact_question_:function(b){e(b,o,"exact?","number",1);return b.isExact()},inexact_question_:function(b){e(b,o,"inexact?","number",1);return!b.isExact()},rational_question_:function(b){return o(b)&&b.isRational()},number_dash__greaterthan_string:function(b){e(b,o,"number->string","number",1);return plt.types.String.makeInstance(plt.types.toWrittenString(b))},conjugate:function(b){e(b,o,"conjugate",
"number",1);return b.conjugate()},magnitude:function(b){e(b,o,"magnitude","number",1);return b.magnitude()},log:function(b){e(b,o,"log","number",1);return b.log()},angle:function(b){e(b,o,"angle","number",1);return b.angle()},atan:function(b,d){if(d.length==0){e(b,o,"atan","number",1);return b.atan()}else if(d.length==1){e(b,q,"atan","number",1);e(d[0],q,"atan","number",2);return plt.types.FloatPoint.makeInstance(Math.atan2(j.toFloat(b),j.toFloat(d[0])))}else throw new F(plt.Kernel.format("atan: expects 1 to 2 arguments, given ~a.",
[plt.types.Rational.makeInstance(d.length)]));},expt:function(b,d){e(b,o,"expt","number",1);e(d,o,"expt","number",2);return j.expt(b,d)},exp:function(b){e(b,o,"exp","number",1);return b.exp()},acos:function(b){e(b,o,"acos","number",1);return b.acos()},asin:function(b){e(b,o,"asin","number",1);return b.asin()},tan:function(b){e(b,o,"tan","number",1);return j.divide(b.sin(),b.cos())},complex_question_:function(b){return P(b)},cosh:function(b){e(b,o,"cosh","number",1);return this._plus_([this.exp(b),
this.exp(b.minus())]).half()},sinh:function(b){e(b,o,"sinh","number",1);return j.subtract(this.exp(b),this.exp(b.minus())).half()},denominator:function(b){e(b,J,"denominator","rational",1);return b.denominator()},numerator:function(b){e(b,J,"numerator","rational",1);return b.numerator()},odd_question_:function(b){e(b,o,"odd?","number",1);return Math.abs(b.toFixnum()%2)==1},even_question_:function(b){e(b,o,"even?","number",1);return Math.abs(b.toFixnum()%2)==0},positive_question_:function(b){e(b,o,
"positive?","number",1);return this._greaterthan_(b,plt.types.Rational.ZERO,[])},negative_question_:function(b){e(b,o,"negative?","number",1);return this._lessthan_(b,plt.types.Rational.ZERO,[])},imag_dash_part:function(b){e(b,o,"imag-part","number",1);return b.imag_dash_part()},real_dash_part:function(b){e(b,o,"real-part","number",1);return b.real_dash_part()},make_dash_polar:function(b,d){if(j.equal(d,plt.types.Rational.ZERO))return b;var m=j.multiply(b,d.cos());b=j.multiply(b,d.sin());return plt.types.Complex.makeInstance(m,
b)},integer_question_:function(b){return X(b)},make_dash_rectangular:function(b,d){return plt.types.Complex.makeInstance(b,d)},quotient:function(b,d){e(b,X,"quotient","integer",1);e(d,X,"quotient","integer",2);b=j.divide(b,d);return plt.Kernel.positive_question_(b)?plt.types.Rational.makeInstance(b.floor().toFixnum(),1):plt.types.Rational.makeInstance(b.ceiling().toFixnum(),1)},remainder:function(b,d){e(b,o,"remainder","number",1);e(d,o,"remainder","number",2);return plt.types.Rational.makeInstance(b.toFixnum()%
d.toFixnum(),1)},real_question_:function(b){return q(b)},round:function(b){e(b,o,"round","number",1);return b.round()},sgn:function(b){e(b,o,"sgn","number",1);if(this.positive_question_(b).valueOf())return plt.types.Rational.ONE;return this.negative_question_(b).valueOf()?plt.types.Rational.NEGATIVE_ONE:plt.types.Rational.ZERO},boolean_equal__question_:function(b,d){e(b,M,"boolean=?","boolean",1);e(d,M,"boolean=?","boolean",2);return b==d},boolean_question_:function(b){return M(b)},false_question_:function(b){return b==
plt.types.Logic.FALSE},not:function(b){if(!b||b===plt.types.Logic.FALSE)return plt.types.Logic.TRUE;return plt.types.Logic.FALSE},symbol_dash__greaterthan_string:function(b){e(b,n,"symbol->string","symbol",1);return plt.types.String.makeInstance(b.val)},symbol_equal__question_:function(b,d){e(b,n,"symbol=?","symbol",1);e(d,n,"symbol=?","symbol",2);return b.val==d.val},symbol_question_:function(b){return n(b)},append:function(b){var d;for(d=0;d<b.length;d++)h(b[d],"append",d+1);if(b.length==0)return plt.types.Empty.EMPTY;
var m=b[0];for(d=1;d<b.length;d++)m=m.append(b[d]);return m},reverse:function(b){h(b,"reverse",1);return plt.types.Cons.reverse(b)},assq:function(b,d){for(h(d,"assq",2);!d.isEmpty()&&!plt.Kernel.eq_question_(b,d.first().first());)d=d.rest();return d.isEmpty()?plt.types.Logic.FALSE:d.first()},caaar:function(b){h(b,"caaar",1);return b.first().first().first()},caadr:function(b){h(b,"caadr",1);return b.first().first().rest()},caar:function(b){h(b,"caar",1);return b.first().first()},cadar:function(b){h(b,
"cadar",1);return b.first().rest().first()},cadddr:function(b){h(b,"cadddr",1);return b.rest().rest().rest().first()},caddr:function(b){h(b,"caddr",1);return b.rest().rest().first()},cadr:function(b){h(b,"cadr",1);return b.rest().first()},car:function(b){h(b,"car",1);return b.first()},cdaar:function(b){h(b,"cdaar",1);return b.first().first().rest()},cdadr:function(b){h(b,"cdadr",1);return b.rest().first().rest()},cdar:function(b){h(b,"cdar",1);return b.first().rest()},cddar:function(b){h(b,"cddar",
1);return b.first().rest().rest()},cdddr:function(b){h(b,"cdddr",1);return b.rest().rest().rest()},cddr:function(b){h(b,"cddr",1);return b.rest().rest()},cdr:function(b){h(b,"cdr",1);return b.rest()},null_question_:function(b){return y(b)},empty_question_:function(b){return y(b)},pair_question_:function(b){return r(b)},cons_question_:function(b){return r(b)},list_question_:function(b){return c(b)},sixth:function(b){h(b,"sixth",1);return b.rest().rest().rest().rest().rest().first()},seventh:function(b){h(b,
"seventh",1);return b.rest().rest().rest().rest().rest().rest().first()},eighth:function(b){h(b,"eighth",1);return b.rest().rest().rest().rest().rest().rest().rest().first()},set_dash_car_bang_:function(b,d){h(b,"set-car!",1);b.f=d},set_dash_cdr_bang_:function(b,d){h(b,"set-cdr!",1);h(d,"set-cdr!",2);b.r=d},length:function(b){h(b,"length",1);for(var d=plt.types.Rational.ZERO;!b.isEmpty();b=b.rest())d=plt.Kernel.add1(d);return d},list:function(b){for(var d=plt.types.Empty.EMPTY,m=b.length-1;m>=0;m--)d=
plt.types.Cons.makeInstance(b[m],d);return d},list_star_:function(b,d){var m=d.pop();if(m==undefined||!m instanceof plt.types.Cons)throw new S("list*: "+m+" not a list");d.unshift(b);return plt.Kernel.append([plt.Kernel.list(d),m])},list_dash_ref:function(b,d){h(b,"list-ref",1);e(d,T,"list-ref","natural",2);for(var m=plt.types.Rational.ZERO;plt.Kernel._lessthan_(m,d,[]);m=plt.Kernel.add1(m))if(b.isEmpty())throw new F("list-ref: index too small");else b=b.rest();return b.first()},remove:function(b,
d){h(d,"member",2);for(var m=d,u=new O,I=plt.types.Empty.EMPTY;!d.isEmpty();)if(plt.types.isEqual(b,d.first(),u).valueOf())return plt.Kernel.append([plt.Kernel.reverse(I),d.rest()]);else{I=plt.types.Cons.makeInstance(d.first(),I);d=d.rest()}return m},member:function(b,d){h(d,"member",2);for(var m=new O;!d.isEmpty();){if(plt.types.isEqual(b,d.first(),m).valueOf())return plt.types.Logic.TRUE;d=d.rest()}return plt.types.Logic.FALSE},memq:function(b,d){for(h(d,"memq",2);!d.isEmpty();){if(plt.Kernel.eq_question_(b,
d.first()).valueOf())return d;d=d.rest()}return plt.types.Logic.FALSE},memv:function(b,d){for(h(d,"memv",2);!d.isEmpty();){if(plt.Kernel.eqv_question_(b,d.first()).valueOf())return d;d=d.rest()}return plt.types.Logic.FALSE},memf:function(b,d){e(b,L,"memf","function",1);for(h(d,"memf",2);!d.isEmpty();){if(b([d.first()]))return d;d=d.rest()}return plt.types.Logic.FALSE},compose:function(b){return plt.types.liftToplevelToFunctionValue(function(d){for(var m=b.length-1;m>=0;m--)d=plt.Kernel.apply(b[m],
plt.types.Cons.makeInstance(d,plt.types.Empty.EMPTY),[]);return d},plt.types.String.makeInstance("composed"),1,plt.types.Rational.makeInstance(1))},string_dash__greaterthan_number:function(b){e(b,H,"string->number","string",1);try{var d=plt.reader.readSchemeExpressions(b,"");if(j.equal(plt.Kernel.length(d),plt.types.Rational.ONE)){var m=stx_dash_e(d.first());return o(m)?m:plt.types.Logic.FALSE}else return plt.types.Logic.FALSE}catch(u){return plt.types.Logic.FALSE}},string_dash__greaterthan_symbol:function(b){e(b,
H,"string->symbol","string",1);return plt.types.Symbol.makeInstance(b)},string_dash__greaterthan_int:function(b){e(b,H,"string->int","string",1);return plt.types.Rational.makeInstance(b.toString().charCodeAt(0),1)},string_dash_append:function(b){G(b,function(d,m){e(d,H,"string-append","string",m+1)});return plt.types.String.makeInstance(b.join(""))},replicate:function(b,d){e(b,T,"replicate","natural",1);e(d,H,"replicate","string",2);for(var m=[],u=0;u<b.toFixnum();u++)m.push(d);return plt.types.String.makeInstance(m.join(""))},
string_equal__question_:$(function(b,d){return b==d},"string=?"),string_lessthan__equal__question_:$(function(b,d){return b<=d},"string<=?"),string_lessthan__question_:$(function(b,d){return b<d},"string<?"),string_greaterthan__equal__question_:$(function(b,d){return b>=d},"string>=?"),string_greaterthan__question_:$(function(b,d){return b>d},"string>?"),string_dash_ci_equal__question_:$(function(b,d){return b.toUpperCase()==d.toUpperCase()},"string-ci=?"),string_dash_ci_lessthan__equal__question_:$(function(b,
d){return b.toUpperCase()<=d.toUpperCase()},"string-ci<=?"),string_dash_ci_lessthan__question_:$(function(b,d){return b.toUpperCase()<d.toUpperCase()},"string-ci<?"),string_dash_ci_greaterthan__question_:$(function(b,d){return b.toUpperCase()>d.toUpperCase()},"string-ci>?"),string_dash_ci_greaterthan__equal__question_:$(function(b,d){return b.toUpperCase()>=d.toUpperCase()},"string-ci>=?"),string_dash_copy:function(b){e(b,H,"string-copy","string",1);return b.substring(0,b.length)},string_dash_length:function(b){e(b,
H,"string-length","string",1);return plt.types.Rational.makeInstance(b.length,1)},string_dash_ref:function(b,d){e(b,H,"string-ref","string",1);e(d,T,"string-ref","natural",2);if(d.toFixnum()>=b.length)throw new F("string-ref: index >= length");return plt.types.Char.makeInstance(b.charAt(d.toFixnum()))},string_dash_ith:function(b,d){e(b,H,"string-ith","string",1);e(d,T,"string-ith","natural",2);if(d.toFixnum()>=b.length)throw new F("string-ith: index >= string length");return plt.types.String.makeInstance(b.substring(d.toFixnum(),
d.toFixnum()+1))},int_dash__greaterthan_string:function(b){e(b,X,"int->string","integer",1);return plt.types.String.makeInstance(String.fromCharCode(b.toFixnum()))},string_question_:function(b){return H(b)},substring:function(b,d,m){e(b,H,"substring","string",1);e(d,T,"substring","natural",2);e(m,T,"substring","natural",3);if(d.toFixnum()>m.toFixnum())throw new F("substring: begin > end");if(m.toFixnum()>b.length)throw new F("substring: end > length");return String.makeInstance(b.substring(d.toFixnum(),
m.toFixnum()))},char_question_:function(b){return Q(b)},char_dash__greaterthan_integer:function(b){e(b,Q,"char->integer","char",1);b=new String(b.val);return plt.types.Rational.makeInstance(b.charCodeAt(0),1)},integer_dash__greaterthan_char:function(b){e(b,X,"integer->char","integer",1);b=String.fromCharCode(b.toFixnum());return plt.types.Char.makeInstance(b)},char_equal__question_:N(function(b,d){return b.val==d.val},"char=?"),char_lessthan__question_:N(function(b,d){return b.val<d.val},"char<?"),
char_lessthan__equal__question_:N(function(b,d){return b.val<=d.val},"char<=?"),char_greaterthan__question_:N(function(b,d){return b.val>d.val},"char>?"),char_greaterthan__equal__question_:N(function(b,d){return b.val>=d.val},"char>=?"),char_dash_ci_equal__question_:N(function(b,d){return b.val.toUpperCase()==d.val.toUpperCase()},"char-ci=?"),char_dash_ci_lessthan__question_:N(function(b,d){return b.val.toUpperCase()<d.val.toUpperCase()},"char-ci<?"),char_dash_ci_lessthan__equal__question_:N(function(b,
d){return b.val.toUpperCase()<=d.val.toUpperCase()},"char-ci<=?"),char_dash_ci_greaterthan__question_:N(function(b,d){return b.val.toUpperCase()>d.val.toUpperCase()},"char-ci>?"),char_dash_ci_greaterthan__equal__question_:N(function(b,d){return b.val.toUpperCase()>=d.val.toUpperCase()},"char-ci>=?"),char_dash_numeric_question_:function(b){e(b,Q,"char-numeric?","char",1);b=b.val;return b>="0"&&b<="9"},char_dash_alphabetic_question_:function(b){e(b,Q,"char-alphabetic?","char",1);b=b.val;return U(b)},
char_dash_whitespace_question_:function(b){e(b,Q,"char-whitespace?","char",1);b=b.val;return Y(b)},char_dash_upper_dash_case_question_:function(b){e(b,Q,"char-upper-case?","char",1);return U(b.val)&&b.val.toUpperCase()==b.val},char_dash_lower_dash_case_question_:function(b){e(b,Q,"char-lower-case?","char",1);return U(b.val)&&b.val.toLowerCase()==b.val},char_dash_upcase:function(b){e(b,Q,"char-upcase","char",1);return plt.types.Char.makeInstance(b.val.toUpperCase())},char_dash_downcase:function(b){e(b,
Q,"char-downcase","char",1);return plt.types.Char.makeInstance(b.val.toLowerCase())},list_dash__greaterthan_string:function(b){p(b,Q,"list->string","char",1);for(var d="";!b.isEmpty();){d+=b.first().val;b=b.rest()}return plt.types.String.makeInstance(d)},implode:function(b){p(b,H,"implode","string",1);for(var d=[];!b.isEmpty();){d.push(b.first().toString());b=b.rest()}return plt.types.String.makeInstance(d.join(""))},string_dash_numeric_question_:function(b){e(b,H,"string-numeric?","string",1);for(var d=
0;d<b.length;d++)if(b[d]<"0"||b[d]>"9")return plt.types.Logic.FALSE;return plt.types.Logic.TRUE},string_dash_alphabetic_question_:function(b){e(b,H,"string-alphabetic?","string",1);return U(b)?plt.types.Logic.TRUE:plt.types.Logic.FALSE},string_dash_whitespace_question_:function(b){e(b,H,"string-whitespace?","string",1);return Y(b)?plt.types.Logic.TRUE:plt.types.Logic.FALSE},string_dash_upper_dash_case_question_:function(b){e(b,H,"string-upper-case?","string",1);return U(b)&&b.toUpperCase()==b},string_dash_lower_dash_case_question_:function(b){e(b,
H,"string-lower-case?","string",1);return U(b)&&b.toLowerCase()==b},string:function(b){G(b,function(u,I){e(this,Q,"string","char",I+1)});for(var d=[],m=0;m<b.length;m++)d.push(b[m].val);return String.makeInstance(d.join(""))},make_dash_string:function(b,d){e(b,T,"make-string","natural",1);e(d,Q,"make-string","char",2);var m="";d=d.val;for(var u=plt.types.Rational.ZERO;plt.Kernel._lessthan_(u,b,[]);u=plt.Kernel.add1(u))m+=d;return plt.types.String.makeInstance(m)},string_dash__greaterthan_list:function(b){e(b,
H,"string->list","string",1);b=b;for(var d=plt.types.Empty.EMPTY,m=b.length-1;m>=0;m--)d=plt.types.Cons.makeInstance(plt.types.Char.makeInstance(b.charAt(m)),d);return d},explode:function(b){e(b,H,"explode","string",1);b=b;for(var d=plt.types.Empty.EMPTY,m=b.length-1;m>=0;m--)d=plt.types.Cons.makeInstance(plt.types.String.makeInstance(b.charAt(m)),d);return d}};plt.Kernel.isEqual=plt.types.isEqual;plt.Kernel._dumpKernelSymbols=function(){var b=plt.types.Empty.EMPTY;for(var d in plt.Kernel)if(plt.Kernel.hasOwnProperty(d))b=
plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance(d),b);return b};plt.Kernel.openInputStx=function(){throw new F("open-input-stx currently unsupported");};plt.Kernel.makeHashEq=function(){return new plt.types.EqHashTable};plt.Kernel.makeHash=function(){return new plt.types.EqualHashTable};plt.Kernel.hashSetBang=function(b,d,m){e(b,ba,"hash-set!","hash",1);b.hash.put(d,m)};plt.Kernel.hashRef=function(b,d,m){e(b,ba,"hash-ref","hash",1);if(b.hash.containsKey(d))return b.hash.get(d);else{if(L(m))return m([]);
return m}};plt.Kernel.hashRemoveBang=function(b,d){e(b,ba,"hash-remove!","hash",1);b.hash.remove(d)};plt.Kernel.hashMap=function(b,d){e(b,ba,"hash-map","hash",1);for(var m=plt.types.Empty.EMPTY,u=b.hash.keys(),I=0;I<u.length;I++){var Z=b.hash.get(u[I]);m=plt.Kernel.cons(d([u[I],Z]),m)}return m};plt.Kernel.hashForEach=function(b,d){e(b,ba,"hash-map","hash",1);for(var m=b.hash.keys(),u=0;u<m.length;u++){var I=b.hash.get(m[u]);d([m[u],I])}};function ba(b){return b!==null&&b!==undefined&&(b instanceof
plt.types.EqHashTable||b instanceof plt.types.EqualHashTable)}plt.Kernel.isHash=ba;plt.Kernel.apply=function(b,d,m){var u,I=[];e(b,L,"apply","function",1);if(m.length==0){u=d;for(h(u,"apply",2);!u.isEmpty();){var Z=u.first();I.push(Z);u=u.rest()}}else{u=m.pop();for(h(u,"apply",3);!u.isEmpty();){Z=u.first();I.push(Z);u=u.rest()}for(;m.length>0;)I.unshift(m.pop());I.unshift(d)}if(ga(b,I.length))return b(I);else throw new F(plt.Kernel.format("~a: expects ~a, given ~a: ~s",[b,z(b),I.length,plt.Kernel.list(I)]));
};plt.Kernel.map=function(b,d){e(b,L,"map","function",1);G(d,function(Z,ea){h(Z,"map",ea+2)});for(var m=plt.types.Empty.EMPTY;!d[0].isEmpty();){for(var u=[],I=0;I<d.length;I++){u.push(d[I].first());d[I]=d[I].rest()}m=plt.Kernel.cons(b(u),m)}return plt.Kernel.reverse(m)};plt.Kernel.for_dash_each=function(b,d){e(b,L,"for-each","function",1);for(G(d,function(I,Z){h(I,"for-each",Z+2)});!d[0].isEmpty();){for(var m=[],u=0;u<d.length;u++){m.push(d[u].first());d[u]=d[u].rest()}b(m)}};plt.Kernel.andmap=function(b,
d){e(b,L,"andmap","function",1);for(G(d,function(I,Z){h(I,"andmap",Z+2)});!d[0].isEmpty();){for(var m=[],u=0;u<d.length;u++){m.push(d[u].first());d[u]=d[u].rest()}if(!b(m))return plt.types.Logic.FALSE}return plt.types.Logic.TRUE};plt.Kernel.ormap=function(b,d){e(b,L,"ormap","function",1);for(G(d,function(I,Z){h(I,"ormap",Z+2)});!d[0].isEmpty();){for(var m=[],u=0;u<d.length;u++){m.push(d[u].first());d[u]=d[u].rest()}if(b(m))return plt.types.Logic.TRUE}return plt.types.Logic.FALSE};plt.Kernel.filter=
function(b,d){e(b,L,"filter","function",1);e(d,c,"filter","list",2);for(var m=plt.types.Empty.EMPTY;!d.isEmpty();){if(b([d.first()]))m=plt.types.Cons.makeInstance(d.first(),m);d=d.rest()}return plt.Kernel.reverse(m)};plt.Kernel.foldl=function(b,d,m){e(b,L,"foldl","function",1);G(m,function(Z,ea){e(Z,c,"foldl","list",ea+3)});for(d=d;!m[0].isEmpty();){for(var u=[],I=0;I<m.length;I++){u.push(m[I].first());m[I]=m[I].rest()}u.push(d);d=b(u)}return d};plt.Kernel.foldr=function(b,d,m){e(b,L,"foldr","function",
1);G(m,function(Z,ea){e(Z,c,"foldr","list",ea+3)});d=d;for(var u=0;u<m.length;u++)m[u]=plt.Kernel.reverse(m[u]);for(;!m[0].isEmpty();){var I=[];for(u=0;u<m.length;u++){I.push(m[u].first());m[u]=m[u].rest()}I.push(d);d=b(I)}return d};plt.Kernel.argmin=function(b,d){e(b,L,"argmin","function",1);e(d,r,"argmin","nonempty list",2);var m=d.first(),u=b([d.first()]).toFloat();for(d=d.rest();!d.isEmpty();){var I=b([d.first()]).toFloat();if(I<u){m=d.first();u=I}d=d.rest()}return m};plt.Kernel.argmax=function(b,
d){e(b,L,"argmax","function",1);e(d,r,"argmax","nonempty list",2);var m=d.first(),u=b([d.first()]).toFloat();for(d=d.rest();!d.isEmpty();){var I=b([d.first()]).toFloat();if(I>u){m=d.first();u=I}d=d.rest()}return m};plt.Kernel.sort=function(b,d){e(b,c,"sort","list",1);e(d,L,"sort","function",2);for(var m=[];!b.isEmpty();){m.push(b.first());b=b.rest()}m.sort(function(u,I){return d([u,I])?-1:1});return plt.Kernel.list(m)};plt.Kernel.quicksort=plt.Kernel.sort;plt.Kernel.build_dash_list=function(b,d){e(b,
T,"build-list","natural",1);e(d,L,"build-list","function",2);for(var m=plt.types.Empty.EMPTY,u=0;u<b.toFixnum();u++)m=plt.Kernel.cons(d([plt.types.Rational.makeInstance(u,1)]),m);return plt.Kernel.reverse(m)};plt.Kernel.build_dash_string=function(b,d){e(b,T,"build-string","natural",1);e(d,L,"build-string","function",2);for(var m=[],u=0;u<b.toFixnum();u++){var I=d([plt.types.Rational.makeInstance(u,1)]);m.push(I.val)}return plt.types.String.makeInstance(m.join(""))};plt.Kernel.format=function(b,d){e(b,
H,"format","string",1);var m=new RegExp("~[sSaAn%~]","g"),u=d;function I(Z){if(Z=="~~")return"~";else if(Z=="~n"||Z=="~%")return"\n";else if(Z=="~s"||Z=="~S"){if(u.length==0)throw new F("format: fewer arguments passed than expected");return plt.types.toWrittenString(u.shift())}else if(Z=="~a"||Z=="~A"){if(u.length==0)throw new F("format: fewer arguments passed than expected");return plt.types.toDisplayedString(u.shift())}else throw new F("Unimplemented format "+Z);}b=plt.types.String.makeInstance(b.replace(m,
I));if(u.length>0)throw new F("format: More arguments passed than expected");return b};plt.Kernel.string=function(b){G(b,function(u,I){e(u,Q,"string","char",I+1)});for(var d=[],m=0;m<b.length;m++)d.push(b[m].getValue());return plt.types.String.makeInstance(d.join(""))};plt.Kernel.procedure_question_=function(b){return L(b)};plt.Kernel.procedure_dash_arity=function(b){e(b,L,"procedure-arity","function",1);return b.procedureArity};function ga(b,d){return r(b.procedureArity)?d>=b.procedureArity.rest().first().toFixnum():
d==b.procedureArity.toFixnum()}function z(b){return r(b.procedureArity)?"at least "+(b.procedureArity.rest().first().toFixnum()==1)?"one argument":b.procedureArity.rest().first().toFixnum()+" arguments":b.procedureArity.toFixnum()==1?"one argument":b.procedureArity.toFixnum()+" arguments"}plt.Kernel.xml_dash__greaterthan_s_dash_exp=function(b){e(b,H,"xml->s-exp","string",1);if(b.length==0)return plt.types.String.makeInstance("");var d;try{d=new ActiveXObject("Microsoft.XMLDOM");d.async="false";d.loadXML(b)}catch(m){d=
new DOMParser;d=d.parseFromString(b,"text/xml")}function u(Z){for(var ea=plt.types.Empty.EMPTY,ka=0;ka<Z.length;ka++){var na=plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance(Z.item(ka).nodeName),plt.types.Cons.makeInstance(Z.item(ka).nodeValue,plt.types.Empty.EMPTY));ea=plt.types.Cons.makeInstance(na,ea)}return plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance("@"),plt.Kernel.reverse(ea))}function I(Z){if(Z.nodeType==Node.ELEMENT_NODE){for(var ea=plt.types.Empty.EMPTY,ka=Z.firstChild;ka!=
null;){var na=I(ka);ea=H(na)&&!ea.isEmpty()&&H(ea.first())?plt.types.Cons.makeInstance(ea.first()+na,ea.rest()):plt.types.Cons.makeInstance(na,ea);ka=ka.nextSibling}ea=plt.Kernel.reverse(ea);ea=plt.types.Cons.makeInstance(u(Z.attributes),ea);return ea=plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance(Z.nodeName),ea)}else return Z.nodeType==Node.TEXT_NODE?Z.textContent:Z.nodeType==Node.CDATA_SECTION_NODE?Z.data:plt.types.Empty.EMPTY}return b=I(d.firstChild)};plt.Kernel.split_dash_whitespace=
function(b){b=b.replace(/^\s+/,"");b=b.replace(/\s+$/,"");return plt.Kernel.list(b.split(/\s+/))};plt.Kernel.box=function(b){return new plt.types.Box(b)};plt.Kernel.unbox=function(b){e(b,plt.Kernel.box_question_,"unbox","box",1);return b.unbox()};plt.Kernel.box_question_=function(b){return b!=null&&b!=undefined&&b instanceof plt.types.Box};plt.Kernel.set_dash_box_bang_=function(b,d){e(b,plt.Kernel.box_question_,"set-box!","box",1);b.set(d)};function V(b,d){plt.types.Struct.call(this,"make-posn",[b,
d]);this._eqHashCode=plt.types.makeEqHashCode()}V.prototype=K(plt.types.Struct.prototype);function ca(b,d){return new V(b,d)}function fa(b){e(b,la,"posn-x","posn",1);return b._fields[0]}function ia(b){e(b,la,"posn-y","posn",1);return b._fields[1]}function la(b){return b!=null&&b!=undefined&&b instanceof V}plt.Kernel.make_dash_posn=ca;plt.Kernel.posn_question_=la;plt.Kernel.posn_dash_x=fa;plt.Kernel.posn_dash_y=ia;plt.Kernel.error=function(b,d){e(b,n,"error","symbol",1);e(d,H,"error","string",2);throw new F(plt.Kernel.format("~a: ~a",
[b,d]).toString());};plt.Kernel.syntax_dash_error=function(b,d){e(b,H,"syntax-error","string",1);e(d,W,"syntax-error","stx",2);throw new v(b,d);};plt.Kernel.reportError=function(b){var d;d=typeof console!="undefined"&&typeof console.log!="undefined"?function(m){console.log(m)}:function(m){alert(m)};if(typeof b=="string")d(b);else b.msg?d(b.msg):d(b.toString());if(plt.Kernel.lastLoc){b=plt.Kernel.lastLoc;if(typeof b==="string")d("Error was raised around "+b);else typeof b!=="undefined"&&typeof b.line!==
"undefined"&&d("Error was raised around: "+plt.Kernel.locToString(b))}};plt.Kernel._void_=function(){};plt.Kernel.build_dash_vector=function(b,d){e(b,T,"build-vector","natural",1);e(d,L,"build-vector","function",2);for(var m=[],u=0;u<b.toFixnum();u++)m[u]=d([plt.types.Rational.makeInstance(u,1)]);return plt.types.Vector.makeInstance(b.toFixnum(),m)};plt.Kernel.make_dash_vector=function(b,d){e(b,T,"make-vector","natural",1);e(d,function(I){return I.length==0||I.length==1},"make-vector","at most two",
2);b=b.toFixnum();var m,u=plt.types.Vector.makeInstance(b);if(d.length==1)for(m=0;m<b;m++)u.set(m,d[0]);return u};plt.Kernel.vector=function(b){return plt.types.Vector.makeInstance(b.length,b)};plt.Kernel.vector_dash_length=function(b){e(b,w,"vector-length","vector",1);return plt.types.Rational.makeInstance(b.length())};plt.Kernel.vector_dash_ref=function(b,d){e(b,w,"vector-ref","vector",1);e(d,function(m){return T(m)&&m.toFixnum()<b.length()},"vector-ref","natural < vector length",2);return b.ref(d.toFixnum())};
plt.Kernel.vector_dash_set_bang_=function(b,d,m){e(b,w,"vector-set!","vector",1);e(d,function(u){return T(u)&&u.toFixnum()<b.length()},"vector-set!","natural < vector length",2);return b.set(d.toFixnum(),m)};plt.Kernel.vector_question_=function(b){return w(b)?plt.types.Logic.TRUE:plt.types.Logic.FALSE};plt.Kernel.check_dash_expect=function(b,d){b=b([]);d=d([]);if(!plt.Kernel.equal_question_(b,d))throw new R(plt.Kernel.format("~s doesn't match the expected value ~s",[b,d]));};plt.Kernel.EXAMPLE=plt.Kernel.check_dash_expect;
plt.Kernel.check_dash_within=function(b,d,m){b=b([]);d=d([]);m=m([]);if(!plt.Kernel._equal__tilde_(b,d,m))throw new R(plt.Kernel.format("~s doesn't match the expected value ~s within ~s",[b,d,m]));};plt.Kernel.check_dash_error=function(b,d){d=d([]);var m;try{m=b([])}catch(u){if(plt.Kernel.equal_question_(u.msg,d))return;else throw new R(plt.Kernel.format("check-error encountered the error ~s instead of the expected error ~s.",[u.msg,d]));}throw new R(plt.Kernel.format("check-error expected the error ~s, but instead received the value ~s.",
[d,m]));};plt.Kernel.lastLoc=undefined;plt.Kernel.setLastLoc=function(b){plt.Kernel.lastLoc=b;return true};plt.Kernel.locToString=function(b){if(typeof b==="string")return b;return"offset="+Loc_dash_offset(b)+", line="+Loc_dash_line(b)+", column="+Loc_dash_column(b)+", span="+Loc_dash_span(b)+", id="+Loc_dash_id(b)};plt.Kernel.printf=function(b,d){b=plt.Kernel.format(b,d);plt.Kernel.printHook(b)};plt.Kernel.printHook=function(){};plt.Kernel.isSymbol=n;plt.Kernel.isChar=Q;plt.Kernel.isString=H;plt.Kernel.isBoolean=
M;plt.Kernel.isPair=r;plt.Kernel.isEmpty=y;plt.Kernel.isReal=q;plt.Kernel.isRational=J;plt.Kernel.isComplex=P;plt.Kernel.isInteger=X;plt.Kernel.isNatural=T;plt.Kernel.isNumber=o;plt.Kernel.isAlphabeticString=U;plt.Kernel.isWhitespaceString=Y;plt.Kernel.isList=c;plt.Kernel.isVector=w;plt.Kernel.isFunction=L;plt.Kernel.arrayEach=G;plt.Kernel.check=e;plt.Kernel.checkList=h;plt.Kernel.checkListof=p;plt.Kernel.MobyError=plt.types.MobyError;plt.Kernel.MobyParserError=plt.types.MobyParserError;plt.Kernel.MobySyntaxError=
plt.types.MobySyntaxError;plt.Kernel.MobyTypeError=plt.types.MobyTypeError;plt.Kernel.MobyRuntimeError=plt.types.MobyRuntimeError;plt.Kernel.MobyTestingError=plt.types.MobyTestingError;plt.Kernel.attachEvent=B;plt.Kernel.detachEvent=C;plt.Kernel.ordinalize=f})();plt.reader={};
(function(){function j(o){return o.replace(/\\./g,function(n){switch(n){case "\\b":return"\u0008";case "\\f":return"\u000c";case "\\n":return"\n";case "\\r":return"\r";case "\\t":return"\t";case "\\v":return"\u000b";default:return n.substring(1)}})}function v(o){var n,Q=0;for(n=0;n<o.length;n++)o[n]=="\n"&&Q++;return Q}function S(o,n){var Q;for(Q=0;Q<o.length;Q++)if(o[Q]=="\n")n=0;else n++;return n}var F="[^\\s\\(\\)\\[\\]\\{\\}\\\"\\,\\'\\`\\;]",R="(?:(?:\\d+\\/\\d+)|(?:(?:\\d+\\.\\d+|\\d+\\.|\\.\\d+)(?:[eE][+\\-]?\\d+)?)|(?:\\d+(?:[eE][+\\-]?\\d+)?))",
B=[["whitespace",/^(\s+)/],["#;",/^([#][;])/],["comment",/^([#][|](?:(?:\|[^\#])|[^\|])*[|][#])/],["comment",/(^;[^\n]*)/],["(",/^(\(|\[|\{)/],[")",/^(\)|\]|\})/],["'",/^(\')/],["`",/^(`)/],[",@",/^(,@)/],[",",/^(,)/],["char",/^\#\\(newline|backspace)/],["char",/^\#\\(.)/],["string",/^"((?:([^\\"]|(\\.)))*)"/],["symbol-or-number",new RegExp("^("+F+"+)")]],C=[["complex",new RegExp("^((?:(?:\\#[ei])?[+\\-]?"+R+")?(?:[+\\-]"+R+")i$)")],["number",/^((?:\#[ei])?[+-]inf.0)$/],["number",/^((?:\#[ei])?[+-]nan.0)$/],
["number",new RegExp("^((?:\\#[ei])?[+\\-]?"+R+"$)")]];function K(o,n){var Q=0,W=1,H=0,M=[];for(n||(n="");1;){for(var r=false,y=0;y<B.length;y++){var q=B[y][0],J=B[y][1];J=o.match(J);if(J!=null){r=J[0];y=J[1];if(q=="string")y=j(y);if(q=="symbol-or-number"){q=false;for(J=0;J<C.length;J++){var P=y.match(C[J][1]);if(P){M.push([C[J][0],y,new Loc(Q,W,H,r.length,n)]);q=true;break}}q||M.push(["symbol",y,new Loc(Q,W,H,r.length,n)])}else q!="whitespace"&&q!="comment"&&M.push([q,y,new Loc(Q,W,H,r.length,n)]);
Q+=r.length;H=S(r,H);W+=v(r);o=o.substring(r.length);r=true;break}}if(!r)break}return[M,o]}function O(o,n){var Q=make_dash_stx_colon_list,W=make_dash_stx_colon_atom,H=K(o,n),M=H[0],r=undefined;if(H[1].length>0)throw new plt.types.MobyParserError("Error while tokenizing: the rest of the stream is: "+H[1],new Loc(o.length-H[1].length,v(o.substring(0,o.length-H[1].length)),S(o.substring(0,o.length-H[1].length),0),H[1].length,n));var y=plt.types.Symbol.makeInstance("quote"),q=plt.types.Symbol.makeInstance("quasiquote"),
J=plt.types.Symbol.makeInstance("unquote"),P=plt.types.Symbol.makeInstance("unquote-splicing"),L=plt.types.Empty.EMPTY;function X(A){return M.length>0&&M[0][0]==A}function T(A){if(M.length==0)if(r)throw new plt.types.MobyParserError("token stream exhausted while trying to eat "+A,r[2]);else throw new plt.types.MobyParserError("token stream exhausted while trying to eat "+A,new Loc(0,0,0,o.length,n));var c=M.shift();r=c;if(c[0]==A)return c;else throw new plt.types.MobyParserError("Unexpected token "+
c,c[2]);}var U,Y,w;w=function(A,c){A=T(A);var f=U();return Q(plt.types.Cons.makeInstance(W(c,A[2]),plt.types.Cons.makeInstance(f,L)),new Loc(Loc_dash_offset(A[2]),Loc_dash_line(A[2]),Loc_dash_column(A[2]),Loc_dash_offset(stx_dash_loc(f))-Loc_dash_offset(A[2])+Loc_dash_span(stx_dash_loc(f)),n))};function G(A){switch(A){case "(":return")";case "[":return"]";case "{":return"}";default:throw new Error;}}function E(A,c){var f=A.match(/([+\-]?\d+)\/(\d+)/);if(A=="+inf.0")return plt.types.FloatPoint.makeInstance(Number.POSITIVE_INFINITY);
else if(A=="-inf.0")return plt.types.FloatPoint.makeInstance(Number.NEGATIVE_INFINITY);else if(A=="+nan.0"||A=="-nan.0")return plt.types.FloatPoint.makeInstance(Number.NaN);else if(A.match(/[eE]/))return plt.types.FloatPoint.makeInstance(parseFloat(A));else if(A.match(/\./))if(c){A=A.match("^(.*)[.](.*)$");c=plt.types.Rational.makeInstance(parseInt(A[1]||"0")||0);return A[1].match(/-/)?plt.types.NumberTower.subtract(c,plt.types.Rational.makeInstance(parseInt(A[2]),Math.pow(10,A[2].length))):plt.types.NumberTower.add(c,
plt.types.Rational.makeInstance(parseInt(A[2]),Math.pow(10,A[2].length)))}else return plt.types.FloatPoint.makeInstance(parseFloat(A));else return f?c?plt.types.Rational.makeInstance(parseInt(f[1]),parseInt(f[2])):plt.types.FloatPoint.makeInstance(parseInt(f[1])/parseInt(f[2])):c?plt.types.Rational.makeInstance(parseInt(A),1):plt.types.FloatPoint.makeInstance(parseInt(A))}U=function(){if(M.length==0)if(r)throw new plt.types.MobyParserError("Parse broke with empty token stream",r[2]);else throw new plt.types.MobyParserError("Parse broke with empty token stream",
new Loc(0,0,0,o.length,n));switch(M[0][0]){case "(":var A=T("("),c=A[1],f=G(A[1]),g=Y();if(M.length==0)throw new plt.types.MobyParserError("Expected a "+f+" to close "+c,A[2]);else if(M[0][1]!=f)throw new plt.types.MobyParserError("Expected a "+f+" to close "+c,M[0][2]);c=T(")");return make_dash_stx_colon_list(g,new Loc(Loc_dash_offset(A[2]),Loc_dash_line(A[2]),Loc_dash_column(A[2]),Loc_dash_offset(c[2])-Loc_dash_offset(A[2])+1,n));case "#;":T("#;");U();return U();case "'":return w("'",y);case "`":return w("`",
q);case ",":return w(",",J);case ",@":return w(",@",P);case "number":A=T("number");return(g=A[1].match(/^(\#[ie])(.+)$/))?g[1]=="#i"?W(E(g[2],false),A[2]):W(E(g[2],true),A[2]):W(E(A[1],true),A[2]);case "complex":A=T("complex");g=A[1].match(/^((?:\#[ei])?)([+\-]?(?:\d+\/\d+|\d+\.\d+|\d+\.|\.\d+|\d+)?)([+\-](?:\d+\/\d+|\d+\.\d+|\d+\.|\.\d+|\d+))i/);c=g[1]=="#i"?false:true;A=g[2]!=""?E(g[2],c):plt.types.Rational.ZERO;g=E(g[3],c);return A=W(plt.types.Complex.makeInstance(A,g));case "string":A=T("string");
return W(plt.types.String.makeInstance(A[1]),A[2]);case "char":A=T("char");return A[1]=="newline"?W(plt.types.Char.makeInstance("\n"),A[2]):A[1]=="backspace"?W(plt.types.Char.makeInstance(String.fromCharCode(8)),A[2]):W(plt.types.Char.makeInstance(A[1]),A[2]);case "symbol":A=T("symbol");if(A[1]==".")throw new plt.types.MobyParserError("Dotted pairs are not currently accepted by Moby",A[2]);return W(plt.types.Symbol.makeInstance(A[1]),A[2]);default:throw new plt.types.MobyParserError("Parse broke with token stream "+
M,M[0][2]);}};Y=function(){for(var A=plt.types.Empty.EMPTY;1;)if(M.length==0||X(")"))break;else if(X("#;")){T("#;");U()}else{var c=U();A=plt.types.Cons.makeInstance(c,A)}return plt.types.Cons.reverse(A)};H=Y();if(M.length>0)throw new plt.types.MobyParserError("More elements in the program's token stream than expected: the next unconsumed token is: "+M[0][1],M[0][2]);return H}plt.reader.tokenize=K;plt.reader.readSchemeExpressions=O})();
(function(j){var v={};function S(i,x){plt.types.Struct.call(this,"make-stx:atom",[i,x]);this.datum=i;this.loc=x}S.prototype=new plt.types.Struct;function F(i,x){return new S(i,x)}function R(i){if(O(i))return i.datum;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx:atom-datum: not a stx:atom: ~s",[i]));}function B(i){if(O(i))return i.loc;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx:atom-loc: not a stx:atom: ~s",[i]));}function C(i,x){if(O(i)){i.datum=x;i._fields[0]=
x}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_atom_dash_datum_bang_: not a stx:atom: ~s",[i]));}function K(i,x){if(O(i)){i.loc=x;i._fields[1]=x}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_atom_dash_loc_bang_: not a stx:atom: ~s",[i]));}function O(i){return i!=null&&i!=undefined&&i instanceof S}function o(i,x){plt.types.Struct.call(this,"make-stx:list",[i,x]);this.elts=i;this.loc=x}o.prototype=new plt.types.Struct;function n(i,
x){return new o(i,x)}function Q(i){if(r(i))return i.elts;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx:list-elts: not a stx:list: ~s",[i]));}function W(i){if(r(i))return i.loc;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx:list-loc: not a stx:list: ~s",[i]));}function H(i,x){if(r(i)){i.elts=x;i._fields[0]=x}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_list_dash_elts_bang_: not a stx:list: ~s",[i]));}function M(i,x){if(r(i)){i.loc=
x;i._fields[1]=x}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_list_dash_loc_bang_: not a stx:list: ~s",[i]));}function r(i){return i!=null&&i!=undefined&&i instanceof o}function y(i,x,N,$,ba){plt.types.Struct.call(this,"make-Loc",[i,x,N,$,ba]);this.offset=i;this.line=x;this.column=N;this.span=$;this.id=ba}y.prototype=new plt.types.Struct;function q(i,x,N,$,ba){return new y(i,x,N,$,ba)}function J(i){if(A(i))return i.offset;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc-offset: not a Loc: ~s",
[i]));}function P(i){if(A(i))return i.line;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc-line: not a Loc: ~s",[i]));}function L(i){if(A(i))return i.column;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc-column: not a Loc: ~s",[i]));}function X(i){if(A(i))return i.span;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc-span: not a Loc: ~s",[i]));}function T(i){if(A(i))return i.id;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc-id: not a Loc: ~s",
[i]));}function U(i,x){if(A(i)){i.offset=x;i._fields[0]=x}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_offset_bang_: not a Loc: ~s",[i]));}function Y(i,x){if(A(i)){i.line=x;i._fields[1]=x}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_line_bang_: not a Loc: ~s",[i]));}function w(i,x){if(A(i)){i.column=x;i._fields[2]=x}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_column_bang_: not a Loc: ~s",[i]));
}function G(i,x){if(A(i)){i.span=x;i._fields[3]=x}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_span_bang_: not a Loc: ~s",[i]));}function E(i,x){if(A(i)){i.id=x;i._fields[4]=x}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_id_bang_: not a Loc: ~s",[i]));}function A(i){return i!=null&&i!=undefined&&i instanceof y}function c(i){return O(i)||r(i)}function f(i){return O(i)?R(i):r(i)?Q(i):plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),
v[4])}function g(i){return O(i)?B(i):r(i)?W(i):plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),v[4])}function e(i,x){return O(i)?v[5]:r(i)?plt.Kernel.not(plt.Kernel.empty_question_(Q(i)))&&plt.Kernel.symbol_question_(f(plt.Kernel.first(Q(i))))&&plt.Kernel.symbol_equal__question_(f(plt.Kernel.first(Q(i))),x):plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),v[4])}function h(i,x){return c(i)?i:plt.Kernel.pair_question_(i)||plt.Kernel.empty_question_(i)?n(plt.Kernel.map(function(){function N($){$=
$[0];return h($,x)}N._eqHashCode=plt.types.makeEqHashCode();N.toWrittenString=function(){return"<function:lambda>"};N.isEqual=function($){return this===$};N.procedureArity=plt.types.Rational.makeInstance(1,1);N.toDisplayedString=N.toWrittenString;return N}(),[i]),x):plt.types.Logic.TRUE?F(i,x):plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),v[4])}function p(i){return O(i)?R(i):r(i)?plt.Kernel.map(plt.types.liftToplevelToFunctionValue(p,plt.types.String.makeInstance("stx->datum"),1,plt.types.Rational.makeInstance(1,
1)),[Q(i)]):plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),v[4])}v[4]=plt.types.String.makeInstance("cond: fell out of cond");v[5]=plt.types.Logic.FALSE;(function(i){(function(){})(i||plt.Kernel.identity);j.stx_dash_e=f;j.stx_colon_list=o;j.make_dash_stx_colon_list=n;j.stx_colon_list_question_=r;j.stx_colon_list_dash_elts=Q;j.stx_colon_list_dash_loc=W;j.set_dash_stx_colon_list_dash_elts_bang_=H;j.set_dash_stx_colon_list_dash_loc_bang_=M;j.stx_question_=c;j.stx_colon_atom=S;j.make_dash_stx_colon_atom=
F;j.stx_colon_atom_question_=O;j.stx_colon_atom_dash_datum=R;j.stx_colon_atom_dash_loc=B;j.set_dash_stx_colon_atom_dash_datum_bang_=C;j.set_dash_stx_colon_atom_dash_loc_bang_=K;j.stx_dash_loc=g;j.datum_dash__greaterthan_stx=h;j.stx_dash_begins_dash_with_question_=e;j.stx_dash__greaterthan_datum=p;j.Loc=y;j.make_dash_Loc=q;j.Loc_question_=A;j.Loc_dash_offset=J;j.Loc_dash_line=P;j.Loc_dash_column=L;j.Loc_dash_span=X;j.Loc_dash_id=T;j.set_dash_Loc_dash_offset_bang_=U;j.set_dash_Loc_dash_line_bang_=Y;
j.set_dash_Loc_dash_column_bang_=w;j.set_dash_Loc_dash_span_bang_=G;j.set_dash_Loc_dash_id_bang_=E})()})(this);plt.world={};plt.world.config={};
(function(){function j(B,C){var K={};for(var O in B)if(B.hasOwnProperty(O))K[O]=B[O];for(O in C)if(C.hasOwnProperty(O))K[O]=C[O];return K}function v(){this.vals={changeWorld:false,shutdownWorld:false,initialEffect:false,onRedraw:false,onDraw:false,onDrawCss:false,tickDelay:false,onTick:false,onTickEffect:false,onKey:false,onKeyEffect:false,onTilt:false,onTiltEffect:false,onAcceleration:false,onAccelerationEffect:false,onShake:false,onShakeEffect:false,onLocationChange:false,onLocationChangeEffect:false,
onAnnounce:false,onAnnounceEffect:false,stopWhen:false,stopWhenEffect:false,connectToGame:false,onGameStart:false,onOpponentTurn:false,onMyTurn:false,afterMyTurn:false,onGameFinish:false}}v.prototype.lookup=function(B){plt.Kernel.check(B,plt.Kernel.isString,"WorldConfig.lookup","string",1);if(B in this.vals)return this.vals[B];else throw Error("Can't find "+B+" in the configuration");};v.prototype.updateAll=function(B){var C=new v;C.vals=j(this.vals,B);return C};plt.world.config.WorldConfig=v;plt.world.config.CONFIG=
new v;function S(){return make_dash_effect_colon_none()}function F(B,C){B.toWrittenString=function(){return"("+C+" ...)"};B.toDisplayedString=B.toWrittenString;return B}plt.world.config.Kernel=plt.world.config.Kernel||{};plt.world.config.Kernel.onRedraw=function(B){plt.Kernel.check(B,plt.Kernel.isFunction,"on-redraw","function",1);return F(function(C){return C.updateAll({onRedraw:B})},"on-redraw")};plt.world.config.Kernel.initialEffect=function(B){return F(function(C){return C.updateAll({initialEffect:B})},
"initial-effect")};plt.world.config.Kernel.onDraw=function(B,C){plt.Kernel.check(B,plt.Kernel.isFunction,"on-draw","function",1);plt.Kernel.check(C,plt.Kernel.isFunction,"on-draw","function",2);return F(function(K){return K.updateAll({onDraw:B,onDrawCss:C})},"on-draw")};plt.world.config.Kernel.onTick=function(B,C){plt.Kernel.check(B,plt.Kernel.isNumber,"on-tick","number",1);plt.Kernel.check(C,plt.Kernel.isFunction,"on-tick","function",2);return plt.world.config.Kernel.onTick_star_(B,C,function(){return S()})};
plt.world.config.Kernel.onTick_star_=function(B,C,K){plt.Kernel.check(B,plt.Kernel.isNumber,"on-tick!","number",1);plt.Kernel.check(C,plt.Kernel.isFunction,"on-tick!","function",2);plt.Kernel.check(K,plt.Kernel.isFunction,"on-tick!","function",3);return F(function(O){var o={onTick:C,onTickEffect:K,tickDelay:plt.types.NumberTower.toFixnum(plt.types.NumberTower.multiply(plt.types.Rational.makeInstance(1000,1),B))};return O.updateAll(o)},"on-tick")};plt.world.config.Kernel.onTilt=function(B){plt.Kernel.check(B,
plt.Kernel.isFunction,"on-tilt","function",1);return plt.world.config.Kernel.onTilt_star_(B,function(){return S()})};plt.world.config.Kernel.onTilt_star_=function(B,C){plt.Kernel.check(B,plt.Kernel.isFunction,"on-tilt!","function",1);plt.Kernel.check(C,plt.Kernel.isFunction,"on-tilt!","function",2);return F(function(K){return K.updateAll({onTilt:B,onTiltEffect:C})},"on-tilt")};plt.world.config.Kernel.onAnnounce=function(B){plt.Kernel.check(B,plt.Kernel.isFunction,"on-announce","function",1);return plt.world.config.Kernel.onAnnounce_star_(B,
function(){return S()})};plt.world.config.Kernel.onAnnounce_star_=function(B,C){plt.Kernel.check(B,plt.Kernel.isFunction,"on-announce!","function",1);plt.Kernel.check(C,plt.Kernel.isFunction,"on-announce!","function",2);return F(function(K){return K.updateAll({onAnnounce:B,onAnnounceEffect:C})},"on-announce")};plt.world.config.Kernel.onAcceleration=function(B){plt.Kernel.check(B,plt.Kernel.isFunction,"on-acceleration","function",1);return plt.world.config.Kernel.onAcceleration_star_(B,function(){return S()})};
plt.world.config.Kernel.onAcceleration_star_=function(B,C){plt.Kernel.check(B,plt.Kernel.isFunction,"on-acceleration!","function",1);plt.Kernel.check(C,plt.Kernel.isFunction,"on-acceleration!","function",2);return F(function(K){return K.updateAll({onAcceleration:B,onAccelerationEffect:C})},"on-acceleration")};plt.world.config.Kernel.onShake=function(B){plt.Kernel.check(B,plt.Kernel.isFunction,"on-shake","function",1);return plt.world.config.Kernel.onShake_star_(B,function(){return S()})};plt.world.config.Kernel.onShake_star_=
function(B,C){plt.Kernel.check(B,plt.Kernel.isFunction,"on-shake!","function",1);plt.Kernel.check(C,plt.Kernel.isFunction,"on-shake!","function",2);return F(function(K){return K.updateAll({onShake:B,onShakeEffect:C})},"on-shake")};plt.world.config.Kernel.onKey=function(B){plt.Kernel.check(B,plt.Kernel.isFunction,"on-key","function",1);return plt.world.config.Kernel.onKey_star_(B,function(){return S()})};plt.world.config.Kernel.onKey_star_=function(B,C){plt.Kernel.check(B,plt.Kernel.isFunction,"on-key!",
"function",1);plt.Kernel.check(C,plt.Kernel.isFunction,"on-key!","function",2);return F(function(K){return K.updateAll({onKey:B,onKeyEffect:C})},"on-key")};plt.world.config.Kernel.onLocationChange=function(B){plt.Kernel.check(B,plt.Kernel.isFunction,"on-location-change","function",1);return plt.world.config.Kernel.onLocationChange_star_(B,function(){return S()})};plt.world.config.Kernel.onLocationChange_star_=function(B,C){plt.Kernel.check(B,plt.Kernel.isFunction,"on-location-change!","function",
1);plt.Kernel.check(C,plt.Kernel.isFunction,"on-location-change!","function",2);return F(function(K){return K.updateAll({onLocationChange:B,onLocationChangeEffect:C})},"on-location-change")};plt.world.config.Kernel.stopWhen=function(B){plt.Kernel.check(B,plt.Kernel.isFunction,"stop-when","function",1);return plt.world.config.Kernel.stopWhen_star_(B,function(){return S()})};plt.world.config.Kernel.stopWhen_star_=function(B,C){plt.Kernel.check(B,plt.Kernel.isFunction,"stop-when!","function",1);plt.Kernel.check(C,
plt.Kernel.isFunction,"stop-when!","function",2);return F(function(K){return K.updateAll({stopWhen:B,stopWhenEffect:C})},"stop-when")};function R(B,C,K,O){return function(o){plt.Kernel.check(o,C,O,K,1);return F(function(n){return n.updateAll({propertyName:o})},O)}}plt.world.config.Kernel.connect_dash_to_dash_game=R("connectToGame",plt.Kernel.isString,"string","connect-to-game");plt.world.config.Kernel.on_dash_game_dash_start=R("onGameStart",plt.Kernel.isFunction,"function","on-game-start");plt.world.config.Kernel.on_dash_opponent_dash_turn=
R("onOpponentTurn",plt.Kernel.isFunction,"function","on-opponent-turn");plt.world.config.Kernel.on_dash_my_dash_turn=R("onMyTurn",plt.Kernel.isFunction,"function","on-my-turn");plt.world.config.Kernel.after_dash_my_dash_turn=R("afterMyTurn",plt.Kernel.isFunction,"function","after-my-turn");plt.world.config.Kernel.on_dash_game_dash_finish=R("onGameFinish",plt.Kernel.isFunction,"function","on-game-finish")})();plt.platform={};
(function(){plt.platform.Platform={};var j=false;plt.platform.Platform.getInstance=function(){j||(j=new v);return j};function v(){this.tiltService=q;this.shakeService=X();this.locationService=S();this.telephonyService=J();this.networkService=Y();this.soundService=E();this.powerService=e();this.smsService=i();this.pickPlaylistService=$()}v.prototype.getTiltService=function(){return this.tiltService};v.prototype.getShakeService=function(){return this.shakeService};v.prototype.getLocationService=function(){return this.locationService};
v.prototype.getTelephonyService=function(){return this.telephonyService};v.prototype.getNetworkService=function(){return this.networkService};v.prototype.getSoundService=function(){return this.soundService};v.prototype.getPowerService=function(){return this.powerService};v.prototype.getSmsService=function(){return this.smsService};v.prototype.getPickPlaylistService=function(){return this.pickPlaylistService};function S(){return F()?new o:R()?new K:B()?new n:new O}function F(){return typeof Device!=
"undefined"}function R(){return window.google&&window.google.gears&&true}function B(){return typeof navigator!="undefined"&&typeof navigator.geolocation!="undefined"}function C(z,V,ca,fa){function ia(b){return b*Math.PI/180}function la(b,d){return Math.pow(Math.sin((ia(b)-ia(d))/2),2)}return 12756000*Math.asin(Math.min(1,Math.sqrt(la(z,ca)+Math.cos(ia(z))*Math.cos(ia(ca))*la(V,fa))))}function K(){this.geo=google.gears.factory.create("beta.geolocation");this.listeners=[];this.currentPosition={latitude:0,
longitude:0,altitude:0,bearing:0,speed:0};this.watchId=false}K.prototype.startService=function(){var z=this;function V(ca){z.currentPosition.latitude=ca.latitude;z.currentPosition.longitude=ca.longitude;z.currentPosition.altitude=ca.altitude;for(var fa=0;fa<z.listeners.length;fa++)z.listeners[fa](ca.latitude,ca.longitude)}this.watchId=this.geo.watchPosition(V)};K.prototype.shutdownService=function(){this.geo.clearWatch(this.watchId)};K.prototype.addLocationChangeListener=function(z){this.listeners.push(z)};
K.prototype.getLatitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.latitude)};K.prototype.getLongitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.longitude)};K.prototype.getAltitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.altitude)};K.prototype.getBearing=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.bearing)};K.prototype.getSpeed=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.speed)};
K.prototype.getDistanceBetween=function(z,V,ca,fa){return plt.types.FloatPoint.makeInstance(C(z.toFloat(),V.toFloat(),ca.toFloat(),fa.toFloat()))};function O(){}O.prototype.startService=function(){};O.prototype.shutdownService=function(){};O.prototype.addLocationChangeListener=function(){};O.prototype.getLatitude=function(){return plt.types.Rational.ZERO};O.prototype.getLongitude=function(){return plt.types.Rational.ZERO};O.prototype.getAltitude=function(){return plt.types.Rational.ZERO};O.prototype.getBearing=
function(){return plt.types.Rational.ZERO};O.prototype.getSpeed=function(){return plt.types.Rational.ZERO};O.prototype.getDistanceBetween=function(z,V,ca,fa){return plt.types.FloatPoint.makeInstance(C(z.toFloat(),V.toFloat(),ca.toFloat(),fa.toFloat()))};function o(){this.locationListeners=[];this.currentPosition={latitude:0,longitude:0,atttitude:0,bearing:0,speed:0};this.watchId=false}o.prototype.startService=function(){var z=this;function V(ca){z.currentPosition.latitude=parseFloat(ca.latitude);
z.currentPosition.longitude=parseFloat(ca.longitude);for(ca=0;ca<z.locationListeners.length;ca++){var fa=z.locationListeners[ca];fa(z.currentPosition.latitude,z.currentPosition.longitude)}}this.watchId=navigator.geolocation.watchPosition(V,function(){},{})};o.prototype.shutdownService=function(){navigator.geolocation.clearWatch(this.watchId)};o.prototype.addLocationChangeListener=function(z){this.locationListeners.push(z)};o.prototype.getLatitude=function(){return plt.types.FloatPoint.makeInstance(navigator.geolocation.lastPosition.latitude)};
o.prototype.getLongitude=function(){return plt.types.FloatPoint.makeInstance(navigator.geolocation.lastPosition.longitude)};o.prototype.getAltitude=function(){return plt.types.Rational.ZERO};o.prototype.getBearing=function(){return plt.types.Rational.ZERO};o.prototype.getSpeed=function(){return plt.types.Rational.ZERO};o.prototype.getDistanceBetween=function(z,V,ca,fa){return plt.types.FloatPoint.makeInstance(navigator.geolocation.getDistanceBetween(z.toFloat(),V.toFloat(),ca.toFloat(),fa.toFloat()))};
function n(){this.locationListeners=[];this.currentPosition={latitude:0,longitude:0,atttitude:0,bearing:0,speed:0};this.watchId=false}n.prototype.startService=function(){var z=this;function V(ca){z.currentPosition.latitude=ca.coords.latitude;z.currentPosition.longitude=ca.coords.longitude;for(var fa=0;fa<z.locationListeners.length;fa++){var ia=z.locationListeners[fa];ia(ca.coords.latitude,ca.coords.longitude)}}typeof navigator.geolocation!="undefined"&&typeof navigator.geolocation.getCurrentPosition!=
"undefined"&&navigator.geolocation.watchPosition(V);setTimeout(function(){navigator.geolocation.getCurrentPosition(V)},10000)};n.prototype.shutdownService=function(){if(this.watchId){navigator.geolocation.clearWatch(this.watchId);this.watchId=false}};n.prototype.addLocationChangeListener=function(z){this.locationListeners.push(z)};n.prototype.getLatitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.latitude)};n.prototype.getLongitude=function(){return plt.types.FloatPOint.makeInstance(this.currentPosition.longitude)};
n.prototype.getAltitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.altitude)};n.prototype.getBearing=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.bearing)};n.prototype.getSpeed=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.speed)};n.prototype.getDistanceBetween=function(z,V,ca,fa){return plt.types.FloatPoint.makeInstance(C(z.toFloat(),V.toFloat(),ca.toFloat(),fa.toFloat()))};var Q=[],W=[],H,M;function r(z){for(var V=
0;V<Q.length;V++)Q[V](parseFloat(z.x),parseFloat(z.y),parseFloat(z.z))}function y(z){for(var V=0;V<W.length;V++)W[V](parseFloat(z.azimuth),parseFloat(z.pitch),parseFloat(z.roll))}var q={startService:function(){if(typeof Accelerometer!="undefined"){H=navigator.accelerometer.watchAcceleration(r,function(){});M=navigator.accelerometer.watchOrientation(y,function(){})}},shutdownService:function(){if(typeof Accelerometer!="undefined"){navigator.accelerometer.clearWatch(H);navigator.accelerometer.clearWatch(M);
navigator.accelerometer.stopAllShakeWatches()}},addOrientationChangeListener:function(z){W.push(z)},addAccelerationChangeListener:function(z){Q.push(z)}};function J(){return F()?new L:new P}function P(){}P.prototype.getSignalStrengths=function(){return plt.types.Empty.EMPTY};function L(){}L.prototype.getSignalStrengths=function(){for(var z=plt.types.Empty.EMPTY,V=Device.getSignalStrengths(),ca=0;ca<V.length;ca++){var fa=V.get(ca);z=plt.types.Cons.makeInstance(plt.Kernel.list([toNum(fa.getId()),toNum(fa.getStrength())]),
z)}return z};function X(){return F()?new T:new U}function T(){this.listeners=[]}T.prototype.startService=function(){var z=this;function V(){for(var fa=0;fa<z.listeners.length;fa++)z.listeners[fa]()}function ca(){}this.shakeId=navigator.accelerometer.watchShake(V,ca)};T.prototype.shutdownService=function(){navigator.accelerometer.stopAllShakeWatches()};T.prototype.addListener=function(z){this.listeners.push(z)};function U(){}U.prototype.startService=function(){};U.prototype.shutdownService=function(){};
U.prototype.addListener=function(){};function Y(){return F()?new w:new G}function w(){}w.prototype.getUrl=function(z){z=Device.getUrl(z);return plt.types.String.makeInstance(""+z)};function G(){}G.prototype.getUrl=function(z){var V=new XMLHttpRequest;z="/networkProxy?url="+encodeURIComponent(z);V.open("GET",z,false);V.send(null);return plt.types.String.makeInstance(V.responseText)};function E(){return F()?new c:A()?new f:new g}function A(){return!!document.createElement("audio").canPlayType}function c(){}
c.prototype.beep=function(){navigator.notification.beep(1)};c.prototype.playPlaylist=function(z){Device.playPlaylistRecord(z)};c.prototype.pausePlaylist=function(z){Device.pausePlaylistRecord(z)};c.prototype.stopPlaylist=function(z){Device.stopPlaylistRecord(z)};c.prototype.playSoundUrl=function(z){navigator.audio.playMusic(z)};c.prototype.playDtmfTone=function(z,V){navigator.audio.playDTMF(z);setTimeout(function(){navigator.audio.stopDTMF()},V)};c.prototype.stopSoundUrl=function(z){navigator.audio.stopMusic(z)};
c.prototype.pauseSoundUrl=function(z){navigator.audio.pauseMusic(z)};c.prototype.setVolume=function(z){navigator.audio.setMusicVolume(z)};c.prototype.raiseVolume=function(){navigator.audio.increaseMusicVolume()};c.prototype.lowerVolume=function(){navigator.audio.decreaseMusicVolume()};function f(){this.cachedUrls={};this.baseVolume=100}f.prototype.beep=function(){alert("Beep")};f.prototype.playPlaylistSound=function(){};f.prototype.pausePlaylistSound=function(){};f.prototype.stopPlaylistSound=function(){};
f.prototype.playSoundUrl=function(z){this.cachedUrls[z]||(this.cachedUrls[z]=new Audio(z));var V=this.cachedUrls[z];if(V.ended||V.paused)this.cachedUrls[z].play()};f.prototype.playDtmfTone=function(){alert("dtmf tone")};f.prototype.stopSoundUrl=function(z){if(this.cachedUrls[z]){this.cachedUrls[z].pause();this.cachedUrls[z].currentTime=0}};f.prototype.pauseSoundUrl=function(z){this.cachedUrls[z]&&this.cachedUrls[z].pause()};f.prototype.setVolume=function(z){for(var V in this.cachedUrls)this.cachedUrls[V].volume=
z/100;this.baseVolume=z};f.prototype.raiseVolume=function(){this.setVolume(Math.min(this.baseVolume+5,100))};f.prototype.lowerVolume=function(){this.setVolume(Math.max(this.baseVolume-5,0))};function g(){}g.prototype.beep=function(){alert("Beep")};g.prototype.playPlaylistSound=function(){};g.prototype.pausePlaylistSound=function(){};g.prototype.stopPlaylistSound=function(){};g.prototype.playSoundUrl=function(z){plt.Kernel.reportError("sound url "+z+" should play, but I don't have sound support.")};
g.prototype.playDtmfTone=function(){plt.Kernel.reportError("DTMF tone should play, but I don't have DTMF support")};g.prototype.stopSoundUrl=function(){};g.prototype.pauseSoundUrl=function(){};g.prototype.setVolume=function(){};g.prototype.raiseVolume=function(){};g.prototype.lowerVolume=function(){};function e(){return F()?new h:new p}function h(){this.currentLockFlags=-1}h.prototype.setWakeLock=function(z){if(z!=this.currentLockFlags){navigator.power.setWakeLock(z);this.currentLockFlags=z}};h.prototype.releaseWakeLock=
function(){if(this.currentLockFlags!=-1){navigator.power.releaseWakeLock();this.currentLockFlags=-1}};function p(){}p.prototype.setWakeLock=function(){};p.prototype.releaseWakeLock=function(){};function i(){return F()?new x:new N}function x(){}x.prototype.send=function(z,V){navigator.sms.send(z,V)};function N(){}N.prototype.send=function(z,V){alert("SMS should be sent to "+z+" with the content: "+V)};function $(){return F()?new ba:new ga}function ba(){}ba.prototype.pickPlaylist=function(z){function V(ca){z(ca)}
navigator.dialogPickers.pickPlaylist(V)};function ga(){}ga.prototype.pickPlaylist=function(){alert("pick playlist currently unavailable")}})();plt.lib={};
(function(){plt.lib.Telephony={};plt.lib.Telephony.getSignalStrengths=function(){return plt.platform.Platform.getInstance().getTelephonyService().getSignalStrengths()};plt.lib.Location={};plt.lib.Location.getLatitude=function(){return plt.platform.Platform.getInstance().getLocationService().getLatitude()};plt.lib.Location.getLongitude=function(){return plt.platform.Platform.getInstance().getLocationService().getLongitude()};plt.lib.Location.getAttitude=function(){return plt.platform.Platform.getInstance().getLocationService().getAttitude()};
plt.lib.Location.getBearing=function(){return plt.platform.Platform.getInstance().getLocationService().getBearing()};plt.lib.Location.getSpeed=function(){return plt.platform.Platform.getInstance().getLocationService().getSpeed()};plt.lib.Location.getDistanceBetween=function(j,v,S,F){return plt.platform.Platform.getInstance().getLocationService().getDistanceBetween(j,v,S,F)};plt.lib.Net={};plt.lib.Net.getUrl=function(j){return plt.platform.Platform.getInstance().getNetworkService().getUrl(j)}})();
(function(j){function v(){plt.types.Struct.call(this,"make-effect:none",[])}v.prototype=new plt.types.Struct;function S(){return new v}function F(l){return l!=null&&l!=undefined&&l instanceof v}function R(){plt.types.Struct.call(this,"make-effect:beep",[])}R.prototype=new plt.types.Struct;function B(){return new R}function C(l){return l!=null&&l!=undefined&&l instanceof R}function K(l,aa){plt.types.Struct.call(this,"make-effect:play-dtmf-tone",[l,aa]);this.tone=l;this.duration=aa}K.prototype=new plt.types.Struct;
function O(l,aa){return new K(l,aa)}function o(l){if(H(l))return l.tone;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:play-dtmf-tone-tone: not a effect:play-dtmf-tone: ~s",[l]));}function n(l){if(H(l))return l.duration;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:play-dtmf-tone-duration: not a effect:play-dtmf-tone: ~s",[l]));}function Q(l,aa){if(H(l)){l.tone=aa;l._fields[0]=aa}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_tone_bang_: not a effect:play-dtmf-tone: ~s",
[l]));}function W(l,aa){if(H(l)){l.duration=aa;l._fields[1]=aa}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_duration_bang_: not a effect:play-dtmf-tone: ~s",[l]));}function H(l){return l!=null&&l!=undefined&&l instanceof K}function M(l,aa){plt.types.Struct.call(this,"make-effect:send-sms",[l,aa]);this.address=l;this.msg=aa}M.prototype=new plt.types.Struct;function r(l,aa){return new M(l,aa)}function y(l){if(L(l))return l.address;
else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:send-sms-address: not a effect:send-sms: ~s",[l]));}function q(l){if(L(l))return l.msg;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:send-sms-msg: not a effect:send-sms: ~s",[l]));}function J(l,aa){if(L(l)){l.address=aa;l._fields[0]=aa}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_send_dash_sms_dash_address_bang_: not a effect:send-sms: ~s",[l]));}function P(l,aa){if(L(l)){l.msg=
aa;l._fields[1]=aa}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_send_dash_sms_dash_msg_bang_: not a effect:send-sms: ~s",[l]));}function L(l){return l!=null&&l!=undefined&&l instanceof M}function X(l){plt.types.Struct.call(this,"make-playlist-sound",[l]);this.playlist=l}X.prototype=new plt.types.Struct;function T(l){plt.types.Struct.call(this,"make-effect:play-sound",[l]);this.sound=l}T.prototype=new plt.types.Struct;function U(l){return new T(l)}function Y(l){if(G(l))return l.sound;
else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:play-sound-sound: not a effect:play-sound: ~s",[l]));}function w(l,aa){if(G(l)){l.sound=aa;l._fields[0]=aa}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_play_dash_sound_dash_sound_bang_: not a effect:play-sound: ~s",[l]));}function G(l){return l!=null&&l!=undefined&&l instanceof T}function E(l){plt.types.Struct.call(this,"make-effect:pause-sound",[l]);this.sound=l}E.prototype=new plt.types.Struct;
function A(l){return new E(l)}function c(l){if(g(l))return l.sound;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pause-sound-sound: not a effect:pause-sound: ~s",[l]));}function f(l,aa){if(g(l)){l.sound=aa;l._fields[0]=aa}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pause_dash_sound_dash_sound_bang_: not a effect:pause-sound: ~s",[l]));}function g(l){return l!=null&&l!=undefined&&l instanceof E}function e(l){plt.types.Struct.call(this,
"make-effect:stop-sound",[l]);this.sound=l}e.prototype=new plt.types.Struct;function h(l){return new e(l)}function p(l){if(x(l))return l.sound;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:stop-sound-sound: not a effect:stop-sound: ~s",[l]));}function i(l,aa){if(x(l)){l.sound=aa;l._fields[0]=aa}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_stop_dash_sound_dash_sound_bang_: not a effect:stop-sound: ~s",[l]));}function x(l){return l!=null&&
l!=undefined&&l instanceof e}function N(l){plt.types.Struct.call(this,"make-effect:set-sound-volume",[l]);this.volume=l}N.prototype=new plt.types.Struct;function $(l){return new N(l)}function ba(l){if(z(l))return l.volume;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:set-sound-volume-volume: not a effect:set-sound-volume: ~s",[l]));}function ga(l,aa){if(z(l)){l.volume=aa;l._fields[0]=aa}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_set_dash_sound_dash_volume_dash_volume_bang_: not a effect:set-sound-volume: ~s",
[l]));}function z(l){return l!=null&&l!=undefined&&l instanceof N}function V(){plt.types.Struct.call(this,"make-effect:raise-sound-volume",[])}V.prototype=new plt.types.Struct;function ca(){return new V}function fa(l){return l!=null&&l!=undefined&&l instanceof V}function ia(){plt.types.Struct.call(this,"make-effect:lower-sound-volume",[])}ia.prototype=new plt.types.Struct;function la(){return new ia}function b(l){return l!=null&&l!=undefined&&l instanceof ia}function d(l){plt.types.Struct.call(this,
"make-effect:set-wake-lock",[l]);this.locks=l}d.prototype=new plt.types.Struct;function m(l){return new d(l)}function u(l){if(Z(l))return l.locks;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:set-wake-lock-locks: not a effect:set-wake-lock: ~s",[l]));}function I(l,aa){if(Z(l)){l.locks=aa;l._fields[0]=aa}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_set_dash_wake_dash_lock_dash_locks_bang_: not a effect:set-wake-lock: ~s",[l]));}function Z(l){return l!=
null&&l!=undefined&&l instanceof d}function ea(){plt.types.Struct.call(this,"make-effect:release-wake-lock",[])}ea.prototype=new plt.types.Struct;function ka(){return new ea}function na(l){return l!=null&&l!=undefined&&l instanceof ea}function qa(l){plt.types.Struct.call(this,"make-effect:pick-playlist",[l]);this.update_dash_f=l}qa.prototype=new plt.types.Struct;function za(l){return new qa(l)}function Ba(l){if(ta(l))return l.update_dash_f;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pick-playlist-update-f: not a effect:pick-playlist: ~s",
[l]));}function oa(l,aa){if(ta(l)){l.update_dash_f=aa;l._fields[0]=aa}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pick_dash_playlist_dash_update_dash_f_bang_: not a effect:pick-playlist: ~s",[l]));}function ta(l){return l!=null&&l!=undefined&&l instanceof qa}function xa(l,aa){plt.types.Struct.call(this,"make-effect:pick-random",[l,aa]);this.n=l;this.update_dash_f=aa}xa.prototype=new plt.types.Struct;function Da(l,aa){return new xa(l,aa)}function Aa(l){if(sa(l))return l.n;
else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pick-random-n: not a effect:pick-random: ~s",[l]));}function Ea(l){if(sa(l))return l.update_dash_f;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pick-random-update-f: not a effect:pick-random: ~s",[l]));}function Fa(l,aa){if(sa(l)){l.n=aa;l._fields[0]=aa}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pick_dash_random_dash_n_bang_: not a effect:pick-random: ~s",[l]));}function Ca(l,
aa){if(sa(l)){l.update_dash_f=aa;l._fields[1]=aa}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pick_dash_random_dash_update_dash_f_bang_: not a effect:pick-random: ~s",[l]));}function sa(l){return l!=null&&l!=undefined&&l instanceof xa}function ya(l){return F(l)||C(l)||H(l)||L(l)||G(l)||g(l)||x(l)||z(l)||fa(l)||b(l)||Z(l)||na(l)||ta(l)||sa(l)}(function(l){(function(){})(l||plt.Kernel.identity);j.effect_colon_raise_dash_sound_dash_volume=V;j.make_dash_effect_colon_raise_dash_sound_dash_volume=
ca;j.effect_colon_raise_dash_sound_dash_volume_question_=fa;j.effect_colon_set_dash_sound_dash_volume=N;j.make_dash_effect_colon_set_dash_sound_dash_volume=$;j.effect_colon_set_dash_sound_dash_volume_question_=z;j.effect_colon_set_dash_sound_dash_volume_dash_volume=ba;j.set_dash_effect_colon_set_dash_sound_dash_volume_dash_volume_bang_=ga;j.effect_colon_stop_dash_sound=e;j.make_dash_effect_colon_stop_dash_sound=h;j.effect_colon_stop_dash_sound_question_=x;j.effect_colon_stop_dash_sound_dash_sound=
p;j.set_dash_effect_colon_stop_dash_sound_dash_sound_bang_=i;j.effect_question_=ya;j.effect_colon_set_dash_wake_dash_lock=d;j.make_dash_effect_colon_set_dash_wake_dash_lock=m;j.effect_colon_set_dash_wake_dash_lock_question_=Z;j.effect_colon_set_dash_wake_dash_lock_dash_locks=u;j.set_dash_effect_colon_set_dash_wake_dash_lock_dash_locks_bang_=I;j.effect_colon_send_dash_sms=M;j.make_dash_effect_colon_send_dash_sms=r;j.effect_colon_send_dash_sms_question_=L;j.effect_colon_send_dash_sms_dash_address=y;
j.effect_colon_send_dash_sms_dash_msg=q;j.set_dash_effect_colon_send_dash_sms_dash_address_bang_=J;j.set_dash_effect_colon_send_dash_sms_dash_msg_bang_=P;j.effect_colon_release_dash_wake_dash_lock=ea;j.make_dash_effect_colon_release_dash_wake_dash_lock=ka;j.effect_colon_release_dash_wake_dash_lock_question_=na;j.effect_colon_pause_dash_sound=E;j.make_dash_effect_colon_pause_dash_sound=A;j.effect_colon_pause_dash_sound_question_=g;j.effect_colon_pause_dash_sound_dash_sound=c;j.set_dash_effect_colon_pause_dash_sound_dash_sound_bang_=
f;j.effect_colon_play_dash_dtmf_dash_tone=K;j.make_dash_effect_colon_play_dash_dtmf_dash_tone=O;j.effect_colon_play_dash_dtmf_dash_tone_question_=H;j.effect_colon_play_dash_dtmf_dash_tone_dash_tone=o;j.effect_colon_play_dash_dtmf_dash_tone_dash_duration=n;j.set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_tone_bang_=Q;j.set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_duration_bang_=W;j.effect_colon_play_dash_sound=T;j.make_dash_effect_colon_play_dash_sound=U;j.effect_colon_play_dash_sound_question_=
G;j.effect_colon_play_dash_sound_dash_sound=Y;j.set_dash_effect_colon_play_dash_sound_dash_sound_bang_=w;j.effect_colon_pick_dash_playlist=qa;j.make_dash_effect_colon_pick_dash_playlist=za;j.effect_colon_pick_dash_playlist_question_=ta;j.effect_colon_pick_dash_playlist_dash_update_dash_f=Ba;j.set_dash_effect_colon_pick_dash_playlist_dash_update_dash_f_bang_=oa;j.effect_colon_pick_dash_random=xa;j.make_dash_effect_colon_pick_dash_random=Da;j.effect_colon_pick_dash_random_question_=sa;j.effect_colon_pick_dash_random_dash_n=
Aa;j.effect_colon_pick_dash_random_dash_update_dash_f=Ea;j.set_dash_effect_colon_pick_dash_random_dash_n_bang_=Fa;j.set_dash_effect_colon_pick_dash_random_dash_update_dash_f_bang_=Ca;j.effect_colon_lower_dash_sound_dash_volume=ia;j.make_dash_effect_colon_lower_dash_sound_dash_volume=la;j.effect_colon_lower_dash_sound_dash_volume_question_=b;j.effect_colon_none=v;j.make_dash_effect_colon_none=S;j.effect_colon_none_question_=F;j.effect_colon_beep=R;j.make_dash_effect_colon_beep=B;j.effect_colon_beep_question_=
C})()})(this);plt.world.Kernel={};
(function(){var j,v=[],S,F=false;function R(h){function p(){}p.prototype=h;return new p}function B(h){function p(){}p.prototype=h;var i=new p;for(property in h)if(h.hasOwnProperty(property))i[property]=h[property];return i}var C=[];plt.world.Kernel.addAnnounceListener=function(h){C.push(h)};plt.world.Kernel.removeAnnounceListener=function(h){h=C.indexOf(h);h!=-1&&C.splice(h,1)};plt.world.Kernel.announce=function(h,p){for(var i=0;i<C.length;i++)try{C[i](h,p)}catch(x){}};function K(h){j=h;O()}plt.world.Kernel.updateWorld=
function(h){h=h(j);K(h)};plt.world.Kernel.shutdownWorld=function(){S=true};function O(){var h;for(h=0;h<v.length;h++)v[h](j)}function o(h){v.push(h)}function n(){if(F){clearInterval(F);F=false}S=false;v=[]}function Q(){if(window.document.getElementById("canvas")!=undefined)return window;var h=window.open("big-bang.html","big-bang");if(h==null)throw new Error("Error: Not allowed to create a new window.");return h}plt.world.Kernel.bigBang=function(h,p,i,x){plt.Kernel.check(h,plt.Kernel.isNumber,"big-bang",
"number",1);plt.Kernel.check(p,plt.Kernel.isNumber,"big-bang","number",2);plt.Kernel.arrayEach(args,function(ga,z){plt.Kernel.check(ga,plt.Kernel.isFunction,"big-bang","handler",z+4)});var N=Q(h,p),$=N.document.getElementById("canvas");$.width=plt.types.NumberTower.toFixnum(h);$.height=plt.types.NumberTower.toFixnum(p);n();var ba=new plt.world.config.WorldConfig;for(h=0;h<x.length;h++)ba=x[h](ba);ba=ba.updateAll({changeWorld:plt.world.Kernel.updateWorld,shutdownWorld:plt.world.Kernel.shutdownWorld});
plt.world.config.CONFIG=ba;if(ba.lookup("onKey"))N.onkeydown=function(ga){plt.world.stimuli.onKey(ga)};ba.lookup("onRedraw")&&o(function(ga){var z=$.getContext("2d");ga=ba.lookup("onRedraw")([ga]);ga.render(z,0,0)});o(function(ga){if(ba.lookup("stopWhen"))if(ba.lookup("stopWhen")([ga]))S=true});ba.lookup("onTick")&&W(N,ba);K(i);if(ba.lookup("initialEffect")){i=plt.world.Kernel.applyEffect(ba.lookup("initialEffect"));for(h=0;h<i.length;h++)S||updateWorld(i)}};function W(h,p){F=h.setInterval(function(){if(S){h.clearTimeout(F);
F=false}else plt.world.stimuli.onTick()},p.lookup("tickDelay"))}plt.world.Kernel.isKeyEqual=function(h,p){return h=h.toString().toLowerCase()==p.toString().toLowerCase()};plt.world.Kernel.imageWidth=function(h){plt.Kernel.check(h,y,"image-width","image",1);return plt.types.Rational.makeInstance(h.getWidth(),1)};plt.world.Kernel.imageHeight=function(h){plt.Kernel.check(h,y,"image-height","image",1);return plt.types.Rational.makeInstance(h.getHeight(),1)};plt.world.Kernel.placeImage=function(h,p,i,
x){plt.Kernel.check(h,y,"place-image","image",1);plt.Kernel.check(p,plt.Kernel.isNumber,"place-image","number",2);plt.Kernel.check(i,plt.Kernel.isNumber,"place-image","number",3);plt.Kernel.check(x,function($){return q($)||y($)},"place-image","image",4);if(q(x))return x.add(h,plt.types.NumberTower.toFixnum(p),plt.types.NumberTower.toFixnum(i));else{var N=new J(x.getWidth(),x.getHeight(),[]);N=N.add(x,0,0);return N=N.add(h,plt.types.NumberTower.toFixnum(p),plt.types.NumberTower.toFixnum(i))}};plt.world.Kernel.emptyScene=
function(h,p){plt.Kernel.check(h,plt.Kernel.isNumber,"empty-scene","number",1);plt.Kernel.check(p,plt.Kernel.isNumber,"empty-scene","number",2);return new J(plt.types.NumberTower.toFixnum(h),plt.types.NumberTower.toFixnum(p),[])};function H(h){return h!==undefined&&h!==null&&(h instanceof g||typeof e.get(h)!="undefined")}plt.world.Kernel.text=function(h,p,i){plt.Kernel.check(h,plt.Kernel.isString,"text","string",1);plt.Kernel.check(p,plt.Kernel.isNumber,"text","number",2);plt.Kernel.check(i,H,"text",
"color",3);if(e.get(i))i=e.get(i);return new U(h,plt.types.NumberTower.toFixnum(p),i)};function M(h){return(plt.Kernel.isString(h)||plt.Kernel.isSymbol(h))&&(h.toString().toLowerCase()=="solid"||h.toString().toLowerCase()=="outline")}plt.world.Kernel.circle=function(h,p,i){plt.Kernel.check(h,plt.Kernel.isNumber,"circle","number",1);plt.Kernel.check(p,M,"circle","style",2);plt.Kernel.check(i,H,"circle","color",3);if(e.get(i))i=e.get(i);return new Y(plt.types.NumberTower.toFixnum(h),p,i)};plt.world.Kernel.star=
function(h,p,i,x,N){plt.Kernel.check(h,plt.Kernel.isNumber,"star","number",1);plt.Kernel.check(p,plt.Kernel.isNumber,"star","number",2);plt.Kernel.check(i,plt.Kernel.isNumber,"star","number",3);plt.Kernel.check(x,M,"star","style",4);plt.Kernel.check(N,H,"star","color",5);if(e.get(N))N=e.get(N);return new w(plt.types.NumberTower.toFixnum(h),plt.types.NumberTower.toFixnum(p),plt.types.NumberTower.toFixnum(i),x,N)};plt.world.Kernel.openImageUrl=function(h){plt.Kernel.check(h,plt.Kernel.isString,"open-image-url",
"string",1);return P.makeInstance(h.toString())};plt.world.Kernel.nwRectangle=function(h,p,i,x){plt.Kernel.check(h,plt.Kernel.isNumber,"nw:rectangle","number",1);plt.Kernel.check(p,plt.Kernel.isNumber,"nw:rectangle","number",2);plt.Kernel.check(i,M,"nw:rectangle","style",3);plt.Kernel.check(x,H,"nw:rectangle","color",4);if(e.get(x))x=e.get(x);h=new T(plt.types.NumberTower.toFixnum(h),plt.types.NumberTower.toFixnum(p),i,x);return h.updatePinhole(0,0)};plt.world.Kernel.rectangle=function(h,p,i,x){plt.Kernel.check(h,
plt.Kernel.isNumber,"rectangle","number",1);plt.Kernel.check(p,plt.Kernel.isNumber,"rectangle","number",2);plt.Kernel.check(i,M,"rectangle","style",3);plt.Kernel.check(x,H,"rectangle","color",4);if(e.get(x))x=e.get(x);return new T(plt.types.NumberTower.toFixnum(h),plt.types.NumberTower.toFixnum(p),i,x)};plt.world.Kernel.triangle=function(h,p,i){plt.Kernel.check(h,plt.Kernel.isNumber,"triangle","number",1);plt.Kernel.check(p,M,"triangle","string",2);plt.Kernel.check(i,H,"triangle","color",3);if(e.get(i))i=
e.get(i);return new E(plt.types.NumberTower.toFixnum(h),p,i)};plt.world.Kernel.ellipse=function(h,p,i,x){plt.Kernel.check(h,plt.Kernel.isNumber,"ellipse","number",1);plt.Kernel.check(p,plt.Kernel.isNumber,"ellipse","number",2);plt.Kernel.check(i,M,"ellipse","string",3);plt.Kernel.check(x,H,"ellipse","color",4);if(e.get(x))x=e.get(x);return new A(plt.types.NumberTower.toFixnum(h),plt.types.NumberTower.toFixnum(p),i,x)};plt.world.Kernel.line=function(h,p,i){plt.Kernel.check(h,plt.Kernel.isNumber,"line",
"number",1);plt.Kernel.check(p,plt.Kernel.isNumber,"line","number",2);plt.Kernel.check(i,H,"line","color",3);if(e.get(i))i=e.get(i);h=new c(plt.types.NumberTower.toFixnum(h),plt.types.NumberTower.toFixnum(p),i);return h.updatePinhole(0,0)};function r(h,p){this.pinholeX=h;this.pinholeY=p}plt.world.Kernel.BaseImage=r;function y(h){return h!=null&&h!=undefined&&h instanceof r}plt.world.Kernel.isImage=y;plt.world.Kernel.put_dash_pinhole=function(h,p,i){plt.Kernel.check(h,y,"put-pinhole","image",1);plt.Kernel.check(p,
plt.Kernel.isNumber,"put-pinhole","number",2);plt.Kernel.check(i,plt.Kernel.isNumber,"put-pinhole","number",3);return h.updatePinhole(plt.types.NumberTower.toFixnum(p),plt.types.NumberTower.toFixnum(i))};r.prototype.updatePinhole=function(h,p){var i=B(this);i.pinholeX=h;i.pinholeY=p;return i};r.prototype.render=function(){throw new MobyRuntimeError("Unimplemented method render");};plt.world.Kernel.makeCanvas=function(h,p){var i=document.createElement("canvas");i.width=h;i.height=p;i.style.width=i.width+
"px";i.style.height=i.height+"px";if(window&&typeof window.G_vmlCanvasManager!="undefined"){i.style.display="none";document.body.appendChild(i);i=window.G_vmlCanvasManager.initElement(i);document.body.removeChild(i);i.style.display=""}return i};r.prototype.toDomNode=function(){var h=this,p=plt.types.NumberTower.toFixnum(plt.world.Kernel.imageWidth(h)),i=plt.types.NumberTower.toFixnum(plt.world.Kernel.imageHeight(h));p=plt.world.Kernel.makeCanvas(p,i);p.style.display="none";document.body.appendChild(p);
i=p.getContext("2d");h.render(i,0,0);document.body.removeChild(p);p.style.display="";return p};r.prototype.toWrittenString=function(){return"<image>"};r.prototype.toDisplayedString=function(){return"<image>"};plt.world.Kernel.image_question_=function(h){return y(h)};plt.world.Kernel.image_equal__question_=function(h,p){check(h,y,"image=?","image",1);check(p,y,"image=?","image",2);return h==p?plt.types.Logic.TRUE:plt.types.Logic.FALSE};function q(h){return h!=undefined&&h!=null&&h instanceof J}function J(h,
p,i){r.call(this,0,0);this.width=h;this.height=p;this.children=i}J.prototype=R(r.prototype);J.prototype.add=function(h,p,i){return new J(this.width,this.height,this.children.concat([[h,p-h.pinholeX,i-h.pinholeY]]))};J.prototype.render=function(h,p,i){var x,N,$,ba;h.clearRect(p,i,this.width,this.height);for(x=0;x<this.children.length;x++){N=this.children[x][0];$=this.children[x][1];ba=this.children[x][2];h.save();N.render(h,$+p,ba+i);h.restore()}};J.prototype.getWidth=function(){return this.width};
J.prototype.getHeight=function(){return this.height};function P(h,p){r.call(this,0,0);var i=this;this.isLoaded=false;if(p&&p.complete){this.img=p;this.isLoaded=true;this.pinholeX=i.img.width/2;this.pinholeY=i.img.height/2}else{this.img=new Image;this.img.onload=function(){i.isLoaded=true;i.pinholeX=i.img.width/2;i.pinholeY=i.img.height/2};this.img.onerror=function(){i.img.onerror="";i.img.src="http://www.wescheme.org/images/broken.png"};this.img.src=h}}P.prototype=R(r.prototype);plt.world.Kernel.FileImage=
P;var L={};P.makeInstance=function(h){h in L||(L[h]=new P(h));return L[h]};P.installInstance=function(h,p){L[h]=new P(h,p)};P.installBrokenImage=function(h){L[h]=new U("Unable to load "+h,10,e.get("red"))};P.prototype.render=function(h,p,i){h.drawImage(this.img,p,i)};P.prototype.getWidth=function(){return this.img.width};P.prototype.getHeight=function(){return this.img.height};P.prototype.toDomNode=function(){return this.img.cloneNode(true)};function X(h,p){var i=h.pinholeX-p.pinholeX,x=h.pinholeY-
p.pinholeY,N=Math.min(0,i),$=Math.min(0,x),ba=Math.max(i+p.getWidth(),h.getWidth()),ga=Math.max(x+p.getHeight(),h.getHeight());r.call(this,h.pinholeX-N,h.pinholeY-$);this.img1=h;this.img2=p;this.width=ba-N;this.height=ga-$;this.img1Dx=-N;this.img1Dy=-$;this.img2Dx=i-N;this.img2Dy=x-$}X.prototype=R(r.prototype);X.prototype.render=function(h,p,i){this.img1.render(h,p+this.img1Dx,i+this.img1Dy);this.img2.render(h,p+this.img2Dx,i+this.img2Dy)};X.prototype.getWidth=function(){return this.width};X.prototype.getHeight=
function(){return this.height};plt.world.Kernel.overlay=function(h,p,i){plt.Kernel.check(h,y,"overlay","image",1);plt.Kernel.check(p,y,"overlay","image",2);plt.Kernel.arrayEach(i,function(x,N){plt.Kernel.check(x,y,"overlay","image",N+3)});h=new X(h,p);for(p=0;p<i.length;p++)h=new X(h,i[p]);return h};plt.world.Kernel.overlay_slash_xy=function(h,p,i,x){plt.Kernel.check(h,y,"overlay/xy","image",1);plt.Kernel.check(p,plt.Kernel.isNumber,"overlay/xy","number",2);plt.Kernel.check(i,plt.Kernel.isNumber,
"overlay/xy","number",3);plt.Kernel.check(x,y,"overlay/xy","image",4);return new X(h,x.updatePinhole(plt.types.NumberTower.toFixnum(p),plt.types.NumberTower.toFixnum(i)))};function T(h,p,i,x){r.call(this,h/2,p/2);this.width=h;this.height=p;this.style=i;this.color=x}T.prototype=R(r.prototype);T.prototype.render=function(h,p,i){if(this.style.toString().toLowerCase()=="outline"){h.strokeStyle=this.color.toString();h.strokeRect(p,i,this.width,this.height)}else{h.fillStyle=this.color.toString();h.fillRect(p,
i,this.width,this.height)}};T.prototype.getWidth=function(){return this.width};T.prototype.getHeight=function(){return this.height};function U(h,p,i){r.call(this,0,0);this.msg=h;this.size=p;this.color=i;this.font=this.size+"px Optimer";p=plt.world.Kernel.makeCanvas(0,0);p=p.getContext("2d");p.font=this.font;h=p.measureText(h);this.width=h.width;this.height=p.measureText("m").width+20}U.prototype=R(r.prototype);U.prototype.render=function(h,p,i){h.save();h.font=this.font;h.textAlign="left";h.textBaseline=
"top";h.fillStyle=this.color.toString();h.fillText(this.msg,p,i);h.restore()};U.prototype.getWidth=function(){return this.width};U.prototype.getHeight=function(){return this.height};function Y(h,p,i){r.call(this,h,h);this.radius=h;this.style=p;this.color=i}Y.prototype=R(r.prototype);Y.prototype.render=function(h,p,i){h.save();h.beginPath();h.arc(p+this.radius,i+this.radius,this.radius,0,2*Math.PI,false);if(this.style.toString().toLowerCase()=="outline"){h.strokeStyle=this.color.toString();h.stroke()}else{h.fillStyle=
this.color.toString();h.fill()}h.closePath();h.restore()};Y.prototype.getWidth=function(){return this.radius*2};Y.prototype.getHeight=function(){return this.radius*2};function w(h,p,i,x,N){r.call(this,Math.max(p,i),Math.max(p,i));this.points=h;this.outer=p;this.inner=i;this.style=x;this.color=N;this.radius=Math.max(this.inner,this.outer)}w.prototype=R(r.prototype);var G=Math.PI/180;w.prototype.render=function(h,p,i){h.save();h.beginPath();for(var x=0;x<this.points*2+1;x++){var N=360/(2*this.points)*
x*G-0.5,$=x%2==1?this.outer:this.inner;h.lineTo(p+this.radius+Math.sin(N)*$,i+this.radius+Math.cos(N)*$)}if(this.style.toString().toLowerCase()=="outline"){h.strokeStyle=this.color.toString();h.stroke()}else{h.fillStyle=this.color.toString();h.fill()}h.closePath();h.restore()};w.prototype.getWidth=function(){return this.radius*2};w.prototype.getHeight=function(){return this.radius*2};function E(h,p,i){r.call(this,h,h);this.side=h;this.style=p;this.color=i}E.prototype=R(r.prototype);E.prototype.render=
function(h,p,i){var x=this.getWidth(),N=this.getHeight();h.beginPath();h.moveTo(p+this.side/2,i);h.lineTo(p+x,i+N);h.lineTo(p,i+N);h.closePath();if(this.style.toString().toLowerCase()=="outline"){h.strokeStyle=this.color.toString();h.stroke()}else{h.fillStyle=this.color.toString();h.fill()}};E.prototype.getWidth=function(){return this.side};E.prototype.getHeight=function(){return Math.ceil(this.side*Math.sqrt(3)/2)};function A(h,p,i,x){r.call(this,Math.floor(h/2),Math.floor(p/2));this.width=h;this.height=
p;this.style=i;this.color=x}A.prototype=R(r.prototype);A.prototype.render=function(h,p,i){h.save();var x=this.width/2*0.5522848,N=this.height/2*0.5522848,$=p+this.width,ba=i+this.height,ga=p+this.width/2,z=i+this.height/2;h.moveTo(p,z);h.bezierCurveTo(p,z-N,ga-x,i,ga,i);h.bezierCurveTo(ga+x,i,$,z-N,$,z);h.bezierCurveTo($,z+N,ga+x,ba,ga,ba);h.bezierCurveTo(ga-x,ba,p,z+N,p,z);h.closePath();if(this.style.toString().toLowerCase()=="outline"){h.strokeStyle=this.color.toString();h.stroke()}else{h.fillStyle=
this.color.toString();h.fill()}h.restore()};A.prototype.getWidth=function(){return this.width};A.prototype.getHeight=function(){return this.height};function c(h,p,i){r.call(this,0,0);this.x=h;this.y=p;this.color=i}c.prototype=R(r.prototype);c.prototype.render=function(h,p,i){h.save();h.moveTo(0,0);h.lineTo(this.x+p,this.y+i);h.strokeStyle=this.color.toString();h.stroke();h.restore()};c.prototype.getWidth=function(){return this.x+1};c.prototype.getHeight=function(){return this.y+1};plt.world.Kernel.applyEffect=
function(h){var p=[];if(!plt.Kernel.empty_question_(h))if(plt.Kernel.pair_question_(h)){p=p.concat(plt.world.Kernel.applyEffect(h.first()));p=p.concat(plt.world.Kernel.applyEffect(h.rest()))}else if(h=h.run())p=p.concat(h);return p};effect_colon_none.prototype.run=function(){};effect_colon_beep.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService().beep()};effect_colon_play_dash_dtmf_dash_tone.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService().playDtmfTone(plt.types.NumberTower.toFixnum(this._fields[0]),
plt.types.NumberTower.toFixnum(this._fields[1]))};effect_colon_send_dash_sms.prototype.run=function(){plt.platform.Platform.getInstance().getSmsService().send(this._fields[0],this._fields[1])};effect_colon_play_dash_sound.prototype.run=function(){if(plt.Kernel.isString(this._fields[0]))plt.platform.Platform.getInstance().getSoundService().playSoundUrl(this._fields[0]);else playlist_dash_sound_question_(this._fields[0])&&plt.platform.Platform.getInstance().getSoundService().playPlaylist(this._fields[0]._fields[0])};
effect_colon_pause_dash_sound.prototype.run=function(){if(plt.Kernel.isString(this._fields[0]))plt.platform.Platform.getInstance().getSoundService().pauseSoundUrl(this._fields[0]);else playlist_dash_sound_question_(this._fields[0])&&plt.platform.Platform.getInstance().getSoundService().pausePlaylist(this._fields[0]._fields[0])};effect_colon_stop_dash_sound.prototype.run=function(){if(plt.Kernel.isString(this._fields[0]))plt.platform.Platform.getInstance().getSoundService().stopSoundUrl(this._fields[0]);
else playlist_dash_sound_question_(this._fields[0])&&plt.platform.Platform.getInstance().getSoundService().stopPlaylist(this._fields[0]._fields[0])};effect_colon_set_dash_sound_dash_volume.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService().setVolume(plt.types.NumberTower.toFixnum(this._fields[0]))};effect_colon_raise_dash_sound_dash_volume.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService.raiseVolume()};effect_colon_lower_dash_sound_dash_volume.prototype.run=
function(){plt.platform.Platform.getInstance().getSoundService.lowerVolume()};effect_colon_set_dash_wake_dash_lock.prototype.run=function(){plt.platform.Platform.getInstance().getPowerService().setWakeLock(plt.types.NumberTower.toFixnum(this._fields[0]))};effect_colon_release_dash_wake_dash_lock.prototype.run=function(){plt.platform.Platform.getInstance().getPowerService().releaseWakeLock()};effect_colon_pick_dash_playlist.prototype.run=function(){var h=this._fields[0];function p(i){var x=make_dash_playlist_dash_sound(i);
setTimeout(function(){var N=plt.world.config.CONFIG.lookup("changeWorld");N(function($){return h([$,x])})},0)}plt.platform.Platform.getInstance().getPickPlaylistService().pickPlaylist(p)};effect_colon_pick_dash_random.prototype.run=function(){var h=plt.types.Rational.makeInstance(Math.floor(plt.types.NumberTower.toFixnum(this._fields[0])*Math.random()),1),p=this._fields[1];return function(i){return p([i,h])}};function f(){this.colors={}}f.prototype.put=function(h,p){this.colors[h]=p};f.prototype.get=
function(h){return this.colors[h.toString().toUpperCase()]};plt.world.Kernel.make_dash_color=function(h,p,i){function x(N){return plt.types.NumberTower.lessThanOrEqual(plt.types.Rational.ZERO,N)&&plt.types.NumberTower.lessThanOrEqual(N,plt.types.Rational.makeInstance(255,1))}plt.Kernel.check(h,x,"make-color","number between 0 and 255",1);plt.Kernel.check(p,x,"make-color","number between 0 and 255",2);plt.Kernel.check(i,x,"make-color","number between 0 and 255",3);return new g(plt.types.NumberTower.toFixnum(h),
plt.types.NumberTower.toFixnum(p),plt.types.NumberTower.toFixnum(i))};function g(h,p,i){plt.types.Struct.call(this,"make-color",[h,p,i]);this._eqHashCode=plt.types.makeEqHashCode()}g.prototype=R(plt.types.Struct.prototype);g.prototype.toString=function(){return"rgb("+this._fields[0]+","+this._fields[1]+","+this._fields[2]+")"};g.prototype.toRGBAString=function(){return"rgba("+this._fields[0]+","+this._fields[1]+","+this._fields[2]+", 1)"};var e=new f;e.put("ORANGE",new g(255,165,0));e.put("RED",new g(255,
0,0));e.put("ORANGERED",new g(255,69,0));e.put("TOMATO",new g(255,99,71));e.put("DARKRED",new g(139,0,0));e.put("RED",new g(255,0,0));e.put("FIREBRICK",new g(178,34,34));e.put("CRIMSON",new g(220,20,60));e.put("DEEPPINK",new g(255,20,147));e.put("MAROON",new g(176,48,96));e.put("INDIAN RED",new g(205,92,92));e.put("INDIANRED",new g(205,92,92));e.put("MEDIUM VIOLET RED",new g(199,21,133));e.put("MEDIUMVIOLETRED",new g(199,21,133));e.put("VIOLET RED",new g(208,32,144));e.put("VIOLETRED",new g(208,32,
144));e.put("LIGHTCORAL",new g(240,128,128));e.put("HOTPINK",new g(255,105,180));e.put("PALEVIOLETRED",new g(219,112,147));e.put("LIGHTPINK",new g(255,182,193));e.put("ROSYBROWN",new g(188,143,143));e.put("PINK",new g(255,192,203));e.put("ORCHID",new g(218,112,214));e.put("LAVENDERBLUSH",new g(255,240,245));e.put("SNOW",new g(255,250,250));e.put("CHOCOLATE",new g(210,105,30));e.put("SADDLEBROWN",new g(139,69,19));e.put("BROWN",new g(132,60,36));e.put("DARKORANGE",new g(255,140,0));e.put("CORAL",new g(255,
127,80));e.put("SIENNA",new g(160,82,45));e.put("ORANGE",new g(255,165,0));e.put("SALMON",new g(250,128,114));e.put("PERU",new g(205,133,63));e.put("DARKGOLDENROD",new g(184,134,11));e.put("GOLDENROD",new g(218,165,32));e.put("SANDYBROWN",new g(244,164,96));e.put("LIGHTSALMON",new g(255,160,122));e.put("DARKSALMON",new g(233,150,122));e.put("GOLD",new g(255,215,0));e.put("YELLOW",new g(255,255,0));e.put("OLIVE",new g(128,128,0));e.put("BURLYWOOD",new g(222,184,135));e.put("TAN",new g(210,180,140));
e.put("NAVAJOWHITE",new g(255,222,173));e.put("PEACHPUFF",new g(255,218,185));e.put("KHAKI",new g(240,230,140));e.put("DARKKHAKI",new g(189,183,107));e.put("MOCCASIN",new g(255,228,181));e.put("WHEAT",new g(245,222,179));e.put("BISQUE",new g(255,228,196));e.put("PALEGOLDENROD",new g(238,232,170));e.put("BLANCHEDALMOND",new g(255,235,205));e.put("MEDIUM GOLDENROD",new g(234,234,173));e.put("MEDIUMGOLDENROD",new g(234,234,173));e.put("PAPAYAWHIP",new g(255,239,213));e.put("MISTYROSE",new g(255,228,
225));e.put("LEMONCHIFFON",new g(255,250,205));e.put("ANTIQUEWHITE",new g(250,235,215));e.put("CORNSILK",new g(255,248,220));e.put("LIGHTGOLDENRODYELLOW",new g(250,250,210));e.put("OLDLACE",new g(253,245,230));e.put("LINEN",new g(250,240,230));e.put("LIGHTYELLOW",new g(255,255,224));e.put("SEASHELL",new g(255,245,238));e.put("BEIGE",new g(245,245,220));e.put("FLORALWHITE",new g(255,250,240));e.put("IVORY",new g(255,255,240));e.put("GREEN",new g(0,255,0));e.put("LAWNGREEN",new g(124,252,0));e.put("CHARTREUSE",
new g(127,255,0));e.put("GREEN YELLOW",new g(173,255,47));e.put("GREENYELLOW",new g(173,255,47));e.put("YELLOW GREEN",new g(154,205,50));e.put("YELLOWGREEN",new g(154,205,50));e.put("MEDIUM FOREST GREEN",new g(107,142,35));e.put("OLIVEDRAB",new g(107,142,35));e.put("MEDIUMFORESTGREEN",new g(107,142,35));e.put("DARK OLIVE GREEN",new g(85,107,47));e.put("DARKOLIVEGREEN",new g(85,107,47));e.put("DARKSEAGREEN",new g(143,188,139));e.put("LIME",new g(0,255,0));e.put("DARK GREEN",new g(0,100,0));e.put("DARKGREEN",
new g(0,100,0));e.put("LIME GREEN",new g(50,205,50));e.put("LIMEGREEN",new g(50,205,50));e.put("FOREST GREEN",new g(34,139,34));e.put("FORESTGREEN",new g(34,139,34));e.put("SPRING GREEN",new g(0,255,127));e.put("SPRINGGREEN",new g(0,255,127));e.put("MEDIUM SPRING GREEN",new g(0,250,154));e.put("MEDIUMSPRINGGREEN",new g(0,250,154));e.put("SEA GREEN",new g(46,139,87));e.put("SEAGREEN",new g(46,139,87));e.put("MEDIUM SEA GREEN",new g(60,179,113));e.put("MEDIUMSEAGREEN",new g(60,179,113));e.put("AQUAMARINE",
new g(112,216,144));e.put("LIGHTGREEN",new g(144,238,144));e.put("PALE GREEN",new g(152,251,152));e.put("PALEGREEN",new g(152,251,152));e.put("MEDIUM AQUAMARINE",new g(102,205,170));e.put("MEDIUMAQUAMARINE",new g(102,205,170));e.put("TURQUOISE",new g(64,224,208));e.put("LIGHTSEAGREEN",new g(32,178,170));e.put("MEDIUM TURQUOISE",new g(72,209,204));e.put("MEDIUMTURQUOISE",new g(72,209,204));e.put("HONEYDEW",new g(240,255,240));e.put("MINTCREAM",new g(245,255,250));e.put("ROYALBLUE",new g(65,105,225));
e.put("DODGERBLUE",new g(30,144,255));e.put("DEEPSKYBLUE",new g(0,191,255));e.put("CORNFLOWERBLUE",new g(100,149,237));e.put("STEEL BLUE",new g(70,130,180));e.put("STEELBLUE",new g(70,130,180));e.put("LIGHTSKYBLUE",new g(135,206,250));e.put("DARK TURQUOISE",new g(0,206,209));e.put("DARKTURQUOISE",new g(0,206,209));e.put("CYAN",new g(0,255,255));e.put("AQUA",new g(0,255,255));e.put("DARKCYAN",new g(0,139,139));e.put("TEAL",new g(0,128,128));e.put("SKY BLUE",new g(135,206,235));e.put("SKYBLUE",new g(135,
206,235));e.put("CADET BLUE",new g(96,160,160));e.put("CADETBLUE",new g(95,158,160));e.put("DARK SLATE GRAY",new g(47,79,79));e.put("DARKSLATEGRAY",new g(47,79,79));e.put("LIGHTSLATEGRAY",new g(119,136,153));e.put("SLATEGRAY",new g(112,128,144));e.put("LIGHT STEEL BLUE",new g(176,196,222));e.put("LIGHTSTEELBLUE",new g(176,196,222));e.put("LIGHT BLUE",new g(173,216,230));e.put("LIGHTBLUE",new g(173,216,230));e.put("POWDERBLUE",new g(176,224,230));e.put("PALETURQUOISE",new g(175,238,238));e.put("LIGHTCYAN",
new g(224,255,255));e.put("ALICEBLUE",new g(240,248,255));e.put("AZURE",new g(240,255,255));e.put("MEDIUM BLUE",new g(0,0,205));e.put("MEDIUMBLUE",new g(0,0,205));e.put("DARKBLUE",new g(0,0,139));e.put("MIDNIGHT BLUE",new g(25,25,112));e.put("MIDNIGHTBLUE",new g(25,25,112));e.put("NAVY",new g(36,36,140));e.put("BLUE",new g(0,0,255));e.put("INDIGO",new g(75,0,130));e.put("BLUE VIOLET",new g(138,43,226));e.put("BLUEVIOLET",new g(138,43,226));e.put("MEDIUM SLATE BLUE",new g(123,104,238));e.put("MEDIUMSLATEBLUE",
new g(123,104,238));e.put("SLATE BLUE",new g(106,90,205));e.put("SLATEBLUE",new g(106,90,205));e.put("PURPLE",new g(160,32,240));e.put("DARK SLATE BLUE",new g(72,61,139));e.put("DARKSLATEBLUE",new g(72,61,139));e.put("DARKVIOLET",new g(148,0,211));e.put("DARK ORCHID",new g(153,50,204));e.put("DARKORCHID",new g(153,50,204));e.put("MEDIUMPURPLE",new g(147,112,219));e.put("CORNFLOWER BLUE",new g(68,64,108));e.put("MEDIUM ORCHID",new g(186,85,211));e.put("MEDIUMORCHID",new g(186,85,211));e.put("MAGENTA",
new g(255,0,255));e.put("FUCHSIA",new g(255,0,255));e.put("DARKMAGENTA",new g(139,0,139));e.put("VIOLET",new g(238,130,238));e.put("PLUM",new g(221,160,221));e.put("LAVENDER",new g(230,230,250));e.put("THISTLE",new g(216,191,216));e.put("GHOSTWHITE",new g(248,248,255));e.put("WHITE",new g(255,255,255));e.put("WHITESMOKE",new g(245,245,245));e.put("GAINSBORO",new g(220,220,220));e.put("LIGHT GRAY",new g(211,211,211));e.put("LIGHTGRAY",new g(211,211,211));e.put("SILVER",new g(192,192,192));e.put("GRAY",
new g(190,190,190));e.put("DARK GRAY",new g(169,169,169));e.put("DARKGRAY",new g(169,169,169));e.put("DIM GRAY",new g(105,105,105));e.put("DIMGRAY",new g(105,105,105));e.put("BLACK",new g(0,0,0))})();plt.Jsworld={};
(function(){var j=plt.Jsworld,v=false;function S(){}var F=new S,R=[],B=[];j.shutdown=function(){for(;B.length>0;){var k=B.pop();k&&k.pause()}O()};function C(k){R.push(k)}function K(k){k=R.indexOf(k);k!=-1&&R.splice(k,1)}function O(){F=new S;R=[]}function o(k){var t=F;try{F=k(F)}catch(s){F=t;throw s;}for(k=0;k<R.length;k++)try{R[k](F,t)}catch(D){F=t;throw D;}}j.change_world=o;Number.prototype.NaN0=function(){return isNaN(this)?0:this};function n(k){for(var t=0,s=0;k.offsetParent;){t+=k.offsetLeft+
(k.currentStyle?parseInt(k.currentStyle.borderLeftWidth).NaN0():0);s+=k.offsetTop+(k.currentStyle?parseInt(k.currentStyle.borderTopWidth).NaN0():0);k=k.offsetParent}t+=k.offsetLeft+(k.currentStyle?parseInt(k.currentStyle.borderLeftWidth).NaN0():0);s+=k.offsetTop+(k.currentStyle?parseInt(k.currentStyle.borderTopWidth).NaN0():0);return{x:t,y:s}}j.getPosition=n;var Q=0;function W(){return Q++}j.gensym=W;function H(k,t){for(var s=new Array(k.length),D=0;D<k.length;D++)s[D]=t(k[D]);return s}j.map=H;function M(k,
t){for(var s=[],D=0;D<k.length;D++)s=s.concat(t(k[D]));return s}function r(k,t){for(var s=new Array(k.length),D=0;D<k.length;D++)s[D]=t(k[D],D);return s}j.mapi=r;function y(k,t,s){for(var D=0;D<k.length;D++)t=s(k[D],t);return t}j.fold=y;function q(k,t){var s={};for(var D in k)s[D]=k[D];for(D in t)s[D]=t[D];return s}j.augment=q;function J(k,t,s){var D={};for(var da in k)D[da]=k[da];D[t]=s;return D}j.assoc_cons=J;function P(k,t){return k.concat([t])}j.cons=P;function L(k,t){return k.concat(t)}j.append=
L;function X(k,t){for(var s=[],D=0;D<k.length;D++)s.push([k[D],t[D]]);return s}j.array_join=X;function T(k,t){for(var s=0;s<k.length;s++)if(k[s]===t)return k.slice(0,s).concat(k.slice(s+1));return k}j.removeq=T;function U(k,t){for(var s=0;s<k.length;s++)if(t(k[s]))return k.slice(0,s).concat(k.slice(s+1));return k}j.removef=U;function Y(k,t){for(var s=0;s<k.length;s++)if(t(k[s]))return k.slice(0,s).concat(Y(k.slice(s+1),t));return k}j.filter=Y;function w(k,t){var s={};for(var D in k)if(D!=t)s[D]=k[D];
return s}j.without=w;function G(k,t){for(var s=0;s<k.length;s++)if(k[s]===t)return true;return false}j.memberq=G;function E(k,t){for(var s=0;s<k.length;s++)if(k[s]==t)return true;return false}j.member=E;function A(k){return k[0]}j.head=A;function c(k){return k.slice(1,k.length)}j.tail=c;function f(k){var t=[k];for(k=k.firstChild;k!=null;k=k.nextSibling)t.push(f(k));return t}j.node_to_tree=f;function g(k){var t=[k.node];if(k.node.jsworldOpaque==true)return t;for(var s=0;s<k.children.length;s++)t=t.concat(g(k.children[s]));
return t}function e(k,t){return k&&t&&k===t}function h(k,t){return!e(k,t)}function p(k){var t=[];if(k.node.jsworldOpaque==true)return[];for(var s=0;s<k.children.length;s++)t.push({relation:"parent",parent:k.node,child:k.children[s].node});for(s=0;s<k.children.length-1;s++)t.push({relation:"neighbor",left:k.children[s].node,right:k.children[s+1].node});for(s=0;s<k.children.length;s++)t=t.concat(p(k.children[s]));return t}function i(k,t){k.appendChild(t)}function x(k,t,s){for(var D=0;D<s.length;D++)if(s[D].relation==
"parent"){var da=s[D].parent,ha=s[D].child;h(ha.parentNode,da)&&i(da,ha)}for(;;){da=false;for(D=0;D<s.length;D++)if(s[D].relation=="neighbor"){ha=s[D].left;var ma=s[D].right;if(h(ha.nextSibling,ma)){ha.parentNode.insertBefore(ha,ma);da=true}}if(!da)break}var ja;function va(ua,ra){ra=ua.compareDocumentPosition(ra);if(ra&ua.DOCUMENT_POSITION_CONTAINED_BY)return 1;if(ra&ua.DOCUMENT_POSITION_CONTAINS)return-1;if(ra&ua.DOCUMENT_POSITION_FOLLOWING)return-1;if(ra&ua.DOCUMENT_POSITION_PRECEDING)return 1;
return 0}try{ja=t.concat(k).sort(va)}catch(pa){ja=null}s=k;for(k=k.parentNode;s!=k;){for(;;){if(s.firstChild==null||s.jsworldOpaque==true)break;s=s.firstChild}for(;s!=k;){ha=s.nextSibling;da=s.parentNode;ma=false;var wa=undefined;if(ja!=null)for(;ja.length>0&&va(s,ja[0])>=0;){D=ja.shift();if(e(D,s)){ma=true;wa=D;break}}else for(D=0;D<t.length;D++)if(e(t[D],s)){ma=true;wa=t[D];break}if(ma)N(s,wa);else{if(!s.isJsworldOpaque)for(;s.firstChild!=null;)i(s.parentNode,s.firstChild);ha=s.nextSibling;s.parentNode.removeChild(s)}if(ha==
null)s=da;else{s=ha;break}}}ca(t)}function N(){}function $(k){return k.replace(/\-(.)/g,function(t,s){return s.toUpperCase()})}function ba(k,t){for(var s=0;s<t.length;s++)k.style[$(t[s].attrib)]=t[s].values.join(" ")}function ga(k,t){return t.id.match(/^\./)?"class"in k&&E(k["class"].split(/\s+/),t.id.substring(1)):"id"in k&&k.id==t.id}function z(k,t){for(var s=0;s<k.length;s++)V(k[s]);for(s=0;s<t.length;s++)if("id"in t[s])for(var D=0;D<k.length;D++)ga(k[D],t[s])&&ba(k[D],t[s].attribs);else ba(t[s].node,
t[s].attribs)}function V(k){if("style"in k)k.style.cssText=""}function ca(k){for(var t=0;t<k.length;t++)k[t].onWorldChange&&k[t].onWorldChange(F)}function fa(k,t,s,D,da){if(t instanceof S){var ha=ta(D(k)),ma=g(ha);z(ma,Aa(da(k)));x(s,ma,p(ha))}else ia(function(){var ja=D(t),va=D(k),pa=da(t),wa=da(k),ua=ta(va),ra=g(ua);if(ja!==va){z(ra,Aa(wa));x(s,ra,p(ua))}else pa!==wa&&z(ra,Aa(wa))})}function ia(k){var t;if(b()){t=d();k();t.restore()}else k()}function la(){this.focused=v;this.selectionStart=v.selectionStart;
this.selectionEnd=v.selectionEnd}la.prototype.restore=function(){if(this.focused.parentNode){this.focused.selectionStart=this.selectionStart;this.focused.selectionEnd=this.selectionEnd;this.focused.focus()}else if(this.focused.id){var k=document.getElementById(this.focused.id);if(k){k.selectionStart=this.selectionStart;k.selectionEnd=this.selectionEnd;k.focus()}}};function b(){return v!=undefined}function d(){return new la}function m(k,t,s,D,da){this.top=k;this.world=t;this.handlers=D;this.handlerCreators=
s;this.attribs=da}m.prototype.restart=function(){u(this.top,this.world,this.handlerCreators,this.attribs)};m.prototype.pause=function(){for(var k=0;k<this.handlers.length;k++)this.handlers[k]instanceof ea||this.handlers[k].onUnregister(top)};function u(k,t,s,D){O();var da=H(s,function(pa){return pa()});B.length>0&&B[B.length-1].pause();var ha=new m(k,t,s,da,D);B.push(ha);function ma(pa){ha.world=pa}C(ma);var ja=new ea(function(){return false},function(){});for(s=0;s<da.length;s++)if(da[s]instanceof
ea)ja=da[s];else da[s].onRegister(k);function va(pa){if(ja.test(pa)){ja.receiver(F);(pa=B.pop())&&pa.pause();if(B.length>0){pa=B.pop();pa.restart()}}}C(va);l(k,D);o(function(){return t})}j.big_bang=u;function I(k,t){return function(){var s={watchId:-1,onRegister:function(){s.watchId=setInterval(function(){o(t)},k)},onUnregister:function(){clearInterval(s.watchId)}};return s}}j.on_tick=I;function Z(k,t){function s(D){D=k(D);sa(D,D);return D}return function(){var D={_top:null,_listener:function(da,
ha){fa(da,ha,D._top,s,t)},onRegister:function(da){D._top=da;C(D._listener)},onUnregister:function(){K(D._listener)}};return D}}j.on_draw=Z;function ea(k,t){this.test=k;this.receiver=t}function ka(k,t){return function(){if(t==undefined)t=function(){};return new ea(k,t)}}j.stop_when=ka;function na(k){function t(s){k(s)}return function(){return{onRegister:function(){C(t)},onUnregister:function(){K(t)}}}}j.on_world_change=na;function qa(k,t,s){k.addEventListener?k.addEventListener(t,s,false):k.attachEvent("on"+
t,s,false)}function za(k,t,s){qa(k,t,function(D){o(function(da){return s(da,D)})})}function Ba(k,t,s){qa(k,t,function(D){setTimeout(function(){o(function(da){return s(da,D)})},0)})}function oa(k){qa(k,"focus",function(){v=k});qa(k,"blur",function(){v=undefined});return k}function ta(k){return k.length==undefined?{node:k,children:[]}:{node:k[0],children:H(k.slice(1),ta)}}function xa(k){return{attrib:k[0],values:k.slice(1)}}function Da(k){var t=H(k.slice(1),xa);return typeof k[0]=="string"?[{id:k[0],
attribs:t}]:"length"in k[0]?H(k[0],function(s){return{id:s,attribs:t}}):[{node:k[0],attribs:t}]}function Aa(k){return M(k,Da)}function Ea(k){return k.nodeType==Node.TEXT_NODE}function Fa(k){return k.nodeType==Node.ELEMENT_NODE}function Ca(k,t){throw new ya(plt.Kernel.format("Expected a non-empty array, received ~s within ~s",[k,t]),k);}function sa(k,t){!k instanceof Array&&Ca(k,t);k.length==0&&Ca(k,t);if(Ea(k[0])){if(k.length>1)throw new ya(plt.Kernel.format("Text node ~s can not have children",[k]),
k);}else if(Fa(k[0]))for(t=1;t<k.length;t++)sa(k[t],k);else throw new ya(plt.Kernel.format("expected a Text or an Element, received ~s within ~s",[k,t]),k[0]);}function ya(k,t){this.msg=k;this.elt=t}ya.prototype.toString=function(){return"on-draw: "+this.msg};function l(k,t){if(t)for(a in t)if(t.hasOwnProperty(a))if(typeof t[a]=="function")za(k,a,t[a]);else k[a]=t[a];return k}function aa(k){return oa(l(document.createElement("p"),k))}j.p=aa;function Ia(k){return oa(l(document.createElement("div"),
k))}j.div=Ia;function Ja(k,t){var s=document.createElement("button");za(s,"click",k);return oa(l(s,t))}j.button=Ja;function Ga(k){if(k.stopPropagation)k.stopPropagation();else k.cancelBubble=true}function Ka(k){qa(k,"click",function(t){Ga(t)});return k}function La(k,t,s){k=k.toLowerCase();var D={text:Ha,password:Ha,checkbox:Ma};if(D[k])return D[k](k,t,s);else throw new plt.Kernel.MobyRuntimeError("js-input: does not currently support type "+k);}j.input=La;function Ha(k,t,s){var D=document.createElement("input");
D.type=k;function da(ja){return t(ja,D.value)}Ba(D,"keypress",da);k=1000;var ha=D.value,ma=setInterval(function(){if(D.parentNode){if(ha!=D.value){ha=D.value;o(function(ja){return t(ja,D.value)})}}else clearInterval(ma)},k);return Ka(oa(l(D,s)))}function Ma(k,t,s){var D=document.createElement("input");D.type=k;function da(ha){return t(ha,D.checked?plt.types.Logic.TRUE:plt.types.Logic.FALSE)}Ba(D,"change",da);qa(D,"click",function(ha){Ga(ha)});return l(D,s)}function Na(k){return k=document.createTextNode(k)}
j.text=Na;function Oa(k,t,s){for(var D=document.createElement("select"),da=0;da<t.length;da++)D.add(Pa({value:t[da]}),null);D.jsworldOpaque=true;za(D,"change",s);return k=oa(l(D,k))}j.select=Oa;function Pa(k){var t=document.createElement("option");t.text=k.value;t.value=k.value;return t}function Qa(k){return oa(l(document.createElement("textarea"),k))}j.textarea=Qa;function Ra(k){return oa(l(document.createElement("h1"),k))}j.h1=Ra;function Sa(k){return oa(l(document.createElement("canvas"),k))}j.canvas=
Sa;function Ta(k,t){var s=document.createElement("img");s.src=k;return oa(l(s,t))}j.img=Ta;function Ua(k,t){return oa(l(k,t))}j.raw_node=Ua})();plt.world.MobyJsWorld={};plt.world.MobyJsworld={};
(function(){var j=plt.world.MobyJsworld,v=plt.Jsworld,S=plt.Kernel.MobyTypeError;function F(r){return typeof r=="function"}function R(r){var y=r;if(plt.Kernel.empty_question_(y))return[];else if(plt.Kernel.pair_question_(y)){for(r=[];!y.isEmpty();){r.push(R(y.first()));y=y.rest()}return r}else return r}function B(r){for(var y={};!r.isEmpty();){var q=r.first().first(),J=r.first().rest().first();y[q]=J;r=r.rest()}return y}function C(){if(window.document.getElementById("jsworld-div")===undefined){var r=
window.document.createElement("div");r.id="jsworld-div";window.document.appendChild(r)}return window}j.makeToplevelNode=function(){return C().document.getElementById("jsworld-div")};function K(r){return r instanceof plt.types.Cons||r instanceof plt.types.Empty}j.printWorldHook=function(r,y){if(y.lastChild==null){r=plt.types.toDomNode(r);y.appendChild(r)}else{r=plt.types.toDomNode(r);y.replaceChild(r,y.lastChild)}};function O(r){return typeof r.nodeType!="undefined"}function o(r,y,q){if(plt.Kernel.pair_question_(r)){var J=
plt.Kernel.first(r);q=plt.Kernel.rest(r);if(!O(J))throw new S(plt.Kernel.format("on-draw: expected a dom-element, but received ~s instead, the first element within ~s",[J,y]));if(J.nodeType==Node.TEXT_NODE&&!plt.Kernel.empty_question_(q))throw new S(plt.Kernel.format("on-draw: the text node ~s must not have children.  It has ~s",[J,q]));for(y=2;!plt.Kernel.empty_question_(q);){o(plt.Kernel.first(q),r,y);q=plt.Kernel.rest(q);y++}}else throw new S(plt.Kernel.format("on-draw: expected a dom-s-expression, but received ~s instead~a",
[r,q!=undefined?plt.Kernel.format(", the ~a element within ~s.",[plt.Kernel.ordinalize(q),y]):"."]));}function n(r,y,q){plt.Kernel.attachEvent(r,y,q)}function Q(r){if(r.preventDefault)r.preventDefault();else r.returnValue=false}function W(r){if(r.stopPropagation)r.stopPropagation();else r.cancelBubble=true}j.bigBang=function(r,y){var q=plt.types.Empty.EMPTY;plt.Kernel.arrayEach(y,function(Y,w){plt.Kernel.check(Y,function(G){return F(G)||K(G)},"js-big-bang","handler or attribute list",w+2)});var J=
j.makeToplevelNode();J.tabIndex=0;n(J,"click",function(Y){Q(Y);W(Y);return false},false);for(var P=new plt.world.config.WorldConfig,L=0;L<y.length;L++)if(K(y[L]))q=y[L];else if(F(y[L]))P=y[L](P);P=P.updateAll({changeWorld:j.updateWorld,shutdownWorld:j.shutdownWorld});plt.world.config.CONFIG=P;y=[];if(P.lookup("onDraw")){wrappedRedraw=function(Y){try{var w=P.lookup("onDraw")([Y]);plt.Kernel.setLastLoc(undefined);o(w,w,undefined);var G=[J,R(w)];return G}catch(E){H(E);throw E;}};L=function(Y){try{var w=
R(P.lookup("onDrawCss")([Y]));plt.Kernel.setLastLoc(undefined);return w}catch(G){H(G);throw G;}};y.push(v.on_draw(wrappedRedraw,L))}else if(P.lookup("onRedraw")){var X=undefined,T=undefined;wrappedRedraw=function(Y){try{var w=P.lookup("onRedraw")([Y]);if(w!=null&&w!=undefined&&w instanceof plt.world.Kernel.BaseImage){var G=plt.world.Kernel.imageWidth(w).toFixnum(),E=plt.world.Kernel.imageHeight(w).toFixnum();if(!X){X=plt.world.Kernel.makeCanvas(G,E);X.jsworldOpaque=true;T=v.node_to_tree(X)}X.width=
G;X.height=E;var A=X.getContext("2d");w.render(A,0,0);return[J,T]}else return[J,v.node_to_tree(plt.types.toDomNode(w))]}catch(c){H(c);throw c;}};L=function(){return[[X,["width",X.width+"px"],["height",X.height+"px"]]]};y.push(v.on_draw(wrappedRedraw,L))}else y.push(v.on_world_change(function(Y){j.printWorldHook(Y,J)}));if(P.lookup("tickDelay")){L=function(Y){setTimeout(function(){plt.world.stimuli.onTick()},0);return Y};var U=P.lookup("tickDelay");y.push(v.on_tick(U,L))}P.lookup("stopWhen")&&y.push(v.stop_when(function(Y){return P.lookup("stopWhen")([Y])}));
if(P.lookup("onKey")){n(J,"keydown",function(Y){plt.world.stimuli.onKey(Y);Q(Y);W(Y);return false});n(J,"keypress",function(Y){Q(Y);W(Y);return false});J.focus()}if(P.lookup("initialEffect")){U=plt.world.Kernel.applyEffect(P.lookup("initialEffect"));for(L=0;L<U.length;L++)if(P.lookup("stopWhen")&&P.lookup("stopWhen")([r]))break;else r=U[L](r)}return v.big_bang(J,r,y,B(q))};function H(r){plt.Kernel.reportError(r);plt.Kernel.reportError("Shutting down jsworld computations");plt.world.stimuli.onShutdown()}
j.updateWorld=function(r){function y(q){try{return r(q)}catch(J){H(J);return q}}v.change_world(y)};j.shutdownWorld=function(){v.shutdown()};function M(r){if(r.length==0)return[];if(r.length==1)return B(r[0]);else throw new Error;}j.p=function(r){r=M(r);var y=v.p(r);y.toWrittenString=function(){return plt.Kernel.format("(js-p)",[])};y.toDisplayedString=y.toWrittenString;y.toDomNode=function(){return y};return y};j.div=function(r){r=M(r);var y=v.div(r);y.toWrittenString=function(){return plt.Kernel.format("(js-div)",
[])};y.toDisplayedString=y.toWrittenString;y.toDomNode=function(){return y};return y};j.button=function(r,y){function q(){return make_dash_effect_colon_none()}var J=j.buttonStar(r,q,y);J.toWrittenString=function(){return"(js-button ...)"};J.toDisplayedString=J.toWrittenString;J.toDomNode=function(){return J};return J};j.buttonStar=function(r,y,q){q=M(q);function J(L){try{var X=y([L]),T=r([L]);plt.world.Kernel.applyEffect(X);return T}catch(U){H(U);return L}}var P=v.button(J,q);P.toWrittenString=function(){return"(js-button ...)"};
P.toDisplayedString=P.toWrittenString;P.toDomNode=function(){return P};return P};j.input=function(r,y,q){plt.Kernel.check(r,plt.Kernel.isString,"js-input","string",1);plt.Kernel.check(y,plt.Kernel.isFunction,"js-input","(world string -> world)",1);q=M(q);var J=v.input(r,function(P,L){return y([P,L])},q);J.toWrittenString=function(){return"(js-input ...)"};J.toDisplayedString=J.toWrittenString;J.toDomNode=function(){return J};return J};j.get_dash_input_dash_value=function(r){plt.Kernel.check(r,function(){return plt.Kernel.isString(r)||
r.nodeType==Node.ELEMENT_NODE},"get-input-value","dom-node",1);return plt.Kernel.isString(r)?plt.types.String.makeInstance(document.getElementById(r).value||""):plt.types.String.makeInstance(r.value||"")};j.img=function(r,y){plt.Kernel.check(r,plt.Kernel.isString,"js-img","string",1);y=M(y);var q=v.img(r,y);q.toWrittenString=function(){return"(js-img ...)"};q.toDisplayedString=q.toWrittenString;q.toDomNode=function(){return q};return q};j.text=function(r){plt.Kernel.check(r,plt.Kernel.isString,"js-text",
"string",1);var y=v.text(r,[]);y.toWrittenString=function(){return"(js-text ...)"};y.toDisplayedString=y.toWrittenString;y.toDomNode=function(){return y};return y};j.select=function(r,y,q){plt.Kernel.checkListof(r,plt.Kernel.isString,"js-select","string",1);plt.Kernel.check(y,plt.Kernel.isFunction,"js-select","function",2);q=M(q);r=R(r);var J=v.select(q,r,function(P){return y([P,J.value])});J.toWrittenString=function(){return"(js-select ...)"};J.toDisplayedString=J.toWrittenString;J.toDomNode=function(){return J};
return J};j.rawNode=function(r,y){y=M(y);var q=v.raw_node(plt.types.toDomNode(r),y);q.toWrittenString=function(){return"(js-raw-node ...)"};q.toDisplayedString=q.toWrittenString;q.toDomNode=function(){return q};return q}})();plt.world.stimuli={};
(function(){var j={};plt.world.stimuli=j;function v(C,K,O){var o=[];try{R(function(W){var H=[W].concat(O);if(C){var M=C(H);o=B(M)}return K?K(H):W});for(var n=0;n<o.length;n++)R(o[n])}catch(Q){j.onShutdown()}}j.onTilt=function(C,K,O){var o=F("onTilt"),n=F("onTiltEffect");v(n,o,[S(C),S(K),S(O)])};j.onAcceleration=function(C,K,O){var o=F("onAcceleration"),n=F("onAccelerationEffect");v(n,o,[S(C),S(K),S(O)])};j.onShake=function(){var C=F("onShake"),K=F("onShakeEffect");v(K,C,[])};j.onLocation=function(C,
K){var O=F("onLocationChange"),o=F("onLocationChangeEffect");v(o,O,[S(C),S(K)])};j.onKey=function(C){function K(n){n=n.charCode||n.keyCode;return n=n==37?"left":n==38?"up":n==39?"right":n==40?"down":n==32?"space":n==13?"enter":String.fromCharCode(n)}C=K(C);var O=F("onKey"),o=F("onKeyEffect");v(o,O,[C])};j.onTick=function(){var C=F("onTick"),K=F("onTickEffect");v(K,C,[])};j.onAnnounce=function(C,K){for(var O=plt.types.Empty.EMPTY,o=0;o<K.length;o++)O=plt.types.Cons.makeInstance(K[K.length-o-1],O);
K=F("onAnnounce");o=F("onAnnounceEffect");v(K,o,[C,O])};j.onShutdown=function(){var C=F("shutdownWorld");C&&C()};var S=plt.types.FloatPoint.makeInstance;function F(C){return plt.world.config.CONFIG.lookup(C)}function R(C){F("changeWorld")&&F("changeWorld")(C)}function B(C){return plt.world.Kernel.applyEffect(C)}})();
(function(j){var v={};function S(){plt.types.Struct.call(this,"make-permission:location",[])}S.prototype=new plt.types.Struct;function F(){return new S}function R(d){return d!=null&&d!=undefined&&d instanceof S}function B(){plt.types.Struct.call(this,"make-permission:send-sms",[])}B.prototype=new plt.types.Struct;function C(){return new B}function K(d){return d!=null&&d!=undefined&&d instanceof B}function O(){plt.types.Struct.call(this,"make-permission:receive-sms",[])}O.prototype=new plt.types.Struct;
function o(){return new O}function n(d){return d!=null&&d!=undefined&&d instanceof O}function Q(){plt.types.Struct.call(this,"make-permission:tilt",[])}Q.prototype=new plt.types.Struct;function W(){return new Q}function H(d){return d!=null&&d!=undefined&&d instanceof Q}function M(){plt.types.Struct.call(this,"make-permission:shake",[])}M.prototype=new plt.types.Struct;function r(){return new M}function y(d){return d!=null&&d!=undefined&&d instanceof M}function q(){plt.types.Struct.call(this,"make-permission:internet",
[])}q.prototype=new plt.types.Struct;function J(){return new q}function P(d){return d!=null&&d!=undefined&&d instanceof q}function L(){plt.types.Struct.call(this,"make-permission:telephony",[])}L.prototype=new plt.types.Struct;function X(){return new L}function T(d){return d!=null&&d!=undefined&&d instanceof L}function U(){plt.types.Struct.call(this,"make-permission:wake-lock",[])}U.prototype=new plt.types.Struct;function Y(){return new U}function w(d){return d!=null&&d!=undefined&&d instanceof U}
function G(d){plt.types.Struct.call(this,"make-permission:open-image-url",[d]);this.url=d}G.prototype=new plt.types.Struct;function E(d){return new G(d)}function A(d){if(f(d))return d.url;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("permission:open-image-url-url: not a permission:open-image-url: ~s",[d]));}function c(d,m){if(f(d)){d.url=m;d._fields[0]=m}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_permission_colon_open_dash_image_dash_url_dash_url_bang_: not a permission:open-image-url: ~s",
[d]));}function f(d){return d!=null&&d!=undefined&&d instanceof G}function g(d){plt.types.Struct.call(this,"make-permission:universe",[d]);this.url=d}g.prototype=new plt.types.Struct;function e(d){return new g(d)}function h(d){if(i(d))return d.url;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("permission:universe-url: not a permission:universe: ~s",[d]));}function p(d,m){if(i(d)){d.url=m;d._fields[0]=m}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_permission_colon_universe_dash_url_bang_: not a permission:universe: ~s",
[d]));}function i(d){return d!=null&&d!=undefined&&d instanceof g}function x(d){return R(d)||K(d)||n(d)||H(d)||y(d)||P(d)||T(d)||w(d)||f(d)||i(d)}var N,$,ba,ga,z,V,ca,fa;function ia(d){return R(d)?v[11]:K(d)?v[12]:n(d)?v[13]:H(d)?v[14]:y(d)?v[15]:P(d)?v[16]:T(d)?v[17]:w(d)?v[18]:f(d)?plt.Kernel.format(v[19],[A(d)]):i(d)?plt.Kernel.format(v[20],[h(d)]):plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),v[21])}function la(d){return function(){function m(I,Z){return plt.Kernel._greaterthan_(plt.Kernel.string_dash_length(Z),
plt.Kernel.string_dash_length(I),[])&&plt.Kernel.string_equal__question_(plt.Kernel.substring(Z,v[23],plt.Kernel.string_dash_length(I)),I,[])}function u(I,Z,ea){return plt.Kernel.apply(ea,plt.Kernel.list([plt.Kernel.substring(Z,plt.Kernel.add1(plt.Kernel.string_dash_length(I)),plt.Kernel.string_dash_length(Z))]),[])}(function(){})(plt.Kernel.identity);return plt.Kernel.string_equal__question_(d,v[11],[])?N:plt.Kernel.string_equal__question_(d,v[12],[])?$:plt.Kernel.string_equal__question_(d,v[13],
[])?ba:plt.Kernel.string_equal__question_(d,v[14],[])?ga:plt.Kernel.string_equal__question_(d,v[15],[])?z:plt.Kernel.string_equal__question_(d,v[16],[])?V:plt.Kernel.string_equal__question_(d,v[17],[])?ca:plt.Kernel.string_equal__question_(d,v[18],[])?fa:m(v[24],d)?u(v[24],d,plt.types.liftToplevelToFunctionValue(E,plt.types.String.makeInstance("make-permission:open-image-url"),1,plt.types.Rational.makeInstance(1,1))):m(v[25],d)?u(v[25],d,plt.types.liftToplevelToFunctionValue(e,plt.types.String.makeInstance("make-permission:universe"),
1,plt.types.Rational.makeInstance(1,1))):plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),v[21])}()}function b(d){return R(d)?plt.Kernel.list([v[26],v[27]]):K(d)?plt.Kernel.list([v[28]]):n(d)?plt.Kernel.list([v[29]]):H(d)?plt.Kernel.list([]):y(d)?plt.Kernel.list([]):P(d)?plt.Kernel.list([v[30]]):T(d)?plt.Kernel.list([v[31]]):w(d)?plt.Kernel.list([v[32]]):f(d)?plt.Kernel.list([]):i(d)?plt.Kernel.list([v[30]]):plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),v[21])}v[15]=plt.types.String.makeInstance("PERMISSION:SHAKE");
v[26]=plt.types.String.makeInstance("android.permission.ACCESS_COARSE_LOCATION");v[28]=plt.types.String.makeInstance("android.permission.SEND_SMS");v[21]=plt.types.String.makeInstance("cond: fell out of cond");v[32]=plt.types.String.makeInstance("android.permission.WAKE_LOCK");v[30]=plt.types.String.makeInstance("android.permission.INTERNET");v[29]=plt.types.String.makeInstance("android.permission.RECEIVE_SMS");v[27]=plt.types.String.makeInstance("android.permission.ACCESS_FINE_LOCATION");v[31]=plt.types.String.makeInstance("android.permission.ACCESS_COARSE_UPDATES");
v[20]=plt.types.String.makeInstance("PERMISSION:UNIVERSE ~a");v[18]=plt.types.String.makeInstance("PERMISSION:WAKE-LOCK");v[14]=plt.types.String.makeInstance("PERMISSION:TILT");v[25]=plt.types.String.makeInstance("PERMISSION:UNIVERSE");v[17]=plt.types.String.makeInstance("PERMISSION:TELEPHONY");v[24]=plt.types.String.makeInstance("PERMISSION:OPEN-IMAGE-URL");v[13]=plt.types.String.makeInstance("PERMISSION:RECEIVE-SMS");v[12]=plt.types.String.makeInstance("PERMISSION:SEND-SMS");v[19]=plt.types.String.makeInstance("PERMISSION:OPEN-IMAGE-URL ~a");
v[16]=plt.types.String.makeInstance("PERMISSION:INTERNET");v[11]=plt.types.String.makeInstance("PERMISSION:LOCATION");v[23]=plt.types.Rational.makeInstance(0,1);(function(d){(function(){N=F();$=C();ba=C();ga=W();z=r();V=J();ca=X();fa=Y()})(d||plt.Kernel.identity);j.permission_colon_open_dash_image_dash_url=G;j.make_dash_permission_colon_open_dash_image_dash_url=E;j.permission_colon_open_dash_image_dash_url_question_=f;j.permission_colon_open_dash_image_dash_url_dash_url=A;j.set_dash_permission_colon_open_dash_image_dash_url_dash_url_bang_=
c;j.permission_colon_tilt=Q;j.make_dash_permission_colon_tilt=W;j.permission_colon_tilt_question_=H;j.permission_colon_wake_dash_lock=U;j.make_dash_permission_colon_wake_dash_lock=Y;j.permission_colon_wake_dash_lock_question_=w;j.permission_question_=x;j.string_dash__greaterthan_permission=la;j.permission_colon_universe=g;j.make_dash_permission_colon_universe=e;j.permission_colon_universe_question_=i;j.permission_colon_universe_dash_url=h;j.set_dash_permission_colon_universe_dash_url_bang_=p;j.permission_colon_send_dash_sms=
B;j.make_dash_permission_colon_send_dash_sms=C;j.permission_colon_send_dash_sms_question_=K;j.permission_colon_shake=M;j.make_dash_permission_colon_shake=r;j.permission_colon_shake_question_=y;j.permission_colon_telephony=L;j.make_dash_permission_colon_telephony=X;j.permission_colon_telephony_question_=T;j.permission_colon_receive_dash_sms=O;j.make_dash_permission_colon_receive_dash_sms=o;j.permission_colon_receive_dash_sms_question_=n;j.PERMISSION_colon_SHAKE=z;j.permission_colon_internet=q;j.make_dash_permission_colon_internet=
J;j.permission_colon_internet_question_=P;j.permission_colon_location=S;j.make_dash_permission_colon_location=F;j.permission_colon_location_question_=R;j.PERMISSION_colon_WAKE_dash_LOCK=fa;j.permission_dash__greaterthan_string=ia;j.permission_dash__greaterthan_android_dash_permissions=b;j.PERMISSION_colon_TILT=ga;j.PERMISSION_colon_TELEPHONY=ca;j.PERMISSION_colon_RECEIVE_dash_SMS=ba;j.PERMISSION_colon_SEND_dash_SMS=$;j.PERMISSION_colon_LOCATION=N;j.PERMISSION_colon_INTERNET=V})()})(this);
plt.permission={};
(function(){plt.permission={};function j(o){return permission_colon_location_question_(o)}function v(o){return permission_colon_send_dash_sms_question_(o)}function S(o){return permission_colon_receive_dash_sms_question_(o)}function F(o){return permission_colon_tilt_question_(o)}function R(o){return permission_colon_shake_question_(o)}function B(o){return permission_colon_internet_question_(o)}function C(o){return permission_colon_telephony_question_(o)}function K(o){return permission_colon_wake_dash_lock_question_(o)}function O(o){return permission_colon_open_dash_image_dash_url_question_(o)}
plt.permission.startupAllPermissions=function(o,n){if(o.length>0){var Q=o.pop();plt.permission._runStartupCode(Q,o,n)}else n()};plt.permission._runStartupCode=function(o,n,Q){var W=plt.platform.Platform.getInstance(),H=plt.world.stimuli;function M(){setTimeout(function(){plt.permission.startupAllPermissions(n,Q)},0)}if(j(o)){W.getLocationService().startService();W.getLocationService().addLocationChangeListener(function(J,P){H.onLocation(J,P)});M()}else if(v(o))M();else if(S(o))M();else if(F(o)){W.getTiltService().startService();
W.getTiltService().addOrientationChangeListener(function(J,P,L){H.onTilt(J,P,L)});W.getTiltService().addAccelerationChangeListener(function(J,P,L){H.onAcceleration(J,P,L)});M()}else if(R(o)){W.getShakeService().startService();W.getShakeService().addListener(function(){H.onShake()});M()}else if(B(o))M();else if(C(o))M();else if(K(o))M();else if(O(o)){var r=permission_colon_open_dash_image_dash_url_dash_url(o),y=new Image,q=function(){plt.Kernel.detachEvent(y,"load",q);plt.world.Kernel.FileImage.installInstance(r,
y);M()};plt.Kernel.attachEvent(y,"load",q);plt.Kernel.attachEvent(y,"error",function(){plt.world.Kernel.FileImage.installBrokenImage(r);M()});y.src=r}else M()};plt.permission.runShutdownCode=function(o){var n=plt.platform.Platform.getInstance();j(o)&&n.getLocationService().shutdownService();v(o);S(o);F(o)&&n.getTiltService().shutdownService();R(o);B(o);C(o);K(o);O(o)}})();
