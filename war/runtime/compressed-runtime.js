(function(){if(!(window.google&&google.gears)){var j=null;if(typeof GearsFactory!="undefined")j=new GearsFactory;else try{j=new ActiveXObject("Gears.Factory");j.getBuildInfo().indexOf("ie_mobile")!=-1&&j.privateSetGlobalObject(this)}catch(u){if(typeof navigator.mimeTypes!="undefined"&&navigator.mimeTypes["application/x-googlegears"]){j=document.createElement("object");j.style.display="none";j.width=0;j.height=0;j.type="application/x-googlegears";document.documentElement.appendChild(j)}}if(j){window.google||
(google={});if(!google.gears)google.gears={factory:j}}}})();var plt={};plt.types={};
(function(){plt.types=plt.types||{};function j(c,d){c.appendChild(d)}function u(c){function d(){}d.prototype=c;return new d}var R=0;plt.types.makeEqHashCode=function(){R++;return R};plt.types.getEqHashCode=function(c){if(c&&c._eqHashCode)return c._eqHashCode;if(typeof c=="string")return c;return 0};function D(c,d){this._constructorName=c;this._fields=d;this._eqHashCode=plt.types.makeEqHashCode()}plt.types.Struct=D;D.prototype.toWrittenString=function(c){c.put(this,true);var d=[];d.push("(");d.push(this._constructorName);
for(var h=0;h<this._fields.length;h++){d.push(" ");d.push(plt.types.toWrittenString(this._fields[h],c))}d.push(")");return plt.types.String.makeInstance(d.join(""))};D.prototype.toDisplayedString=D.prototype.toWrittenString;D.prototype.toDomNode=function(c){c.put(this,true);var d=document.createElement("div");d.appendChild(document.createTextNode("("));d.appendChild(document.createTextNode(this._constructorName));for(var h=0;h<this._fields.length;h++){d.appendChild(document.createTextNode(" "));j(d,
plt.types.toDomNode(this._fields[h],c))}d.appendChild(document.createTextNode(")"));return d};D.prototype.isEqual=function(c,d){if(typeof c!="object")return false;if(!c._constructorName)return false;if(c._constructorName!=this._constructorName)return false;if(typeof c._fields==="undefined")return false;if(this._fields.length!=c._fields.length)return false;for(var h=0;h<this._fields.length;h++)if(!plt.types.isEqual(this._fields[h],c._fields[h],d))return false;return true};function Q(c){plt.types.Struct.call(this,
"box",[c]);this._eqHashCode=plt.types.makeEqHashCode()}Q.prototype=u(plt.types.Struct.prototype);Q.prototype.unbox=function(){return this._fields[0]};Q.prototype.set=function(c){this._fields[0]=c};plt.types.Logic={TRUE:true,FALSE:false};Boolean.prototype.toWrittenString=function(){if(this.valueOf())return"true";return"false"};Boolean.prototype.toDisplayedString=Boolean.prototype.toWrittenString;Boolean.prototype.isEqual=function(c){return this==c};plt.types.Char=function(c){this.val=c;this._eqHashCode=
plt.types.makeEqHashCode()};plt.types.Char.makeInstance=function(c){return new plt.types.Char(c)};plt.types.Char.prototype.toWrittenString=function(){return"#\\"+this.val};plt.types.Char.prototype.toDisplayedString=function(){return this.val};plt.types.Char.prototype.getValue=function(){return this.val};plt.types.Char.prototype.isEqual=function(c){return c instanceof plt.types.Char&&this.val==c.val};plt.types.Symbol=function(c){this.val=c;this._eqHashCode=plt.types.makeEqHashCode()};var z={};plt.types.Symbol.makeInstance=
function(c){c in z||(z[c]=new plt.types.Symbol(c));return z[c]};plt.types.Symbol.prototype.isEqual=function(c){return c instanceof plt.types.Symbol&&this.val==c.val};plt.types.Symbol.prototype.toString=function(){return this.val};plt.types.Symbol.prototype.toWrittenString=function(){return this.val};plt.types.Symbol.prototype.toDisplayedString=function(){return this.val};plt.types.Empty=function(){this._eqHashCode=plt.types.makeEqHashCode()};plt.types.Empty.EMPTY=new plt.types.Empty;plt.types.Empty.prototype.isEqual=
function(c){return c instanceof plt.types.Empty};plt.types.Empty.prototype.first=function(){throw new C("first can't be applied on empty.");};plt.types.Empty.prototype.rest=function(){throw new C("rest can't be applied on empty.");};plt.types.Empty.prototype.isEmpty=function(){return true};plt.types.Empty.prototype.toWrittenString=function(){return"empty"};plt.types.Empty.prototype.toDisplayedString=function(){return"empty"};plt.types.Empty.prototype.append=function(c){return c};plt.types.Cons=function(c,
d){this.f=c;this.r=d;this._eqHashCode=plt.types.makeEqHashCode()};plt.types.Cons.reverse=function(c){for(var d=plt.types.Empty.EMPTY;!c.isEmpty();){d=plt.types.Cons.makeInstance(c.first(),d);c=c.rest()}return d};plt.types.Cons.makeInstance=function(c,d){return new plt.types.Cons(c,d)};plt.types.Cons.prototype.isEqual=function(c,d){if(!(c instanceof plt.types.Cons))return plt.types.Logic.FALSE;return plt.types.isEqual(this.first(),c.first(),d)&&plt.types.isEqual(this.rest(),c.rest(),d)};plt.types.Cons.prototype.first=
function(){return this.f};plt.types.Cons.prototype.rest=function(){return this.r};plt.types.Cons.prototype.isEmpty=function(){return false};plt.types.Cons.prototype.append=function(c){if(c.isEmpty())return this;c=c;for(var d=plt.types.Cons.reverse(this);!d.isEmpty();){c=plt.types.Cons.makeInstance(d.first(),c);d=d.rest()}return c};plt.types.Cons.prototype.toWrittenString=function(c){c.put(this,true);for(var d=[],h=this;!h.isEmpty();){d.push(plt.types.toWrittenString(h.first(),c));h=h.rest()}return"("+
d.join(" ")+")"};plt.types.Cons.prototype.toDisplayedString=function(c){c.put(this,true);for(var d=[],h=this;!h.isEmpty();){d.push(plt.types.toDisplayedString(h.first(),c));h=h.rest()}return"("+d.join(" ")+")"};plt.types.Cons.prototype.toDomNode=function(c){c.put(this,true);var d=document.createElement("div");d.appendChild(document.createTextNode("("));for(var h=this;!h.isEmpty();){j(d,plt.types.toDomNode(h.first(),c));h=h.rest();h.isEmpty()||j(d,document.createTextNode(" "))}d.appendChild(document.createTextNode(")"));
return d};plt.types.Vector=function(c,d){this.elts=new Array(c);if(d)for(var h=0;h<c;h++)this.elts[h]=d[h];else for(h=0;h<c;h++)this.elts[h]=undefined;this._eqHashCode=plt.types.makeEqHashCode()};plt.types.Vector.makeInstance=function(c,d){return new plt.types.Vector(c,d)};plt.types.Vector.prototype.length=function(){return this.elts.length};plt.types.Vector.prototype.ref=function(c){return this.elts[c]};plt.types.Vector.prototype.set=function(c,d){this.elts[c]=d};plt.types.Vector.prototype.isEqual=
function(c,d){if(c!=null&&c!=undefined&&c instanceof plt.types.Vector){if(c.length()!=this.length())return false;for(var h=0;h<this.length();h++)if(!plt.types.isEqual(this.elts[h],c.elts[h],d))return false;return true}else return false};plt.types.Vector.prototype.toWrittenString=function(c){c.put(this,true);for(var d=[],h=0;h<this.length();h++)d.push(plt.types.toWrittenString(this.ref(h),c));return"#("+d.join(" ")+")"};plt.types.Vector.prototype.toDisplayedString=function(c){c.put(this,true);for(var d=
[],h=0;h<this.length();h++)d.push(plt.types.toDisplayedString(this.ref(h),c));return"#("+d.join(" ")+")"};plt.types.Vector.prototype.toDomNode=function(c){c.put(this,true);var d=document.createElement("div");d.appendChild(document.createTextNode("#("));for(var h=0;h<this.length();h++)j(d,plt.types.toDomNode(this.ref(h),c));d.appendChild(document.createTextNode(")"));return d};function B(c,d){for(;d!=0;){var h=c;c=d;d=h%d}return Math.abs(c)}function I(c,d){return Math.abs(c*d/B(c,d))}function N(c,
d){var h;if(isNaN(c)||!isFinite(c))throw new C("not a number: "+c);if(isNaN(d)||!isFinite(d))throw new C("not a number: "+d);for(;d!=0;){h=c;c=d;d=h%d}return c}plt.types.Rational=function(c,d){if(d==undefined)d=1;if(d==0)throw new C("cannot have zero denominator.");var h=N(Math.abs(c),Math.abs(d));this.n=c/h;this.d=d/h;this._eqHashCode=plt.types.makeEqHashCode()};plt.types.Rational.prototype.toWrittenString=function(){return this.d==1?this.n+"":this.n+"/"+this.d};plt.types.Rational.prototype.toDisplayedString=
plt.types.Rational.prototype.toWrittenString;plt.types.Rational.prototype.level=function(){return 0};plt.types.Rational.prototype.lift=function(c){if(c.level()==1)return m.makeInstance(this.n/this.d);if(c.level()==2)return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO);throw new C("invalid level of Number");};plt.types.Rational.prototype.isFinite=function(){return true};plt.types.Rational.prototype.isEqual=function(c){return this.equals(c)};plt.types.Rational.prototype.equals=function(c){return c instanceof
plt.types.Rational&&this.n==c.n&&this.d==c.d};plt.types.Rational.prototype.isInteger=function(){return this.d==1};plt.types.Rational.prototype.isRational=function(){return true};plt.types.Rational.prototype.isReal=function(){return true};plt.types.Rational.prototype.add=function(c){return plt.types.Rational.makeInstance(this.n*c.d+this.d*c.n,this.d*c.d)};plt.types.Rational.prototype.subtract=function(c){return plt.types.Rational.makeInstance(this.n*c.d-this.d*c.n,this.d*c.d)};plt.types.Rational.prototype.multiply=
function(c){return plt.types.Rational.makeInstance(this.n*c.n,this.d*c.d)};plt.types.Rational.prototype.divide=function(c){if(this.d*c.n==0)throw new C("division by zero");return plt.types.Rational.makeInstance(this.n*c.d,this.d*c.n)};plt.types.Rational.prototype.toExact=function(){return this};plt.types.Rational.prototype.isExact=function(){return true};plt.types.Rational.prototype.toFixnum=function(){return Math.floor(this.n/this.d)};plt.types.Rational.prototype.numerator=function(){return plt.types.Rational.makeInstance(this.n)};
plt.types.Rational.prototype.denominator=function(){return plt.types.Rational.makeInstance(this.d)};plt.types.Rational.prototype.toFloat=function(){return this.n/this.d};plt.types.Rational.prototype.toComplex=function(){return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO)};plt.types.Rational.prototype.greaterThan=function(c){return this.n*c.d>this.d*c.n};plt.types.Rational.prototype.greaterThanOrEqual=function(c){return this.n*c.d>=this.d*c.n};plt.types.Rational.prototype.lessThan=
function(c){return this.n*c.d<this.d*c.n};plt.types.Rational.prototype.lessThanOrEqual=function(c){return this.n*c.d<=this.d*c.n};plt.types.Rational.prototype.sqrt=function(){if(this.n>=0){var c=Math.sqrt(this.n),d=Math.sqrt(this.d);return Math.floor(c)==c&&Math.floor(d)==d?plt.types.Rational.makeInstance(c,d):m.makeInstance(c/d)}else{c=Math.sqrt(-this.n);d=Math.sqrt(this.d);return Math.floor(c)==c&&Math.floor(d)==d?plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.makeInstance(c,
d)):plt.types.Complex.makeInstance(plt.types.Rational.ZERO,m.makeInstance(c/d))}};plt.types.Rational.prototype.abs=function(){return plt.types.Rational.makeInstance(Math.abs(this.n),this.d)};plt.types.Rational.prototype.floor=function(){return plt.types.Rational.makeInstance(Math.floor(this.n/this.d),1)};plt.types.Rational.prototype.ceiling=function(){return plt.types.Rational.makeInstance(Math.ceil(this.n/this.d),1)};plt.types.Rational.prototype.conjugate=plt.types.Rational.prototype.abs;plt.types.Rational.prototype.magnitude=
plt.types.Rational.prototype.abs;plt.types.Rational.prototype.log=function(){return m.makeInstance(Math.log(this.n/this.d))};plt.types.Rational.prototype.angle=function(){if(0==this.n)return plt.types.Rational.ZERO;return this.n>0?plt.types.Rational.ZERO:m.pi};plt.types.Rational.prototype.atan=function(){return m.makeInstance(Math.atan(this.n/this.d))};plt.types.Rational.prototype.cos=function(){return m.makeInstance(Math.cos(this.n/this.d))};plt.types.Rational.prototype.sin=function(){return m.makeInstance(Math.sin(this.n/
this.d))};plt.types.Rational.prototype.expt=function(c){return m.makeInstance(Math.pow(this.n/this.d,c.n/c.d))};plt.types.Rational.prototype.exp=function(){return m.makeInstance(Math.exp(this.n/this.d))};plt.types.Rational.prototype.acos=function(){return m.makeInstance(Math.acos(this.n/this.d))};plt.types.Rational.prototype.asin=function(){return m.makeInstance(Math.asin(this.n/this.d))};plt.types.Rational.prototype.imag_dash_part=function(){return plt.types.Rational.ZERO};plt.types.Rational.prototype.real_dash_part=
function(){return this};plt.types.Rational.prototype.timesI=function(){return plt.types.Complex.makeInstance(plt.types.Rational.ZERO,this)};plt.types.Rational.prototype.round=function(){if(this.d==2){var c=this.n/this.d,d=Math.floor(c);c=Math.ceil(c);return d%2==0?plt.types.Rational.makeInstance(d):plt.types.Rational.makeInstance(c)}else return plt.types.Rational.makeInstance(Math.round(this.n/this.d))};plt.types.Rational.prototype.half=function(){return plt.types.Rational.makeInstance(this.n,this.d*
2)};plt.types.Rational.prototype.minus=function(){return plt.types.Rational.makeInstance(0-this.n,this.d)};var n={};plt.types.Rational.makeInstance=function(c,d){if(c==undefined)throw new C("n undefined");if(d==undefined)d=1;if(d<0){c=-c;d=-d}if(isNaN(c)||isNaN(d))return m.nan;if(!isFinite(d))return Rational.ZERO;if(!isFinite(c))return m.makeInstance(c);return d==1&&c in n?n[c]:new plt.types.Rational(c,d)};n={};(function(){var c;for(c=-500;c<500;c++)n[c]=new plt.types.Rational(c,1)})();plt.types.Rational.NEGATIVE_ONE=
n[-1];plt.types.Rational.ZERO=n[0];plt.types.Rational.ONE=n[1];plt.types.Rational.TWO=n[2];function m(c){this.n=c;this._eqHashCode=plt.types.makeEqHashCode()}plt.types.FloatPoint=m;var O=new m(Number.NaN),V=new m(Number.POSITIVE_INFINITY),H=new m(Number.NEGATIVE_INFINITY);m.pi=new m(Math.PI);m.e=new m(Math.E);m.nan=O;m.inf=V;m.neginf=H;m.makeInstance=function(c){if(isNaN(c))return m.nan;else if(c===Number.POSITIVE_INFINITY)return m.inf;else if(c===Number.NEGATIVE_INFINITY)return m.neginf;return new m(c)};
m.prototype.isFinite=function(){return isFinite(this.n)};m.prototype.toExact=function(){return plt.types.Rational.makeInstance(Math.floor(this.n),1)};m.prototype.isExact=function(){return false};m.prototype.level=function(){return 1};m.prototype.lift=function(){return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO)};m.prototype.toWrittenString=function(){return this.n==Number.POSITIVE_INFINITY?"+inf.0":this.n==Number.NEGATIVE_INFINITY?"-inf.0":this.n==Number.NaN?"+nan.0":this.n.toString()};
m.prototype.toDisplayedString=m.prototype.toWrittenString;m.prototype.isEqual=function(c){return c instanceof m&&(this.n==c.n||isNaN(this.n)&&isNaN(c.n))};m.prototype.equals=function(c){return c instanceof m&&this.n==c.n};m.prototype.isRational=function(){return this.isFinite()&&this.n==Math.floor(this.n)};m.prototype.isInteger=function(){return this.isFinite()&&this.n==Math.floor(this.n)};m.prototype.isReal=function(){return true};function L(c){return o.lessThan(c,plt.types.Rational.ZERO)?-1:o.greaterThan(c,
plt.types.Rational.ZERO)?1:0}m.prototype.add=function(c){return this.isFinite()&&c.isFinite()?m.makeInstance(this.n+c.n):isNaN(this.n)||isNaN(c.n)?O:this.isFinite()&&!c.isFinite()?c:!this.isFinite()&&c.isFinite()?this:L(this)*L(c)==1?this:O};m.prototype.subtract=function(c){return this.isFinite()&&c.isFinite()?m.makeInstance(this.n-c.n):isNaN(this.n)||isNaN(c.n)?O:!this.isFinite()&&!c.isFinite()?L(this)==L(c)?O:this:this.isFinite()?o.multiply(c,plt.types.Rational.NEGATIVE_ONE):this};m.prototype.multiply=
function(c){if(this.n==0||c.n==0)return plt.types.Rational.ZERO;return this.isFinite()&&c.isFinite()?m.makeInstance(this.n*c.n):isNaN(this.n)||isNaN(c.n)?O:L(this)*L(c)==1?V:H};m.prototype.divide=function(c){if(this.isFinite()&&c.isFinite()){if(c.n==0)throw new C("division by zero");return m.makeInstance(this.n/c.n)}else if(isNaN(this.n)||isNaN(c.n))return O;else if(!this.isFinite()&&!c.isFinite())return O;else if(this.isFinite()&&!c.isFinite())return m.makeInstance(0);else if(!this.isFinite()&&c.isFinite())return L(this)*
L(c)==1?V:H};m.prototype.toFixnum=function(){return Math.floor(this.n)};m.prototype.numerator=function(){var c=this.n.toString();return(c=c.match(/^(.*)\.(.*)$/))?m.makeInstance(parseFloat(c[1]+c[2])):this};m.prototype.denominator=function(){var c=this.n.toString();return(c=c.match(/^(.*)\.(.*)$/))?m.makeInstance(Math.pow(10,c[2].length)):m.makeInstance(1)};m.prototype.toFloat=function(){return this.n};m.prototype.toComplex=function(){return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO)};
m.prototype.floor=function(){if(!isFinite(this.n))return this;return plt.types.Rational.makeInstance(Math.floor(this.n),1)};m.prototype.ceiling=function(){if(!isFinite(this.n))return this;return plt.types.Rational.makeInstance(Math.ceil(this.n),1)};m.prototype.greaterThan=function(c){return this.n>c.n};m.prototype.greaterThanOrEqual=function(c){return this.n>=c.n};m.prototype.lessThan=function(c){return this.n<c.n};m.prototype.lessThanOrEqual=function(c){return this.n<=c.n};m.prototype.sqrt=function(){if(this.n<
0){var c=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,m.makeInstance(Math.sqrt(-this.n)));return c}else return m.makeInstance(Math.sqrt(this.n))};m.prototype.abs=function(){return m.makeInstance(Math.abs(this.n))};m.prototype.log=function(){return this.n<0?this.toComplex().log():m.makeInstance(Math.log(this.n))};m.prototype.angle=function(){if(0==this.n)return plt.types.Rational.ZERO;return this.n>0?plt.types.Rational.ZERO:m.pi};m.prototype.atan=function(){return m.makeInstance(Math.atan(this.n))};
m.prototype.cos=function(){return m.makeInstance(Math.cos(this.n))};m.prototype.sin=function(){return m.makeInstance(Math.sin(this.n))};m.prototype.expt=function(c){if(this.n==1){c.isFinite()||isNaN(c.n);return this}else return m.makeInstance(Math.pow(this.n,c.n))};m.prototype.exp=function(){return m.makeInstance(Math.exp(this.n))};m.prototype.acos=function(){return m.makeInstance(Math.acos(this.n))};m.prototype.asin=function(){return m.makeInstance(Math.asin(this.n))};m.prototype.imag_dash_part=
function(){return plt.types.Rational.ZERO};m.prototype.real_dash_part=function(){return this};m.prototype.round=function(){if(isFinite(this.n))if(Math.abs(Math.floor(this.n)-this.n)==0.5){if(Math.floor(this.n)%2==0)return plt.types.Rational.makeInstance(Math.floor(this.n));return plt.types.Rational.makeInstance(Math.ceil(this.n))}else return plt.types.Rational.makeInstance(Math.round(this.n));else return this};m.prototype.conjugate=m.prototype.abs;m.prototype.magnitude=m.prototype.abs;m.prototype.minus=
function(){return m.makeInstance(0-this.n)};m.prototype.half=function(){return m.makeInstance(this.n/2)};m.prototype.timesI=function(){return plt.types.Complex.makeInstance(plt.types.Rational.ZERO,this)};plt.types.Complex=function(c,d){this.r=c;this.i=d;this._eqHashCode=plt.types.makeEqHashCode()};plt.types.Complex.makeInstance=function(c,d){if(typeof c=="number")c=c==Math.floor(c)?plt.types.Rational.makeInstance(c):m.makeInstance(c);if(typeof d=="number")d=d==Math.floor(d)?plt.types.Rational.makeInstance(d):
m.makeInstance(d);return c=new plt.types.Complex(c,d)};plt.types.Complex.prototype.toWrittenString=function(){return o.greaterThanOrEqual(this.i,plt.types.Rational.ZERO)?plt.types.toWrittenString(this.r)+"+"+plt.types.toWrittenString(this.i)+"i":plt.types.toWrittenString(this.r)+plt.types.toWrittenString(this.i)+"i"};plt.types.Complex.prototype.toDisplayedString=plt.types.Complex.prototype.toWrittenString;plt.types.Complex.prototype.isFinite=function(){return this.r.isFinite()&&this.i.isFinite()};
plt.types.Complex.prototype.isRational=function(){return this.r.isRational()&&o.equal(this.i,plt.types.Rational.ZERO)};plt.types.Complex.prototype.isInteger=function(){return this.r.isInteger()&&o.equal(this.i,plt.types.Rational.ZERO)};plt.types.Complex.prototype.toExact=function(){if(!this.isReal())throw new C("inexact->exact: expects argument of type real number");return this.r.toExact()};plt.types.Complex.prototype.isExact=function(){return this.r.isExact()&&this.i.isExact()};plt.types.Complex.prototype.level=
function(){return 2};plt.types.Complex.prototype.lift=function(){throw new C("Don't know how to lift Complex number");};plt.types.Complex.prototype.isEqual=function(c){return this.equals(c)};plt.types.Complex.prototype.equals=function(c){return c=c instanceof plt.types.Complex&&o.equal(this.r,c.r)&&o.equal(this.i,c.i)};plt.types.Complex.prototype.greaterThan=function(c){if(!this.isReal()||!c.isReal())throw new C(">: expects argument of type real number");return o.greaterThan(this.r,c.r)};plt.types.Complex.prototype.greaterThanOrEqual=
function(c){if(!this.isReal()||!c.isReal())throw new C(">: expects argument of type real number");return o.greaterThanOrEqual(this.r,c.r)};plt.types.Complex.prototype.lessThan=function(c){if(!this.isReal()||!c.isReal())throw new C(">: expects argument of type real number");return o.lessThan(this.r,c.r)};plt.types.Complex.prototype.lessThanOrEqual=function(c){if(!this.isReal()||!c.isReal())throw new C(">: expects argument of type real number");return o.lessThanOrEqual(this.r,c.r)};plt.types.Complex.prototype.abs=
function(){if(!o.equal(this.i,plt.types.Rational.ZERO).valueOf())throw new C("abs: expects argument of type real number");return this.r.abs()};plt.types.Complex.prototype.toFixnum=function(){if(!o.equal(this.i,plt.types.Rational.ZERO).valueOf())throw new C("toFixnum: expects argument of type real number");return this.r.toFixnum()};plt.types.Complex.prototype.numerator=function(){if(!this.isReal())throw new C("numerator: can only be applied to real number");return this.n.numerator()};plt.types.Complex.prototype.denominator=
function(){if(!this.isReal())throw new C("floor: can only be applied to real number");return this.n.denominator()};plt.types.Complex.prototype.toFloat=function(){if(!o.equal(this.i,plt.types.Rational.ZERO).valueOf())throw new C("toFloat: expects argument of type real number");return this.r.toFloat()};plt.types.Complex.prototype.toComplex=function(){return this};plt.types.Complex.prototype.add=function(c){return plt.types.Complex.makeInstance(o.add(this.r,c.r),o.add(this.i,c.i))};plt.types.Complex.prototype.subtract=
function(c){return plt.types.Complex.makeInstance(o.subtract(this.r,c.r),o.subtract(this.i,c.i))};plt.types.Complex.prototype.multiply=function(c){if(c.isReal())return plt.types.Complex.makeInstance(o.multiply(this.r,c.r),o.multiply(this.i,c.r));var d=o.subtract(o.multiply(this.r,c.r),o.multiply(this.i,c.i));c=o.add(o.multiply(this.r,c.i),o.multiply(this.i,c.r));if(o.equal(c,plt.types.Rational.ZERO))return d;return plt.types.Complex.makeInstance(d,c)};plt.types.Complex.prototype.divide=function(c){if(c.isReal())return plt.types.Complex.makeInstance(o.divide(this.r,
c.r),o.divide(this.i,c.r));var d=c.conjugate(),h=o.multiply(this,d).toComplex();c=o.multiply(c,d);return h=plt.types.Complex.makeInstance(o.divide(h.r,c),o.divide(h.i,c))};plt.types.Complex.prototype.conjugate=function(){var c=plt.types.Complex.makeInstance(this.r,o.subtract(plt.types.Rational.ZERO,this.i));return c};plt.types.Complex.prototype.magnitude=function(){var c=o.add(o.multiply(this.r,this.r),o.multiply(this.i,this.i));return c.sqrt()};plt.types.Complex.prototype.isReal=function(){return o.equal(this.i,
plt.types.Rational.ZERO)};plt.types.Complex.prototype.sqrt=function(){if(this.isReal())return this.r.sqrt();var c=o.add(this.magnitude(),this.r),d=c.half().sqrt();c=o.divide(this.i,o.multiply(c,m.makeInstance(2)).sqrt());return plt.types.Complex.makeInstance(d,c)};plt.types.Complex.prototype.log=function(){var c=this.magnitude(),d=this.angle();return c=o.add(c.log(),d.timesI())};plt.types.Complex.prototype.angle=function(){if(this.isReal())return this.r.angle();if(o.equal(plt.types.Rational.ZERO,
this.r)){var c=m.pi.half();return o.greaterThan(this.i,plt.types.Rational.ZERO)?c:c.minus()}else{c=o.divide(this.i.abs(),this.r.abs()).atan();return o.greaterThan(this.r,plt.types.Rational.ZERO)?o.greaterThan(this.i,plt.types.Rational.ZERO)?c:c.minus():o.greaterThan(this.i,plt.types.Rational.ZERO)?m.pi.subtract(c):c.subtract(m.pi)}};var p=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.ONE),w=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.NEGATIVE_ONE);
plt.types.Complex.prototype.atan=function(){if(o.equal(this,p)||o.equal(this,w))return m.makeInstance(Number.NEGATIVE_INFINITY);return o.multiply(p,o.multiply(m.makeInstance(0.5),o.divide(o.add(p,this),o.add(p,o.subtract(plt.types.Rational.ZERO,this))).log()))};plt.types.Complex.prototype.cos=function(){if(this.isReal())return this.r.cos();var c=this.timesI(),d=c.minus();return o.add(c.exp(),d.exp()).half()};plt.types.Complex.prototype.sin=function(){if(this.isReal())return this.r.sin();var c=this.timesI(),
d=c.minus(),h=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.TWO);c=o.subtract(c.exp(),d.exp());return h=o.divide(c,h)};plt.types.Complex.prototype.expt=function(c){c=o.multiply(c,this.log());return c.exp()};plt.types.Complex.prototype.exp=function(){var c=this.r.exp(),d=this.i.cos(),h=this.i.sin();return o.multiply(c,o.add(d,h.timesI()))};plt.types.Complex.prototype.acos=function(){if(this.isReal())return this.r.acos();var c=m.pi.half(),d=this.timesI(),h=o.subtract(plt.types.Rational.ONE,
this.multiply(this)).sqrt();d=o.add(d,h).log().timesI();return o.add(c,d)};plt.types.Complex.prototype.asin=function(){if(this.isReal())return this.r.asin();var c=o.subtract(plt.types.Rational.ONE,this.multiply(this));c=c.sqrt();return o.multiply(plt.types.Rational.TWO,o.divide(this,o.add(plt.types.Rational.ONE,c)).atan())};plt.types.Complex.prototype.ceiling=function(){if(!this.isReal())throw new C("ceiling: can only be applied to real number");return this.r.ceiling()};plt.types.Complex.prototype.floor=
function(){if(!this.isReal())throw new C("floor: can only be applied to real number");return this.r.floor()};plt.types.Complex.prototype.imag_dash_part=function(){return this.i};plt.types.Complex.prototype.real_dash_part=function(){return this.r};plt.types.Complex.prototype.round=function(){return this.r.round()};plt.types.Complex.prototype.timesI=function(){return this.multiply(plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.ONE))};plt.types.Complex.prototype.minus=function(){return plt.types.Complex.makeInstance(o.subtract(plt.types.Rational.ZERO,
this.r),o.subtract(plt.types.Rational.ZERO,this.i))};plt.types.Complex.prototype.half=function(){return plt.types.Complex.makeInstance(this.r.half(),this.i.half())};var o={};plt.types.NumberTower=o;o.toFixnum=function(c){return c.toFixnum()};o.toFloat=function(c){return c.toFloat()};o.abs=function(c){return c.abs()};o.isFinite=function(c){return c.isFinite()};o.toExact=function(c){return c.toExact()};o.add=function(c,d){if(c.level()<d.level())c=c.lift(d);if(d.level()<c.level())d=d.lift(c);return c.add(d)};
o.subtract=function(c,d){if(c.level()<d.level())c=c.lift(d);if(d.level()<c.level())d=d.lift(c);return c.subtract(d)};o.multiply=function(c,d){if(c.level()<d.level())c=c.lift(d);if(d.level()<c.level())d=d.lift(c);return c.multiply(d)};o.divide=function(c,d){if(c.level()<d.level())c=c.lift(d);if(d.level()<c.level())d=d.lift(c);return c.divide(d)};o.equal=function(c,d){if(c.level()<d.level())c=c.lift(d);if(d.level()<c.level())d=d.lift(c);return c.equals(d)};o.eqv=function(c,d){return c===d||c.level()===
d.level()&&c.equals(d)};o.approxEqual=function(c,d,h){return o.lessThan(o.abs(o.subtract(c,d)),h)};o.greaterThanOrEqual=function(c,d){if(c.level()<d.level())c=c.lift(d);if(d.level()<c.level())d=d.lift(c);if(!(c.isReal()&&d.isReal()))throw new C("greaterThanOrEqual: couldn't be applied to complex number");return c.greaterThanOrEqual(d)};o.lessThanOrEqual=function(c,d){if(c.level()<d.level())c=c.lift(d);if(d.level()<c.level())d=d.lift(c);if(!(c.isReal()&&d.isReal()))throw new C("lessThanOrEqual: couldn't be applied to complex number");
return c.lessThanOrEqual(d)};o.greaterThan=function(c,d){if(c.level()<d.level())c=c.lift(d);if(d.level()<c.level())d=d.lift(c);if(!(c.isReal()&&d.isReal()))throw new C("greaterThan: couldn't be applied to complex number");return c.greaterThan(d)};o.lessThan=function(c,d){if(c.level()<d.level())c=c.lift(d);if(d.level()<c.level())d=d.lift(c);if(!(c.isReal()&&d.isReal()))throw new C("lessThan: couldn't be applied to complex number");return c.lessThan(d)};o.modulo=function(c,d){c=plt.types.Rational.makeInstance(c.toFixnum()%
d.toFixnum(),1);if(o.lessThan(d,plt.types.Rational.ZERO)){if(o.lessThanOrEqual(c,plt.types.Rational.ZERO))return c;return o.add(c,d)}else{if(o.lessThan(c,plt.types.Rational.ZERO))return o.add(c,d);return c}};o.sqr=function(c){return o.multiply(c,c)};o.expt=function(c,d){if(c.level()<d.level())c=c.lift(d);if(d.level()<c.level())d=d.lift(c);return c.expt(d)};o.gcd=function(c,d){c=Math.abs(c.toFixnum());for(var h=0;h<d.length;h++)c=B(c,d[h].toFixnum());return plt.types.Rational.makeInstance(c)};o.lcm=
function(c,d){c=Math.abs(c.toFixnum());if(c==0)return plt.types.Rational.ZERO;for(var h=0;h<d.length;h++){if(d[h].toFixnum()==0)return plt.types.Rational.ZERO;c=I(c,d[h].toFixnum())}return plt.types.Rational.makeInstance(c)};plt.types.String=String;plt.types.String.makeInstance=function(c){return c.valueOf()};plt.types.String.prototype.isEqual=function(c){return this==c};var G=new RegExp('["\\\\]',"g");plt.types.String.prototype.toWrittenString=function(){return'"'+this.replace(G,function(c){return"\\"+
c})+'"'};plt.types.String.prototype.toDisplayedString=function(){return this};function M(){return new plt._Hashtable(function(c){return plt.types.getEqHashCode(c)},function(c,d){return c===d})}plt.types.makeLowLevelEqHash=M;function K(){this.hash=M();this._eqHashCode=plt.types.makeEqHashCode()}plt.types.EqHashTable=K;K.prototype.toWrittenString=function(){return"<hash>"};K.prototype.toDisplayedString=function(){return"<hash>"};K.prototype.isEqual=function(c){if(c==undefined||c==null||!(c instanceof
K))return false;if(this.hash.keys().length!=c.hash.keys().length)return false;for(var d=this.hash.keys(),h=0;h<d.length;h++)if(this.hash.get(d[h])!==c.hash.get(d[h]))return false;return true};function X(){this.hash=new plt._Hashtable(function(c){return plt.types.toWrittenString(c)},function(c,d){return plt.Kernel.equal_question_(c,d)});this._eqHashCode=plt.types.makeEqHashCode()}plt.types.EqualHashTable=X;X.prototype.toWrittenString=function(){return"<hash>"};X.prototype.toDisplayedString=function(){return"<hash>"};
X.prototype.isEqual=function(c,d){if(c==undefined||c==null||!(c instanceof X))return false;if(this.hash.keys().length!=c.hash.keys().length)return false;for(var h=this.hash.keys(),f=0;f<h.length;f++)if(!plt.Kernel.isEqual(this.hash.get(h[f]),c.hash.get(h[f]),d))return false;return true};plt.types.toWrittenString=function(c,d){d||(d=M());if(c&&d.containsKey(c))return"...";if(c==undefined||c==null)return"<undefined>";if(typeof c=="string")return c.toWrittenString();if(typeof c!="object"&&typeof c!=
"function")return c.toString();if(typeof c.toWrittenString!=="undefined")return c.toWrittenString(d);return typeof c.toDisplayedString!=="undefined"?c.toDisplayedString(d):c.toString()};plt.types.toDisplayedString=function(c,d){d||(d=M());if(c&&d.containsKey(c))return"...";if(c==undefined||c==null)return"<undefined>";if(typeof c=="string")return c.toDisplayedString();if(typeof c!="object"&&typeof c!="function")return c.toString();if(typeof c.toWrittenString!=="undefined")return c.toWrittenString(d);
return typeof c.toDisplayedString!=="undefined"?c.toDisplayedString(d):c.toString()};plt.types.toDomNode=function(c,d){d||(d=M());if(c&&d.containsKey(c))return document.createTextNode("...");if(c==undefined||c==null)return c=document.createTextNode("<undefined>");if(typeof c=="string")return c=document.createTextNode(c.toWrittenString());if(typeof c!="object"&&typeof c!="function")return c=document.createTextNode(c.toString());if(c.nodeType)return c;if(typeof c.toDomNode!=="undefined")return c.toDomNode(d);
if(typeof c.toWrittenString!=="undefined")return c=document.createTextNode(plt.types.toWrittenString(c,d));return c=typeof c.toDisplayedString!=="undefined"?document.createTextNode(plt.types.toDisplayedString(c,d)):document.createTextNode(c.toString())};function S(c){return c!=null&&c!=undefined&&(c instanceof plt.types.Rational||c instanceof plt.types.FloatPoint||c instanceof plt.types.Complex)}plt.types.isNumber=S;plt.types.isEqual=function(c,d,h){if(c===d)return true;if(S(c)&&S(d))return o.equal(c,
d);if(c==undefined||c==null)return d==undefined||d==null;if(typeof c=="object"&&typeof d=="object"&&h.find(c)===h.find(d))return true;else{typeof c=="object"&&typeof d=="object"&&h.merge(c,d);return c.isEqual(d,h)}};plt.types.liftToplevelToFunctionValue=function(c,d,h,f){if(!c._mobyLiftedFunction){var x=function(P){return c.apply(null,P.slice(0,h).concat([P.slice(h)]))};x._eqHashCode=plt.types.makeEqHashCode();x.isEqual=function(P){return this===P};x.toWrittenString=function(){return"<function:"+
d+">"};x.toDisplayedString=x.toWrittenString;x.procedureArity=f;c._mobyLiftedFunction=x}return c._mobyLiftedFunction};function U(c){this.msg=c}U.prototype.name="MobyError";U.prototype.toString=function(){return this.name+": "+this.msg};function W(c,d){U.call(this,c);this.loc=d}W.prototype=u(U.prototype);W.prototype.name="MobyParserError";function v(c,d){U.call(this,c);this.stx=d}v.prototype=u(U.prototype);v.prototype.name="MobySyntaxError";function E(c){U.call(this,c)}E.prototype=u(U.prototype);E.prototype.name=
"MobyTypeError";function C(c){U.call(this,c)}C.prototype=u(U.prototype);C.prototype.name="MobyRuntimeError";function g(c){U.call(this,c)}g.prototype=u(C.prototype);g.prototype.name="MobyTestingError";plt.types.MobyError=U;plt.types.MobyParserError=W;plt.types.MobySyntaxError=v;plt.types.MobyTypeError=E;plt.types.MobyRuntimeError=C;plt.types.MobyTestingError=g;plt.types.Box=Q})();
plt._Hashtable=function(){function j(v){return typeof v==="undefined"}function u(v){return typeof v==="function"}function R(v){return typeof v==="string"}function D(v,E){return u(v[E])}function Q(v){return D(v,"equals")}function z(v){return D(v,"hashCode")}function B(v){if(R(v))return v;else if(z(v)){var E=v.hashCode();if(!R(E))return B(E);return E}else return D(v,"toString")?v.toString():String(v)}function I(v,E){return v.equals(E)}function N(v,E){return Q(E)?E.equals(v):v===E}function n(v,E){return v===
E}function m(v,E,C,g,c){for(var d,h=0,f=v.length;h<f;h++){d=v[h];if(c(E,C(d)))return g?[h,d]:true}return false}function O(v,E){if(D(v,"splice"))v.splice(E,1);else if(E===v.length-1)v.length=E;else{var C=v.slice(E+1);v.length=E;for(var g=0,c=C.length;g<c;g++)v[E+g]=C[g]}}function V(v,E){if(v===null)throw new Error("null is not a valid "+E);else if(j(v))throw new Error(E+" must not be undefined");}var H="key",L="value";function p(v){V(v,H)}function w(v){V(v,L)}function o(v,E,C){this.entries=[];this.addEntry(v,
E);if(C!==null)this.getEqualityFunction=function(){return C}}function G(v){return v[0]}function M(v){return v[1]}o.prototype={getEqualityFunction:function(v){return Q(v)?I:N},searchForEntry:function(v){return m(this.entries,v,G,true,this.getEqualityFunction(v))},getEntryForKey:function(v){return this.searchForEntry(v)[1]},getEntryIndexForKey:function(v){return this.searchForEntry(v)[0]},removeEntryForKey:function(v){var E=this.searchForEntry(v);if(E){O(this.entries,E[0]);return true}return false},
addEntry:function(v,E){this.entries[this.entries.length]=[v,E]},size:function(){return this.entries.length},keys:function(v){for(var E=v.length,C=0,g=this.entries.length;C<g;C++)v[E+C]=this.entries[C][0]},values:function(v){for(var E=v.length,C=0,g=this.entries.length;C<g;C++)v[E+C]=this.entries[C][1]},containsKey:function(v){return m(this.entries,v,G,false,this.getEqualityFunction(v))},containsValue:function(v){return m(this.entries,v,M,false,n)}};function K(){}K.prototype=[];function X(v){return v[0]}
function S(v,E,C){return m(v,E,X,true,C)}function U(v,E){var C=v[E];if(C&&C instanceof K)return C[1];return null}function W(v,E){var C=[],g={};v=u(v)?v:B;E=u(E)?E:null;this.put=function(c,d){p(c);w(d);var h=v(c),f=U(g,h);if(f){var x=f.getEntryForKey(c);if(x)x[1]=d;else f.addEntry(c,d)}else{var P=new K;P[0]=h;P[1]=new o(c,d,E);C[C.length]=P;g[h]=P}};this.get=function(c){p(c);var d=v(c),h=U(g,d);if(h){var f=h.getEntryForKey(c);if(f)return f[1]}return null};this.containsKey=function(c){p(c);var d=v(c),
h=U(g,d);if(h)return h.containsKey(c);return false};this.containsValue=function(c){w(c);for(var d=0,h=C.length;d<h;d++)if(C[d][1].containsValue(c))return true;return false};this.clear=function(){C.length=0;g={}};this.isEmpty=function(){return C.length===0};this.keys=function(){for(var c=[],d=0,h=C.length;d<h;d++)C[d][1].keys(c);return c};this.values=function(){for(var c=[],d=0,h=C.length;d<h;d++)C[d][1].values(c);return c};this.remove=function(c){p(c);var d=v(c),h=U(g,d);if(h)if(h.removeEntryForKey(c))if(h.size()===
0){var f=S(C,d,h.getEqualityFunction(c));O(C,f[0]);delete g[d]}};this.size=function(){for(var c=0,d=0,h=C.length;d<h;d++)c+=C[d][1].size();return c}}return W}();plt.Kernel={};
(function(){var j=plt.types.NumberTower,u=plt.types.MobySyntaxError,R=plt.types.MobyTypeError,D=plt.types.MobyRuntimeError,Q=plt.types.MobyTestingError;if(!Array.indexOf)Array.prototype.indexOf=function(b){for(var e=0;e<this.length;e++)if(this[e]==b)return e;return-1};function z(b,e,l){b.addEventListener?b.addEventListener(e,l,false):b.attachEvent("on"+e,l,false)}function B(b,e,l){b.addEventListener?b.removeEventListener(e,l,false):b.detachEvent("on"+e,l,false)}function I(b){function e(){}e.prototype=
b;return new e}function N(){this.parentMap=plt.types.makeLowLevelEqHash()}N.prototype.find=function(b){var e=this.parentMap.containsKey(b)?this.parentMap.get(b):b;if(e===b)return e;else{e=this.find(e);this.parentMap.put(b,e);return e}};N.prototype.merge=function(b,e){this.parentMap.put(this.find(b),this.find(e))};var n=plt.types.isNumber;function m(b){return b!=null&&b!=undefined&&b instanceof plt.types.Symbol}function O(b){return b!=null&&b!=undefined&&b instanceof plt.types.Char}function V(b){return stx_question_(b)}
function H(b){return typeof b=="string"}function L(b){return b==plt.types.Logic.TRUE||b==plt.types.Logic.FALSE}function p(b){return b!=null&&b!=undefined&&b instanceof plt.types.Cons}function w(b){return b!=null&&b!=undefined&&b instanceof plt.types.Empty}function o(b){return n(b)&&b.isReal()}function G(b){return n(b)&&b.isRational()}function M(b){return n(b)}function K(b){return typeof b=="function"}function X(b){return n(b)&&b.isInteger()}function S(b){return n(b)&&b.isInteger()&&b.toFixnum()>=
0}function U(b){for(var e=0;e<b.length;e++)if(!(b[e]>="a"&&b[e]<="z"||b[e]>="A"&&b[e]<="Z"))return false;return true}var W=function(){var b=/^\s*$/;return function(e){return e.match(b)?true:false}}();function v(b){return b!=null&&b!=undefined&&b instanceof plt.types.Vector}function E(b,e){for(var l=0;l<b.length;l++)e.apply(b[l],[b[l],l])}function C(b,e,l,t){if(!b(e,l).valueOf())return false;if(t.length==0)return true;if(!b(l,t[0]).valueOf())return false;for(e=0;e<t.length-1;e++)if(!b(t[e],t[e+1]).valueOf())return false;
return true}function g(b,e,l){var t=e;for(e=0;e<l.length;e++)b(t,l[e]).valueOf()||(t=l[e]);return t}function c(b){return b!=null&&b!=undefined&&(b instanceof plt.types.Cons||b instanceof plt.types.Empty)}function d(b){var e=["th","st","nd","rd","th","th","th","th","th","th"];return Math.floor(b/10)%10==1?b+"th":b+e[b%10]}function h(b,e,l,t){return plt.Kernel.format("~a: expects type <~a> as ~a argument, given: ~s",[b,e,d(l),t])}function f(b,e,l,t,F){if(!e(b))throw new R(h(l,t,F,b));}function x(b,
e,l){if(!c(b))throw new R(h(e,"list",l,b));}function P(b,e,l,t,F){if(!c(b))throw new R(h(l,"listof "+t,F,b));for(;!b.isEmpty();){if(!e(b.first()))throw new R(h(l,"listof "+t,F,b));b=b.rest()}}function q(b,e,l,t){return function(F,Z,ca){f(F,b,t,e,1);f(Z,b,t,e,2);E(ca,function(ja,ma){f(ja,b,t,e,ma+3)});return l(F,Z,ca)}}function J(b,e){return q(n,"number",function(l,t,F){return C(b,l,t,F)},e)}function $(b,e){return q(O,"char",function(l,t,F){return C(b,l,t,F)},e)}function da(b,e){return q(H,"string",
function(l,t,F){return C(b,l,t,F)},e)}plt.Kernel={_heir:I,pi:plt.types.FloatPoint.pi,e:plt.types.FloatPoint.e,struct_question_:function(b){return b!=null&&b!=undefined&&b instanceof plt.types.Struct},number_question_:function(b){return n(b)},equal_question_:function(b,e){return plt.types.isEqual(b,e,new N)},equal_tilde__question_:function(b,e,l){f(l,n,"equal~?","number",3);return n(b)&&n(e)?j.approxEqual(b,e,l):plt.types.isEqual(b,e,new N)},eq_question_:function(b,e){return b==e},eqv_question_:function(b,
e){if(n(b)&&n(e))return j.eqv(b,e);else if(O(b)&&O(e))return b.getValue()==e.getValue();return b===e},identity:function(b){return b},cons:function(b,e){x(e,"cons",2);return plt.types.Cons.makeInstance(b,e)},first:function(b){x(b,"first",1);return b.first()},rest:function(b){x(b,"rest",1);return b.rest()},second:function(b){x(b,"second",1);return b.rest().first()},third:function(b){x(b,"third",1);return b.rest().rest().first()},fourth:function(b){x(b,"fourth",1);return b.rest().rest().rest().first()},
fifth:function(b){x(b,"fifth",1);return b.rest().rest().rest().rest().first()},random:function(b){f(b,X,"random","integer",1);return plt.types.Rational.makeInstance(Math.floor(j.toFixnum(b)*Math.random()),1)},current_dash_seconds:function(){return plt.types.Rational.makeInstance(Math.floor((new Date).getTime()/1000))},floor:function(b){f(b,n,"floor","number",1);return b.floor()},ceiling:function(b){f(b,n,"ceiling","number",1);return b.ceiling()},sqrt:function(b){f(b,n,"sqrt","number",1);return b.sqrt()},
integer_dash_sqrt:function(b){f(b,X,"integer-sqrt","integer",1);b=b.sqrt();return G(b)?plt.types.Rational.makeInstance(b.toFixnum()):o(b)?plt.types.Rational.makeInstance(b.toFixnum()):plt.types.Complex.makeInstance(plt.types.Rational.makeInstance(plt.Kernel.real_dash_part(b).toFixnum()),plt.types.Rational.makeInstance(plt.Kernel.imag_dash_part(b).toFixnum()))},sqr:function(b){f(b,n,"sqr","number",1);return j.sqr(b)},sin:function(b){f(b,n,"sin","number",1);return b.sin()},cos:function(b){f(b,n,"cos",
"number",1);return b.cos()},modulo:function(b,e){f(b,n,"modulo","number",1);f(e,n,"modulo","number",2);return j.modulo(b,e)},zero_question_:function(b){f(b,n,"zero?","number",1);return j.equal(b,plt.types.Rational.ZERO)},_equal__tilde_:function(b,e,l){f(b,n,"=~","number",1);f(e,n,"=~","number",2);f(l,n,"=~","number",3);return j.approxEqual(b,e,l)},abs:function(b){f(b,n,"abs","number",1);return j.abs(b)},add1:function(b){f(b,n,"add1","number",1);return j.add(b,plt.types.Rational.ONE)},sub1:function(b){f(b,
n,"sub1","number",1);return j.subtract(b,plt.types.Rational.ONE)},_plus_:function(b){E(b,function(t,F){f(t,n,"+","number",F+1)});var e,l=plt.types.Rational.ZERO;for(e=0;e<b.length;e++)l=j.add(l,b[e]);return l},_dash_:function(b,e){f(b,n,"-","number",1);E(e,function(t,F){f(t,n,"-","number",F+2)});if(e.length==0)return j.subtract(plt.types.Rational.ZERO,b);var l=b;for(b=0;b<e.length;b++)l=j.subtract(l,e[b]);return l},_star_:function(b){E(b,function(t,F){f(t,n,"*","number",F+1)});var e,l=plt.types.Rational.ONE;
for(e=0;e<b.length;e++)l=j.multiply(l,b[e]);return l},_slash_:function(b,e){f(b,n,"/","number",1);E(e,function(t,F){f(t,n,"/","number",F+2)});var l=b;if(e.length==0)return j.divide(plt.types.Rational.ONE,l);else{for(b=0;b<e.length;b++)l=j.divide(l,e[b]);return l}},_equal_:J(j.equal,"="),_greaterthan__equal_:J(j.greaterThanOrEqual,">="),_lessthan__equal_:J(j.lessThanOrEqual,"<="),_greaterthan_:J(j.greaterThan,">"),_lessthan_:J(j.lessThan,"<"),min:function(b,e){f(b,n,"min","number",1);E(e,function(l,
t){f(this,n,"min","number",t+2)});return g(j.lessThanOrEqual,b,e)},max:function(b,e){f(b,n,"max","number",1);E(e,function(l,t){f(this,n,"max","number",t+2)});return g(j.greaterThanOrEqual,b,e)},lcm:function(b,e){f(b,X,"lcm","number",1);E(e,function(l,t){f(this,X,"lcm","number",t+2)});return j.lcm(b,e)},gcd:function(b,e){f(b,X,"gcd","number",1);E(e,function(l,t){f(this,X,"gcd","number",t+2)});return j.gcd(b,e)},exact_dash__greaterthan_inexact:function(b){f(b,n,"exact->inexact","number",1);return plt.types.FloatPoint.makeInstance(b.toFloat())},
inexact_dash__greaterthan_exact:function(b){f(b,n,"inexact->exact","number",1);return j.toExact(b)},exact_question_:function(b){f(b,n,"exact?","number",1);return b.isExact()},inexact_question_:function(b){f(b,n,"inexact?","number",1);return!b.isExact()},rational_question_:function(b){return n(b)&&b.isRational()},number_dash__greaterthan_string:function(b){f(b,n,"number->string","number",1);return plt.types.String.makeInstance(plt.types.toWrittenString(b))},conjugate:function(b){f(b,n,"conjugate",
"number",1);return b.conjugate()},magnitude:function(b){f(b,n,"magnitude","number",1);return b.magnitude()},log:function(b){f(b,n,"log","number",1);return b.log()},angle:function(b){f(b,n,"angle","number",1);return b.angle()},atan:function(b,e){if(e.length==0){f(b,n,"atan","number",1);return b.atan()}else if(e.length==1){f(b,o,"atan","number",1);f(e[0],o,"atan","number",2);return plt.types.FloatPoint.makeInstance(Math.atan2(j.toFloat(b),j.toFloat(e[0])))}else throw new D(plt.Kernel.format("atan: expects 1 to 2 arguments, given ~a.",
[plt.types.Rational.makeInstance(e.length)]));},expt:function(b,e){f(b,n,"expt","number",1);f(e,n,"expt","number",2);return j.expt(b,e)},exp:function(b){f(b,n,"exp","number",1);return b.exp()},acos:function(b){f(b,n,"acos","number",1);return b.acos()},asin:function(b){f(b,n,"asin","number",1);return b.asin()},tan:function(b){f(b,n,"tan","number",1);return j.divide(b.sin(),b.cos())},complex_question_:function(b){return M(b)},cosh:function(b){f(b,n,"cosh","number",1);return this._plus_([this.exp(b),
this.exp(b.minus())]).half()},sinh:function(b){f(b,n,"sinh","number",1);return j.subtract(this.exp(b),this.exp(b.minus())).half()},denominator:function(b){f(b,G,"denominator","rational",1);return b.denominator()},numerator:function(b){f(b,G,"numerator","rational",1);return b.numerator()},odd_question_:function(b){f(b,n,"odd?","number",1);return Math.abs(b.toFixnum()%2)==1},even_question_:function(b){f(b,n,"even?","number",1);return Math.abs(b.toFixnum()%2)==0},positive_question_:function(b){f(b,n,
"positive?","number",1);return this._greaterthan_(b,plt.types.Rational.ZERO,[])},negative_question_:function(b){f(b,n,"negative?","number",1);return this._lessthan_(b,plt.types.Rational.ZERO,[])},imag_dash_part:function(b){f(b,n,"imag-part","number",1);return b.imag_dash_part()},real_dash_part:function(b){f(b,n,"real-part","number",1);return b.real_dash_part()},make_dash_polar:function(b,e){if(j.equal(e,plt.types.Rational.ZERO))return b;var l=j.multiply(b,e.cos());b=j.multiply(b,e.sin());return plt.types.Complex.makeInstance(l,
b)},integer_question_:function(b){return X(b)},make_dash_rectangular:function(b,e){return plt.types.Complex.makeInstance(b,e)},quotient:function(b,e){f(b,X,"quotient","integer",1);f(e,X,"quotient","integer",2);b=j.divide(b,e);return plt.Kernel.positive_question_(b)?plt.types.Rational.makeInstance(b.floor().toFixnum(),1):plt.types.Rational.makeInstance(b.ceiling().toFixnum(),1)},remainder:function(b,e){f(b,n,"remainder","number",1);f(e,n,"remainder","number",2);return plt.types.Rational.makeInstance(b.toFixnum()%
e.toFixnum(),1)},real_question_:function(b){return o(b)},round:function(b){f(b,n,"round","number",1);return b.round()},sgn:function(b){f(b,n,"sgn","number",1);if(this.positive_question_(b).valueOf())return plt.types.Rational.ONE;return this.negative_question_(b).valueOf()?plt.types.Rational.NEGATIVE_ONE:plt.types.Rational.ZERO},boolean_equal__question_:function(b,e){f(b,L,"boolean=?","boolean",1);f(e,L,"boolean=?","boolean",2);return b==e},boolean_question_:function(b){return L(b)},false_question_:function(b){return b==
plt.types.Logic.FALSE},not:function(b){if(!b||b===plt.types.Logic.FALSE)return plt.types.Logic.TRUE;return plt.types.Logic.FALSE},symbol_dash__greaterthan_string:function(b){f(b,m,"symbol->string","symbol",1);return plt.types.String.makeInstance(b.val)},symbol_equal__question_:function(b,e){f(b,m,"symbol=?","symbol",1);f(e,m,"symbol=?","symbol",2);return b.val==e.val},symbol_question_:function(b){return m(b)},append:function(b){var e;for(e=0;e<b.length;e++)x(b[e],"append",e+1);if(b.length==0)return plt.types.Empty.EMPTY;
var l=b[0];for(e=1;e<b.length;e++)l=l.append(b[e]);return l},reverse:function(b){x(b,"reverse",1);return plt.types.Cons.reverse(b)},assq:function(b,e){for(x(e,"assq",2);!e.isEmpty()&&!plt.Kernel.eq_question_(b,e.first().first());)e=e.rest();return e.isEmpty()?plt.types.Logic.FALSE:e.first()},caaar:function(b){x(b,"caaar",1);return b.first().first().first()},caadr:function(b){x(b,"caadr",1);return b.first().first().rest()},caar:function(b){x(b,"caar",1);return b.first().first()},cadar:function(b){x(b,
"cadar",1);return b.first().rest().first()},cadddr:function(b){x(b,"cadddr",1);return b.rest().rest().rest().first()},caddr:function(b){x(b,"caddr",1);return b.rest().rest().first()},cadr:function(b){x(b,"cadr",1);return b.rest().first()},car:function(b){x(b,"car",1);return b.first()},cdaar:function(b){x(b,"cdaar",1);return b.first().first().rest()},cdadr:function(b){x(b,"cdadr",1);return b.rest().first().rest()},cdar:function(b){x(b,"cdar",1);return b.first().rest()},cddar:function(b){x(b,"cddar",
1);return b.first().rest().rest()},cdddr:function(b){x(b,"cdddr",1);return b.rest().rest().rest()},cddr:function(b){x(b,"cddr",1);return b.rest().rest()},cdr:function(b){x(b,"cdr",1);return b.rest()},null_question_:function(b){return w(b)},empty_question_:function(b){return w(b)},pair_question_:function(b){return p(b)},cons_question_:function(b){return p(b)},list_question_:function(b){return c(b)},sixth:function(b){x(b,"sixth",1);return b.rest().rest().rest().rest().rest().first()},seventh:function(b){x(b,
"seventh",1);return b.rest().rest().rest().rest().rest().rest().first()},eighth:function(b){x(b,"eighth",1);return b.rest().rest().rest().rest().rest().rest().rest().first()},set_dash_car_bang_:function(b,e){x(b,"set-car!",1);b.f=e},set_dash_cdr_bang_:function(b,e){x(b,"set-cdr!",1);x(e,"set-cdr!",2);b.r=e},length:function(b){x(b,"length",1);for(var e=plt.types.Rational.ZERO;!b.isEmpty();b=b.rest())e=plt.Kernel.add1(e);return e},list:function(b){for(var e=plt.types.Empty.EMPTY,l=b.length-1;l>=0;l--)e=
plt.types.Cons.makeInstance(b[l],e);return e},list_star_:function(b,e){var l=e.pop();if(l==undefined||!l instanceof plt.types.Cons)throw new R("list*: "+l+" not a list");e.unshift(b);return plt.Kernel.append([plt.Kernel.list(e),l])},list_dash_ref:function(b,e){x(b,"list-ref",1);f(e,S,"list-ref","natural",2);for(var l=plt.types.Rational.ZERO;plt.Kernel._lessthan_(l,e,[]);l=plt.Kernel.add1(l))if(b.isEmpty())throw new D("list-ref: index too small");else b=b.rest();return b.first()},remove:function(b,
e){x(e,"member",2);for(var l=e,t=new N,F=plt.types.Empty.EMPTY;!e.isEmpty();)if(plt.types.isEqual(b,e.first(),t).valueOf())return plt.Kernel.append([plt.Kernel.reverse(F),e.rest()]);else{F=plt.types.Cons.makeInstance(e.first(),F);e=e.rest()}return l},member:function(b,e){x(e,"member",2);for(var l=new N;!e.isEmpty();){if(plt.types.isEqual(b,e.first(),l).valueOf())return plt.types.Logic.TRUE;e=e.rest()}return plt.types.Logic.FALSE},memq:function(b,e){for(x(e,"memq",2);!e.isEmpty();){if(plt.Kernel.eq_question_(b,
e.first()).valueOf())return e;e=e.rest()}return plt.types.Logic.FALSE},memv:function(b,e){for(x(e,"memv",2);!e.isEmpty();){if(plt.Kernel.eqv_question_(b,e.first()).valueOf())return e;e=e.rest()}return plt.types.Logic.FALSE},memf:function(b,e){f(b,K,"memf","function",1);for(x(e,"memf",2);!e.isEmpty();){if(b([e.first()]))return e;e=e.rest()}return plt.types.Logic.FALSE},compose:function(b){return function(e){e=e;for(var l=b.length-1;l>=0;l--)e=[b[l](e)];return e[0]}},string_dash__greaterthan_number:function(b){f(b,
H,"string->number","string",1);try{var e=plt.reader.readSchemeExpressions(b,"");if(j.equal(plt.Kernel.length(e),plt.types.Rational.ONE)){var l=stx_dash_e(e.first());return n(l)?l:plt.types.Logic.FALSE}else return plt.types.Logic.FALSE}catch(t){return plt.types.Logic.FALSE}},string_dash__greaterthan_symbol:function(b){f(b,H,"string->symbol","string",1);return plt.types.Symbol.makeInstance(b)},string_dash__greaterthan_int:function(b){f(b,H,"string->int","string",1);return plt.types.Rational.makeInstance(b.toString().charCodeAt(0),
1)},string_dash_append:function(b){E(b,function(e,l){f(e,H,"string-append","string",l+1)});return plt.types.String.makeInstance(b.join(""))},replicate:function(b,e){f(b,S,"replicate","natural",1);f(e,H,"replicate","string",2);for(var l=[],t=0;t<b.toFixnum();t++)l.push(e);return plt.types.String.makeInstance(l.join(""))},string_equal__question_:da(function(b,e){return b==e},"string=?"),string_lessthan__equal__question_:da(function(b,e){return b<=e},"string<=?"),string_lessthan__question_:da(function(b,
e){return b<e},"string<?"),string_greaterthan__equal__question_:da(function(b,e){return b>=e},"string>=?"),string_greaterthan__question_:da(function(b,e){return b>e},"string>?"),string_dash_ci_equal__question_:da(function(b,e){return b.toUpperCase()==e.toUpperCase()},"string-ci=?"),string_dash_ci_lessthan__equal__question_:da(function(b,e){return b.toUpperCase()<=e.toUpperCase()},"string-ci<=?"),string_dash_ci_lessthan__question_:da(function(b,e){return b.toUpperCase()<e.toUpperCase()},"string-ci<?"),
string_dash_ci_greaterthan__question_:da(function(b,e){return b.toUpperCase()>e.toUpperCase()},"string-ci>?"),string_dash_ci_greaterthan__equal__question_:da(function(b,e){return b.toUpperCase()>=e.toUpperCase()},"string-ci>=?"),string_dash_copy:function(b){f(b,H,"string-copy","string",1);return b.substring(0,b.length)},string_dash_length:function(b){f(b,H,"string-length","string",1);return plt.types.Rational.makeInstance(b.length,1)},string_dash_ref:function(b,e){f(b,H,"string-ref","string",1);f(e,
S,"string-ref","natural",2);if(e.toFixnum()>=b.length)throw new D("string-ref: index >= length");return plt.types.Char.makeInstance(b.charAt(e.toFixnum()))},string_dash_ith:function(b,e){f(b,H,"string-ith","string",1);f(e,S,"string-ith","natural",2);if(e.toFixnum()>=b.length)throw new D("string-ith: index >= string length");return plt.types.String.makeInstance(b.substring(e.toFixnum(),e.toFixnum()+1))},int_dash__greaterthan_string:function(b){f(b,X,"int->string","integer",1);return plt.types.String.makeInstance(String.fromCharCode(b.toFixnum()))},
string_question_:function(b){return H(b)},substring:function(b,e,l){f(b,H,"substring","string",1);f(e,S,"substring","natural",2);f(l,S,"substring","natural",3);if(e.toFixnum()>l.toFixnum())throw new D("substring: begin > end");if(l.toFixnum()>b.length)throw new D("substring: end > length");return String.makeInstance(b.substring(e.toFixnum(),l.toFixnum()))},char_question_:function(b){return O(b)},char_dash__greaterthan_integer:function(b){f(b,O,"char->integer","char",1);b=new String(b.val);return plt.types.Rational.makeInstance(b.charCodeAt(0),
1)},integer_dash__greaterthan_char:function(b){f(b,X,"integer->char","integer",1);b=String.fromCharCode(b.toFixnum());return plt.types.Char.makeInstance(b)},char_equal__question_:$(function(b,e){return b.val==e.val},"char=?"),char_lessthan__question_:$(function(b,e){return b.val<e.val},"char<?"),char_lessthan__equal__question_:$(function(b,e){return b.val<=e.val},"char<=?"),char_greaterthan__question_:$(function(b,e){return b.val>e.val},"char>?"),char_greaterthan__equal__question_:$(function(b,e){return b.val>=
e.val},"char>=?"),char_dash_ci_equal__question_:$(function(b,e){return b.val.toUpperCase()==e.val.toUpperCase()},"char-ci=?"),char_dash_ci_lessthan__question_:$(function(b,e){return b.val.toUpperCase()<e.val.toUpperCase()},"char-ci<?"),char_dash_ci_lessthan__equal__question_:$(function(b,e){return b.val.toUpperCase()<=e.val.toUpperCase()},"char-ci<=?"),char_dash_ci_greaterthan__question_:$(function(b,e){return b.val.toUpperCase()>e.val.toUpperCase()},"char-ci>?"),char_dash_ci_greaterthan__equal__question_:$(function(b,
e){return b.val.toUpperCase()>=e.val.toUpperCase()},"char-ci>=?"),char_dash_numeric_question_:function(b){f(b,O,"char-numeric?","char",1);b=b.val;return b>="0"&&b<="9"},char_dash_alphabetic_question_:function(b){f(b,O,"char-alphabetic?","char",1);b=b.val;return U(b)},char_dash_whitespace_question_:function(b){f(b,O,"char-whitespace?","char",1);b=b.val;return W(b)},char_dash_upper_dash_case_question_:function(b){f(b,O,"char-upper-case?","char",1);return U(b.val)&&b.val.toUpperCase()==b.val},char_dash_lower_dash_case_question_:function(b){f(b,
O,"char-lower-case?","char",1);return U(b.val)&&b.val.toLowerCase()==b.val},char_dash_upcase:function(b){f(b,O,"char-upcase","char",1);return plt.types.Char.makeInstance(b.val.toUpperCase())},char_dash_downcase:function(b){f(b,O,"char-downcase","char",1);return plt.types.Char.makeInstance(b.val.toLowerCase())},list_dash__greaterthan_string:function(b){P(b,O,"list->string","char",1);for(var e="";!b.isEmpty();){e+=b.first().val;b=b.rest()}return plt.types.String.makeInstance(e)},implode:function(b){P(b,
H,"implode","string",1);for(var e=[];!b.isEmpty();){e.push(b.first().toString());b=b.rest()}return plt.types.String.makeInstance(e.join(""))},string_dash_numeric_question_:function(b){f(b,H,"string-numeric?","string",1);for(var e=0;e<b.length;e++)if(b[e]<"0"||b[e]>"9")return plt.types.Logic.FALSE;return plt.types.Logic.TRUE},string_dash_alphabetic_question_:function(b){f(b,H,"string-alphabetic?","string",1);return U(b)?plt.types.Logic.TRUE:plt.types.Logic.FALSE},string_dash_whitespace_question_:function(b){f(b,
H,"string-whitespace?","string",1);return W(b)?plt.types.Logic.TRUE:plt.types.Logic.FALSE},string_dash_upper_dash_case_question_:function(b){f(b,H,"string-upper-case?","string",1);return U(b)&&b.toUpperCase()==b},string_dash_lower_dash_case_question_:function(b){f(b,H,"string-lower-case?","string",1);return U(b)&&b.toLowerCase()==b},string:function(b){E(b,function(t,F){f(this,O,"string","char",F+1)});for(var e=[],l=0;l<b.length;l++)e.push(b[l].val);return String.makeInstance(e.join(""))},make_dash_string:function(b,
e){f(b,S,"make-string","natural",1);f(e,O,"make-string","char",2);var l="";e=e.val;for(var t=plt.types.Rational.ZERO;plt.Kernel._lessthan_(t,b,[]);t=plt.Kernel.add1(t))l+=e;return plt.types.String.makeInstance(l)},string_dash__greaterthan_list:function(b){f(b,H,"string->list","string",1);b=b;for(var e=plt.types.Empty.EMPTY,l=b.length-1;l>=0;l--)e=plt.types.Cons.makeInstance(plt.types.Char.makeInstance(b.charAt(l)),e);return e},explode:function(b){f(b,H,"explode","string",1);b=b;for(var e=plt.types.Empty.EMPTY,
l=b.length-1;l>=0;l--)e=plt.types.Cons.makeInstance(plt.types.String.makeInstance(b.charAt(l)),e);return e}};plt.Kernel.isEqual=plt.types.isEqual;plt.Kernel._dumpKernelSymbols=function(){var b=plt.types.Empty.EMPTY;for(var e in plt.Kernel)if(plt.Kernel.hasOwnProperty(e))b=plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance(e),b);return b};plt.Kernel.openInputStx=function(){throw new D("open-input-stx currently unsupported");};plt.Kernel.makeHashEq=function(){return new plt.types.EqHashTable};
plt.Kernel.makeHash=function(){return new plt.types.EqualHashTable};plt.Kernel.hashSetBang=function(b,e,l){f(b,ga,"hash-set!","hash",1);b.hash.put(e,l)};plt.Kernel.hashRef=function(b,e,l){f(b,ga,"hash-ref","hash",1);if(b.hash.containsKey(e))return b.hash.get(e);else{if(K(l))return l([]);return l}};plt.Kernel.hashRemoveBang=function(b,e){f(b,ga,"hash-remove!","hash",1);b.hash.remove(e)};plt.Kernel.hashMap=function(b,e){f(b,ga,"hash-map","hash",1);for(var l=plt.types.Empty.EMPTY,t=b.hash.keys(),F=0;F<
t.length;F++){var Z=b.hash.get(t[F]);l=plt.Kernel.cons(e([t[F],Z]),l)}return l};plt.Kernel.hashForEach=function(b,e){f(b,ga,"hash-map","hash",1);for(var l=b.hash.keys(),t=0;t<l.length;t++){var F=b.hash.get(l[t]);e([l[t],F])}};function ga(b){return b!==null&&b!==undefined&&(b instanceof plt.types.EqHashTable||b instanceof plt.types.EqualHashTable)}plt.Kernel.isHash=ga;plt.Kernel.apply=function(b,e,l){var t,F=[];f(b,K,"apply","function",1);if(l.length==0){t=e;for(x(t,"apply",2);!t.isEmpty();){var Z=
t.first();F.push(Z);t=t.rest()}}else{t=l.pop();for(x(t,"apply",3);!t.isEmpty();){Z=t.first();F.push(Z);t=t.rest()}for(;l.length>0;)F.unshift(l.pop());F.unshift(e)}if(na(b,F.length))return b(F);else throw new D(plt.Kernel.format("~a: expects ~a, given ~a: ~s",[b,y(b),F.length,plt.Kernel.list(F)]));};plt.Kernel.map=function(b,e){f(b,K,"map","function",1);E(e,function(Z,ca){x(Z,"map",ca+2)});for(var l=plt.types.Empty.EMPTY;!e[0].isEmpty();){for(var t=[],F=0;F<e.length;F++){t.push(e[F].first());e[F]=
e[F].rest()}l=plt.Kernel.cons(b(t),l)}return plt.Kernel.reverse(l)};plt.Kernel.for_dash_each=function(b,e){f(b,K,"for-each","function",1);for(E(e,function(F,Z){x(F,"for-each",Z+2)});!e[0].isEmpty();){for(var l=[],t=0;t<e.length;t++){l.push(e[t].first());e[t]=e[t].rest()}b(l)}};plt.Kernel.andmap=function(b,e){f(b,K,"andmap","function",1);for(E(e,function(F,Z){x(F,"andmap",Z+2)});!e[0].isEmpty();){for(var l=[],t=0;t<e.length;t++){l.push(e[t].first());e[t]=e[t].rest()}if(!b(l))return plt.types.Logic.FALSE}return plt.types.Logic.TRUE};
plt.Kernel.ormap=function(b,e){f(b,K,"ormap","function",1);for(E(e,function(F,Z){x(F,"ormap",Z+2)});!e[0].isEmpty();){for(var l=[],t=0;t<e.length;t++){l.push(e[t].first());e[t]=e[t].rest()}if(b(l))return plt.types.Logic.TRUE}return plt.types.Logic.FALSE};plt.Kernel.filter=function(b,e){f(b,K,"filter","function",1);f(e,c,"filter","list",2);for(var l=plt.types.Empty.EMPTY;!e.isEmpty();){if(b([e.first()]))l=plt.types.Cons.makeInstance(e.first(),l);e=e.rest()}return plt.Kernel.reverse(l)};plt.Kernel.foldl=
function(b,e,l){f(b,K,"foldl","function",1);E(l,function(Z,ca){f(Z,c,"foldl","list",ca+3)});for(e=e;!l[0].isEmpty();){for(var t=[],F=0;F<l.length;F++){t.push(l[F].first());l[F]=l[F].rest()}t.push(e);e=b(t)}return e};plt.Kernel.foldr=function(b,e,l){f(b,K,"foldr","function",1);E(l,function(Z,ca){f(Z,c,"foldr","list",ca+3)});e=e;for(var t=0;t<l.length;t++)l[t]=plt.Kernel.reverse(l[t]);for(;!l[0].isEmpty();){var F=[];for(t=0;t<l.length;t++){F.push(l[t].first());l[t]=l[t].rest()}F.push(e);e=b(F)}return e};
plt.Kernel.argmin=function(b,e){f(b,K,"argmin","function",1);f(e,p,"argmin","nonempty list",2);var l=e.first(),t=b([e.first()]).toFloat();for(e=e.rest();!e.isEmpty();){var F=b([e.first()]).toFloat();if(F<t){l=e.first();t=F}e=e.rest()}return l};plt.Kernel.argmax=function(b,e){f(b,K,"argmax","function",1);f(e,p,"argmax","nonempty list",2);var l=e.first(),t=b([e.first()]).toFloat();for(e=e.rest();!e.isEmpty();){var F=b([e.first()]).toFloat();if(F>t){l=e.first();t=F}e=e.rest()}return l};plt.Kernel.sort=
function(b,e){f(b,c,"sort","list",1);f(e,K,"sort","function",2);for(var l=[];!b.isEmpty();){l.push(b.first());b=b.rest()}l.sort(function(t,F){return e([t,F])?-1:1});return plt.Kernel.list(l)};plt.Kernel.quicksort=plt.Kernel.sort;plt.Kernel.build_dash_list=function(b,e){f(b,S,"build-list","natural",1);f(e,K,"build-list","function",2);for(var l=plt.types.Empty.EMPTY,t=0;t<b.toFixnum();t++)l=plt.Kernel.cons(e([plt.types.Rational.makeInstance(t,1)]),l);return plt.Kernel.reverse(l)};plt.Kernel.build_dash_string=
function(b,e){f(b,S,"build-string","natural",1);f(e,K,"build-string","function",2);for(var l=[],t=0;t<b.toFixnum();t++){var F=e([plt.types.Rational.makeInstance(t,1)]);l.push(F.val)}return plt.types.String.makeInstance(l.join(""))};plt.Kernel.format=function(b,e){f(b,H,"format","string",1);var l=new RegExp("~[sSaAn%~]","g"),t=e;function F(Z){if(Z=="~~")return"~";else if(Z=="~n"||Z=="~%")return"\n";else if(Z=="~s"||Z=="~S"){if(t.length==0)throw new D("format: fewer arguments passed than expected");
return plt.types.toWrittenString(t.shift())}else if(Z=="~a"||Z=="~A"){if(t.length==0)throw new D("format: fewer arguments passed than expected");return plt.types.toDisplayedString(t.shift())}else throw new D("Unimplemented format "+Z);}b=plt.types.String.makeInstance(b.replace(l,F));if(t.length>0)throw new D("format: More arguments passed than expected");return b};plt.Kernel.string=function(b){E(b,function(t,F){f(t,O,"string","char",F+1)});for(var e=[],l=0;l<b.length;l++)e.push(b[l].getValue());return plt.types.String.makeInstance(e.join(""))};
plt.Kernel.procedure_question_=function(b){return K(b)};plt.Kernel.procedure_dash_arity=function(b){f(b,K,"procedure-arity","function",1);return b.procedureArity};function na(b,e){return p(b.procedureArity)?e>=b.procedureArity.rest().first().toFixnum():e==b.procedureArity.toFixnum()}function y(b){return p(b.procedureArity)?"at least "+(b.procedureArity.rest().first().toFixnum()==1)?"one argument":b.procedureArity.rest().first().toFixnum()+" arguments":b.procedureArity.toFixnum()==1?"one argument":
b.procedureArity.toFixnum()+" arguments"}plt.Kernel.xml_dash__greaterthan_s_dash_exp=function(b){f(b,H,"xml->s-exp","string",1);if(b.length==0)return plt.types.String.makeInstance("");var e;try{e=new ActiveXObject("Microsoft.XMLDOM");e.async="false";e.loadXML(b)}catch(l){e=new DOMParser;e=e.parseFromString(b,"text/xml")}function t(Z){for(var ca=plt.types.Empty.EMPTY,ja=0;ja<Z.length;ja++){var ma=plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance(Z.item(ja).nodeName),plt.types.Cons.makeInstance(Z.item(ja).nodeValue,
plt.types.Empty.EMPTY));ca=plt.types.Cons.makeInstance(ma,ca)}return plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance("@"),plt.Kernel.reverse(ca))}function F(Z){if(Z.nodeType==Node.ELEMENT_NODE){for(var ca=plt.types.Empty.EMPTY,ja=Z.firstChild;ja!=null;){var ma=F(ja);ca=H(ma)&&!ca.isEmpty()&&H(ca.first())?plt.types.Cons.makeInstance(ca.first()+ma,ca.rest()):plt.types.Cons.makeInstance(ma,ca);ja=ja.nextSibling}ca=plt.Kernel.reverse(ca);ca=plt.types.Cons.makeInstance(t(Z.attributes),ca);return ca=
plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance(Z.nodeName),ca)}else return Z.nodeType==Node.TEXT_NODE?Z.textContent:Z.nodeType==Node.CDATA_SECTION_NODE?Z.data:plt.types.Empty.EMPTY}return b=F(e.firstChild)};plt.Kernel.split_dash_whitespace=function(b){b=b.replace(/^\s+/,"");b=b.replace(/\s+$/,"");return plt.Kernel.list(b.split(/\s+/))};plt.Kernel.box=function(b){return new plt.types.Box(b)};plt.Kernel.unbox=function(b){f(b,plt.Kernel.box_question_,"unbox","box",1);return b.unbox()};plt.Kernel.box_question_=
function(b){return b!=null&&b!=undefined&&b instanceof plt.types.Box};plt.Kernel.set_dash_box_bang_=function(b,e){f(b,plt.Kernel.box_question_,"set-box!","box",1);b.set(e)};function T(b,e){plt.types.Struct.call(this,"make-posn",[b,e]);this._eqHashCode=plt.types.makeEqHashCode()}T.prototype=I(plt.types.Struct.prototype);function aa(b,e){return new T(b,e)}function ea(b){f(b,ka,"posn-x","posn",1);return b._fields[0]}function ha(b){f(b,ka,"posn-y","posn",1);return b._fields[1]}function ka(b){return b!=
null&&b!=undefined&&b instanceof T}plt.Kernel.make_dash_posn=aa;plt.Kernel.posn_question_=ka;plt.Kernel.posn_dash_x=ea;plt.Kernel.posn_dash_y=ha;plt.Kernel.error=function(b,e){f(b,m,"error","symbol",1);f(e,H,"error","string",2);throw new D(plt.Kernel.format("~a: ~a",[b,e]).toString());};plt.Kernel.syntax_dash_error=function(b,e){f(b,H,"syntax-error","string",1);f(e,V,"syntax-error","stx",2);throw new u(b,e);};plt.Kernel.reportError=function(b){var e;e=typeof console!="undefined"&&typeof console.log!=
"undefined"?function(l){console.log(l)}:function(l){alert(l)};if(typeof b=="string")e(b);else b.msg?e(b.msg):e(b.toString());if(plt.Kernel.lastLoc){b=plt.Kernel.lastLoc;if(typeof b==="string")e("Error was raised around "+b);else typeof b!=="undefined"&&typeof b.line!=="undefined"&&e("Error was raised around: "+plt.Kernel.locToString(b))}};plt.Kernel._void_=function(){};plt.Kernel.build_dash_vector=function(b,e){f(b,S,"build-vector","natural",1);f(e,K,"build-vector","function",2);for(var l=[],t=0;t<
b.toFixnum();t++)l[t]=e([plt.types.Rational.makeInstance(t,1)]);return plt.types.Vector.makeInstance(b.toFixnum(),l)};plt.Kernel.make_dash_vector=function(b,e){f(b,S,"make-vector","natural",1);f(e,function(F){return F.length==0||F.length==1},"make-vector","at most two",2);b=b.toFixnum();var l,t=plt.types.Vector.makeInstance(b);if(e.length==1)for(l=0;l<b;l++)t.set(l,e[0]);return t};plt.Kernel.vector=function(b){return plt.types.Vector.makeInstance(b.length,b)};plt.Kernel.vector_dash_length=function(b){f(b,
v,"vector-length","vector",1);return plt.types.Rational.makeInstance(b.length())};plt.Kernel.vector_dash_ref=function(b,e){f(b,v,"vector-ref","vector",1);f(e,function(l){return S(l)&&l.toFixnum()<b.length()},"vector-ref","natural < vector length",2);return b.ref(e.toFixnum())};plt.Kernel.vector_dash_set_bang_=function(b,e,l){f(b,v,"vector-set!","vector",1);f(e,function(t){return S(t)&&t.toFixnum()<b.length()},"vector-set!","natural < vector length",2);return b.set(e.toFixnum(),l)};plt.Kernel.vector_question_=
function(b){return v(b)?plt.types.Logic.TRUE:plt.types.Logic.FALSE};plt.Kernel.check_dash_expect=function(b,e){b=b([]);e=e([]);if(!plt.Kernel.equal_question_(b,e))throw new Q(plt.Kernel.format("~s doesn't match the expected value ~s",[b,e]));};plt.Kernel.check_dash_within=function(b,e,l){b=b([]);e=e([]);l=l([]);if(!plt.Kernel._equal__tilde_(b,e,l))throw new Q(plt.Kernel.format("~s doesn't match the expected value ~s within ~s",[b,e,l]));};plt.Kernel.check_dash_error=function(b,e){e=e([]);var l;try{l=
b([])}catch(t){if(plt.Kernel.equal_question_(t.msg,e))return;else throw new Q(plt.Kernel.format("check-error encountered the error ~s instead of the expected error ~s.",[t.msg,e]));}throw new Q(plt.Kernel.format("check-error expected the error ~s, but instead received the value ~s.",[e,l]));};plt.Kernel.lastLoc=undefined;plt.Kernel.setLastLoc=function(b){plt.Kernel.lastLoc=b;return true};plt.Kernel.locToString=function(b){if(typeof b==="string")return b;return"offset="+Loc_dash_offset(b)+", line="+
Loc_dash_line(b)+", column="+Loc_dash_column(b)+", span="+Loc_dash_span(b)+", id="+Loc_dash_id(b)};plt.Kernel.printf=function(b,e){b=plt.Kernel.format(b,e);plt.Kernel.printHook(b)};plt.Kernel.printHook=function(){};plt.Kernel.isSymbol=m;plt.Kernel.isChar=O;plt.Kernel.isString=H;plt.Kernel.isBoolean=L;plt.Kernel.isPair=p;plt.Kernel.isEmpty=w;plt.Kernel.isReal=o;plt.Kernel.isRational=G;plt.Kernel.isComplex=M;plt.Kernel.isInteger=X;plt.Kernel.isNatural=S;plt.Kernel.isNumber=n;plt.Kernel.isAlphabeticString=
U;plt.Kernel.isWhitespaceString=W;plt.Kernel.isList=c;plt.Kernel.isVector=v;plt.Kernel.isFunction=K;plt.Kernel.arrayEach=E;plt.Kernel.check=f;plt.Kernel.checkList=x;plt.Kernel.checkListof=P;plt.Kernel.MobyError=plt.types.MobyError;plt.Kernel.MobyParserError=plt.types.MobyParserError;plt.Kernel.MobySyntaxError=plt.types.MobySyntaxError;plt.Kernel.MobyTypeError=plt.types.MobyTypeError;plt.Kernel.MobyRuntimeError=plt.types.MobyRuntimeError;plt.Kernel.MobyTestingError=plt.types.MobyTestingError;plt.Kernel.attachEvent=
z;plt.Kernel.detachEvent=B;plt.Kernel.ordinalize=d})();plt.reader={};
(function(){function j(n){return n.replace(/\\./g,function(m){switch(m){case "\\b":return"\u0008";case "\\f":return"\u000c";case "\\n":return"\n";case "\\r":return"\r";case "\\t":return"\t";case "\\v":return"\u000b";default:return m.substring(1)}})}function u(n){var m,O=0;for(m=0;m<n.length;m++)n[m]=="\n"&&O++;return O}function R(n,m){var O;for(O=0;O<n.length;O++)if(n[O]=="\n")m=0;else m++;return m}var D="[^\\s\\(\\)\\[\\]\\{\\}\\\"\\,\\'\\`\\;]",Q="(?:(?:\\d+\\/\\d+)|(?:(?:\\d+\\.\\d+|\\d+\\.|\\.\\d+)(?:[eE][+\\-]?\\d+)?)|(?:\\d+(?:[eE][+\\-]?\\d+)?))",
z=[["whitespace",/^(\s+)/],["#;",/^([#][;])/],["comment",/^([#][|](?:(?:\|[^\#])|[^\|])*[|][#])/],["comment",/(^;[^\n]*)/],["(",/^(\(|\[|\{)/],[")",/^(\)|\]|\})/],["'",/^(\')/],["`",/^(`)/],[",@",/^(,@)/],[",",/^(,)/],["char",/^\#\\(newline|backspace)/],["char",/^\#\\(.)/],["string",/^"((?:([^\\"]|(\\.)))*)"/],["symbol-or-number",new RegExp("^("+D+"+)")]],B=[["complex",new RegExp("^((?:(?:\\#[ei])?[+\\-]?"+Q+")?(?:[+\\-]"+Q+")i$)")],["number",/^((?:\#[ei])?[+-]inf.0)$/],["number",/^((?:\#[ei])?[+-]nan.0)$/],
["number",new RegExp("^((?:\\#[ei])?[+\\-]?"+Q+"$)")]];function I(n,m){var O=0,V=1,H=0,L=[];for(m||(m="");1;){for(var p=false,w=0;w<z.length;w++){var o=z[w][0],G=z[w][1];G=n.match(G);if(G!=null){p=G[0];w=G[1];if(o=="string")w=j(w);if(o=="symbol-or-number"){o=false;for(G=0;G<B.length;G++){var M=w.match(B[G][1]);if(M){L.push([B[G][0],w,new Loc(O,V,H,p.length,m)]);o=true;break}}o||L.push(["symbol",w,new Loc(O,V,H,p.length,m)])}else o!="whitespace"&&o!="comment"&&L.push([o,w,new Loc(O,V,H,p.length,m)]);
O+=p.length;H=R(p,H);V+=u(p);n=n.substring(p.length);p=true;break}}if(!p)break}return[L,n]}function N(n,m){var O=make_dash_stx_colon_list,V=make_dash_stx_colon_atom,H=I(n,m),L=H[0],p=undefined;if(H[1].length>0)throw new plt.types.MobyParserError("Error while tokenizing: the rest of the stream is: "+H[1],new Loc(n.length-H[1].length,u(n.substring(0,n.length-H[1].length)),R(n.substring(0,n.length-H[1].length),0),H[1].length,m));var w=plt.types.Symbol.makeInstance("quote"),o=plt.types.Symbol.makeInstance("quasiquote"),
G=plt.types.Symbol.makeInstance("unquote"),M=plt.types.Symbol.makeInstance("unquote-splicing"),K=plt.types.Empty.EMPTY;function X(g){return L.length>0&&L[0][0]==g}function S(g){if(L.length==0)if(p)throw new plt.types.MobyParserError("token stream exhausted while trying to eat "+g,p[2]);else throw new plt.types.MobyParserError("token stream exhausted while trying to eat "+g,new Loc(0,0,0,n.length,m));var c=L.shift();p=c;if(c[0]==g)return c;else throw new plt.types.MobyParserError("Unexpected token "+
c,c[2]);}var U,W,v;v=function(g,c){g=S(g);var d=U();return O(plt.types.Cons.makeInstance(V(c,g[2]),plt.types.Cons.makeInstance(d,K)),new Loc(Loc_dash_offset(g[2]),Loc_dash_line(g[2]),Loc_dash_column(g[2]),Loc_dash_offset(stx_dash_loc(d))-Loc_dash_offset(g[2])+Loc_dash_span(stx_dash_loc(d)),m))};function E(g){switch(g){case "(":return")";case "[":return"]";case "{":return"}";default:throw new Error;}}function C(g,c){var d=g.match(/([+\-]?\d+)\/(\d+)/);if(g=="+inf.0")return plt.types.FloatPoint.makeInstance(Number.POSITIVE_INFINITY);
else if(g=="-inf.0")return plt.types.FloatPoint.makeInstance(Number.NEGATIVE_INFINITY);else if(g=="+nan.0"||g=="-nan.0")return plt.types.FloatPoint.makeInstance(Number.NaN);else if(g.match(/[eE]/))return plt.types.FloatPoint.makeInstance(parseFloat(g));else if(g.match(/\./))if(c){g=g.match("^(.*)[.](.*)$");c=plt.types.Rational.makeInstance(parseInt(g[1]||"0")||0);return g[1].match(/-/)?plt.types.NumberTower.subtract(c,plt.types.Rational.makeInstance(parseInt(g[2]),Math.pow(10,g[2].length))):plt.types.NumberTower.add(c,
plt.types.Rational.makeInstance(parseInt(g[2]),Math.pow(10,g[2].length)))}else return plt.types.FloatPoint.makeInstance(parseFloat(g));else return d?c?plt.types.Rational.makeInstance(parseInt(d[1]),parseInt(d[2])):plt.types.FloatPoint.makeInstance(parseInt(d[1])/parseInt(d[2])):c?plt.types.Rational.makeInstance(parseInt(g),1):plt.types.FloatPoint.makeInstance(parseInt(g))}U=function(){if(L.length==0)if(p)throw new plt.types.MobyParserError("Parse broke with empty token stream",p[2]);else throw new plt.types.MobyParserError("Parse broke with empty token stream",
new Loc(0,0,0,n.length,m));switch(L[0][0]){case "(":var g=S("("),c=g[1],d=E(g[1]),h=W();if(L.length==0)throw new plt.types.MobyParserError("Expected a "+d+" to close "+c,g[2]);else if(L[0][1]!=d)throw new plt.types.MobyParserError("Expected a "+d+" to close "+c,L[0][2]);c=S(")");return make_dash_stx_colon_list(h,new Loc(Loc_dash_offset(g[2]),Loc_dash_line(g[2]),Loc_dash_column(g[2]),Loc_dash_offset(c[2])-Loc_dash_offset(g[2])+1,m));case "#;":S("#;");U();return U();case "'":return v("'",w);case "`":return v("`",
o);case ",":return v(",",G);case ",@":return v(",@",M);case "number":g=S("number");return(h=g[1].match(/^(\#[ie])(.+)$/))?h[1]=="#i"?V(C(h[2],false),g[2]):V(C(h[2],true),g[2]):V(C(g[1],true),g[2]);case "complex":g=S("complex");h=g[1].match(/^((?:\#[ei])?)([+\-]?(?:\d+\/\d+|\d+\.\d+|\d+\.|\.\d+|\d+)?)([+\-](?:\d+\/\d+|\d+\.\d+|\d+\.|\.\d+|\d+))i/);c=h[1]=="#i"?false:true;g=h[2]!=""?C(h[2],c):plt.types.Rational.ZERO;h=C(h[3],c);return g=V(plt.types.Complex.makeInstance(g,h));case "string":g=S("string");
return V(plt.types.String.makeInstance(g[1]),g[2]);case "char":g=S("char");return g[1]=="newline"?V(plt.types.Char.makeInstance("\n"),g[2]):g[1]=="backspace"?V(plt.types.Char.makeInstance(String.fromCharCode(8)),g[2]):V(plt.types.Char.makeInstance(g[1]),g[2]);case "symbol":g=S("symbol");if(g[1]==".")throw new plt.types.MobyParserError("Dotted pairs are not currently accepted by Moby",g[2]);return V(plt.types.Symbol.makeInstance(g[1]),g[2]);default:throw new plt.types.MobyParserError("Parse broke with token stream "+
L,L[0][2]);}};W=function(){for(var g=plt.types.Empty.EMPTY;1;)if(L.length==0||X(")"))break;else if(X("#;")){S("#;");U()}else{var c=U();g=plt.types.Cons.makeInstance(c,g)}return plt.types.Cons.reverse(g)};H=W();if(L.length>0)throw new plt.types.MobyParserError("More elements in the program's token stream than expected: the next unconsumed token is: "+L[0][1],L[0][2]);return H}plt.reader.tokenize=I;plt.reader.readSchemeExpressions=N})();
(function(j){var u={};function R(q,J){plt.types.Struct.call(this,"make-stx:atom",[q,J]);this.datum=q;this.loc=J}R.prototype=new plt.types.Struct;function D(q,J){return new R(q,J)}function Q(q){if(N(q))return q.datum;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx:atom-datum: not a stx:atom: ~s",[q]));}function z(q){if(N(q))return q.loc;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx:atom-loc: not a stx:atom: ~s",[q]));}function B(q,J){if(N(q)){q.datum=J;q._fields[0]=
J}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_atom_dash_datum_bang_: not a stx:atom: ~s",[q]));}function I(q,J){if(N(q)){q.loc=J;q._fields[1]=J}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_atom_dash_loc_bang_: not a stx:atom: ~s",[q]));}function N(q){return q!=null&&q!=undefined&&q instanceof R}function n(q,J){plt.types.Struct.call(this,"make-stx:list",[q,J]);this.elts=q;this.loc=J}n.prototype=new plt.types.Struct;function m(q,
J){return new n(q,J)}function O(q){if(p(q))return q.elts;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx:list-elts: not a stx:list: ~s",[q]));}function V(q){if(p(q))return q.loc;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx:list-loc: not a stx:list: ~s",[q]));}function H(q,J){if(p(q)){q.elts=J;q._fields[0]=J}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_list_dash_elts_bang_: not a stx:list: ~s",[q]));}function L(q,J){if(p(q)){q.loc=
J;q._fields[1]=J}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_list_dash_loc_bang_: not a stx:list: ~s",[q]));}function p(q){return q!=null&&q!=undefined&&q instanceof n}function w(q,J,$,da,ga){plt.types.Struct.call(this,"make-Loc",[q,J,$,da,ga]);this.offset=q;this.line=J;this.column=$;this.span=da;this.id=ga}w.prototype=new plt.types.Struct;function o(q,J,$,da,ga){return new w(q,J,$,da,ga)}function G(q){if(g(q))return q.offset;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc-offset: not a Loc: ~s",
[q]));}function M(q){if(g(q))return q.line;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc-line: not a Loc: ~s",[q]));}function K(q){if(g(q))return q.column;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc-column: not a Loc: ~s",[q]));}function X(q){if(g(q))return q.span;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc-span: not a Loc: ~s",[q]));}function S(q){if(g(q))return q.id;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc-id: not a Loc: ~s",
[q]));}function U(q,J){if(g(q)){q.offset=J;q._fields[0]=J}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_offset_bang_: not a Loc: ~s",[q]));}function W(q,J){if(g(q)){q.line=J;q._fields[1]=J}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_line_bang_: not a Loc: ~s",[q]));}function v(q,J){if(g(q)){q.column=J;q._fields[2]=J}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_column_bang_: not a Loc: ~s",[q]));
}function E(q,J){if(g(q)){q.span=J;q._fields[3]=J}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_span_bang_: not a Loc: ~s",[q]));}function C(q,J){if(g(q)){q.id=J;q._fields[4]=J}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_id_bang_: not a Loc: ~s",[q]));}function g(q){return q!=null&&q!=undefined&&q instanceof w}function c(q){return N(q)||p(q)}function d(q){return N(q)?Q(q):p(q)?O(q):plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),
u[4])}function h(q){return N(q)?z(q):p(q)?V(q):plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),u[4])}function f(q,J){return N(q)?u[5]:p(q)?plt.Kernel.not(plt.Kernel.empty_question_(O(q)))&&plt.Kernel.symbol_question_(d(plt.Kernel.first(O(q))))&&plt.Kernel.symbol_equal__question_(d(plt.Kernel.first(O(q))),J):plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),u[4])}function x(q,J){return c(q)?q:plt.Kernel.pair_question_(q)||plt.Kernel.empty_question_(q)?m(plt.Kernel.map(function(){function $(da){da=
da[0];return x(da,J)}$._eqHashCode=plt.types.makeEqHashCode();$.toWrittenString=function(){return"<function:lambda>"};$.isEqual=function(da){return this===da};$.procedureArity=plt.types.Rational.makeInstance(1,1);$.toDisplayedString=$.toWrittenString;return $}(),[q]),J):plt.types.Logic.TRUE?D(q,J):plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),u[4])}function P(q){return N(q)?Q(q):p(q)?plt.Kernel.map(plt.types.liftToplevelToFunctionValue(P,plt.types.String.makeInstance("stx->datum"),1,plt.types.Rational.makeInstance(1,
1)),[O(q)]):plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),u[4])}u[4]=plt.types.String.makeInstance("cond: fell out of cond");u[5]=plt.types.Logic.FALSE;(function(q){(function(){})(q||plt.Kernel.identity);j.stx_dash_e=d;j.stx_colon_list=n;j.make_dash_stx_colon_list=m;j.stx_colon_list_question_=p;j.stx_colon_list_dash_elts=O;j.stx_colon_list_dash_loc=V;j.set_dash_stx_colon_list_dash_elts_bang_=H;j.set_dash_stx_colon_list_dash_loc_bang_=L;j.stx_question_=c;j.stx_colon_atom=R;j.make_dash_stx_colon_atom=
D;j.stx_colon_atom_question_=N;j.stx_colon_atom_dash_datum=Q;j.stx_colon_atom_dash_loc=z;j.set_dash_stx_colon_atom_dash_datum_bang_=B;j.set_dash_stx_colon_atom_dash_loc_bang_=I;j.stx_dash_loc=h;j.datum_dash__greaterthan_stx=x;j.stx_dash_begins_dash_with_question_=f;j.stx_dash__greaterthan_datum=P;j.Loc=w;j.make_dash_Loc=o;j.Loc_question_=g;j.Loc_dash_offset=G;j.Loc_dash_line=M;j.Loc_dash_column=K;j.Loc_dash_span=X;j.Loc_dash_id=S;j.set_dash_Loc_dash_offset_bang_=U;j.set_dash_Loc_dash_line_bang_=W;
j.set_dash_Loc_dash_column_bang_=v;j.set_dash_Loc_dash_span_bang_=E;j.set_dash_Loc_dash_id_bang_=C})()})(this);plt.world={};plt.world.config={};
(function(){function j(z,B){var I={};for(var N in z)if(z.hasOwnProperty(N))I[N]=z[N];for(N in B)if(B.hasOwnProperty(N))I[N]=B[N];return I}function u(){this.vals={changeWorld:false,shutdownWorld:false,initialEffect:false,onRedraw:false,onDraw:false,onDrawCss:false,tickDelay:false,onTick:false,onTickEffect:false,onKey:false,onKeyEffect:false,onTilt:false,onTiltEffect:false,onAcceleration:false,onAccelerationEffect:false,onShake:false,onShakeEffect:false,onLocationChange:false,onLocationChangeEffect:false,
onAnnounce:false,onAnnounceEffect:false,stopWhen:false,stopWhenEffect:false,connectToGame:false,onGameStart:false,onOpponentTurn:false,onMyTurn:false,afterMyTurn:false,onGameFinish:false}}u.prototype.lookup=function(z){plt.Kernel.check(z,plt.Kernel.isString,"WorldConfig.lookup","string",1);if(z in this.vals)return this.vals[z];else throw Error("Can't find "+z+" in the configuration");};u.prototype.updateAll=function(z){var B=new u;B.vals=j(this.vals,z);return B};plt.world.config.WorldConfig=u;plt.world.config.CONFIG=
new u;function R(){return make_dash_effect_colon_none()}function D(z,B){z.toWrittenString=function(){return"("+B+" ...)"};z.toDisplayedString=z.toWrittenString;return z}plt.world.config.Kernel=plt.world.config.Kernel||{};plt.world.config.Kernel.onRedraw=function(z){plt.Kernel.check(z,plt.Kernel.isFunction,"on-redraw","function",1);return D(function(B){return B.updateAll({onRedraw:z})},"on-redraw")};plt.world.config.Kernel.initialEffect=function(z){return D(function(B){return B.updateAll({initialEffect:z})},
"initial-effect")};plt.world.config.Kernel.onDraw=function(z,B){plt.Kernel.check(z,plt.Kernel.isFunction,"on-draw","function",1);plt.Kernel.check(B,plt.Kernel.isFunction,"on-draw","function",2);return D(function(I){return I.updateAll({onDraw:z,onDrawCss:B})},"on-draw")};plt.world.config.Kernel.onTick=function(z,B){plt.Kernel.check(z,plt.Kernel.isNumber,"on-tick","number",1);plt.Kernel.check(B,plt.Kernel.isFunction,"on-tick","function",2);return plt.world.config.Kernel.onTick_star_(z,B,function(){return R()})};
plt.world.config.Kernel.onTick_star_=function(z,B,I){plt.Kernel.check(z,plt.Kernel.isNumber,"on-tick!","number",1);plt.Kernel.check(B,plt.Kernel.isFunction,"on-tick!","function",2);plt.Kernel.check(I,plt.Kernel.isFunction,"on-tick!","function",3);return D(function(N){var n={onTick:B,onTickEffect:I,tickDelay:plt.types.NumberTower.toFixnum(plt.types.NumberTower.multiply(plt.types.Rational.makeInstance(1000,1),z))};return N.updateAll(n)},"on-tick")};plt.world.config.Kernel.onTilt=function(z){plt.Kernel.check(z,
plt.Kernel.isFunction,"on-tilt","function",1);return plt.world.config.Kernel.onTilt_star_(z,function(){return R()})};plt.world.config.Kernel.onTilt_star_=function(z,B){plt.Kernel.check(z,plt.Kernel.isFunction,"on-tilt!","function",1);plt.Kernel.check(B,plt.Kernel.isFunction,"on-tilt!","function",2);return D(function(I){return I.updateAll({onTilt:z,onTiltEffect:B})},"on-tilt")};plt.world.config.Kernel.onAnnounce=function(z){plt.Kernel.check(z,plt.Kernel.isFunction,"on-announce","function",1);return plt.world.config.Kernel.onAnnounce_star_(z,
function(){return R()})};plt.world.config.Kernel.onAnnounce_star_=function(z,B){plt.Kernel.check(z,plt.Kernel.isFunction,"on-announce!","function",1);plt.Kernel.check(B,plt.Kernel.isFunction,"on-announce!","function",2);return D(function(I){return I.updateAll({onAnnounce:z,onAnnounceEffect:B})},"on-announce")};plt.world.config.Kernel.onAcceleration=function(z){plt.Kernel.check(z,plt.Kernel.isFunction,"on-acceleration","function",1);return plt.world.config.Kernel.onAcceleration_star_(z,function(){return R()})};
plt.world.config.Kernel.onAcceleration_star_=function(z,B){plt.Kernel.check(z,plt.Kernel.isFunction,"on-acceleration!","function",1);plt.Kernel.check(B,plt.Kernel.isFunction,"on-acceleration!","function",2);return D(function(I){return I.updateAll({onAcceleration:z,onAccelerationEffect:B})},"on-acceleration")};plt.world.config.Kernel.onShake=function(z){plt.Kernel.check(z,plt.Kernel.isFunction,"on-shake","function",1);return plt.world.config.Kernel.onShake_star_(z,function(){return R()})};plt.world.config.Kernel.onShake_star_=
function(z,B){plt.Kernel.check(z,plt.Kernel.isFunction,"on-shake!","function",1);plt.Kernel.check(B,plt.Kernel.isFunction,"on-shake!","function",2);return D(function(I){return I.updateAll({onShake:z,onShakeEffect:B})},"on-shake")};plt.world.config.Kernel.onKey=function(z){plt.Kernel.check(z,plt.Kernel.isFunction,"on-key","function",1);return plt.world.config.Kernel.onKey_star_(z,function(){return R()})};plt.world.config.Kernel.onKey_star_=function(z,B){plt.Kernel.check(z,plt.Kernel.isFunction,"on-key!",
"function",1);plt.Kernel.check(B,plt.Kernel.isFunction,"on-key!","function",2);return D(function(I){return I.updateAll({onKey:z,onKeyEffect:B})},"on-key")};plt.world.config.Kernel.onLocationChange=function(z){plt.Kernel.check(z,plt.Kernel.isFunction,"on-location-change","function",1);return plt.world.config.Kernel.onLocationChange_star_(z,function(){return R()})};plt.world.config.Kernel.onLocationChange_star_=function(z,B){plt.Kernel.check(z,plt.Kernel.isFunction,"on-location-change!","function",
1);plt.Kernel.check(B,plt.Kernel.isFunction,"on-location-change!","function",2);return D(function(I){return I.updateAll({onLocationChange:z,onLocationChangeEffect:B})},"on-location-change")};plt.world.config.Kernel.stopWhen=function(z){plt.Kernel.check(z,plt.Kernel.isFunction,"stop-when","function",1);return plt.world.config.Kernel.stopWhen_star_(z,function(){return R()})};plt.world.config.Kernel.stopWhen_star_=function(z,B){plt.Kernel.check(z,plt.Kernel.isFunction,"stop-when!","function",1);plt.Kernel.check(B,
plt.Kernel.isFunction,"stop-when!","function",2);return D(function(I){return I.updateAll({stopWhen:z,stopWhenEffect:B})},"stop-when")};function Q(z,B,I,N){return function(n){plt.Kernel.check(n,B,N,I,1);return D(function(m){return m.updateAll({propertyName:n})},N)}}plt.world.config.Kernel.connect_dash_to_dash_game=Q("connectToGame",plt.Kernel.isString,"string","connect-to-game");plt.world.config.Kernel.on_dash_game_dash_start=Q("onGameStart",plt.Kernel.isFunction,"function","on-game-start");plt.world.config.Kernel.on_dash_opponent_dash_turn=
Q("onOpponentTurn",plt.Kernel.isFunction,"function","on-opponent-turn");plt.world.config.Kernel.on_dash_my_dash_turn=Q("onMyTurn",plt.Kernel.isFunction,"function","on-my-turn");plt.world.config.Kernel.after_dash_my_dash_turn=Q("afterMyTurn",plt.Kernel.isFunction,"function","after-my-turn");plt.world.config.Kernel.on_dash_game_dash_finish=Q("onGameFinish",plt.Kernel.isFunction,"function","on-game-finish")})();plt.platform={};
(function(){plt.platform.Platform={};var j=false;plt.platform.Platform.getInstance=function(){j||(j=new u);return j};function u(){this.tiltService=o;this.shakeService=X();this.locationService=R();this.telephonyService=G();this.networkService=W();this.soundService=C();this.powerService=f();this.smsService=q();this.pickPlaylistService=da()}u.prototype.getTiltService=function(){return this.tiltService};u.prototype.getShakeService=function(){return this.shakeService};u.prototype.getLocationService=function(){return this.locationService};
u.prototype.getTelephonyService=function(){return this.telephonyService};u.prototype.getNetworkService=function(){return this.networkService};u.prototype.getSoundService=function(){return this.soundService};u.prototype.getPowerService=function(){return this.powerService};u.prototype.getSmsService=function(){return this.smsService};u.prototype.getPickPlaylistService=function(){return this.pickPlaylistService};function R(){return D()?new n:Q()?new I:z()?new m:new N}function D(){return typeof Device!=
"undefined"}function Q(){return window.google&&window.google.gears&&true}function z(){return typeof navigator!="undefined"&&typeof navigator.geolocation!="undefined"}function B(y,T,aa,ea){function ha(b){return b*Math.PI/180}function ka(b,e){return Math.pow(Math.sin((ha(b)-ha(e))/2),2)}return 12756000*Math.asin(Math.min(1,Math.sqrt(ka(y,aa)+Math.cos(ha(y))*Math.cos(ha(aa))*ka(T,ea))))}function I(){this.geo=google.gears.factory.create("beta.geolocation");this.listeners=[];this.currentPosition={latitude:0,
longitude:0,altitude:0,bearing:0,speed:0};this.watchId=false}I.prototype.startService=function(){var y=this;function T(aa){y.currentPosition.latitude=aa.latitude;y.currentPosition.longitude=aa.longitude;y.currentPosition.altitude=aa.altitude;for(var ea=0;ea<y.listeners.length;ea++)y.listeners[ea](aa.latitude,aa.longitude)}this.watchId=this.geo.watchPosition(T)};I.prototype.shutdownService=function(){this.geo.clearWatch(this.watchId)};I.prototype.addLocationChangeListener=function(y){this.listeners.push(y)};
I.prototype.getLatitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.latitude)};I.prototype.getLongitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.longitude)};I.prototype.getAltitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.altitude)};I.prototype.getBearing=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.bearing)};I.prototype.getSpeed=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.speed)};
I.prototype.getDistanceBetween=function(y,T,aa,ea){return plt.types.FloatPoint.makeInstance(B(y.toFloat(),T.toFloat(),aa.toFloat(),ea.toFloat()))};function N(){}N.prototype.startService=function(){};N.prototype.shutdownService=function(){};N.prototype.addLocationChangeListener=function(){};N.prototype.getLatitude=function(){return plt.types.Rational.ZERO};N.prototype.getLongitude=function(){return plt.types.Rational.ZERO};N.prototype.getAltitude=function(){return plt.types.Rational.ZERO};N.prototype.getBearing=
function(){return plt.types.Rational.ZERO};N.prototype.getSpeed=function(){return plt.types.Rational.ZERO};N.prototype.getDistanceBetween=function(y,T,aa,ea){return plt.types.FloatPoint.makeInstance(B(y.toFloat(),T.toFloat(),aa.toFloat(),ea.toFloat()))};function n(){this.locationListeners=[];this.currentPosition={latitude:0,longitude:0,atttitude:0,bearing:0,speed:0};this.watchId=false}n.prototype.startService=function(){var y=this;function T(aa){y.currentPosition.latitude=parseFloat(aa.latitude);
y.currentPosition.longitude=parseFloat(aa.longitude);for(aa=0;aa<y.locationListeners.length;aa++){var ea=y.locationListeners[aa];ea(y.currentPosition.latitude,y.currentPosition.longitude)}}this.watchId=navigator.geolocation.watchPosition(T,function(){},{})};n.prototype.shutdownService=function(){navigator.geolocation.clearWatch(this.watchId)};n.prototype.addLocationChangeListener=function(y){this.locationListeners.push(y)};n.prototype.getLatitude=function(){return plt.types.FloatPoint.makeInstance(navigator.geolocation.lastPosition.latitude)};
n.prototype.getLongitude=function(){return plt.types.FloatPoint.makeInstance(navigator.geolocation.lastPosition.longitude)};n.prototype.getAltitude=function(){return plt.types.Rational.ZERO};n.prototype.getBearing=function(){return plt.types.Rational.ZERO};n.prototype.getSpeed=function(){return plt.types.Rational.ZERO};n.prototype.getDistanceBetween=function(y,T,aa,ea){return plt.types.FloatPoint.makeInstance(navigator.geolocation.getDistanceBetween(y.toFloat(),T.toFloat(),aa.toFloat(),ea.toFloat()))};
function m(){this.locationListeners=[];this.currentPosition={latitude:0,longitude:0,atttitude:0,bearing:0,speed:0};this.watchId=false}m.prototype.startService=function(){var y=this;function T(aa){y.currentPosition.latitude=aa.coords.latitude;y.currentPosition.longitude=aa.coords.longitude;for(var ea=0;ea<y.locationListeners.length;ea++){var ha=y.locationListeners[ea];ha(aa.coords.latitude,aa.coords.longitude)}}typeof navigator.geolocation!="undefined"&&typeof navigator.geolocation.getCurrentPosition!=
"undefined"&&navigator.geolocation.watchPosition(T);setTimeout(function(){navigator.geolocation.getCurrentPosition(T)},10000)};m.prototype.shutdownService=function(){if(this.watchId){navigator.geolocation.clearWatch(this.watchId);this.watchId=false}};m.prototype.addLocationChangeListener=function(y){this.locationListeners.push(y)};m.prototype.getLatitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.latitude)};m.prototype.getLongitude=function(){return plt.types.FloatPOint.makeInstance(this.currentPosition.longitude)};
m.prototype.getAltitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.altitude)};m.prototype.getBearing=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.bearing)};m.prototype.getSpeed=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.speed)};m.prototype.getDistanceBetween=function(y,T,aa,ea){return plt.types.FloatPoint.makeInstance(B(y.toFloat(),T.toFloat(),aa.toFloat(),ea.toFloat()))};var O=[],V=[],H,L;function p(y){for(var T=
0;T<O.length;T++)O[T](parseFloat(y.x),parseFloat(y.y),parseFloat(y.z))}function w(y){for(var T=0;T<V.length;T++)V[T](parseFloat(y.azimuth),parseFloat(y.pitch),parseFloat(y.roll))}var o={startService:function(){if(typeof Accelerometer!="undefined"){H=navigator.accelerometer.watchAcceleration(p,function(){});L=navigator.accelerometer.watchOrientation(w,function(){})}},shutdownService:function(){if(typeof Accelerometer!="undefined"){navigator.accelerometer.clearWatch(H);navigator.accelerometer.clearWatch(L);
navigator.accelerometer.stopAllShakeWatches()}},addOrientationChangeListener:function(y){V.push(y)},addAccelerationChangeListener:function(y){O.push(y)}};function G(){return D()?new K:new M}function M(){}M.prototype.getSignalStrengths=function(){return plt.types.Empty.EMPTY};function K(){}K.prototype.getSignalStrengths=function(){for(var y=plt.types.Empty.EMPTY,T=Device.getSignalStrengths(),aa=0;aa<T.length;aa++){var ea=T.get(aa);y=plt.types.Cons.makeInstance(plt.Kernel.list([toNum(ea.getId()),toNum(ea.getStrength())]),
y)}return y};function X(){return D()?new S:new U}function S(){this.listeners=[]}S.prototype.startService=function(){var y=this;function T(){for(var ea=0;ea<y.listeners.length;ea++)y.listeners[ea]()}function aa(){}this.shakeId=navigator.accelerometer.watchShake(T,aa)};S.prototype.shutdownService=function(){navigator.accelerometer.stopAllShakeWatches()};S.prototype.addListener=function(y){this.listeners.push(y)};function U(){}U.prototype.startService=function(){};U.prototype.shutdownService=function(){};
U.prototype.addListener=function(){};function W(){return D()?new v:new E}function v(){}v.prototype.getUrl=function(y){y=Device.getUrl(y);return plt.types.String.makeInstance(""+y)};function E(){}E.prototype.getUrl=function(y){var T=new XMLHttpRequest;y="/networkProxy?url="+encodeURIComponent(y);T.open("GET",y,false);T.send(null);return plt.types.String.makeInstance(T.responseText)};function C(){return D()?new c:g()?new d:new h}function g(){return!!document.createElement("audio").canPlayType}function c(){}
c.prototype.beep=function(){navigator.notification.beep(1)};c.prototype.playPlaylist=function(y){Device.playPlaylistRecord(y)};c.prototype.pausePlaylist=function(y){Device.pausePlaylistRecord(y)};c.prototype.stopPlaylist=function(y){Device.stopPlaylistRecord(y)};c.prototype.playSoundUrl=function(y){navigator.audio.playMusic(y)};c.prototype.playDtmfTone=function(y,T){navigator.audio.playDTMF(y);setTimeout(function(){navigator.audio.stopDTMF()},T)};c.prototype.stopSoundUrl=function(y){navigator.audio.stopMusic(y)};
c.prototype.pauseSoundUrl=function(y){navigator.audio.pauseMusic(y)};c.prototype.setVolume=function(y){navigator.audio.setMusicVolume(y)};c.prototype.raiseVolume=function(){navigator.audio.increaseMusicVolume()};c.prototype.lowerVolume=function(){navigator.audio.decreaseMusicVolume()};function d(){this.cachedUrls={};this.baseVolume=100}d.prototype.beep=function(){alert("Beep")};d.prototype.playPlaylistSound=function(){};d.prototype.pausePlaylistSound=function(){};d.prototype.stopPlaylistSound=function(){};
d.prototype.playSoundUrl=function(y){this.cachedUrls[y]||(this.cachedUrls[y]=new Audio(y));var T=this.cachedUrls[y];if(T.ended||T.paused)this.cachedUrls[y].play()};d.prototype.playDtmfTone=function(){alert("dtmf tone")};d.prototype.stopSoundUrl=function(y){if(this.cachedUrls[y]){this.cachedUrls[y].pause();this.cachedUrls[y].currentTime=0}};d.prototype.pauseSoundUrl=function(y){this.cachedUrls[y]&&this.cachedUrls[y].pause()};d.prototype.setVolume=function(y){for(var T in this.cachedUrls)this.cachedUrls[T].volume=
y/100;this.baseVolume=y};d.prototype.raiseVolume=function(){this.setVolume(Math.min(this.baseVolume+5,100))};d.prototype.lowerVolume=function(){this.setVolume(Math.max(this.baseVolume-5,0))};function h(){}h.prototype.beep=function(){alert("Beep")};h.prototype.playPlaylistSound=function(){};h.prototype.pausePlaylistSound=function(){};h.prototype.stopPlaylistSound=function(){};h.prototype.playSoundUrl=function(y){plt.Kernel.reportError("sound url "+y+" should play, but I don't have sound support.")};
h.prototype.playDtmfTone=function(){plt.Kernel.reportError("DTMF tone should play, but I don't have DTMF support")};h.prototype.stopSoundUrl=function(){};h.prototype.pauseSoundUrl=function(){};h.prototype.setVolume=function(){};h.prototype.raiseVolume=function(){};h.prototype.lowerVolume=function(){};function f(){return D()?new x:new P}function x(){this.currentLockFlags=-1}x.prototype.setWakeLock=function(y){if(y!=this.currentLockFlags){navigator.power.setWakeLock(y);this.currentLockFlags=y}};x.prototype.releaseWakeLock=
function(){if(this.currentLockFlags!=-1){navigator.power.releaseWakeLock();this.currentLockFlags=-1}};function P(){}P.prototype.setWakeLock=function(){};P.prototype.releaseWakeLock=function(){};function q(){return D()?new J:new $}function J(){}J.prototype.send=function(y,T){navigator.sms.send(y,T)};function $(){}$.prototype.send=function(y,T){alert("SMS should be sent to "+y+" with the content: "+T)};function da(){return D()?new ga:new na}function ga(){}ga.prototype.pickPlaylist=function(y){function T(aa){y(aa)}
navigator.dialogPickers.pickPlaylist(T)};function na(){}na.prototype.pickPlaylist=function(){alert("pick playlist currently unavailable")}})();plt.lib={};
(function(){plt.lib.Telephony={};plt.lib.Telephony.getSignalStrengths=function(){return plt.platform.Platform.getInstance().getTelephonyService().getSignalStrengths()};plt.lib.Location={};plt.lib.Location.getLatitude=function(){return plt.platform.Platform.getInstance().getLocationService().getLatitude()};plt.lib.Location.getLongitude=function(){return plt.platform.Platform.getInstance().getLocationService().getLongitude()};plt.lib.Location.getAttitude=function(){return plt.platform.Platform.getInstance().getLocationService().getAttitude()};
plt.lib.Location.getBearing=function(){return plt.platform.Platform.getInstance().getLocationService().getBearing()};plt.lib.Location.getSpeed=function(){return plt.platform.Platform.getInstance().getLocationService().getSpeed()};plt.lib.Location.getDistanceBetween=function(j,u,R,D){return plt.platform.Platform.getInstance().getLocationService().getDistanceBetween(j,u,R,D)};plt.lib.Net={};plt.lib.Net.getUrl=function(j){return plt.platform.Platform.getInstance().getNetworkService().getUrl(j)}})();
(function(j){function u(){plt.types.Struct.call(this,"make-effect:none",[])}u.prototype=new plt.types.Struct;function R(){return new u}function D(k){return k!=null&&k!=undefined&&k instanceof u}function Q(){plt.types.Struct.call(this,"make-effect:beep",[])}Q.prototype=new plt.types.Struct;function z(){return new Q}function B(k){return k!=null&&k!=undefined&&k instanceof Q}function I(k,Y){plt.types.Struct.call(this,"make-effect:play-dtmf-tone",[k,Y]);this.tone=k;this.duration=Y}I.prototype=new plt.types.Struct;
function N(k,Y){return new I(k,Y)}function n(k){if(H(k))return k.tone;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:play-dtmf-tone-tone: not a effect:play-dtmf-tone: ~s",[k]));}function m(k){if(H(k))return k.duration;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:play-dtmf-tone-duration: not a effect:play-dtmf-tone: ~s",[k]));}function O(k,Y){if(H(k)){k.tone=Y;k._fields[0]=Y}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_tone_bang_: not a effect:play-dtmf-tone: ~s",
[k]));}function V(k,Y){if(H(k)){k.duration=Y;k._fields[1]=Y}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_duration_bang_: not a effect:play-dtmf-tone: ~s",[k]));}function H(k){return k!=null&&k!=undefined&&k instanceof I}function L(k,Y){plt.types.Struct.call(this,"make-effect:send-sms",[k,Y]);this.address=k;this.msg=Y}L.prototype=new plt.types.Struct;function p(k,Y){return new L(k,Y)}function w(k){if(K(k))return k.address;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:send-sms-address: not a effect:send-sms: ~s",
[k]));}function o(k){if(K(k))return k.msg;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:send-sms-msg: not a effect:send-sms: ~s",[k]));}function G(k,Y){if(K(k)){k.address=Y;k._fields[0]=Y}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_send_dash_sms_dash_address_bang_: not a effect:send-sms: ~s",[k]));}function M(k,Y){if(K(k)){k.msg=Y;k._fields[1]=Y}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_send_dash_sms_dash_msg_bang_: not a effect:send-sms: ~s",
[k]));}function K(k){return k!=null&&k!=undefined&&k instanceof L}function X(k){plt.types.Struct.call(this,"make-playlist-sound",[k]);this.playlist=k}X.prototype=new plt.types.Struct;function S(k){plt.types.Struct.call(this,"make-effect:play-sound",[k]);this.sound=k}S.prototype=new plt.types.Struct;function U(k){return new S(k)}function W(k){if(E(k))return k.sound;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:play-sound-sound: not a effect:play-sound: ~s",[k]));}function v(k,
Y){if(E(k)){k.sound=Y;k._fields[0]=Y}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_play_dash_sound_dash_sound_bang_: not a effect:play-sound: ~s",[k]));}function E(k){return k!=null&&k!=undefined&&k instanceof S}function C(k){plt.types.Struct.call(this,"make-effect:pause-sound",[k]);this.sound=k}C.prototype=new plt.types.Struct;function g(k){return new C(k)}function c(k){if(h(k))return k.sound;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pause-sound-sound: not a effect:pause-sound: ~s",
[k]));}function d(k,Y){if(h(k)){k.sound=Y;k._fields[0]=Y}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pause_dash_sound_dash_sound_bang_: not a effect:pause-sound: ~s",[k]));}function h(k){return k!=null&&k!=undefined&&k instanceof C}function f(k){plt.types.Struct.call(this,"make-effect:stop-sound",[k]);this.sound=k}f.prototype=new plt.types.Struct;function x(k){return new f(k)}function P(k){if(J(k))return k.sound;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:stop-sound-sound: not a effect:stop-sound: ~s",
[k]));}function q(k,Y){if(J(k)){k.sound=Y;k._fields[0]=Y}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_stop_dash_sound_dash_sound_bang_: not a effect:stop-sound: ~s",[k]));}function J(k){return k!=null&&k!=undefined&&k instanceof f}function $(k){plt.types.Struct.call(this,"make-effect:set-sound-volume",[k]);this.volume=k}$.prototype=new plt.types.Struct;function da(k){return new $(k)}function ga(k){if(y(k))return k.volume;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:set-sound-volume-volume: not a effect:set-sound-volume: ~s",
[k]));}function na(k,Y){if(y(k)){k.volume=Y;k._fields[0]=Y}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_set_dash_sound_dash_volume_dash_volume_bang_: not a effect:set-sound-volume: ~s",[k]));}function y(k){return k!=null&&k!=undefined&&k instanceof $}function T(){plt.types.Struct.call(this,"make-effect:raise-sound-volume",[])}T.prototype=new plt.types.Struct;function aa(){return new T}function ea(k){return k!=null&&k!=undefined&&k instanceof T}function ha(){plt.types.Struct.call(this,
"make-effect:lower-sound-volume",[])}ha.prototype=new plt.types.Struct;function ka(){return new ha}function b(k){return k!=null&&k!=undefined&&k instanceof ha}function e(k){plt.types.Struct.call(this,"make-effect:set-wake-lock",[k]);this.locks=k}e.prototype=new plt.types.Struct;function l(k){return new e(k)}function t(k){if(Z(k))return k.locks;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:set-wake-lock-locks: not a effect:set-wake-lock: ~s",[k]));}function F(k,Y){if(Z(k)){k.locks=
Y;k._fields[0]=Y}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_set_dash_wake_dash_lock_dash_locks_bang_: not a effect:set-wake-lock: ~s",[k]));}function Z(k){return k!=null&&k!=undefined&&k instanceof e}function ca(){plt.types.Struct.call(this,"make-effect:release-wake-lock",[])}ca.prototype=new plt.types.Struct;function ja(){return new ca}function ma(k){return k!=null&&k!=undefined&&k instanceof ca}function qa(k){plt.types.Struct.call(this,"make-effect:pick-playlist",
[k]);this.update_dash_f=k}qa.prototype=new plt.types.Struct;function za(k){return new qa(k)}function Ba(k){if(ta(k))return k.update_dash_f;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pick-playlist-update-f: not a effect:pick-playlist: ~s",[k]));}function oa(k,Y){if(ta(k)){k.update_dash_f=Y;k._fields[0]=Y}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pick_dash_playlist_dash_update_dash_f_bang_: not a effect:pick-playlist: ~s",[k]));}function ta(k){return k!=
null&&k!=undefined&&k instanceof qa}function xa(k,Y){plt.types.Struct.call(this,"make-effect:pick-random",[k,Y]);this.n=k;this.update_dash_f=Y}xa.prototype=new plt.types.Struct;function Da(k,Y){return new xa(k,Y)}function Aa(k){if(sa(k))return k.n;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pick-random-n: not a effect:pick-random: ~s",[k]));}function Ea(k){if(sa(k))return k.update_dash_f;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pick-random-update-f: not a effect:pick-random: ~s",
[k]));}function Fa(k,Y){if(sa(k)){k.n=Y;k._fields[0]=Y}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pick_dash_random_dash_n_bang_: not a effect:pick-random: ~s",[k]));}function Ca(k,Y){if(sa(k)){k.update_dash_f=Y;k._fields[1]=Y}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pick_dash_random_dash_update_dash_f_bang_: not a effect:pick-random: ~s",[k]));}function sa(k){return k!=null&&k!=undefined&&k instanceof xa}function ya(k){return D(k)||
B(k)||H(k)||K(k)||E(k)||h(k)||J(k)||y(k)||ea(k)||b(k)||Z(k)||ma(k)||ta(k)||sa(k)}(function(k){(function(){})(k||plt.Kernel.identity);j.effect_colon_raise_dash_sound_dash_volume=T;j.make_dash_effect_colon_raise_dash_sound_dash_volume=aa;j.effect_colon_raise_dash_sound_dash_volume_question_=ea;j.effect_colon_set_dash_sound_dash_volume=$;j.make_dash_effect_colon_set_dash_sound_dash_volume=da;j.effect_colon_set_dash_sound_dash_volume_question_=y;j.effect_colon_set_dash_sound_dash_volume_dash_volume=ga;
j.set_dash_effect_colon_set_dash_sound_dash_volume_dash_volume_bang_=na;j.effect_colon_stop_dash_sound=f;j.make_dash_effect_colon_stop_dash_sound=x;j.effect_colon_stop_dash_sound_question_=J;j.effect_colon_stop_dash_sound_dash_sound=P;j.set_dash_effect_colon_stop_dash_sound_dash_sound_bang_=q;j.effect_question_=ya;j.effect_colon_set_dash_wake_dash_lock=e;j.make_dash_effect_colon_set_dash_wake_dash_lock=l;j.effect_colon_set_dash_wake_dash_lock_question_=Z;j.effect_colon_set_dash_wake_dash_lock_dash_locks=
t;j.set_dash_effect_colon_set_dash_wake_dash_lock_dash_locks_bang_=F;j.effect_colon_send_dash_sms=L;j.make_dash_effect_colon_send_dash_sms=p;j.effect_colon_send_dash_sms_question_=K;j.effect_colon_send_dash_sms_dash_address=w;j.effect_colon_send_dash_sms_dash_msg=o;j.set_dash_effect_colon_send_dash_sms_dash_address_bang_=G;j.set_dash_effect_colon_send_dash_sms_dash_msg_bang_=M;j.effect_colon_release_dash_wake_dash_lock=ca;j.make_dash_effect_colon_release_dash_wake_dash_lock=ja;j.effect_colon_release_dash_wake_dash_lock_question_=
ma;j.effect_colon_pause_dash_sound=C;j.make_dash_effect_colon_pause_dash_sound=g;j.effect_colon_pause_dash_sound_question_=h;j.effect_colon_pause_dash_sound_dash_sound=c;j.set_dash_effect_colon_pause_dash_sound_dash_sound_bang_=d;j.effect_colon_play_dash_dtmf_dash_tone=I;j.make_dash_effect_colon_play_dash_dtmf_dash_tone=N;j.effect_colon_play_dash_dtmf_dash_tone_question_=H;j.effect_colon_play_dash_dtmf_dash_tone_dash_tone=n;j.effect_colon_play_dash_dtmf_dash_tone_dash_duration=m;j.set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_tone_bang_=
O;j.set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_duration_bang_=V;j.effect_colon_play_dash_sound=S;j.make_dash_effect_colon_play_dash_sound=U;j.effect_colon_play_dash_sound_question_=E;j.effect_colon_play_dash_sound_dash_sound=W;j.set_dash_effect_colon_play_dash_sound_dash_sound_bang_=v;j.effect_colon_pick_dash_playlist=qa;j.make_dash_effect_colon_pick_dash_playlist=za;j.effect_colon_pick_dash_playlist_question_=ta;j.effect_colon_pick_dash_playlist_dash_update_dash_f=Ba;j.set_dash_effect_colon_pick_dash_playlist_dash_update_dash_f_bang_=
oa;j.effect_colon_pick_dash_random=xa;j.make_dash_effect_colon_pick_dash_random=Da;j.effect_colon_pick_dash_random_question_=sa;j.effect_colon_pick_dash_random_dash_n=Aa;j.effect_colon_pick_dash_random_dash_update_dash_f=Ea;j.set_dash_effect_colon_pick_dash_random_dash_n_bang_=Fa;j.set_dash_effect_colon_pick_dash_random_dash_update_dash_f_bang_=Ca;j.effect_colon_lower_dash_sound_dash_volume=ha;j.make_dash_effect_colon_lower_dash_sound_dash_volume=ka;j.effect_colon_lower_dash_sound_dash_volume_question_=
b;j.effect_colon_none=u;j.make_dash_effect_colon_none=R;j.effect_colon_none_question_=D;j.effect_colon_beep=Q;j.make_dash_effect_colon_beep=z;j.effect_colon_beep_question_=B})()})(this);plt.world.Kernel={};
(function(){var j,u=[],R,D=false;function Q(d){function h(){}h.prototype=d;return new h}function z(d){function h(){}h.prototype=d;var f=new h;for(property in d)if(d.hasOwnProperty(property))f[property]=d[property];return f}var B=[];plt.world.Kernel.addAnnounceListener=function(d){B.push(d)};plt.world.Kernel.removeAnnounceListener=function(d){d=B.indexOf(d);d!=-1&&B.splice(d,1)};plt.world.Kernel.announce=function(d,h){for(var f=0;f<B.length;f++)try{B[f](d,h)}catch(x){}};function I(d){j=d;N()}plt.world.Kernel.updateWorld=
function(d){d=d(j);I(d)};plt.world.Kernel.shutdownWorld=function(){R=true};function N(){var d;for(d=0;d<u.length;d++)u[d](j)}function n(d){u.push(d)}function m(){if(D){clearInterval(D);D=false}R=false;u=[]}function O(){if(window.document.getElementById("canvas")!=undefined)return window;var d=window.open("big-bang.html","big-bang");if(d==null)throw new Error("Error: Not allowed to create a new window.");return d}plt.world.Kernel.bigBang=function(d,h,f,x){plt.Kernel.check(d,plt.Kernel.isNumber,"big-bang",
"number",1);plt.Kernel.check(h,plt.Kernel.isNumber,"big-bang","number",2);plt.Kernel.arrayEach(args,function($,da){plt.Kernel.check($,plt.Kernel.isFunction,"big-bang","handler",da+4)});var P=O(d,h),q=P.document.getElementById("canvas");q.width=d.toFixnum();q.height=h.toFixnum();m();var J=new plt.world.config.WorldConfig;for(d=0;d<x.length;d++)J=x[d](J);J=J.updateAll({changeWorld:plt.world.Kernel.updateWorld,shutdownWorld:plt.world.Kernel.shutdownWorld});plt.world.config.CONFIG=J;if(J.lookup("onKey"))P.onkeydown=
function($){plt.world.stimuli.onKey($)};J.lookup("onRedraw")&&n(function($){var da=q.getContext("2d");$=J.lookup("onRedraw")([$]);$.render(da,0,0)});n(function($){if(J.lookup("stopWhen"))if(J.lookup("stopWhen")([$]))R=true});J.lookup("onTick")&&V(P,J);I(f);if(J.lookup("initialEffect")){f=plt.world.Kernel.applyEffect(J.lookup("initialEffect"));for(d=0;d<f.length;d++)R||updateWorld(f)}};function V(d,h){D=d.setInterval(function(){if(R){d.clearTimeout(D);D=false}else plt.world.stimuli.onTick()},h.lookup("tickDelay"))}
plt.world.Kernel.isKeyEqual=function(d,h){return d=d.toString().toLowerCase()==h.toString().toLowerCase()};plt.world.Kernel.imageWidth=function(d){plt.Kernel.check(d,w,"image-width","image",1);return plt.types.Rational.makeInstance(d.getWidth(),1)};plt.world.Kernel.imageHeight=function(d){plt.Kernel.check(d,w,"image-height","image",1);return plt.types.Rational.makeInstance(d.getHeight(),1)};plt.world.Kernel.placeImage=function(d,h,f,x){plt.Kernel.check(d,w,"place-image","image",1);plt.Kernel.check(h,
plt.Kernel.isNumber,"place-image","number",2);plt.Kernel.check(f,plt.Kernel.isNumber,"place-image","number",3);plt.Kernel.check(x,function(q){return o(q)||w(q)},"place-image","image",4);if(o(x))return x.add(d,plt.types.NumberTower.toFixnum(h),plt.types.NumberTower.toFixnum(f));else{var P=new G(x.getWidth(),x.getHeight(),[]);P=P.add(x,0,0);return P=P.add(d,plt.types.NumberTower.toFixnum(h),plt.types.NumberTower.toFixnum(f))}};plt.world.Kernel.emptyScene=function(d,h){plt.Kernel.check(d,plt.Kernel.isNumber,
"empty-scene","number",1);plt.Kernel.check(h,plt.Kernel.isNumber,"empty-scene","number",2);return new G(plt.types.NumberTower.toFixnum(d),plt.types.NumberTower.toFixnum(h),[])};function H(d){return d!==undefined&&d!==null&&(d instanceof g||typeof c.get(d)!="undefined")}plt.world.Kernel.text=function(d,h,f){plt.Kernel.check(d,plt.Kernel.isString,"text","string",1);plt.Kernel.check(h,plt.Kernel.isNumber,"text","number",2);plt.Kernel.check(f,H,"text","color",3);if(c.get(f))f=c.get(f);return new U(d,
plt.types.NumberTower.toFixnum(h),f)};function L(d){return(plt.Kernel.isString(d)||plt.Kernel.isSymbol(d))&&(d.toString().toLowerCase()=="solid"||d.toString().toLowerCase()=="outline")}plt.world.Kernel.circle=function(d,h,f){plt.Kernel.check(d,plt.Kernel.isNumber,"circle","number",1);plt.Kernel.check(h,L,"circle","style",2);plt.Kernel.check(f,H,"circle","color",3);if(c.get(f))f=c.get(f);return new W(plt.types.NumberTower.toFixnum(d),h,f)};plt.world.Kernel.star=function(d,h,f,x,P){plt.Kernel.check(d,
plt.Kernel.isNumber,"star","number",1);plt.Kernel.check(h,plt.Kernel.isNumber,"star","number",2);plt.Kernel.check(f,plt.Kernel.isNumber,"star","number",3);plt.Kernel.check(x,L,"star","style",4);plt.Kernel.check(P,H,"star","color",5);if(c.get(P))P=c.get(P);return new v(plt.types.NumberTower.toFixnum(d),plt.types.NumberTower.toFixnum(h),plt.types.NumberTower.toFixnum(f),x,P)};plt.world.Kernel.openImageUrl=function(d){plt.Kernel.check(d,plt.Kernel.isString,"open-image-url","string",1);return M.makeInstance(d.toString())};
plt.world.Kernel.nwRectangle=function(d,h,f,x){plt.Kernel.check(d,plt.Kernel.isNumber,"nw:rectangle","number",1);plt.Kernel.check(h,plt.Kernel.isNumber,"nw:rectangle","number",2);plt.Kernel.check(f,L,"nw:rectangle","style",3);plt.Kernel.check(x,H,"nw:rectangle","color",4);if(c.get(x))x=c.get(x);d=new S(plt.types.NumberTower.toFixnum(d),plt.types.NumberTower.toFixnum(h),f,x);return d.updatePinhole(0,0)};plt.world.Kernel.rectangle=function(d,h,f,x){plt.Kernel.check(d,plt.Kernel.isNumber,"rectangle",
"number",1);plt.Kernel.check(h,plt.Kernel.isNumber,"rectangle","number",2);plt.Kernel.check(f,L,"rectangle","style",3);plt.Kernel.check(x,H,"rectangle","color",4);if(c.get(x))x=c.get(x);return new S(plt.types.NumberTower.toFixnum(d),plt.types.NumberTower.toFixnum(h),f,x)};function p(d,h){this.pinholeX=d;this.pinholeY=h}plt.world.Kernel.BaseImage=p;function w(d){return d!=null&&d!=undefined&&d instanceof p}plt.world.Kernel.isImage=w;plt.world.Kernel.put_dash_pinhole=function(d,h,f){plt.Kernel.check(d,
w,"put-pinhole","image",1);plt.Kernel.check(h,plt.Kernel.isNumber,"put-pinhole","number",2);plt.Kernel.check(f,plt.Kernel.isNumber,"put-pinhole","number",3);return d.updatePinhole(h.toFixnum(),f.toFixnum())};p.prototype.updatePinhole=function(d,h){var f=z(this);f.pinholeX=d;f.pinholeY=h;return f};p.prototype.render=function(){throw new MobyRuntimeError("Unimplemented method render");};plt.world.Kernel.makeCanvas=function(d,h){var f=document.createElement("canvas");f.width=d;f.height=h;f.style.width=
f.width+"px";f.style.height=f.height+"px";if(window&&typeof window.G_vmlCanvasManager!="undefined"){f.style.display="none";document.body.appendChild(f);f=window.G_vmlCanvasManager.initElement(f);document.body.removeChild(f);f.style.display=""}return f};p.prototype.toDomNode=function(){var d=this,h=plt.world.Kernel.imageWidth(d).toFixnum(),f=plt.world.Kernel.imageHeight(d).toFixnum(),x=plt.world.Kernel.makeCanvas(h,f);x.style.display="none";document.body.appendChild(x);var P=x.getContext("2d");d.render(P,
h/2,f/2);document.body.removeChild(x);x.style.display="";return x};p.prototype.toWrittenString=function(){return"<image>"};p.prototype.toDisplayedString=function(){return"<image>"};plt.world.Kernel.image_question_=function(d){return w(d)};plt.world.Kernel.image_equal__question_=function(d,h){check(d,w,"image=?","image",1);check(h,w,"image=?","image",2);return d==h?plt.types.Logic.TRUE:plt.types.Logic.FALSE};function o(d){return d!=undefined&&d!=null&&d instanceof G}function G(d,h,f){p.call(this,0,
0);this.width=d;this.height=h;this.children=f}G.prototype=Q(p.prototype);G.prototype.add=function(d,h,f){return new G(this.width,this.height,this.children.concat([[d,h,f]]))};G.prototype.render=function(d,h,f){var x,P,q,J;d.clearRect(h-this.pinholeX,f-this.pinholeY,this.width,this.height);for(x=0;x<this.children.length;x++){P=this.children[x][0];q=this.children[x][1];J=this.children[x][2];d.save();P.render(d,q+h-P.pinholeX,J+f-P.pinholeY);d.restore()}};G.prototype.getWidth=function(){return this.width};
G.prototype.getHeight=function(){return this.height};function M(d,h){p.call(this,0,0);var f=this;this.isLoaded=false;if(h&&h.complete){this.img=h;this.isLoaded=true;this.pinholeX=f.img.width/2;this.pinholeY=f.img.height/2}else{this.img=new Image;this.img.onload=function(){f.isLoaded=true;f.pinholeX=f.img.width/2;f.pinholeY=f.img.height/2};this.img.onerror=function(){f.img.onerror="";f.img.src="http://www.wescheme.org/images/broken.png"};this.img.src=d}}M.prototype=Q(p.prototype);plt.world.Kernel.FileImage=
M;var K={};M.makeInstance=function(d){d in K||(K[d]=new M(d));return K[d]};M.installInstance=function(d,h){K[d]=new M(d,h)};M.installBrokenImage=function(d){K[d]=new U("Unable to load "+d,10,c.get("red"))};M.prototype.render=function(d,h,f){d.drawImage(this.img,h,f)};M.prototype.getWidth=function(){return this.img.width};M.prototype.getHeight=function(){return this.img.height};M.prototype.toDomNode=function(){return this.img.cloneNode(true)};function X(d,h){p.call(this,d.pinholeX,d.pinholeY);this.images=
[d].concat(h);this.height=this.width=0;h=this.images.length;for(d=0;d<h;d++){this.width=Math.max(this.width,this.images[d].getWidth());this.height=Math.max(this.height,this.images[d].getHeight())}}X.prototype=Q(p.prototype);X.prototype.render=function(d,h,f){var x;for(x=0;x<this.images.length;x++){var P=this.images[x];P.render(d,h-(P.pinholeX-this.pinholeX),f-(P.pinholeY-this.pinholeY))}};X.prototype.getWidth=function(){return this.width};X.prototype.getHeight=function(){return this.height};plt.world.Kernel.overlay=
function(d,h,f){plt.Kernel.check(d,w,"overlay","image",1);plt.Kernel.check(h,w,"overlay","image",2);plt.Kernel.arrayEach(f,function(x,P){plt.Kernel.check(x,w,"overlay","image",P+3)});return new X(d,[h].concat(f))};plt.world.Kernel.overlay_slash_xy=function(d,h,f,x){plt.Kernel.check(d,w,"overlay/xy","image",1);plt.Kernel.check(h,plt.Kernel.isNumber,"overlay/xy","number",2);plt.Kernel.check(f,plt.Kernel.isNumber,"overlay/xy","number",3);plt.Kernel.check(x,w,"overlay/xy","image",4);return new X(d,[x.updatePinhole(h.toFixnum(),
f.toFixnum())])};function S(d,h,f,x){p.call(this,d/2,h/2);this.width=d;this.height=h;this.style=f;this.color=x}S.prototype=Q(p.prototype);S.prototype.render=function(d,h,f){d.fillStyle=this.color.toString();d.strokeStyle=this.color.toString();this.style.toString().toLowerCase()=="outline"?d.strokeRect(h,f,this.width,this.height):d.fillRect(h,f,this.width,this.height)};S.prototype.getWidth=function(){return this.width};S.prototype.getHeight=function(){return this.height};function U(d,h,f){p.call(this,
0,0);this.msg=d;this.size=h;this.color=f;this.font="Optimer"}U.prototype=Q(p.prototype);U.prototype.render=function(d,h,f){if(d.fillText){d.font=this.size+"px Optimer";d.fillStyle=this.color.toRGBAString();d.strokeStyle=this.color.toString();d.fillText(this.msg,h,f)}else if(typeof d.mozDrawText!=="undefined"){d.mozTextStyle=this.size+"px "+this.font;d.translate(h,f+this.size);d.fillStyle=this.color.toString();d.strokeStyle=this.color.toString();d.mozDrawText(this.msg)}};U.prototype.getWidth=function(){return this.size*
this.msg.length};U.prototype.getHeight=function(){return 10};function W(d,h,f){p.call(this,d,d);this.radius=d;this.style=h;this.color=f}W.prototype=Q(p.prototype);W.prototype.render=function(d,h,f){d.beginPath();d.fillStyle=this.color.toString();d.strokeStyle=this.color.toString();d.arc(h,f,this.radius,0,2*Math.PI,false);this.style.toString().toLowerCase()=="outline"?d.stroke():d.fill();d.closePath()};W.prototype.getWidth=function(){return this.radius*2};W.prototype.getHeight=function(){return this.radius*
2};function v(d,h,f,x,P){p.call(this,Math.max(h,f),Math.max(h,f));this.points=d;this.outer=h;this.inner=f;this.style=x;this.color=P}v.prototype=Q(p.prototype);var E=Math.PI/180;v.prototype.render=function(d,h,f){d.save();d.beginPath();d.fillStyle=this.color.toString();d.strokeStyle=this.color.toString();for(var x=0;x<this.points*2+1;x++){var P=360/(2*this.points)*x*E-0.5,q=x%2==1?this.outer:this.inner;d.lineTo(h+Math.sin(P)*q,f+Math.cos(P)*q)}this.style.toString().toLowerCase()=="outline"?d.stroke():
d.fill();d.closePath();d.restore()};v.prototype.getWidth=function(){return Math.max(this.outer,this.inner)*2};v.prototype.getHeight=function(){return Math.max(this.outer,this.inner)*2};plt.world.Kernel.applyEffect=function(d){var h=[];if(!plt.Kernel.empty_question_(d))if(plt.Kernel.pair_question_(d)){h=h.concat(plt.world.Kernel.applyEffect(d.first()));h=h.concat(plt.world.Kernel.applyEffect(d.rest()))}else if(d=d.run())h=h.concat(d);return h};effect_colon_none.prototype.run=function(){};effect_colon_beep.prototype.run=
function(){plt.platform.Platform.getInstance().getSoundService().beep()};effect_colon_play_dash_dtmf_dash_tone.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService().playDtmfTone(this._fields[0].toFixnum(),this._fields[1].toFixnum())};effect_colon_send_dash_sms.prototype.run=function(){plt.platform.Platform.getInstance().getSmsService().send(this._fields[0],this._fields[1])};effect_colon_play_dash_sound.prototype.run=function(){if(plt.Kernel.isString(this._fields[0]))plt.platform.Platform.getInstance().getSoundService().playSoundUrl(this._fields[0]);
else playlist_dash_sound_question_(this._fields[0])&&plt.platform.Platform.getInstance().getSoundService().playPlaylist(this._fields[0]._fields[0])};effect_colon_pause_dash_sound.prototype.run=function(){if(plt.Kernel.isString(this._fields[0]))plt.platform.Platform.getInstance().getSoundService().pauseSoundUrl(this._fields[0]);else playlist_dash_sound_question_(this._fields[0])&&plt.platform.Platform.getInstance().getSoundService().pausePlaylist(this._fields[0]._fields[0])};effect_colon_stop_dash_sound.prototype.run=
function(){if(plt.Kernel.isString(this._fields[0]))plt.platform.Platform.getInstance().getSoundService().stopSoundUrl(this._fields[0]);else playlist_dash_sound_question_(this._fields[0])&&plt.platform.Platform.getInstance().getSoundService().stopPlaylist(this._fields[0]._fields[0])};effect_colon_set_dash_sound_dash_volume.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService().setVolume(this._fields[0].toFixnum())};effect_colon_raise_dash_sound_dash_volume.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService.raiseVolume()};
effect_colon_lower_dash_sound_dash_volume.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService.lowerVolume()};effect_colon_set_dash_wake_dash_lock.prototype.run=function(){plt.platform.Platform.getInstance().getPowerService().setWakeLock(this._fields[0].toFixnum())};effect_colon_release_dash_wake_dash_lock.prototype.run=function(){plt.platform.Platform.getInstance().getPowerService().releaseWakeLock()};effect_colon_pick_dash_playlist.prototype.run=function(){var d=this._fields[0];
function h(f){var x=make_dash_playlist_dash_sound(f);setTimeout(function(){var P=plt.world.config.CONFIG.lookup("changeWorld");P(function(q){return d([q,x])})},0)}plt.platform.Platform.getInstance().getPickPlaylistService().pickPlaylist(h)};effect_colon_pick_dash_random.prototype.run=function(){var d=plt.types.Rational.makeInstance(Math.floor(plt.types.NumberTower.toFixnum(this._fields[0])*Math.random()),1),h=this._fields[1];return function(f){return h([f,d])}};function C(){this.colors={}}C.prototype.put=
function(d,h){this.colors[d]=h};C.prototype.get=function(d){return this.colors[d.toString().toUpperCase()]};plt.world.Kernel.make_dash_color=function(d,h,f){function x(P){return plt.types.NumberTower.lessThanOrEqual(plt.types.Rational.ZERO,P)&&plt.types.NumberTower.lessThanOrEqual(P,plt.types.Rational.makeInstance(255,1))}plt.Kernel.check(d,x,"make-color","number between 0 and 255",1);plt.Kernel.check(h,x,"make-color","number between 0 and 255",2);plt.Kernel.check(f,x,"make-color","number between 0 and 255",
3);return new g(d.toFixnum(),h.toFixnum(),f.toFixnum())};function g(d,h,f){plt.types.Struct.call(this,"make-color",[d,h,f]);this._eqHashCode=plt.types.makeEqHashCode()}g.prototype=Q(plt.types.Struct.prototype);g.prototype.toString=function(){return"rgb("+this._fields[0]+","+this._fields[1]+","+this._fields[2]+")"};g.prototype.toRGBAString=function(){return"rgba("+this._fields[0]+","+this._fields[1]+","+this._fields[2]+", 1)"};var c=new C;c.put("ORANGE",new g(255,165,0));c.put("RED",new g(255,0,0));
c.put("ORANGERED",new g(255,69,0));c.put("TOMATO",new g(255,99,71));c.put("DARKRED",new g(139,0,0));c.put("RED",new g(255,0,0));c.put("FIREBRICK",new g(178,34,34));c.put("CRIMSON",new g(220,20,60));c.put("DEEPPINK",new g(255,20,147));c.put("MAROON",new g(176,48,96));c.put("INDIAN RED",new g(205,92,92));c.put("INDIANRED",new g(205,92,92));c.put("MEDIUM VIOLET RED",new g(199,21,133));c.put("MEDIUMVIOLETRED",new g(199,21,133));c.put("VIOLET RED",new g(208,32,144));c.put("VIOLETRED",new g(208,32,144));
c.put("LIGHTCORAL",new g(240,128,128));c.put("HOTPINK",new g(255,105,180));c.put("PALEVIOLETRED",new g(219,112,147));c.put("LIGHTPINK",new g(255,182,193));c.put("ROSYBROWN",new g(188,143,143));c.put("PINK",new g(255,192,203));c.put("ORCHID",new g(218,112,214));c.put("LAVENDERBLUSH",new g(255,240,245));c.put("SNOW",new g(255,250,250));c.put("CHOCOLATE",new g(210,105,30));c.put("SADDLEBROWN",new g(139,69,19));c.put("BROWN",new g(132,60,36));c.put("DARKORANGE",new g(255,140,0));c.put("CORAL",new g(255,
127,80));c.put("SIENNA",new g(160,82,45));c.put("ORANGE",new g(255,165,0));c.put("SALMON",new g(250,128,114));c.put("PERU",new g(205,133,63));c.put("DARKGOLDENROD",new g(184,134,11));c.put("GOLDENROD",new g(218,165,32));c.put("SANDYBROWN",new g(244,164,96));c.put("LIGHTSALMON",new g(255,160,122));c.put("DARKSALMON",new g(233,150,122));c.put("GOLD",new g(255,215,0));c.put("YELLOW",new g(255,255,0));c.put("OLIVE",new g(128,128,0));c.put("BURLYWOOD",new g(222,184,135));c.put("TAN",new g(210,180,140));
c.put("NAVAJOWHITE",new g(255,222,173));c.put("PEACHPUFF",new g(255,218,185));c.put("KHAKI",new g(240,230,140));c.put("DARKKHAKI",new g(189,183,107));c.put("MOCCASIN",new g(255,228,181));c.put("WHEAT",new g(245,222,179));c.put("BISQUE",new g(255,228,196));c.put("PALEGOLDENROD",new g(238,232,170));c.put("BLANCHEDALMOND",new g(255,235,205));c.put("MEDIUM GOLDENROD",new g(234,234,173));c.put("MEDIUMGOLDENROD",new g(234,234,173));c.put("PAPAYAWHIP",new g(255,239,213));c.put("MISTYROSE",new g(255,228,
225));c.put("LEMONCHIFFON",new g(255,250,205));c.put("ANTIQUEWHITE",new g(250,235,215));c.put("CORNSILK",new g(255,248,220));c.put("LIGHTGOLDENRODYELLOW",new g(250,250,210));c.put("OLDLACE",new g(253,245,230));c.put("LINEN",new g(250,240,230));c.put("LIGHTYELLOW",new g(255,255,224));c.put("SEASHELL",new g(255,245,238));c.put("BEIGE",new g(245,245,220));c.put("FLORALWHITE",new g(255,250,240));c.put("IVORY",new g(255,255,240));c.put("GREEN",new g(0,255,0));c.put("LAWNGREEN",new g(124,252,0));c.put("CHARTREUSE",
new g(127,255,0));c.put("GREEN YELLOW",new g(173,255,47));c.put("GREENYELLOW",new g(173,255,47));c.put("YELLOW GREEN",new g(154,205,50));c.put("YELLOWGREEN",new g(154,205,50));c.put("MEDIUM FOREST GREEN",new g(107,142,35));c.put("OLIVEDRAB",new g(107,142,35));c.put("MEDIUMFORESTGREEN",new g(107,142,35));c.put("DARK OLIVE GREEN",new g(85,107,47));c.put("DARKOLIVEGREEN",new g(85,107,47));c.put("DARKSEAGREEN",new g(143,188,139));c.put("LIME",new g(0,255,0));c.put("DARK GREEN",new g(0,100,0));c.put("DARKGREEN",
new g(0,100,0));c.put("LIME GREEN",new g(50,205,50));c.put("LIMEGREEN",new g(50,205,50));c.put("FOREST GREEN",new g(34,139,34));c.put("FORESTGREEN",new g(34,139,34));c.put("SPRING GREEN",new g(0,255,127));c.put("SPRINGGREEN",new g(0,255,127));c.put("MEDIUM SPRING GREEN",new g(0,250,154));c.put("MEDIUMSPRINGGREEN",new g(0,250,154));c.put("SEA GREEN",new g(46,139,87));c.put("SEAGREEN",new g(46,139,87));c.put("MEDIUM SEA GREEN",new g(60,179,113));c.put("MEDIUMSEAGREEN",new g(60,179,113));c.put("AQUAMARINE",
new g(112,216,144));c.put("LIGHTGREEN",new g(144,238,144));c.put("PALE GREEN",new g(152,251,152));c.put("PALEGREEN",new g(152,251,152));c.put("MEDIUM AQUAMARINE",new g(102,205,170));c.put("MEDIUMAQUAMARINE",new g(102,205,170));c.put("TURQUOISE",new g(64,224,208));c.put("LIGHTSEAGREEN",new g(32,178,170));c.put("MEDIUM TURQUOISE",new g(72,209,204));c.put("MEDIUMTURQUOISE",new g(72,209,204));c.put("HONEYDEW",new g(240,255,240));c.put("MINTCREAM",new g(245,255,250));c.put("ROYALBLUE",new g(65,105,225));
c.put("DODGERBLUE",new g(30,144,255));c.put("DEEPSKYBLUE",new g(0,191,255));c.put("CORNFLOWERBLUE",new g(100,149,237));c.put("STEEL BLUE",new g(70,130,180));c.put("STEELBLUE",new g(70,130,180));c.put("LIGHTSKYBLUE",new g(135,206,250));c.put("DARK TURQUOISE",new g(0,206,209));c.put("DARKTURQUOISE",new g(0,206,209));c.put("CYAN",new g(0,255,255));c.put("AQUA",new g(0,255,255));c.put("DARKCYAN",new g(0,139,139));c.put("TEAL",new g(0,128,128));c.put("SKY BLUE",new g(135,206,235));c.put("SKYBLUE",new g(135,
206,235));c.put("CADET BLUE",new g(96,160,160));c.put("CADETBLUE",new g(95,158,160));c.put("DARK SLATE GRAY",new g(47,79,79));c.put("DARKSLATEGRAY",new g(47,79,79));c.put("LIGHTSLATEGRAY",new g(119,136,153));c.put("SLATEGRAY",new g(112,128,144));c.put("LIGHT STEEL BLUE",new g(176,196,222));c.put("LIGHTSTEELBLUE",new g(176,196,222));c.put("LIGHT BLUE",new g(173,216,230));c.put("LIGHTBLUE",new g(173,216,230));c.put("POWDERBLUE",new g(176,224,230));c.put("PALETURQUOISE",new g(175,238,238));c.put("LIGHTCYAN",
new g(224,255,255));c.put("ALICEBLUE",new g(240,248,255));c.put("AZURE",new g(240,255,255));c.put("MEDIUM BLUE",new g(0,0,205));c.put("MEDIUMBLUE",new g(0,0,205));c.put("DARKBLUE",new g(0,0,139));c.put("MIDNIGHT BLUE",new g(25,25,112));c.put("MIDNIGHTBLUE",new g(25,25,112));c.put("NAVY",new g(36,36,140));c.put("BLUE",new g(0,0,255));c.put("INDIGO",new g(75,0,130));c.put("BLUE VIOLET",new g(138,43,226));c.put("BLUEVIOLET",new g(138,43,226));c.put("MEDIUM SLATE BLUE",new g(123,104,238));c.put("MEDIUMSLATEBLUE",
new g(123,104,238));c.put("SLATE BLUE",new g(106,90,205));c.put("SLATEBLUE",new g(106,90,205));c.put("PURPLE",new g(160,32,240));c.put("DARK SLATE BLUE",new g(72,61,139));c.put("DARKSLATEBLUE",new g(72,61,139));c.put("DARKVIOLET",new g(148,0,211));c.put("DARK ORCHID",new g(153,50,204));c.put("DARKORCHID",new g(153,50,204));c.put("MEDIUMPURPLE",new g(147,112,219));c.put("CORNFLOWER BLUE",new g(68,64,108));c.put("MEDIUM ORCHID",new g(186,85,211));c.put("MEDIUMORCHID",new g(186,85,211));c.put("MAGENTA",
new g(255,0,255));c.put("FUCHSIA",new g(255,0,255));c.put("DARKMAGENTA",new g(139,0,139));c.put("VIOLET",new g(238,130,238));c.put("PLUM",new g(221,160,221));c.put("LAVENDER",new g(230,230,250));c.put("THISTLE",new g(216,191,216));c.put("GHOSTWHITE",new g(248,248,255));c.put("WHITE",new g(255,255,255));c.put("WHITESMOKE",new g(245,245,245));c.put("GAINSBORO",new g(220,220,220));c.put("LIGHT GRAY",new g(211,211,211));c.put("LIGHTGRAY",new g(211,211,211));c.put("SILVER",new g(192,192,192));c.put("GRAY",
new g(190,190,190));c.put("DARK GRAY",new g(169,169,169));c.put("DARKGRAY",new g(169,169,169));c.put("DIM GRAY",new g(105,105,105));c.put("DIMGRAY",new g(105,105,105));c.put("BLACK",new g(0,0,0))})();plt.Jsworld={};
(function(){var j=plt.Jsworld,u=false;function R(){}var D=new R,Q=[],z=[];j.shutdown=function(){for(;z.length>0;){var i=z.pop();i&&i.pause()}N()};function B(i){Q.push(i)}function I(i){i=Q.indexOf(i);i!=-1&&Q.splice(i,1)}function N(){D=new R;Q=[]}function n(i){var s=D;try{D=i(D)}catch(r){D=s;throw r;}for(i=0;i<Q.length;i++)try{Q[i](D,s)}catch(A){D=s;throw A;}}j.change_world=n;Number.prototype.NaN0=function(){return isNaN(this)?0:this};function m(i){for(var s=0,r=0;i.offsetParent;){s+=i.offsetLeft+
(i.currentStyle?parseInt(i.currentStyle.borderLeftWidth).NaN0():0);r+=i.offsetTop+(i.currentStyle?parseInt(i.currentStyle.borderTopWidth).NaN0():0);i=i.offsetParent}s+=i.offsetLeft+(i.currentStyle?parseInt(i.currentStyle.borderLeftWidth).NaN0():0);r+=i.offsetTop+(i.currentStyle?parseInt(i.currentStyle.borderTopWidth).NaN0():0);return{x:s,y:r}}j.getPosition=m;var O=0;function V(){return O++}j.gensym=V;function H(i,s){for(var r=new Array(i.length),A=0;A<i.length;A++)r[A]=s(i[A]);return r}j.map=H;function L(i,
s){for(var r=[],A=0;A<i.length;A++)r=r.concat(s(i[A]));return r}function p(i,s){for(var r=new Array(i.length),A=0;A<i.length;A++)r[A]=s(i[A],A);return r}j.mapi=p;function w(i,s,r){for(var A=0;A<i.length;A++)s=r(i[A],s);return s}j.fold=w;function o(i,s){var r={};for(var A in i)r[A]=i[A];for(A in s)r[A]=s[A];return r}j.augment=o;function G(i,s,r){var A={};for(var ba in i)A[ba]=i[ba];A[s]=r;return A}j.assoc_cons=G;function M(i,s){return i.concat([s])}j.cons=M;function K(i,s){return i.concat(s)}j.append=
K;function X(i,s){for(var r=[],A=0;A<i.length;A++)r.push([i[A],s[A]]);return r}j.array_join=X;function S(i,s){for(var r=0;r<i.length;r++)if(i[r]===s)return i.slice(0,r).concat(i.slice(r+1));return i}j.removeq=S;function U(i,s){for(var r=0;r<i.length;r++)if(s(i[r]))return i.slice(0,r).concat(i.slice(r+1));return i}j.removef=U;function W(i,s){for(var r=0;r<i.length;r++)if(s(i[r]))return i.slice(0,r).concat(W(i.slice(r+1),s));return i}j.filter=W;function v(i,s){var r={};for(var A in i)if(A!=s)r[A]=i[A];
return r}j.without=v;function E(i,s){for(var r=0;r<i.length;r++)if(i[r]===s)return true;return false}j.memberq=E;function C(i,s){for(var r=0;r<i.length;r++)if(i[r]==s)return true;return false}j.member=C;function g(i){return i[0]}j.head=g;function c(i){return i.slice(1,i.length)}j.tail=c;function d(i){var s=[i];for(i=i.firstChild;i!=null;i=i.nextSibling)s.push(d(i));return s}j.node_to_tree=d;function h(i){var s=[i.node];if(i.node.jsworldOpaque==true)return s;for(var r=0;r<i.children.length;r++)s=s.concat(h(i.children[r]));
return s}function f(i,s){return i&&s&&i===s}function x(i,s){return!f(i,s)}function P(i){var s=[];if(i.node.jsworldOpaque==true)return[];for(var r=0;r<i.children.length;r++)s.push({relation:"parent",parent:i.node,child:i.children[r].node});for(r=0;r<i.children.length-1;r++)s.push({relation:"neighbor",left:i.children[r].node,right:i.children[r+1].node});for(r=0;r<i.children.length;r++)s=s.concat(P(i.children[r]));return s}function q(i,s){i.appendChild(s)}function J(i,s,r){for(var A=0;A<r.length;A++)if(r[A].relation==
"parent"){var ba=r[A].parent,fa=r[A].child;x(fa.parentNode,ba)&&q(ba,fa)}for(;;){ba=false;for(A=0;A<r.length;A++)if(r[A].relation=="neighbor"){fa=r[A].left;var la=r[A].right;if(x(fa.nextSibling,la)){fa.parentNode.insertBefore(fa,la);ba=true}}if(!ba)break}var ia;function va(ua,ra){ra=ua.compareDocumentPosition(ra);if(ra&ua.DOCUMENT_POSITION_CONTAINED_BY)return 1;if(ra&ua.DOCUMENT_POSITION_CONTAINS)return-1;if(ra&ua.DOCUMENT_POSITION_FOLLOWING)return-1;if(ra&ua.DOCUMENT_POSITION_PRECEDING)return 1;
return 0}try{ia=s.concat(i).sort(va)}catch(pa){ia=null}r=i;for(i=i.parentNode;r!=i;){for(;;){if(r.firstChild==null||r.jsworldOpaque==true)break;r=r.firstChild}for(;r!=i;){fa=r.nextSibling;ba=r.parentNode;la=false;var wa=undefined;if(ia!=null)for(;ia.length>0&&va(r,ia[0])>=0;){A=ia.shift();if(f(A,r)){la=true;wa=A;break}}else for(A=0;A<s.length;A++)if(f(s[A],r)){la=true;wa=s[A];break}if(la)$(r,wa);else{if(!r.isJsworldOpaque)for(;r.firstChild!=null;)q(r.parentNode,r.firstChild);fa=r.nextSibling;r.parentNode.removeChild(r)}if(fa==
null)r=ba;else{r=fa;break}}}aa(s)}function $(){}function da(i){return i.replace(/\-(.)/g,function(s,r){return r.toUpperCase()})}function ga(i,s){for(var r=0;r<s.length;r++)i.style[da(s[r].attrib)]=s[r].values.join(" ")}function na(i,s){return s.id.match(/^\./)?"class"in i&&C(i["class"].split(/\s+/),s.id.substring(1)):"id"in i&&i.id==s.id}function y(i,s){for(var r=0;r<i.length;r++)T(i[r]);for(r=0;r<s.length;r++)if("id"in s[r])for(var A=0;A<i.length;A++)na(i[A],s[r])&&ga(i[A],s[r].attribs);else ga(s[r].node,
s[r].attribs)}function T(i){if("style"in i)i.style.cssText=""}function aa(i){for(var s=0;s<i.length;s++)i[s].onWorldChange&&i[s].onWorldChange(D)}function ea(i,s,r,A,ba){if(s instanceof R){var fa=ta(A(i)),la=h(fa);y(la,Aa(ba(i)));J(r,la,P(fa))}else ha(function(){var ia=A(s),va=A(i),pa=ba(s),wa=ba(i),ua=ta(va),ra=h(ua);if(ia!==va){y(ra,Aa(wa));J(r,ra,P(ua))}else pa!==wa&&y(ra,Aa(wa))})}function ha(i){var s;if(b()){s=e();i();s.restore()}else i()}function ka(){this.focused=u;this.selectionStart=u.selectionStart;
this.selectionEnd=u.selectionEnd}ka.prototype.restore=function(){if(this.focused.parentNode){this.focused.selectionStart=this.selectionStart;this.focused.selectionEnd=this.selectionEnd;this.focused.focus()}else if(this.focused.id){var i=document.getElementById(this.focused.id);if(i){i.selectionStart=this.selectionStart;i.selectionEnd=this.selectionEnd;i.focus()}}};function b(){return u!=undefined}function e(){return new ka}function l(i,s,r,A,ba){this.top=i;this.world=s;this.handlers=A;this.handlerCreators=
r;this.attribs=ba}l.prototype.restart=function(){t(this.top,this.world,this.handlerCreators,this.attribs)};l.prototype.pause=function(){for(var i=0;i<this.handlers.length;i++)this.handlers[i]instanceof ca||this.handlers[i].onUnregister(top)};function t(i,s,r,A){N();var ba=H(r,function(pa){return pa()});z.length>0&&z[z.length-1].pause();var fa=new l(i,s,r,ba,A);z.push(fa);function la(pa){fa.world=pa}B(la);var ia=new ca(function(){return false},function(){});for(r=0;r<ba.length;r++)if(ba[r]instanceof
ca)ia=ba[r];else ba[r].onRegister(i);function va(pa){if(ia.test(pa)){ia.receiver(D);(pa=z.pop())&&pa.pause();if(z.length>0){pa=z.pop();pa.restart()}}}B(va);k(i,A);n(function(){return s})}j.big_bang=t;function F(i,s){return function(){var r={watchId:-1,onRegister:function(){r.watchId=setInterval(function(){n(s)},i)},onUnregister:function(){clearInterval(r.watchId)}};return r}}j.on_tick=F;function Z(i,s){function r(A){A=i(A);sa(A,A);return A}return function(){var A={_top:null,_listener:function(ba,
fa){ea(ba,fa,A._top,r,s)},onRegister:function(ba){A._top=ba;B(A._listener)},onUnregister:function(){I(A._listener)}};return A}}j.on_draw=Z;function ca(i,s){this.test=i;this.receiver=s}function ja(i,s){return function(){if(s==undefined)s=function(){};return new ca(i,s)}}j.stop_when=ja;function ma(i){function s(r){i(r)}return function(){return{onRegister:function(){B(s)},onUnregister:function(){I(s)}}}}j.on_world_change=ma;function qa(i,s,r){i.addEventListener?i.addEventListener(s,r,false):i.attachEvent("on"+
s,r,false)}function za(i,s,r){qa(i,s,function(A){n(function(ba){return r(ba,A)})})}function Ba(i,s,r){qa(i,s,function(A){setTimeout(function(){n(function(ba){return r(ba,A)})},0)})}function oa(i){qa(i,"focus",function(){u=i});qa(i,"blur",function(){u=undefined});return i}function ta(i){return i.length==undefined?{node:i,children:[]}:{node:i[0],children:H(i.slice(1),ta)}}function xa(i){return{attrib:i[0],values:i.slice(1)}}function Da(i){var s=H(i.slice(1),xa);return typeof i[0]=="string"?[{id:i[0],
attribs:s}]:"length"in i[0]?H(i[0],function(r){return{id:r,attribs:s}}):[{node:i[0],attribs:s}]}function Aa(i){return L(i,Da)}function Ea(i){return i.nodeType==Node.TEXT_NODE}function Fa(i){return i.nodeType==Node.ELEMENT_NODE}function Ca(i,s){throw new ya(plt.Kernel.format("Expected a non-empty array, received ~s within ~s",[i,s]),i);}function sa(i,s){!i instanceof Array&&Ca(i,s);i.length==0&&Ca(i,s);if(Ea(i[0])){if(i.length>1)throw new ya(plt.Kernel.format("Text node ~s can not have children",[i]),
i);}else if(Fa(i[0]))for(s=1;s<i.length;s++)sa(i[s],i);else throw new ya(plt.Kernel.format("expected a Text or an Element, received ~s within ~s",[i,s]),i[0]);}function ya(i,s){this.msg=i;this.elt=s}ya.prototype.toString=function(){return"on-draw: "+this.msg};function k(i,s){if(s)for(a in s)if(s.hasOwnProperty(a))if(typeof s[a]=="function")za(i,a,s[a]);else i[a]=s[a];return i}function Y(i){return oa(k(document.createElement("p"),i))}j.p=Y;function Ia(i){return oa(k(document.createElement("div"),i))}
j.div=Ia;function Ja(i,s){var r=document.createElement("button");za(r,"click",i);return oa(k(r,s))}j.button=Ja;function Ga(i){if(i.stopPropagation)i.stopPropagation();else i.cancelBubble=true}function Ka(i){qa(i,"click",function(s){Ga(s)});return i}function La(i,s,r){i=i.toLowerCase();var A={text:Ha,password:Ha,checkbox:Ma};if(A[i])return A[i](i,s,r);else throw new plt.Kernel.MobyRuntimeError("js-input: does not currently support type "+i);}j.input=La;function Ha(i,s,r){var A=document.createElement("input");
A.type=i;function ba(ia){return s(ia,A.value)}Ba(A,"keypress",ba);i=1000;var fa=A.value,la=setInterval(function(){if(A.parentNode){if(fa!=A.value){fa=A.value;n(function(ia){return s(ia,A.value)})}}else clearInterval(la)},i);return Ka(oa(k(A,r)))}function Ma(i,s,r){var A=document.createElement("input");A.type=i;function ba(fa){return s(fa,A.checked?plt.types.Logic.TRUE:plt.types.Logic.FALSE)}Ba(A,"change",ba);qa(A,"click",function(fa){Ga(fa)});return k(A,r)}function Na(i){return i=document.createTextNode(i)}
j.text=Na;function Oa(i,s,r){for(var A=document.createElement("select"),ba=0;ba<s.length;ba++)A.add(Pa({value:s[ba]}),null);A.jsworldOpaque=true;za(A,"change",r);return i=oa(k(A,i))}j.select=Oa;function Pa(i){var s=document.createElement("option");s.text=i.value;s.value=i.value;return s}function Qa(i){return oa(k(document.createElement("textarea"),i))}j.textarea=Qa;function Ra(i){return oa(k(document.createElement("h1"),i))}j.h1=Ra;function Sa(i){return oa(k(document.createElement("canvas"),i))}j.canvas=
Sa;function Ta(i,s){var r=document.createElement("img");r.src=i;return oa(k(r,s))}j.img=Ta;function Ua(i,s){return oa(k(i,s))}j.raw_node=Ua})();plt.world.MobyJsWorld={};plt.world.MobyJsworld={};
(function(){var j=plt.world.MobyJsworld,u=plt.Jsworld,R=plt.Kernel.MobyTypeError;function D(p){return typeof p=="function"}function Q(p){var w=p;if(plt.Kernel.empty_question_(w))return[];else if(plt.Kernel.pair_question_(w)){for(p=[];!w.isEmpty();){p.push(Q(w.first()));w=w.rest()}return p}else return p}function z(p){for(var w={};!p.isEmpty();){var o=p.first().first(),G=p.first().rest().first();w[o]=G;p=p.rest()}return w}function B(){if(window.document.getElementById("jsworld-div")!=undefined)return window;
var p=window.open("big-bang.html","big-bang");if(p==null)throw new Error("Error: Not allowed to create a new window.");return p}j.makeToplevelNode=function(){return B().document.getElementById("jsworld-div")};function I(p){return p instanceof plt.types.Cons||p instanceof plt.types.Empty}j.printWorldHook=function(p,w){if(w.lastChild==null){p=plt.types.toDomNode(p);w.appendChild(p)}else{p=plt.types.toDomNode(p);w.replaceChild(p,w.lastChild)}};function N(p){return typeof p.nodeType!="undefined"}function n(p,
w,o){if(plt.Kernel.pair_question_(p)){var G=plt.Kernel.first(p);o=plt.Kernel.rest(p);if(!N(G))throw new R(plt.Kernel.format("on-draw: expected a dom-element, but received ~s instead, the first element within ~s",[G,w]));if(G.nodeType==Node.TEXT_NODE&&!plt.Kernel.empty_question_(o))throw new R(plt.Kernel.format("on-draw: the text node ~s must not have children.  It has ~s",[G,o]));for(w=2;!plt.Kernel.empty_question_(o);){n(plt.Kernel.first(o),p,w);o=plt.Kernel.rest(o);w++}}else throw new R(plt.Kernel.format("on-draw: expected a dom-s-expression, but received ~s instead~a",
[p,o!=undefined?plt.Kernel.format(", the ~a element within ~s.",[plt.Kernel.ordinalize(o),w]):"."]));}function m(p,w,o){plt.Kernel.attachEvent(p,w,o)}function O(p){if(p.preventDefault)p.preventDefault();else p.returnValue=false}function V(p){if(p.stopPropagation)p.stopPropagation();else p.cancelBubble=true}j.bigBang=function(p,w){var o=plt.types.Empty.EMPTY;plt.Kernel.arrayEach(w,function(W,v){plt.Kernel.check(W,function(E){return D(E)||I(E)},"js-big-bang","handler or attribute list",v+2)});var G=
j.makeToplevelNode();G.tabIndex=0;m(G,"click",function(W){O(W);V(W);return false},false);for(var M=new plt.world.config.WorldConfig,K=0;K<w.length;K++)if(I(w[K]))o=w[K];else if(D(w[K]))M=w[K](M);M=M.updateAll({changeWorld:j.updateWorld,shutdownWorld:j.shutdownWorld});plt.world.config.CONFIG=M;w=[];if(M.lookup("onDraw")){wrappedRedraw=function(W){try{var v=M.lookup("onDraw")([W]);plt.Kernel.setLastLoc(undefined);n(v,v,undefined);var E=[G,Q(v)];return E}catch(C){H(C);throw C;}};K=function(W){try{var v=
Q(M.lookup("onDrawCss")([W]));plt.Kernel.setLastLoc(undefined);return v}catch(E){H(E);throw E;}};w.push(u.on_draw(wrappedRedraw,K))}else if(M.lookup("onRedraw")){var X=undefined,S=undefined;wrappedRedraw=function(W){try{var v=M.lookup("onRedraw")([W]);if(v!=null&&v!=undefined&&v instanceof plt.world.Kernel.BaseImage){var E=plt.world.Kernel.imageWidth(v).toFixnum(),C=plt.world.Kernel.imageHeight(v).toFixnum();if(!X){X=plt.world.Kernel.makeCanvas(E,C);X.jsworldOpaque=true;S=u.node_to_tree(X)}X.width=
E;X.height=C;var g=X.getContext("2d");v.render(g,0,0);return[G,S]}else return[G,u.node_to_tree(plt.types.toDomNode(v))]}catch(c){H(c);throw c;}};K=function(){return[[X,["width",X.width+"px"],["height",X.height+"px"]]]};w.push(u.on_draw(wrappedRedraw,K))}else w.push(u.on_world_change(function(W){j.printWorldHook(W,G)}));if(M.lookup("tickDelay")){K=function(W){setTimeout(function(){plt.world.stimuli.onTick()},0);return W};var U=M.lookup("tickDelay");w.push(u.on_tick(U,K))}M.lookup("stopWhen")&&w.push(u.stop_when(function(W){return M.lookup("stopWhen")([W])}));
if(M.lookup("onKey")){m(G,"keydown",function(W){plt.world.stimuli.onKey(W);O(W);V(W);return false});m(G,"keypress",function(W){O(W);V(W);return false});G.focus()}if(M.lookup("initialEffect")){U=plt.world.Kernel.applyEffect(M.lookup("initialEffect"));for(K=0;K<U.length;K++)if(M.lookup("stopWhen")&&M.lookup("stopWhen")([p]))break;else p=U[K](p)}return u.big_bang(G,p,w,z(o))};function H(p){plt.Kernel.reportError(p);plt.Kernel.reportError("Shutting down jsworld computations");plt.world.stimuli.onShutdown()}
j.updateWorld=function(p){function w(o){try{return p(o)}catch(G){H(G);return o}}u.change_world(w)};j.shutdownWorld=function(){u.shutdown()};function L(p){if(p.length==0)return[];if(p.length==1)return z(p[0]);else throw new Error;}j.p=function(p){p=L(p);var w=u.p(p);w.toWrittenString=function(){return plt.Kernel.format("(js-p)",[])};w.toDisplayedString=w.toWrittenString;w.toDomNode=function(){return w};return w};j.div=function(p){p=L(p);var w=u.div(p);w.toWrittenString=function(){return plt.Kernel.format("(js-div)",
[])};w.toDisplayedString=w.toWrittenString;w.toDomNode=function(){return w};return w};j.button=function(p,w){function o(){return make_dash_effect_colon_none()}var G=j.buttonStar(p,o,w);G.toWrittenString=function(){return"(js-button ...)"};G.toDisplayedString=G.toWrittenString;G.toDomNode=function(){return G};return G};j.buttonStar=function(p,w,o){o=L(o);function G(K){try{var X=w([K]),S=p([K]);plt.world.Kernel.applyEffect(X);return S}catch(U){H(U);return K}}var M=u.button(G,o);M.toWrittenString=function(){return"(js-button ...)"};
M.toDisplayedString=M.toWrittenString;M.toDomNode=function(){return M};return M};j.input=function(p,w,o){plt.Kernel.check(p,plt.Kernel.isString,"js-input","string",1);plt.Kernel.check(w,plt.Kernel.isFunction,"js-input","(world string -> world)",1);o=L(o);var G=u.input(p,function(M,K){return w([M,K])},o);G.toWrittenString=function(){return"(js-input ...)"};G.toDisplayedString=G.toWrittenString;G.toDomNode=function(){return G};return G};j.get_dash_input_dash_value=function(p){plt.Kernel.check(p,function(){return plt.Kernel.isString(p)||
p.nodeType==Node.ELEMENT_NODE},"get-input-value","dom-node",1);return plt.Kernel.isString(p)?plt.types.String.makeInstance(document.getElementById(p).value||""):plt.types.String.makeInstance(p.value||"")};j.img=function(p,w){plt.Kernel.check(p,plt.Kernel.isString,"js-img","string",1);w=L(w);var o=u.img(p,w);o.toWrittenString=function(){return"(js-img ...)"};o.toDisplayedString=o.toWrittenString;o.toDomNode=function(){return o};return o};j.text=function(p){plt.Kernel.check(p,plt.Kernel.isString,"js-text",
"string",1);var w=u.text(p,[]);w.toWrittenString=function(){return"(js-text ...)"};w.toDisplayedString=w.toWrittenString;w.toDomNode=function(){return w};return w};j.select=function(p,w,o){plt.Kernel.checkListof(p,plt.Kernel.isString,"js-select","string",1);plt.Kernel.check(w,plt.Kernel.isFunction,"js-select","function",2);o=L(o);p=Q(p);var G=u.select(o,p,function(M){return w([M,G.value])});G.toWrittenString=function(){return"(js-select ...)"};G.toDisplayedString=G.toWrittenString;G.toDomNode=function(){return G};
return G};j.rawNode=function(p,w){w=L(w);var o=u.raw_node(plt.types.toDomNode(p),w);o.toWrittenString=function(){return"(js-raw-node ...)"};o.toDisplayedString=o.toWrittenString;o.toDomNode=function(){return o};return o}})();plt.world.stimuli={};
(function(){var j={};plt.world.stimuli=j;function u(B,I,N){var n=[];try{Q(function(V){var H=[V].concat(N);if(B){var L=B(H);n=z(L)}return I?I(H):V});for(var m=0;m<n.length;m++)Q(n[m])}catch(O){j.onShutdown()}}j.onTilt=function(B,I,N){var n=D("onTilt"),m=D("onTiltEffect");u(m,n,[R(B),R(I),R(N)])};j.onAcceleration=function(B,I,N){var n=D("onAcceleration"),m=D("onAccelerationEffect");u(m,n,[R(B),R(I),R(N)])};j.onShake=function(){var B=D("onShake"),I=D("onShakeEffect");u(I,B,[])};j.onLocation=function(B,
I){var N=D("onLocationChange"),n=D("onLocationChangeEffect");u(n,N,[R(B),R(I)])};j.onKey=function(B){function I(m){m=m.charCode||m.keyCode;return m=m==37?"left":m==38?"up":m==39?"right":m==40?"down":m==32?"space":m==13?"enter":String.fromCharCode(m)}B=I(B);var N=D("onKey"),n=D("onKeyEffect");u(n,N,[B])};j.onTick=function(){var B=D("onTick"),I=D("onTickEffect");u(I,B,[])};j.onAnnounce=function(B,I){for(var N=plt.types.Empty.EMPTY,n=0;n<I.length;n++)N=plt.types.Cons.makeInstance(I[I.length-n-1],N);
I=D("onAnnounce");n=D("onAnnounceEffect");u(I,n,[B,N])};j.onShutdown=function(){var B=D("shutdownWorld");B&&B()};var R=plt.types.FloatPoint.makeInstance;function D(B){return plt.world.config.CONFIG.lookup(B)}function Q(B){D("changeWorld")&&D("changeWorld")(B)}function z(B){return plt.world.Kernel.applyEffect(B)}})();
(function(j){var u={};function R(){plt.types.Struct.call(this,"make-permission:location",[])}R.prototype=new plt.types.Struct;function D(){return new R}function Q(b){return b!=null&&b!=undefined&&b instanceof R}function z(){plt.types.Struct.call(this,"make-permission:send-sms",[])}z.prototype=new plt.types.Struct;function B(){return new z}function I(b){return b!=null&&b!=undefined&&b instanceof z}function N(){plt.types.Struct.call(this,"make-permission:receive-sms",[])}N.prototype=new plt.types.Struct;
function n(b){return b!=null&&b!=undefined&&b instanceof N}function m(){plt.types.Struct.call(this,"make-permission:tilt",[])}m.prototype=new plt.types.Struct;function O(){return new m}function V(b){return b!=null&&b!=undefined&&b instanceof m}function H(){plt.types.Struct.call(this,"make-permission:shake",[])}H.prototype=new plt.types.Struct;function L(){return new H}function p(b){return b!=null&&b!=undefined&&b instanceof H}function w(){plt.types.Struct.call(this,"make-permission:internet",[])}
w.prototype=new plt.types.Struct;function o(){return new w}function G(b){return b!=null&&b!=undefined&&b instanceof w}function M(){plt.types.Struct.call(this,"make-permission:telephony",[])}M.prototype=new plt.types.Struct;function K(){return new M}function X(b){return b!=null&&b!=undefined&&b instanceof M}function S(){plt.types.Struct.call(this,"make-permission:wake-lock",[])}S.prototype=new plt.types.Struct;function U(){return new S}function W(b){return b!=null&&b!=undefined&&b instanceof S}function v(b){plt.types.Struct.call(this,
"make-permission:open-image-url",[b]);this.url=b}v.prototype=new plt.types.Struct;function E(b){return new v(b)}function C(b){if(c(b))return b.url;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("permission:open-image-url-url: not a permission:open-image-url: ~s",[b]));}function g(b,e){if(c(b)){b.url=e;b._fields[0]=e}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_permission_colon_open_dash_image_dash_url_dash_url_bang_: not a permission:open-image-url: ~s",[b]));
}function c(b){return b!=null&&b!=undefined&&b instanceof v}function d(b){plt.types.Struct.call(this,"make-permission:universe",[b]);this.url=b}d.prototype=new plt.types.Struct;function h(b){return new d(b)}function f(b){if(P(b))return b.url;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("permission:universe-url: not a permission:universe: ~s",[b]));}function x(b,e){if(P(b)){b.url=e;b._fields[0]=e}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_permission_colon_universe_dash_url_bang_: not a permission:universe: ~s",
[b]));}function P(b){return b!=null&&b!=undefined&&b instanceof d}function q(b){return Q(b)||I(b)||n(b)||V(b)||p(b)||G(b)||X(b)||W(b)||c(b)||P(b)}var J,$,da,ga,na,y,T,aa;function ea(b){return Q(b)?u[11]:I(b)?u[12]:n(b)?u[13]:V(b)?u[14]:p(b)?u[15]:G(b)?u[16]:X(b)?u[17]:W(b)?u[18]:c(b)?plt.Kernel.format(u[19],[C(b)]):P(b)?plt.Kernel.format(u[20],[f(b)]):plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),u[21])}function ha(b){return function(){function e(t,F){return plt.Kernel._greaterthan_(plt.Kernel.string_dash_length(F),
plt.Kernel.string_dash_length(t),[])&&plt.Kernel.string_equal__question_(plt.Kernel.substring(F,u[23],plt.Kernel.string_dash_length(t)),t,[])}function l(t,F,Z){return plt.Kernel.apply(Z,plt.Kernel.list([plt.Kernel.substring(F,plt.Kernel.add1(plt.Kernel.string_dash_length(t)),plt.Kernel.string_dash_length(F))]),[])}(function(){})(plt.Kernel.identity);return plt.Kernel.string_equal__question_(b,u[11],[])?J:plt.Kernel.string_equal__question_(b,u[12],[])?$:plt.Kernel.string_equal__question_(b,u[13],[])?
da:plt.Kernel.string_equal__question_(b,u[14],[])?ga:plt.Kernel.string_equal__question_(b,u[15],[])?na:plt.Kernel.string_equal__question_(b,u[16],[])?y:plt.Kernel.string_equal__question_(b,u[17],[])?T:plt.Kernel.string_equal__question_(b,u[18],[])?aa:e(u[24],b)?l(u[24],b,plt.types.liftToplevelToFunctionValue(E,plt.types.String.makeInstance("make-permission:open-image-url"),1,plt.types.Rational.makeInstance(1,1))):e(u[25],b)?l(u[25],b,plt.types.liftToplevelToFunctionValue(h,plt.types.String.makeInstance("make-permission:universe"),
1,plt.types.Rational.makeInstance(1,1))):plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),u[21])}()}function ka(b){return Q(b)?plt.Kernel.list([u[26],u[27]]):I(b)?plt.Kernel.list([u[28]]):n(b)?plt.Kernel.list([u[29]]):V(b)?plt.Kernel.list([]):p(b)?plt.Kernel.list([]):G(b)?plt.Kernel.list([u[30]]):X(b)?plt.Kernel.list([u[31]]):W(b)?plt.Kernel.list([u[32]]):c(b)?plt.Kernel.list([]):P(b)?plt.Kernel.list([u[30]]):plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),u[21])}u[15]=plt.types.String.makeInstance("PERMISSION:SHAKE");
u[26]=plt.types.String.makeInstance("android.permission.ACCESS_COARSE_LOCATION");u[28]=plt.types.String.makeInstance("android.permission.SEND_SMS");u[21]=plt.types.String.makeInstance("cond: fell out of cond");u[32]=plt.types.String.makeInstance("android.permission.WAKE_LOCK");u[30]=plt.types.String.makeInstance("android.permission.INTERNET");u[29]=plt.types.String.makeInstance("android.permission.RECEIVE_SMS");u[27]=plt.types.String.makeInstance("android.permission.ACCESS_FINE_LOCATION");u[31]=plt.types.String.makeInstance("android.permission.ACCESS_COARSE_UPDATES");
u[20]=plt.types.String.makeInstance("PERMISSION:UNIVERSE ~a");u[18]=plt.types.String.makeInstance("PERMISSION:WAKE-LOCK");u[14]=plt.types.String.makeInstance("PERMISSION:TILT");u[25]=plt.types.String.makeInstance("PERMISSION:UNIVERSE");u[17]=plt.types.String.makeInstance("PERMISSION:TELEPHONY");u[24]=plt.types.String.makeInstance("PERMISSION:OPEN-IMAGE-URL");u[13]=plt.types.String.makeInstance("PERMISSION:RECEIVE-SMS");u[12]=plt.types.String.makeInstance("PERMISSION:SEND-SMS");u[19]=plt.types.String.makeInstance("PERMISSION:OPEN-IMAGE-URL ~a");
u[16]=plt.types.String.makeInstance("PERMISSION:INTERNET");u[11]=plt.types.String.makeInstance("PERMISSION:LOCATION");u[23]=plt.types.Rational.makeInstance(0,1);(function(b){(function(){J=D();$=B();da=B();ga=O();na=L();y=o();T=K();aa=U()})(b||plt.Kernel.identity);j.PERMISSION_colon_TILT=ga;j.permission_colon_universe=d;j.make_dash_permission_colon_universe=h;j.permission_colon_universe_question_=P;j.permission_colon_universe_dash_url=f;j.set_dash_permission_colon_universe_dash_url_bang_=x;j.permission_question_=
q;j.string_dash__greaterthan_permission=ha;j.permission_dash__greaterthan_string=ea;j.permission_colon_open_dash_image_dash_url=v;j.make_dash_permission_colon_open_dash_image_dash_url=E;j.permission_colon_open_dash_image_dash_url_question_=c;j.permission_colon_open_dash_image_dash_url_dash_url=C;j.set_dash_permission_colon_open_dash_image_dash_url_dash_url_bang_=g;j.PERMISSION_colon_WAKE_dash_LOCK=aa;j.permission_dash__greaterthan_android_dash_permissions=ka;j.PERMISSION_colon_SEND_dash_SMS=$;j.PERMISSION_colon_SHAKE=
na;j.PERMISSION_colon_TELEPHONY=T;j.PERMISSION_colon_LOCATION=J;j.PERMISSION_colon_RECEIVE_dash_SMS=da;j.PERMISSION_colon_INTERNET=y})()})(this);plt.permission={};
(function(){plt.permission={};function j(n){return permission_colon_location_question_(n)}function u(n){return permission_colon_send_dash_sms_question_(n)}function R(n){return permission_colon_receive_dash_sms_question_(n)}function D(n){return permission_colon_tilt_question_(n)}function Q(n){return permission_colon_shake_question_(n)}function z(n){return permission_colon_internet_question_(n)}function B(n){return permission_colon_telephony_question_(n)}function I(n){return permission_colon_wake_dash_lock_question_(n)}
function N(n){return permission_colon_open_dash_image_dash_url_question_(n)}plt.permission.startupAllPermissions=function(n,m){if(n.length>0){var O=n.pop();plt.permission._runStartupCode(O,n,m)}else m()};plt.permission._runStartupCode=function(n,m,O){var V=plt.platform.Platform.getInstance(),H=plt.world.stimuli;function L(){setTimeout(function(){plt.permission.startupAllPermissions(m,O)},0)}if(j(n)){V.getLocationService().startService();V.getLocationService().addLocationChangeListener(function(G,
M){H.onLocation(G,M)});L()}else if(u(n))L();else if(R(n))L();else if(D(n)){V.getTiltService().startService();V.getTiltService().addOrientationChangeListener(function(G,M,K){H.onTilt(G,M,K)});V.getTiltService().addAccelerationChangeListener(function(G,M,K){H.onAcceleration(G,M,K)});L()}else if(Q(n)){V.getShakeService().startService();V.getShakeService().addListener(function(){H.onShake()});L()}else if(z(n))L();else if(B(n))L();else if(I(n))L();else if(N(n)){var p=permission_colon_open_dash_image_dash_url_dash_url(n),
w=new Image,o=function(){plt.Kernel.detachEvent(w,"load",o);plt.world.Kernel.FileImage.installInstance(p,w);L()};plt.Kernel.attachEvent(w,"load",o);plt.Kernel.attachEvent(w,"error",function(){plt.world.Kernel.FileImage.installBrokenImage(p);L()});w.src=p}else L()};plt.permission.runShutdownCode=function(n){var m=plt.platform.Platform.getInstance();j(n)&&m.getLocationService().shutdownService();u(n);R(n);D(n)&&m.getTiltService().shutdownService();Q(n);z(n);B(n);I(n);N(n)}})();
