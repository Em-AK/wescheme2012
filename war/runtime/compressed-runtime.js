(function(){if(!(window.google&&google.gears)){var i=null;if(typeof GearsFactory!="undefined")i=new GearsFactory;else try{i=new ActiveXObject("Gears.Factory");i.getBuildInfo().indexOf("ie_mobile")!=-1&&i.privateSetGlobalObject(this)}catch(u){if(typeof navigator.mimeTypes!="undefined"&&navigator.mimeTypes["application/x-googlegears"]){i=document.createElement("object");i.style.display="none";i.width=0;i.height=0;i.type="application/x-googlegears";document.documentElement.appendChild(i)}}if(i){window.google||
(google={});if(!google.gears)google.gears={factory:i}}}})();var plt={};plt.types={};
(function(){plt.types=plt.types||{};function i(c,e){c.appendChild(e)}function u(c){function e(){}e.prototype=c;return new e}var Q=0;plt.types.makeEqHashCode=function(){Q++;return Q};plt.types.getEqHashCode=function(c){if(c&&c._eqHashCode)return c._eqHashCode;if(typeof c=="string")return c;return 0};function D(c,e){this._constructorName=c;this._fields=e;this._eqHashCode=plt.types.makeEqHashCode()}plt.types.Struct=D;D.prototype.toWrittenString=function(c){c.put(this,true);var e=[];e.push("(");e.push(this._constructorName);
for(var g=0;g<this._fields.length;g++){e.push(" ");e.push(plt.types.toWrittenString(this._fields[g],c))}e.push(")");return plt.types.String.makeInstance(e.join(""))};D.prototype.toDisplayedString=D.prototype.toWrittenString;D.prototype.toDomNode=function(c){c.put(this,true);var e=document.createElement("div");e.appendChild(document.createTextNode("("));e.appendChild(document.createTextNode(this._constructorName));for(var g=0;g<this._fields.length;g++){e.appendChild(document.createTextNode(" "));i(e,
plt.types.toDomNode(this._fields[g],c))}e.appendChild(document.createTextNode(")"));return e};D.prototype.isEqual=function(c,e){if(typeof c!="object")return false;if(!c._constructorName)return false;if(c._constructorName!=this._constructorName)return false;if(typeof c._fields==="undefined")return false;if(this._fields.length!=c._fields.length)return false;for(var g=0;g<this._fields.length;g++)if(!plt.types.isEqual(this._fields[g],c._fields[g],e))return false;return true};function P(c){plt.types.Struct.call(this,
"box",[c]);this._eqHashCode=plt.types.makeEqHashCode()}P.prototype=u(plt.types.Struct.prototype);P.prototype.unbox=function(){return this._fields[0]};P.prototype.set=function(c){this._fields[0]=c};plt.types.Logic={TRUE:true,FALSE:false};Boolean.prototype.toWrittenString=function(){if(this.valueOf())return"true";return"false"};Boolean.prototype.toDisplayedString=Boolean.prototype.toWrittenString;Boolean.prototype.isEqual=function(c){return this==c};plt.types.Char=function(c){this.val=c;this._eqHashCode=
plt.types.makeEqHashCode()};plt.types.Char.makeInstance=function(c){return new plt.types.Char(c)};plt.types.Char.prototype.toWrittenString=function(){return"#\\"+this.val};plt.types.Char.prototype.toDisplayedString=function(){return this.val};plt.types.Char.prototype.getValue=function(){return this.val};plt.types.Char.prototype.isEqual=function(c){return c instanceof plt.types.Char&&this.val==c.val};plt.types.Symbol=function(c){this.val=c;this._eqHashCode=plt.types.makeEqHashCode()};var z={};plt.types.Symbol.makeInstance=
function(c){c in z||(z[c]=new plt.types.Symbol(c));return z[c]};plt.types.Symbol.prototype.isEqual=function(c){return c instanceof plt.types.Symbol&&this.val==c.val};plt.types.Symbol.prototype.toString=function(){return this.val};plt.types.Symbol.prototype.toWrittenString=function(){return this.val};plt.types.Symbol.prototype.toDisplayedString=function(){return this.val};plt.types.Empty=function(){this._eqHashCode=plt.types.makeEqHashCode()};plt.types.Empty.EMPTY=new plt.types.Empty;plt.types.Empty.prototype.isEqual=
function(c){return c instanceof plt.types.Empty};plt.types.Empty.prototype.first=function(){throw new C("first can't be applied on empty.");};plt.types.Empty.prototype.rest=function(){throw new C("rest can't be applied on empty.");};plt.types.Empty.prototype.isEmpty=function(){return true};plt.types.Empty.prototype.toWrittenString=function(){return"empty"};plt.types.Empty.prototype.toDisplayedString=function(){return"empty"};plt.types.Empty.prototype.append=function(c){return c};plt.types.Cons=function(c,
e){this.f=c;this.r=e;this._eqHashCode=plt.types.makeEqHashCode()};plt.types.Cons.reverse=function(c){for(var e=plt.types.Empty.EMPTY;!c.isEmpty();){e=plt.types.Cons.makeInstance(c.first(),e);c=c.rest()}return e};plt.types.Cons.makeInstance=function(c,e){return new plt.types.Cons(c,e)};plt.types.Cons.prototype.isEqual=function(c,e){if(!(c instanceof plt.types.Cons))return plt.types.Logic.FALSE;return plt.types.isEqual(this.first(),c.first(),e)&&plt.types.isEqual(this.rest(),c.rest(),e)};plt.types.Cons.prototype.first=
function(){return this.f};plt.types.Cons.prototype.rest=function(){return this.r};plt.types.Cons.prototype.isEmpty=function(){return false};plt.types.Cons.prototype.append=function(c){if(c.isEmpty())return this;c=c;for(var e=plt.types.Cons.reverse(this);!e.isEmpty();){c=plt.types.Cons.makeInstance(e.first(),c);e=e.rest()}return c};plt.types.Cons.prototype.toWrittenString=function(c){c.put(this,true);for(var e=[],g=this;!g.isEmpty();){e.push(plt.types.toWrittenString(g.first(),c));g=g.rest()}return"("+
e.join(" ")+")"};plt.types.Cons.prototype.toDisplayedString=function(c){c.put(this,true);for(var e=[],g=this;!g.isEmpty();){e.push(plt.types.toDisplayedString(g.first(),c));g=g.rest()}return"("+e.join(" ")+")"};plt.types.Cons.prototype.toDomNode=function(c){c.put(this,true);var e=document.createElement("div");e.appendChild(document.createTextNode("("));for(var g=this;!g.isEmpty();){i(e,plt.types.toDomNode(g.first(),c));g=g.rest();g.isEmpty()||i(e,document.createTextNode(" "))}e.appendChild(document.createTextNode(")"));
return e};plt.types.Vector=function(c,e){this.elts=new Array(c);if(e)for(var g=0;g<c;g++)this.elts[g]=e[g];else for(g=0;g<c;g++)this.elts[g]=undefined;this._eqHashCode=plt.types.makeEqHashCode()};plt.types.Vector.makeInstance=function(c,e){return new plt.types.Vector(c,e)};plt.types.Vector.prototype.length=function(){return this.elts.length};plt.types.Vector.prototype.ref=function(c){return this.elts[c]};plt.types.Vector.prototype.set=function(c,e){this.elts[c]=e};plt.types.Vector.prototype.isEqual=
function(c,e){if(c!=null&&c!=undefined&&c instanceof plt.types.Vector){if(c.length()!=this.length())return false;for(var g=0;g<this.length();g++)if(!plt.types.isEqual(this.elts[g],c.elts[g],e))return false;return true}else return false};plt.types.Vector.prototype.toWrittenString=function(c){c.put(this,true);for(var e=[],g=0;g<this.length();g++)e.push(plt.types.toWrittenString(this.ref(g),c));return"#("+e.join(" ")+")"};plt.types.Vector.prototype.toDisplayedString=function(c){c.put(this,true);for(var e=
[],g=0;g<this.length();g++)e.push(plt.types.toDisplayedString(this.ref(g),c));return"#("+e.join(" ")+")"};plt.types.Vector.prototype.toDomNode=function(c){c.put(this,true);var e=document.createElement("div");e.appendChild(document.createTextNode("#("));for(var g=0;g<this.length();g++)i(e,plt.types.toDomNode(this.ref(g),c));e.appendChild(document.createTextNode(")"));return e};function A(c,e){for(;e!=0;){var g=c;c=e;e=g%e}return Math.abs(c)}function I(c,e){return Math.abs(c*e/A(c,e))}function M(c,
e){var g;if(isNaN(c)||!isFinite(c))throw new C("not a number: "+c);if(isNaN(e)||!isFinite(e))throw new C("not a number: "+e);for(;e!=0;){g=c;c=e;e=g%e}return c}plt.types.Rational=function(c,e){if(e==undefined)e=1;if(e==0)throw new C("cannot have zero denominator.");var g=M(Math.abs(c),Math.abs(e));this.n=c/g;this.d=e/g;this._eqHashCode=plt.types.makeEqHashCode()};plt.types.Rational.prototype.toWrittenString=function(){return this.d==1?this.n+"":this.n+"/"+this.d};plt.types.Rational.prototype.toDisplayedString=
plt.types.Rational.prototype.toWrittenString;plt.types.Rational.prototype.level=function(){return 0};plt.types.Rational.prototype.lift=function(c){if(c.level()==1)return m.makeInstance(this.n/this.d);if(c.level()==2)return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO);throw new C("invalid level of Number");};plt.types.Rational.prototype.isFinite=function(){return true};plt.types.Rational.prototype.isEqual=function(c){return this.equals(c)};plt.types.Rational.prototype.equals=function(c){return c instanceof
plt.types.Rational&&this.n==c.n&&this.d==c.d};plt.types.Rational.prototype.isInteger=function(){return this.d==1};plt.types.Rational.prototype.isRational=function(){return true};plt.types.Rational.prototype.isReal=function(){return true};plt.types.Rational.prototype.add=function(c){return plt.types.Rational.makeInstance(this.n*c.d+this.d*c.n,this.d*c.d)};plt.types.Rational.prototype.subtract=function(c){return plt.types.Rational.makeInstance(this.n*c.d-this.d*c.n,this.d*c.d)};plt.types.Rational.prototype.multiply=
function(c){return plt.types.Rational.makeInstance(this.n*c.n,this.d*c.d)};plt.types.Rational.prototype.divide=function(c){if(this.d*c.n==0)throw new C("division by zero");return plt.types.Rational.makeInstance(this.n*c.d,this.d*c.n)};plt.types.Rational.prototype.toExact=function(){return this};plt.types.Rational.prototype.isExact=function(){return true};plt.types.Rational.prototype.toFixnum=function(){return Math.floor(this.n/this.d)};plt.types.Rational.prototype.numerator=function(){return plt.types.Rational.makeInstance(this.n)};
plt.types.Rational.prototype.denominator=function(){return plt.types.Rational.makeInstance(this.d)};plt.types.Rational.prototype.toFloat=function(){return this.n/this.d};plt.types.Rational.prototype.toComplex=function(){return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO)};plt.types.Rational.prototype.greaterThan=function(c){return this.n*c.d>this.d*c.n};plt.types.Rational.prototype.greaterThanOrEqual=function(c){return this.n*c.d>=this.d*c.n};plt.types.Rational.prototype.lessThan=
function(c){return this.n*c.d<this.d*c.n};plt.types.Rational.prototype.lessThanOrEqual=function(c){return this.n*c.d<=this.d*c.n};plt.types.Rational.prototype.sqrt=function(){if(this.n>=0){var c=Math.sqrt(this.n),e=Math.sqrt(this.d);return Math.floor(c)==c&&Math.floor(e)==e?plt.types.Rational.makeInstance(c,e):m.makeInstance(c/e)}else{c=Math.sqrt(-this.n);e=Math.sqrt(this.d);return Math.floor(c)==c&&Math.floor(e)==e?plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.makeInstance(c,
e)):plt.types.Complex.makeInstance(plt.types.Rational.ZERO,m.makeInstance(c/e))}};plt.types.Rational.prototype.abs=function(){return plt.types.Rational.makeInstance(Math.abs(this.n),this.d)};plt.types.Rational.prototype.floor=function(){return plt.types.Rational.makeInstance(Math.floor(this.n/this.d),1)};plt.types.Rational.prototype.ceiling=function(){return plt.types.Rational.makeInstance(Math.ceil(this.n/this.d),1)};plt.types.Rational.prototype.conjugate=plt.types.Rational.prototype.abs;plt.types.Rational.prototype.magnitude=
plt.types.Rational.prototype.abs;plt.types.Rational.prototype.log=function(){return m.makeInstance(Math.log(this.n/this.d))};plt.types.Rational.prototype.angle=function(){if(0==this.n)return plt.types.Rational.ZERO;return this.n>0?plt.types.Rational.ZERO:m.pi};plt.types.Rational.prototype.atan=function(){return m.makeInstance(Math.atan(this.n/this.d))};plt.types.Rational.prototype.cos=function(){return m.makeInstance(Math.cos(this.n/this.d))};plt.types.Rational.prototype.sin=function(){return m.makeInstance(Math.sin(this.n/
this.d))};plt.types.Rational.prototype.expt=function(c){return m.makeInstance(Math.pow(this.n/this.d,c.n/c.d))};plt.types.Rational.prototype.exp=function(){return m.makeInstance(Math.exp(this.n/this.d))};plt.types.Rational.prototype.acos=function(){return m.makeInstance(Math.acos(this.n/this.d))};plt.types.Rational.prototype.asin=function(){return m.makeInstance(Math.asin(this.n/this.d))};plt.types.Rational.prototype.imag_dash_part=function(){return plt.types.Rational.ZERO};plt.types.Rational.prototype.real_dash_part=
function(){return this};plt.types.Rational.prototype.timesI=function(){return plt.types.Complex.makeInstance(plt.types.Rational.ZERO,this)};plt.types.Rational.prototype.round=function(){if(this.d==2){var c=this.n/this.d,e=Math.floor(c);c=Math.ceil(c);return e%2==0?plt.types.Rational.makeInstance(e):plt.types.Rational.makeInstance(c)}else return plt.types.Rational.makeInstance(Math.round(this.n/this.d))};plt.types.Rational.prototype.half=function(){return plt.types.Rational.makeInstance(this.n,this.d*
2)};plt.types.Rational.prototype.minus=function(){return plt.types.Rational.makeInstance(0-this.n,this.d)};var n={};plt.types.Rational.makeInstance=function(c,e){if(c==undefined)throw new C("n undefined");if(e==undefined)e=1;if(e<0){c=-c;e=-e}if(isNaN(c)||isNaN(e))return m.nan;if(!isFinite(e))return Rational.ZERO;if(!isFinite(c))return m.makeInstance(c);return e==1&&c in n?n[c]:new plt.types.Rational(c,e)};n={};(function(){var c;for(c=-500;c<500;c++)n[c]=new plt.types.Rational(c,1)})();plt.types.Rational.NEGATIVE_ONE=
n[-1];plt.types.Rational.ZERO=n[0];plt.types.Rational.ONE=n[1];plt.types.Rational.TWO=n[2];function m(c){this.n=c;this._eqHashCode=plt.types.makeEqHashCode()}plt.types.FloatPoint=m;var O=new m(Number.NaN),V=new m(Number.POSITIVE_INFINITY),H=new m(Number.NEGATIVE_INFINITY);m.pi=new m(Math.PI);m.e=new m(Math.E);m.nan=O;m.inf=V;m.neginf=H;m.makeInstance=function(c){if(isNaN(c))return m.nan;else if(c===Number.POSITIVE_INFINITY)return m.inf;else if(c===Number.NEGATIVE_INFINITY)return m.neginf;return new m(c)};
m.prototype.isFinite=function(){return isFinite(this.n)};m.prototype.toExact=function(){return plt.types.Rational.makeInstance(Math.floor(this.n),1)};m.prototype.isExact=function(){return false};m.prototype.level=function(){return 1};m.prototype.lift=function(){return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO)};m.prototype.toWrittenString=function(){return this.n==Number.POSITIVE_INFINITY?"+inf.0":this.n==Number.NEGATIVE_INFINITY?"-inf.0":this.n==Number.NaN?"+nan.0":this.n.toString()};
m.prototype.toDisplayedString=m.prototype.toWrittenString;m.prototype.isEqual=function(c){return c instanceof m&&(this.n==c.n||isNaN(this.n)&&isNaN(c.n))};m.prototype.equals=function(c){return c instanceof m&&this.n==c.n};m.prototype.isRational=function(){return this.isFinite()&&this.n==Math.floor(this.n)};m.prototype.isInteger=function(){return this.isFinite()&&this.n==Math.floor(this.n)};m.prototype.isReal=function(){return true};function L(c){return o.lessThan(c,plt.types.Rational.ZERO)?-1:o.greaterThan(c,
plt.types.Rational.ZERO)?1:0}m.prototype.add=function(c){return this.isFinite()&&c.isFinite()?m.makeInstance(this.n+c.n):isNaN(this.n)||isNaN(c.n)?O:this.isFinite()&&!c.isFinite()?c:!this.isFinite()&&c.isFinite()?this:L(this)*L(c)==1?this:O};m.prototype.subtract=function(c){return this.isFinite()&&c.isFinite()?m.makeInstance(this.n-c.n):isNaN(this.n)||isNaN(c.n)?O:!this.isFinite()&&!c.isFinite()?L(this)==L(c)?O:this:this.isFinite()?o.multiply(c,plt.types.Rational.NEGATIVE_ONE):this};m.prototype.multiply=
function(c){if(this.n==0||c.n==0)return plt.types.Rational.ZERO;return this.isFinite()&&c.isFinite()?m.makeInstance(this.n*c.n):isNaN(this.n)||isNaN(c.n)?O:L(this)*L(c)==1?V:H};m.prototype.divide=function(c){if(this.isFinite()&&c.isFinite()){if(c.n==0)throw new C("division by zero");return m.makeInstance(this.n/c.n)}else if(isNaN(this.n)||isNaN(c.n))return O;else if(!this.isFinite()&&!c.isFinite())return O;else if(this.isFinite()&&!c.isFinite())return m.makeInstance(0);else if(!this.isFinite()&&c.isFinite())return L(this)*
L(c)==1?V:H};m.prototype.toFixnum=function(){return Math.floor(this.n)};m.prototype.numerator=function(){var c=this.n.toString();return(c=c.match(/^(.*)\.(.*)$/))?m.makeInstance(parseFloat(c[1]+c[2])):this};m.prototype.denominator=function(){var c=this.n.toString();return(c=c.match(/^(.*)\.(.*)$/))?m.makeInstance(Math.pow(10,c[2].length)):m.makeInstance(1)};m.prototype.toFloat=function(){return this.n};m.prototype.toComplex=function(){return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO)};
m.prototype.floor=function(){if(!isFinite(this.n))return this;return plt.types.Rational.makeInstance(Math.floor(this.n),1)};m.prototype.ceiling=function(){if(!isFinite(this.n))return this;return plt.types.Rational.makeInstance(Math.ceil(this.n),1)};m.prototype.greaterThan=function(c){return this.n>c.n};m.prototype.greaterThanOrEqual=function(c){return this.n>=c.n};m.prototype.lessThan=function(c){return this.n<c.n};m.prototype.lessThanOrEqual=function(c){return this.n<=c.n};m.prototype.sqrt=function(){if(this.n<
0){var c=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,m.makeInstance(Math.sqrt(-this.n)));return c}else return m.makeInstance(Math.sqrt(this.n))};m.prototype.abs=function(){return m.makeInstance(Math.abs(this.n))};m.prototype.log=function(){return this.n<0?this.toComplex().log():m.makeInstance(Math.log(this.n))};m.prototype.angle=function(){if(0==this.n)return plt.types.Rational.ZERO;return this.n>0?plt.types.Rational.ZERO:m.pi};m.prototype.atan=function(){return m.makeInstance(Math.atan(this.n))};
m.prototype.cos=function(){return m.makeInstance(Math.cos(this.n))};m.prototype.sin=function(){return m.makeInstance(Math.sin(this.n))};m.prototype.expt=function(c){if(this.n==1){c.isFinite()||isNaN(c.n);return this}else return m.makeInstance(Math.pow(this.n,c.n))};m.prototype.exp=function(){return m.makeInstance(Math.exp(this.n))};m.prototype.acos=function(){return m.makeInstance(Math.acos(this.n))};m.prototype.asin=function(){return m.makeInstance(Math.asin(this.n))};m.prototype.imag_dash_part=
function(){return plt.types.Rational.ZERO};m.prototype.real_dash_part=function(){return this};m.prototype.round=function(){if(isFinite(this.n))if(Math.abs(Math.floor(this.n)-this.n)==0.5){if(Math.floor(this.n)%2==0)return plt.types.Rational.makeInstance(Math.floor(this.n));return plt.types.Rational.makeInstance(Math.ceil(this.n))}else return plt.types.Rational.makeInstance(Math.round(this.n));else return this};m.prototype.conjugate=m.prototype.abs;m.prototype.magnitude=m.prototype.abs;m.prototype.minus=
function(){return m.makeInstance(0-this.n)};m.prototype.half=function(){return m.makeInstance(this.n/2)};m.prototype.timesI=function(){return plt.types.Complex.makeInstance(plt.types.Rational.ZERO,this)};plt.types.Complex=function(c,e){this.r=c;this.i=e;this._eqHashCode=plt.types.makeEqHashCode()};plt.types.Complex.makeInstance=function(c,e){if(typeof c=="number")c=c==Math.floor(c)?plt.types.Rational.makeInstance(c):m.makeInstance(c);if(typeof e=="number")e=e==Math.floor(e)?plt.types.Rational.makeInstance(e):
m.makeInstance(e);return c=new plt.types.Complex(c,e)};plt.types.Complex.prototype.toWrittenString=function(){return o.greaterThanOrEqual(this.i,plt.types.Rational.ZERO)?plt.types.toWrittenString(this.r)+"+"+plt.types.toWrittenString(this.i)+"i":plt.types.toWrittenString(this.r)+plt.types.toWrittenString(this.i)+"i"};plt.types.Complex.prototype.toDisplayedString=plt.types.Complex.prototype.toWrittenString;plt.types.Complex.prototype.isFinite=function(){return this.r.isFinite()&&this.i.isFinite()};
plt.types.Complex.prototype.isRational=function(){return this.r.isRational()&&o.equal(this.i,plt.types.Rational.ZERO)};plt.types.Complex.prototype.isInteger=function(){return this.r.isInteger()&&o.equal(this.i,plt.types.Rational.ZERO)};plt.types.Complex.prototype.toExact=function(){if(!this.isReal())throw new C("inexact->exact: expects argument of type real number");return this.r.toExact()};plt.types.Complex.prototype.isExact=function(){return this.r.isExact()&&this.i.isExact()};plt.types.Complex.prototype.level=
function(){return 2};plt.types.Complex.prototype.lift=function(){throw new C("Don't know how to lift Complex number");};plt.types.Complex.prototype.isEqual=function(c){return this.equals(c)};plt.types.Complex.prototype.equals=function(c){return c=c instanceof plt.types.Complex&&o.equal(this.r,c.r)&&o.equal(this.i,c.i)};plt.types.Complex.prototype.greaterThan=function(c){if(!this.isReal()||!c.isReal())throw new C(">: expects argument of type real number");return o.greaterThan(this.r,c.r)};plt.types.Complex.prototype.greaterThanOrEqual=
function(c){if(!this.isReal()||!c.isReal())throw new C(">: expects argument of type real number");return o.greaterThanOrEqual(this.r,c.r)};plt.types.Complex.prototype.lessThan=function(c){if(!this.isReal()||!c.isReal())throw new C(">: expects argument of type real number");return o.lessThan(this.r,c.r)};plt.types.Complex.prototype.lessThanOrEqual=function(c){if(!this.isReal()||!c.isReal())throw new C(">: expects argument of type real number");return o.lessThanOrEqual(this.r,c.r)};plt.types.Complex.prototype.abs=
function(){if(!o.equal(this.i,plt.types.Rational.ZERO).valueOf())throw new C("abs: expects argument of type real number");return this.r.abs()};plt.types.Complex.prototype.toFixnum=function(){if(!o.equal(this.i,plt.types.Rational.ZERO).valueOf())throw new C("toFixnum: expects argument of type real number");return this.r.toFixnum()};plt.types.Complex.prototype.numerator=function(){if(!this.isReal())throw new C("numerator: can only be applied to real number");return this.n.numerator()};plt.types.Complex.prototype.denominator=
function(){if(!this.isReal())throw new C("floor: can only be applied to real number");return this.n.denominator()};plt.types.Complex.prototype.toFloat=function(){if(!o.equal(this.i,plt.types.Rational.ZERO).valueOf())throw new C("toFloat: expects argument of type real number");return this.r.toFloat()};plt.types.Complex.prototype.toComplex=function(){return this};plt.types.Complex.prototype.add=function(c){return plt.types.Complex.makeInstance(o.add(this.r,c.r),o.add(this.i,c.i))};plt.types.Complex.prototype.subtract=
function(c){return plt.types.Complex.makeInstance(o.subtract(this.r,c.r),o.subtract(this.i,c.i))};plt.types.Complex.prototype.multiply=function(c){if(c.isReal())return plt.types.Complex.makeInstance(o.multiply(this.r,c.r),o.multiply(this.i,c.r));var e=o.subtract(o.multiply(this.r,c.r),o.multiply(this.i,c.i));c=o.add(o.multiply(this.r,c.i),o.multiply(this.i,c.r));if(o.equal(c,plt.types.Rational.ZERO))return e;return plt.types.Complex.makeInstance(e,c)};plt.types.Complex.prototype.divide=function(c){if(c.isReal())return plt.types.Complex.makeInstance(o.divide(this.r,
c.r),o.divide(this.i,c.r));var e=c.conjugate(),g=o.multiply(this,e).toComplex();c=o.multiply(c,e);return g=plt.types.Complex.makeInstance(o.divide(g.r,c),o.divide(g.i,c))};plt.types.Complex.prototype.conjugate=function(){var c=plt.types.Complex.makeInstance(this.r,o.subtract(plt.types.Rational.ZERO,this.i));return c};plt.types.Complex.prototype.magnitude=function(){var c=o.add(o.multiply(this.r,this.r),o.multiply(this.i,this.i));return c.sqrt()};plt.types.Complex.prototype.isReal=function(){return o.equal(this.i,
plt.types.Rational.ZERO)};plt.types.Complex.prototype.sqrt=function(){if(this.isReal())return this.r.sqrt();var c=o.add(this.magnitude(),this.r),e=c.half().sqrt();c=o.divide(this.i,o.multiply(c,m.makeInstance(2)).sqrt());return plt.types.Complex.makeInstance(e,c)};plt.types.Complex.prototype.log=function(){var c=this.magnitude(),e=this.angle();return c=o.add(c.log(),e.timesI())};plt.types.Complex.prototype.angle=function(){if(this.isReal())return this.r.angle();if(o.equal(plt.types.Rational.ZERO,
this.r)){var c=m.pi.half();return o.greaterThan(this.i,plt.types.Rational.ZERO)?c:c.minus()}else{c=o.divide(this.i.abs(),this.r.abs()).atan();return o.greaterThan(this.r,plt.types.Rational.ZERO)?o.greaterThan(this.i,plt.types.Rational.ZERO)?c:c.minus():o.greaterThan(this.i,plt.types.Rational.ZERO)?m.pi.subtract(c):c.subtract(m.pi)}};var q=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.ONE),w=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.NEGATIVE_ONE);
plt.types.Complex.prototype.atan=function(){if(o.equal(this,q)||o.equal(this,w))return m.makeInstance(Number.NEGATIVE_INFINITY);return o.multiply(q,o.multiply(m.makeInstance(0.5),o.divide(o.add(q,this),o.add(q,o.subtract(plt.types.Rational.ZERO,this))).log()))};plt.types.Complex.prototype.cos=function(){if(this.isReal())return this.r.cos();var c=this.timesI(),e=c.minus();return o.add(c.exp(),e.exp()).half()};plt.types.Complex.prototype.sin=function(){if(this.isReal())return this.r.sin();var c=this.timesI(),
e=c.minus(),g=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.TWO);c=o.subtract(c.exp(),e.exp());return g=o.divide(c,g)};plt.types.Complex.prototype.expt=function(c){c=o.multiply(c,this.log());return c.exp()};plt.types.Complex.prototype.exp=function(){var c=this.r.exp(),e=this.i.cos(),g=this.i.sin();return o.multiply(c,o.add(e,g.timesI()))};plt.types.Complex.prototype.acos=function(){if(this.isReal())return this.r.acos();var c=m.pi.half(),e=this.timesI(),g=o.subtract(plt.types.Rational.ONE,
this.multiply(this)).sqrt();e=o.add(e,g).log().timesI();return o.add(c,e)};plt.types.Complex.prototype.asin=function(){if(this.isReal())return this.r.asin();var c=o.subtract(plt.types.Rational.ONE,this.multiply(this));c=c.sqrt();return o.multiply(plt.types.Rational.TWO,o.divide(this,o.add(plt.types.Rational.ONE,c)).atan())};plt.types.Complex.prototype.ceiling=function(){if(!this.isReal())throw new C("ceiling: can only be applied to real number");return this.r.ceiling()};plt.types.Complex.prototype.floor=
function(){if(!this.isReal())throw new C("floor: can only be applied to real number");return this.r.floor()};plt.types.Complex.prototype.imag_dash_part=function(){return this.i};plt.types.Complex.prototype.real_dash_part=function(){return this.r};plt.types.Complex.prototype.round=function(){return this.r.round()};plt.types.Complex.prototype.timesI=function(){return this.multiply(plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.ONE))};plt.types.Complex.prototype.minus=function(){return plt.types.Complex.makeInstance(o.subtract(plt.types.Rational.ZERO,
this.r),o.subtract(plt.types.Rational.ZERO,this.i))};plt.types.Complex.prototype.half=function(){return plt.types.Complex.makeInstance(this.r.half(),this.i.half())};var o={};plt.types.NumberTower=o;o.toFixnum=function(c){return c.toFixnum()};o.toFloat=function(c){return c.toFloat()};o.abs=function(c){return c.abs()};o.isFinite=function(c){return c.isFinite()};o.toExact=function(c){return c.toExact()};o.add=function(c,e){if(c.level()<e.level())c=c.lift(e);if(e.level()<c.level())e=e.lift(c);return c.add(e)};
o.subtract=function(c,e){if(c.level()<e.level())c=c.lift(e);if(e.level()<c.level())e=e.lift(c);return c.subtract(e)};o.multiply=function(c,e){if(c.level()<e.level())c=c.lift(e);if(e.level()<c.level())e=e.lift(c);return c.multiply(e)};o.divide=function(c,e){if(c.level()<e.level())c=c.lift(e);if(e.level()<c.level())e=e.lift(c);return c.divide(e)};o.equal=function(c,e){if(c.level()<e.level())c=c.lift(e);if(e.level()<c.level())e=e.lift(c);return c.equals(e)};o.eqv=function(c,e){return c===e||c.level()===
e.level()&&c.equals(e)};o.approxEqual=function(c,e,g){return o.lessThan(o.abs(o.subtract(c,e)),g)};o.greaterThanOrEqual=function(c,e){if(c.level()<e.level())c=c.lift(e);if(e.level()<c.level())e=e.lift(c);if(!(c.isReal()&&e.isReal()))throw new C("greaterThanOrEqual: couldn't be applied to complex number");return c.greaterThanOrEqual(e)};o.lessThanOrEqual=function(c,e){if(c.level()<e.level())c=c.lift(e);if(e.level()<c.level())e=e.lift(c);if(!(c.isReal()&&e.isReal()))throw new C("lessThanOrEqual: couldn't be applied to complex number");
return c.lessThanOrEqual(e)};o.greaterThan=function(c,e){if(c.level()<e.level())c=c.lift(e);if(e.level()<c.level())e=e.lift(c);if(!(c.isReal()&&e.isReal()))throw new C("greaterThan: couldn't be applied to complex number");return c.greaterThan(e)};o.lessThan=function(c,e){if(c.level()<e.level())c=c.lift(e);if(e.level()<c.level())e=e.lift(c);if(!(c.isReal()&&e.isReal()))throw new C("lessThan: couldn't be applied to complex number");return c.lessThan(e)};o.modulo=function(c,e){c=plt.types.Rational.makeInstance(c.toFixnum()%
e.toFixnum(),1);if(o.lessThan(e,plt.types.Rational.ZERO)){if(o.lessThanOrEqual(c,plt.types.Rational.ZERO))return c;return o.add(c,e)}else{if(o.lessThan(c,plt.types.Rational.ZERO))return o.add(c,e);return c}};o.sqr=function(c){return o.multiply(c,c)};o.expt=function(c,e){if(c.level()<e.level())c=c.lift(e);if(e.level()<c.level())e=e.lift(c);return c.expt(e)};o.gcd=function(c,e){c=Math.abs(c.toFixnum());for(var g=0;g<e.length;g++)c=A(c,e[g].toFixnum());return plt.types.Rational.makeInstance(c)};o.lcm=
function(c,e){c=Math.abs(c.toFixnum());if(c==0)return plt.types.Rational.ZERO;for(var g=0;g<e.length;g++){if(e[g].toFixnum()==0)return plt.types.Rational.ZERO;c=I(c,e[g].toFixnum())}return plt.types.Rational.makeInstance(c)};plt.types.String=String;plt.types.String.makeInstance=function(c){return c.valueOf()};plt.types.String.prototype.isEqual=function(c){return this==c};var G=new RegExp('["\\\\]',"g");plt.types.String.prototype.toWrittenString=function(){return'"'+this.replace(G,function(c){return"\\"+
c})+'"'};plt.types.String.prototype.toDisplayedString=function(){return this};function N(){return new plt._Hashtable(function(c){return plt.types.getEqHashCode(c)},function(c,e){return c===e})}plt.types.makeLowLevelEqHash=N;function K(){this.hash=N();this._eqHashCode=plt.types.makeEqHashCode()}plt.types.EqHashTable=K;K.prototype.toWrittenString=function(){return"<hash>"};K.prototype.toDisplayedString=function(){return"<hash>"};K.prototype.isEqual=function(c){if(c==undefined||c==null||!(c instanceof
K))return false;if(this.hash.keys().length!=c.hash.keys().length)return false;for(var e=this.hash.keys(),g=0;g<e.length;g++)if(this.hash.get(e[g])!==c.hash.get(e[g]))return false;return true};function W(){this.hash=new plt._Hashtable(function(c){return plt.types.toWrittenString(c)},function(c,e){return plt.Kernel.equal_question_(c,e)});this._eqHashCode=plt.types.makeEqHashCode()}plt.types.EqualHashTable=W;W.prototype.toWrittenString=function(){return"<hash>"};W.prototype.toDisplayedString=function(){return"<hash>"};
W.prototype.isEqual=function(c,e){if(c==undefined||c==null||!(c instanceof W))return false;if(this.hash.keys().length!=c.hash.keys().length)return false;for(var g=this.hash.keys(),f=0;f<g.length;f++)if(!plt.Kernel.isEqual(this.hash.get(g[f]),c.hash.get(g[f]),e))return false;return true};plt.types.toWrittenString=function(c,e){e||(e=N());if(c&&e.containsKey(c))return"...";if(c==undefined||c==null)return"<undefined>";if(typeof c=="string")return c.toWrittenString();if(typeof c!="object"&&typeof c!=
"function")return c.toString();if(typeof c.toWrittenString!=="undefined")return c.toWrittenString(e);return typeof c.toDisplayedString!=="undefined"?c.toDisplayedString(e):c.toString()};plt.types.toDisplayedString=function(c,e){e||(e=N());if(c&&e.containsKey(c))return"...";if(c==undefined||c==null)return"<undefined>";if(typeof c=="string")return c.toDisplayedString();if(typeof c!="object"&&typeof c!="function")return c.toString();if(typeof c.toWrittenString!=="undefined")return c.toWrittenString(e);
return typeof c.toDisplayedString!=="undefined"?c.toDisplayedString(e):c.toString()};plt.types.toDomNode=function(c,e){e||(e=N());if(c&&e.containsKey(c))return document.createTextNode("...");if(c==undefined||c==null)return c=document.createTextNode("<undefined>");if(typeof c=="string")return c=document.createTextNode(c.toWrittenString());if(typeof c!="object"&&typeof c!="function")return c=document.createTextNode(c.toString());if(c.nodeType)return c;if(typeof c.toDomNode!=="undefined")return c.toDomNode(e);
if(typeof c.toWrittenString!=="undefined")return c=document.createTextNode(plt.types.toWrittenString(c,e));return c=typeof c.toDisplayedString!=="undefined"?document.createTextNode(plt.types.toDisplayedString(c,e)):document.createTextNode(c.toString())};function S(c){return c!=null&&c!=undefined&&(c instanceof plt.types.Rational||c instanceof plt.types.FloatPoint||c instanceof plt.types.Complex)}plt.types.isNumber=S;plt.types.isEqual=function(c,e,g){if(c===e)return true;if(S(c)&&S(e))return o.equal(c,
e);if(c==undefined||c==null)return e==undefined||e==null;if(typeof c=="object"&&typeof e=="object"&&g.find(c)===g.find(e))return true;else{typeof c=="object"&&typeof e=="object"&&g.merge(c,e);return c.isEqual(e,g)}};plt.types.liftToplevelToFunctionValue=function(c,e,g,f){if(!c._mobyLiftedFunction){var x=function(R){return c.apply(null,R.slice(0,g).concat([R.slice(g)]))};x._eqHashCode=plt.types.makeEqHashCode();x.isEqual=function(R){return this===R};x.toWrittenString=function(){return"<function:"+
e+">"};x.toDisplayedString=x.toWrittenString;x.procedureArity=f;c._mobyLiftedFunction=x}return c._mobyLiftedFunction};function T(c){this.msg=c}T.prototype.name="MobyError";T.prototype.toString=function(){return this.name+": "+this.msg};function X(c,e){T.call(this,c);this.loc=e}X.prototype=u(T.prototype);X.prototype.name="MobyParserError";function v(c,e){T.call(this,c);this.stx=e}v.prototype=u(T.prototype);v.prototype.name="MobySyntaxError";function E(c){T.call(this,c)}E.prototype=u(T.prototype);E.prototype.name=
"MobyTypeError";function C(c){T.call(this,c)}C.prototype=u(T.prototype);C.prototype.name="MobyRuntimeError";function h(c){T.call(this,c)}h.prototype=u(C.prototype);h.prototype.name="MobyTestingError";plt.types.MobyError=T;plt.types.MobyParserError=X;plt.types.MobySyntaxError=v;plt.types.MobyTypeError=E;plt.types.MobyRuntimeError=C;plt.types.MobyTestingError=h;plt.types.Box=P})();
plt._Hashtable=function(){function i(v){return typeof v==="undefined"}function u(v){return typeof v==="function"}function Q(v){return typeof v==="string"}function D(v,E){return u(v[E])}function P(v){return D(v,"equals")}function z(v){return D(v,"hashCode")}function A(v){if(Q(v))return v;else if(z(v)){var E=v.hashCode();if(!Q(E))return A(E);return E}else return D(v,"toString")?v.toString():String(v)}function I(v,E){return v.equals(E)}function M(v,E){return P(E)?E.equals(v):v===E}function n(v,E){return v===
E}function m(v,E,C,h,c){for(var e,g=0,f=v.length;g<f;g++){e=v[g];if(c(E,C(e)))return h?[g,e]:true}return false}function O(v,E){if(D(v,"splice"))v.splice(E,1);else if(E===v.length-1)v.length=E;else{var C=v.slice(E+1);v.length=E;for(var h=0,c=C.length;h<c;h++)v[E+h]=C[h]}}function V(v,E){if(v===null)throw new Error("null is not a valid "+E);else if(i(v))throw new Error(E+" must not be undefined");}var H="key",L="value";function q(v){V(v,H)}function w(v){V(v,L)}function o(v,E,C){this.entries=[];this.addEntry(v,
E);if(C!==null)this.getEqualityFunction=function(){return C}}function G(v){return v[0]}function N(v){return v[1]}o.prototype={getEqualityFunction:function(v){return P(v)?I:M},searchForEntry:function(v){return m(this.entries,v,G,true,this.getEqualityFunction(v))},getEntryForKey:function(v){return this.searchForEntry(v)[1]},getEntryIndexForKey:function(v){return this.searchForEntry(v)[0]},removeEntryForKey:function(v){var E=this.searchForEntry(v);if(E){O(this.entries,E[0]);return true}return false},
addEntry:function(v,E){this.entries[this.entries.length]=[v,E]},size:function(){return this.entries.length},keys:function(v){for(var E=v.length,C=0,h=this.entries.length;C<h;C++)v[E+C]=this.entries[C][0]},values:function(v){for(var E=v.length,C=0,h=this.entries.length;C<h;C++)v[E+C]=this.entries[C][1]},containsKey:function(v){return m(this.entries,v,G,false,this.getEqualityFunction(v))},containsValue:function(v){return m(this.entries,v,N,false,n)}};function K(){}K.prototype=[];function W(v){return v[0]}
function S(v,E,C){return m(v,E,W,true,C)}function T(v,E){var C=v[E];if(C&&C instanceof K)return C[1];return null}function X(v,E){var C=[],h={};v=u(v)?v:A;E=u(E)?E:null;this.put=function(c,e){q(c);w(e);var g=v(c),f=T(h,g);if(f){var x=f.getEntryForKey(c);if(x)x[1]=e;else f.addEntry(c,e)}else{var R=new K;R[0]=g;R[1]=new o(c,e,E);C[C.length]=R;h[g]=R}};this.get=function(c){q(c);var e=v(c),g=T(h,e);if(g){var f=g.getEntryForKey(c);if(f)return f[1]}return null};this.containsKey=function(c){q(c);var e=v(c),
g=T(h,e);if(g)return g.containsKey(c);return false};this.containsValue=function(c){w(c);for(var e=0,g=C.length;e<g;e++)if(C[e][1].containsValue(c))return true;return false};this.clear=function(){C.length=0;h={}};this.isEmpty=function(){return C.length===0};this.keys=function(){for(var c=[],e=0,g=C.length;e<g;e++)C[e][1].keys(c);return c};this.values=function(){for(var c=[],e=0,g=C.length;e<g;e++)C[e][1].values(c);return c};this.remove=function(c){q(c);var e=v(c),g=T(h,e);if(g)if(g.removeEntryForKey(c))if(g.size()===
0){var f=S(C,e,g.getEqualityFunction(c));O(C,f[0]);delete h[e]}};this.size=function(){for(var c=0,e=0,g=C.length;e<g;e++)c+=C[e][1].size();return c}}return X}();plt.Kernel={};
(function(){var i=plt.types.NumberTower,u=plt.types.MobySyntaxError,Q=plt.types.MobyTypeError,D=plt.types.MobyRuntimeError,P=plt.types.MobyTestingError;if(!Array.indexOf)Array.prototype.indexOf=function(b){for(var d=0;d<this.length;d++)if(this[d]==b)return d;return-1};function z(b,d,l){b.addEventListener?b.addEventListener(d,l,false):b.attachEvent("on"+d,l,false)}function A(b,d,l){b.addEventListener?b.removeEventListener(d,l,false):b.detachEvent("on"+d,l,false)}function I(b){function d(){}d.prototype=
b;return new d}function M(){this.parentMap=plt.types.makeLowLevelEqHash()}M.prototype.find=function(b){var d=this.parentMap.containsKey(b)?this.parentMap.get(b):b;if(d===b)return d;else{d=this.find(d);this.parentMap.put(b,d);return d}};M.prototype.merge=function(b,d){this.parentMap.put(this.find(b),this.find(d))};var n=plt.types.isNumber;function m(b){return b!=null&&b!=undefined&&b instanceof plt.types.Symbol}function O(b){return b!=null&&b!=undefined&&b instanceof plt.types.Char}function V(b){return stx_question_(b)}
function H(b){return typeof b=="string"}function L(b){return b==plt.types.Logic.TRUE||b==plt.types.Logic.FALSE}function q(b){return b!=null&&b!=undefined&&b instanceof plt.types.Cons}function w(b){return b!=null&&b!=undefined&&b instanceof plt.types.Empty}function o(b){return n(b)&&b.isReal()}function G(b){return n(b)&&b.isRational()}function N(b){return n(b)}function K(b){return typeof b=="function"}function W(b){return n(b)&&b.isInteger()}function S(b){return n(b)&&b.isInteger()&&b.toFixnum()>=
0}function T(b){for(var d=0;d<b.length;d++)if(!(b[d]>="a"&&b[d]<="z"||b[d]>="A"&&b[d]<="Z"))return false;return true}var X=function(){var b=/^\s*$/;return function(d){return d.match(b)?true:false}}();function v(b){return b!=null&&b!=undefined&&b instanceof plt.types.Vector}function E(b,d){for(var l=0;l<b.length;l++)d.apply(b[l],[b[l],l])}function C(b,d,l,t){if(!b(d,l).valueOf())return false;if(t.length==0)return true;if(!b(l,t[0]).valueOf())return false;for(d=0;d<t.length-1;d++)if(!b(t[d],t[d+1]).valueOf())return false;
return true}function h(b,d,l){var t=d;for(d=0;d<l.length;d++)b(t,l[d]).valueOf()||(t=l[d]);return t}function c(b){return b!=null&&b!=undefined&&(b instanceof plt.types.Cons||b instanceof plt.types.Empty)}function e(b){var d=["th","st","nd","rd","th","th","th","th","th","th"];return Math.floor(b/10)%10==1?b+"th":b+d[b%10]}function g(b,d,l,t){return plt.Kernel.format("~a: expects type <~a> as ~a argument, given: ~s",[b,d,e(l),t])}function f(b,d,l,t,F){if(!d(b))throw new Q(g(l,t,F,b));}function x(b,
d,l){if(!c(b))throw new Q(g(d,"list",l,b));}function R(b,d,l,t,F){if(!c(b))throw new Q(g(l,"listof "+t,F,b));for(;!b.isEmpty();){if(!d(b.first()))throw new Q(g(l,"listof "+t,F,b));b=b.rest()}}function p(b,d,l,t){return function(F,Y,ca){f(F,b,t,d,1);f(Y,b,t,d,2);E(ca,function(ja,ma){f(ja,b,t,d,ma+3)});return l(F,Y,ca)}}function J(b,d){return p(n,"number",function(l,t,F){return C(b,l,t,F)},d)}function $(b,d){return p(O,"char",function(l,t,F){return C(b,l,t,F)},d)}function ea(b,d){return p(H,"string",
function(l,t,F){return C(b,l,t,F)},d)}plt.Kernel={_heir:I,pi:plt.types.FloatPoint.pi,e:plt.types.FloatPoint.e,struct_question_:function(b){return b!=null&&b!=undefined&&b instanceof plt.types.Struct},number_question_:function(b){return n(b)},equal_question_:function(b,d){return plt.types.isEqual(b,d,new M)},equal_tilde__question_:function(b,d,l){f(l,n,"equal~?","number",3);return n(b)&&n(d)?i.approxEqual(b,d,l):plt.types.isEqual(b,d,new M)},eq_question_:function(b,d){return b==d},eqv_question_:function(b,
d){if(n(b)&&n(d))return i.eqv(b,d);else if(O(b)&&O(d))return b.getValue()==d.getValue();return b===d},identity:function(b){return b},cons:function(b,d){x(d,"cons",2);return plt.types.Cons.makeInstance(b,d)},first:function(b){x(b,"first",1);return b.first()},rest:function(b){x(b,"rest",1);return b.rest()},second:function(b){x(b,"second",1);return b.rest().first()},third:function(b){x(b,"third",1);return b.rest().rest().first()},fourth:function(b){x(b,"fourth",1);return b.rest().rest().rest().first()},
fifth:function(b){x(b,"fifth",1);return b.rest().rest().rest().rest().first()},random:function(b){f(b,W,"random","integer",1);return plt.types.Rational.makeInstance(Math.floor(i.toFixnum(b)*Math.random()),1)},current_dash_seconds:function(){return plt.types.Rational.makeInstance(Math.floor((new Date).getTime()/1000))},floor:function(b){f(b,n,"floor","number",1);return b.floor()},ceiling:function(b){f(b,n,"ceiling","number",1);return b.ceiling()},sqrt:function(b){f(b,n,"sqrt","number",1);return b.sqrt()},
integer_dash_sqrt:function(b){f(b,W,"integer-sqrt","integer",1);b=b.sqrt();return G(b)?plt.types.Rational.makeInstance(b.toFixnum()):o(b)?plt.types.Rational.makeInstance(b.toFixnum()):plt.types.Complex.makeInstance(plt.types.Rational.makeInstance(plt.Kernel.real_dash_part(b).toFixnum()),plt.types.Rational.makeInstance(plt.Kernel.imag_dash_part(b).toFixnum()))},sqr:function(b){f(b,n,"sqr","number",1);return i.sqr(b)},sin:function(b){f(b,n,"sin","number",1);return b.sin()},cos:function(b){f(b,n,"cos",
"number",1);return b.cos()},modulo:function(b,d){f(b,n,"modulo","number",1);f(d,n,"modulo","number",2);return i.modulo(b,d)},zero_question_:function(b){f(b,n,"zero?","number",1);return i.equal(b,plt.types.Rational.ZERO)},_equal__tilde_:function(b,d,l){f(b,n,"=~","number",1);f(d,n,"=~","number",2);f(l,n,"=~","number",3);return i.approxEqual(b,d,l)},abs:function(b){f(b,n,"abs","number",1);return i.abs(b)},add1:function(b){f(b,n,"add1","number",1);return i.add(b,plt.types.Rational.ONE)},sub1:function(b){f(b,
n,"sub1","number",1);return i.subtract(b,plt.types.Rational.ONE)},_plus_:function(b){E(b,function(t,F){f(t,n,"+","number",F+1)});var d,l=plt.types.Rational.ZERO;for(d=0;d<b.length;d++)l=i.add(l,b[d]);return l},_dash_:function(b,d){f(b,n,"-","number",1);E(d,function(t,F){f(t,n,"-","number",F+2)});if(d.length==0)return i.subtract(plt.types.Rational.ZERO,b);var l=b;for(b=0;b<d.length;b++)l=i.subtract(l,d[b]);return l},_star_:function(b){E(b,function(t,F){f(t,n,"*","number",F+1)});var d,l=plt.types.Rational.ONE;
for(d=0;d<b.length;d++)l=i.multiply(l,b[d]);return l},_slash_:function(b,d){f(b,n,"/","number",1);E(d,function(t,F){f(t,n,"/","number",F+2)});var l=b;if(d.length==0)return i.divide(plt.types.Rational.ONE,l);else{for(b=0;b<d.length;b++)l=i.divide(l,d[b]);return l}},_equal_:J(i.equal,"="),_greaterthan__equal_:J(i.greaterThanOrEqual,">="),_lessthan__equal_:J(i.lessThanOrEqual,"<="),_greaterthan_:J(i.greaterThan,">"),_lessthan_:J(i.lessThan,"<"),min:function(b,d){f(b,n,"min","number",1);E(d,function(l,
t){f(this,n,"min","number",t+2)});return h(i.lessThanOrEqual,b,d)},max:function(b,d){f(b,n,"max","number",1);E(d,function(l,t){f(this,n,"max","number",t+2)});return h(i.greaterThanOrEqual,b,d)},lcm:function(b,d){f(b,W,"lcm","number",1);E(d,function(l,t){f(this,W,"lcm","number",t+2)});return i.lcm(b,d)},gcd:function(b,d){f(b,W,"gcd","number",1);E(d,function(l,t){f(this,W,"gcd","number",t+2)});return i.gcd(b,d)},exact_dash__greaterthan_inexact:function(b){f(b,n,"exact->inexact","number",1);return plt.types.FloatPoint.makeInstance(b.toFloat())},
inexact_dash__greaterthan_exact:function(b){f(b,n,"inexact->exact","number",1);return i.toExact(b)},exact_question_:function(b){f(b,n,"exact?","number",1);return b.isExact()},inexact_question_:function(b){f(b,n,"inexact?","number",1);return!b.isExact()},rational_question_:function(b){return n(b)&&b.isRational()},number_dash__greaterthan_string:function(b){f(b,n,"number->string","number",1);return plt.types.String.makeInstance(plt.types.toWrittenString(b))},conjugate:function(b){f(b,n,"conjugate",
"number",1);return b.conjugate()},magnitude:function(b){f(b,n,"magnitude","number",1);return b.magnitude()},log:function(b){f(b,n,"log","number",1);return b.log()},angle:function(b){f(b,n,"angle","number",1);return b.angle()},atan:function(b,d){if(d.length==0){f(b,n,"atan","number",1);return b.atan()}else if(d.length==1){f(b,o,"atan","number",1);f(d[0],o,"atan","number",2);return plt.types.FloatPoint.makeInstance(Math.atan2(i.toFloat(b),i.toFloat(d[0])))}else throw new D(plt.Kernel.format("atan: expects 1 to 2 arguments, given ~a.",
[plt.types.Rational.makeInstance(d.length)]));},expt:function(b,d){f(b,n,"expt","number",1);f(d,n,"expt","number",2);return i.expt(b,d)},exp:function(b){f(b,n,"exp","number",1);return b.exp()},acos:function(b){f(b,n,"acos","number",1);return b.acos()},asin:function(b){f(b,n,"asin","number",1);return b.asin()},tan:function(b){f(b,n,"tan","number",1);return i.divide(b.sin(),b.cos())},complex_question_:function(b){return N(b)},cosh:function(b){f(b,n,"cosh","number",1);return this._plus_([this.exp(b),
this.exp(b.minus())]).half()},sinh:function(b){f(b,n,"sinh","number",1);return i.subtract(this.exp(b),this.exp(b.minus())).half()},denominator:function(b){f(b,G,"denominator","rational",1);return b.denominator()},numerator:function(b){f(b,G,"numerator","rational",1);return b.numerator()},odd_question_:function(b){f(b,n,"odd?","number",1);return Math.abs(b.toFixnum()%2)==1},even_question_:function(b){f(b,n,"even?","number",1);return Math.abs(b.toFixnum()%2)==0},positive_question_:function(b){f(b,n,
"positive?","number",1);return this._greaterthan_(b,plt.types.Rational.ZERO,[])},negative_question_:function(b){f(b,n,"negative?","number",1);return this._lessthan_(b,plt.types.Rational.ZERO,[])},imag_dash_part:function(b){f(b,n,"imag-part","number",1);return b.imag_dash_part()},real_dash_part:function(b){f(b,n,"real-part","number",1);return b.real_dash_part()},make_dash_polar:function(b,d){if(i.equal(d,plt.types.Rational.ZERO))return b;var l=i.multiply(b,d.cos());b=i.multiply(b,d.sin());return plt.types.Complex.makeInstance(l,
b)},integer_question_:function(b){return W(b)},make_dash_rectangular:function(b,d){return plt.types.Complex.makeInstance(b,d)},quotient:function(b,d){f(b,W,"quotient","integer",1);f(d,W,"quotient","integer",2);b=i.divide(b,d);return plt.Kernel.positive_question_(b)?plt.types.Rational.makeInstance(b.floor().toFixnum(),1):plt.types.Rational.makeInstance(b.ceiling().toFixnum(),1)},remainder:function(b,d){f(b,n,"remainder","number",1);f(d,n,"remainder","number",2);return plt.types.Rational.makeInstance(b.toFixnum()%
d.toFixnum(),1)},real_question_:function(b){return o(b)},round:function(b){f(b,n,"round","number",1);return b.round()},sgn:function(b){f(b,n,"sgn","number",1);if(this.positive_question_(b).valueOf())return plt.types.Rational.ONE;return this.negative_question_(b).valueOf()?plt.types.Rational.NEGATIVE_ONE:plt.types.Rational.ZERO},boolean_equal__question_:function(b,d){f(b,L,"boolean=?","boolean",1);f(d,L,"boolean=?","boolean",2);return b==d},boolean_question_:function(b){return L(b)},false_question_:function(b){return b==
plt.types.Logic.FALSE},not:function(b){if(!b||b===plt.types.Logic.FALSE)return plt.types.Logic.TRUE;return plt.types.Logic.FALSE},symbol_dash__greaterthan_string:function(b){f(b,m,"symbol->string","symbol",1);return plt.types.String.makeInstance(b.val)},symbol_equal__question_:function(b,d){f(b,m,"symbol=?","symbol",1);f(d,m,"symbol=?","symbol",2);return b.val==d.val},symbol_question_:function(b){return m(b)},append:function(b){var d;for(d=0;d<b.length;d++)x(b[d],"append",d+1);if(b.length==0)return plt.types.Empty.EMPTY;
var l=b[0];for(d=1;d<b.length;d++)l=l.append(b[d]);return l},reverse:function(b){x(b,"reverse",1);return plt.types.Cons.reverse(b)},assq:function(b,d){for(x(d,"assq",2);!d.isEmpty()&&!plt.Kernel.eq_question_(b,d.first().first());)d=d.rest();return d.isEmpty()?plt.types.Logic.FALSE:d.first()},caaar:function(b){x(b,"caaar",1);return b.first().first().first()},caadr:function(b){x(b,"caadr",1);return b.first().first().rest()},caar:function(b){x(b,"caar",1);return b.first().first()},cadar:function(b){x(b,
"cadar",1);return b.first().rest().first()},cadddr:function(b){x(b,"cadddr",1);return b.rest().rest().rest().first()},caddr:function(b){x(b,"caddr",1);return b.rest().rest().first()},cadr:function(b){x(b,"cadr",1);return b.rest().first()},car:function(b){x(b,"car",1);return b.first()},cdaar:function(b){x(b,"cdaar",1);return b.first().first().rest()},cdadr:function(b){x(b,"cdadr",1);return b.rest().first().rest()},cdar:function(b){x(b,"cdar",1);return b.first().rest()},cddar:function(b){x(b,"cddar",
1);return b.first().rest().rest()},cdddr:function(b){x(b,"cdddr",1);return b.rest().rest().rest()},cddr:function(b){x(b,"cddr",1);return b.rest().rest()},cdr:function(b){x(b,"cdr",1);return b.rest()},null_question_:function(b){return w(b)},empty_question_:function(b){return w(b)},pair_question_:function(b){return q(b)},cons_question_:function(b){return q(b)},list_question_:function(b){return c(b)},sixth:function(b){x(b,"sixth",1);return b.rest().rest().rest().rest().rest().first()},seventh:function(b){x(b,
"seventh",1);return b.rest().rest().rest().rest().rest().rest().first()},eighth:function(b){x(b,"eighth",1);return b.rest().rest().rest().rest().rest().rest().rest().first()},set_dash_car_bang_:function(b,d){x(b,"set-car!",1);b.f=d},set_dash_cdr_bang_:function(b,d){x(b,"set-cdr!",1);x(d,"set-cdr!",2);b.r=d},length:function(b){x(b,"length",1);for(var d=plt.types.Rational.ZERO;!b.isEmpty();b=b.rest())d=plt.Kernel.add1(d);return d},list:function(b){for(var d=plt.types.Empty.EMPTY,l=b.length-1;l>=0;l--)d=
plt.types.Cons.makeInstance(b[l],d);return d},list_star_:function(b,d){var l=d.pop();if(l==undefined||!l instanceof plt.types.Cons)throw new Q("list*: "+l+" not a list");d.unshift(b);return plt.Kernel.append([plt.Kernel.list(d),l])},list_dash_ref:function(b,d){x(b,"list-ref",1);f(d,S,"list-ref","natural",2);for(var l=plt.types.Rational.ZERO;plt.Kernel._lessthan_(l,d,[]);l=plt.Kernel.add1(l))if(b.isEmpty())throw new D("list-ref: index too small");else b=b.rest();return b.first()},remove:function(b,
d){x(d,"member",2);for(var l=d,t=new M,F=plt.types.Empty.EMPTY;!d.isEmpty();)if(plt.types.isEqual(b,d.first(),t).valueOf())return plt.Kernel.append([plt.Kernel.reverse(F),d.rest()]);else{F=plt.types.Cons.makeInstance(d.first(),F);d=d.rest()}return l},member:function(b,d){x(d,"member",2);for(var l=new M;!d.isEmpty();){if(plt.types.isEqual(b,d.first(),l).valueOf())return plt.types.Logic.TRUE;d=d.rest()}return plt.types.Logic.FALSE},memq:function(b,d){for(x(d,"memq",2);!d.isEmpty();){if(plt.Kernel.eq_question_(b,
d.first()).valueOf())return d;d=d.rest()}return plt.types.Logic.FALSE},memv:function(b,d){for(x(d,"memv",2);!d.isEmpty();){if(plt.Kernel.eqv_question_(b,d.first()).valueOf())return d;d=d.rest()}return plt.types.Logic.FALSE},memf:function(b,d){f(b,K,"memf","function",1);for(x(d,"memf",2);!d.isEmpty();){if(b([d.first()]))return d;d=d.rest()}return plt.types.Logic.FALSE},compose:function(b){return function(d){d=d;for(var l=b.length-1;l>=0;l--)d=[b[l](d)];return d[0]}},string_dash__greaterthan_number:function(b){f(b,
H,"string->number","string",1);try{var d=plt.reader.readSchemeExpressions(b,"");if(i.equal(plt.Kernel.length(d),plt.types.Rational.ONE)){var l=stx_dash_e(d.first());return n(l)?l:plt.types.Logic.FALSE}else return plt.types.Logic.FALSE}catch(t){return plt.types.Logic.FALSE}},string_dash__greaterthan_symbol:function(b){f(b,H,"string->symbol","string",1);return plt.types.Symbol.makeInstance(b)},string_dash__greaterthan_int:function(b){f(b,H,"string->int","string",1);return plt.types.Rational.makeInstance(b.toString().charCodeAt(0),
1)},string_dash_append:function(b){E(b,function(d,l){f(d,H,"string-append","string",l+1)});return plt.types.String.makeInstance(b.join(""))},replicate:function(b,d){f(b,S,"replicate","natural",1);f(d,H,"replicate","string",2);for(var l=[],t=0;t<b.toFixnum();t++)l.push(d);return plt.types.String.makeInstance(l.join(""))},string_equal__question_:ea(function(b,d){return b==d},"string=?"),string_lessthan__equal__question_:ea(function(b,d){return b<=d},"string<=?"),string_lessthan__question_:ea(function(b,
d){return b<d},"string<?"),string_greaterthan__equal__question_:ea(function(b,d){return b>=d},"string>=?"),string_greaterthan__question_:ea(function(b,d){return b>d},"string>?"),string_dash_ci_equal__question_:ea(function(b,d){return b.toUpperCase()==d.toUpperCase()},"string-ci=?"),string_dash_ci_lessthan__equal__question_:ea(function(b,d){return b.toUpperCase()<=d.toUpperCase()},"string-ci<=?"),string_dash_ci_lessthan__question_:ea(function(b,d){return b.toUpperCase()<d.toUpperCase()},"string-ci<?"),
string_dash_ci_greaterthan__question_:ea(function(b,d){return b.toUpperCase()>d.toUpperCase()},"string-ci>?"),string_dash_ci_greaterthan__equal__question_:ea(function(b,d){return b.toUpperCase()>=d.toUpperCase()},"string-ci>=?"),string_dash_copy:function(b){f(b,H,"string-copy","string",1);return b.substring(0,b.length)},string_dash_length:function(b){f(b,H,"string-length","string",1);return plt.types.Rational.makeInstance(b.length,1)},string_dash_ref:function(b,d){f(b,H,"string-ref","string",1);f(d,
S,"string-ref","natural",2);if(d.toFixnum()>=b.length)throw new D("string-ref: index >= length");return plt.types.Char.makeInstance(b.charAt(d.toFixnum()))},string_dash_ith:function(b,d){f(b,H,"string-ith","string",1);f(d,S,"string-ith","natural",2);if(d.toFixnum()>=b.length)throw new D("string-ith: index >= string length");return plt.types.String.makeInstance(b.substring(d.toFixnum(),d.toFixnum()+1))},int_dash__greaterthan_string:function(b){f(b,W,"int->string","integer",1);return plt.types.String.makeInstance(String.fromCharCode(b.toFixnum()))},
string_question_:function(b){return H(b)},substring:function(b,d,l){f(b,H,"substring","string",1);f(d,S,"substring","natural",2);f(l,S,"substring","natural",3);if(d.toFixnum()>l.toFixnum())throw new D("substring: begin > end");if(l.toFixnum()>b.length)throw new D("substring: end > length");return String.makeInstance(b.substring(d.toFixnum(),l.toFixnum()))},char_question_:function(b){return O(b)},char_dash__greaterthan_integer:function(b){f(b,O,"char->integer","char",1);b=new String(b.val);return plt.types.Rational.makeInstance(b.charCodeAt(0),
1)},integer_dash__greaterthan_char:function(b){f(b,W,"integer->char","integer",1);b=String.fromCharCode(b.toFixnum());return plt.types.Char.makeInstance(b)},char_equal__question_:$(function(b,d){return b.val==d.val},"char=?"),char_lessthan__question_:$(function(b,d){return b.val<d.val},"char<?"),char_lessthan__equal__question_:$(function(b,d){return b.val<=d.val},"char<=?"),char_greaterthan__question_:$(function(b,d){return b.val>d.val},"char>?"),char_greaterthan__equal__question_:$(function(b,d){return b.val>=
d.val},"char>=?"),char_dash_ci_equal__question_:$(function(b,d){return b.val.toUpperCase()==d.val.toUpperCase()},"char-ci=?"),char_dash_ci_lessthan__question_:$(function(b,d){return b.val.toUpperCase()<d.val.toUpperCase()},"char-ci<?"),char_dash_ci_lessthan__equal__question_:$(function(b,d){return b.val.toUpperCase()<=d.val.toUpperCase()},"char-ci<=?"),char_dash_ci_greaterthan__question_:$(function(b,d){return b.val.toUpperCase()>d.val.toUpperCase()},"char-ci>?"),char_dash_ci_greaterthan__equal__question_:$(function(b,
d){return b.val.toUpperCase()>=d.val.toUpperCase()},"char-ci>=?"),char_dash_numeric_question_:function(b){f(b,O,"char-numeric?","char",1);b=b.val;return b>="0"&&b<="9"},char_dash_alphabetic_question_:function(b){f(b,O,"char-alphabetic?","char",1);b=b.val;return T(b)},char_dash_whitespace_question_:function(b){f(b,O,"char-whitespace?","char",1);b=b.val;return X(b)},char_dash_upper_dash_case_question_:function(b){f(b,O,"char-upper-case?","char",1);return T(b.val)&&b.val.toUpperCase()==b.val},char_dash_lower_dash_case_question_:function(b){f(b,
O,"char-lower-case?","char",1);return T(b.val)&&b.val.toLowerCase()==b.val},char_dash_upcase:function(b){f(b,O,"char-upcase","char",1);return plt.types.Char.makeInstance(b.val.toUpperCase())},char_dash_downcase:function(b){f(b,O,"char-downcase","char",1);return plt.types.Char.makeInstance(b.val.toLowerCase())},list_dash__greaterthan_string:function(b){R(b,O,"list->string","char",1);for(var d="";!b.isEmpty();){d+=b.first().val;b=b.rest()}return plt.types.String.makeInstance(d)},implode:function(b){R(b,
H,"implode","string",1);for(var d=[];!b.isEmpty();){d.push(b.first().toString());b=b.rest()}return plt.types.String.makeInstance(d.join(""))},string_dash_numeric_question_:function(b){f(b,H,"string-numeric?","string",1);for(var d=0;d<b.length;d++)if(b[d]<"0"||b[d]>"9")return plt.types.Logic.FALSE;return plt.types.Logic.TRUE},string_dash_alphabetic_question_:function(b){f(b,H,"string-alphabetic?","string",1);return T(b)?plt.types.Logic.TRUE:plt.types.Logic.FALSE},string_dash_whitespace_question_:function(b){f(b,
H,"string-whitespace?","string",1);return X(b)?plt.types.Logic.TRUE:plt.types.Logic.FALSE},string_dash_upper_dash_case_question_:function(b){f(b,H,"string-upper-case?","string",1);return T(b)&&b.toUpperCase()==b},string_dash_lower_dash_case_question_:function(b){f(b,H,"string-lower-case?","string",1);return T(b)&&b.toLowerCase()==b},string:function(b){E(b,function(t,F){f(this,O,"string","char",F+1)});for(var d=[],l=0;l<b.length;l++)d.push(b[l].val);return String.makeInstance(d.join(""))},make_dash_string:function(b,
d){f(b,S,"make-string","natural",1);f(d,O,"make-string","char",2);var l="";d=d.val;for(var t=plt.types.Rational.ZERO;plt.Kernel._lessthan_(t,b,[]);t=plt.Kernel.add1(t))l+=d;return plt.types.String.makeInstance(l)},string_dash__greaterthan_list:function(b){f(b,H,"string->list","string",1);b=b;for(var d=plt.types.Empty.EMPTY,l=b.length-1;l>=0;l--)d=plt.types.Cons.makeInstance(plt.types.Char.makeInstance(b.charAt(l)),d);return d},explode:function(b){f(b,H,"explode","string",1);b=b;for(var d=plt.types.Empty.EMPTY,
l=b.length-1;l>=0;l--)d=plt.types.Cons.makeInstance(plt.types.String.makeInstance(b.charAt(l)),d);return d}};plt.Kernel.isEqual=plt.types.isEqual;plt.Kernel._dumpKernelSymbols=function(){var b=plt.types.Empty.EMPTY;for(var d in plt.Kernel)if(plt.Kernel.hasOwnProperty(d))b=plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance(d),b);return b};plt.Kernel.openInputStx=function(){throw new D("open-input-stx currently unsupported");};plt.Kernel.makeHashEq=function(){return new plt.types.EqHashTable};
plt.Kernel.makeHash=function(){return new plt.types.EqualHashTable};plt.Kernel.hashSetBang=function(b,d,l){f(b,ga,"hash-set!","hash",1);b.hash.put(d,l)};plt.Kernel.hashRef=function(b,d,l){f(b,ga,"hash-ref","hash",1);if(b.hash.containsKey(d))return b.hash.get(d);else{if(K(l))return l([]);return l}};plt.Kernel.hashRemoveBang=function(b,d){f(b,ga,"hash-remove!","hash",1);b.hash.remove(d)};plt.Kernel.hashMap=function(b,d){f(b,ga,"hash-map","hash",1);for(var l=plt.types.Empty.EMPTY,t=b.hash.keys(),F=0;F<
t.length;F++){var Y=b.hash.get(t[F]);l=plt.Kernel.cons(d([t[F],Y]),l)}return l};plt.Kernel.hashForEach=function(b,d){f(b,ga,"hash-map","hash",1);for(var l=b.hash.keys(),t=0;t<l.length;t++){var F=b.hash.get(l[t]);d([l[t],F])}};function ga(b){return b!==null&&b!==undefined&&(b instanceof plt.types.EqHashTable||b instanceof plt.types.EqualHashTable)}plt.Kernel.isHash=ga;plt.Kernel.apply=function(b,d,l){var t,F=[];f(b,K,"apply","function",1);if(l.length==0){t=d;for(x(t,"apply",2);!t.isEmpty();){var Y=
t.first();F.push(Y);t=t.rest()}}else{t=l.pop();for(x(t,"apply",3);!t.isEmpty();){Y=t.first();F.push(Y);t=t.rest()}for(;l.length>0;)F.unshift(l.pop());F.unshift(d)}if(na(b,F.length))return b(F);else throw new D(plt.Kernel.format("~a: expects ~a, given ~a: ~s",[b,y(b),F.length,plt.Kernel.list(F)]));};plt.Kernel.map=function(b,d){f(b,K,"map","function",1);E(d,function(Y,ca){x(Y,"map",ca+2)});for(var l=plt.types.Empty.EMPTY;!d[0].isEmpty();){for(var t=[],F=0;F<d.length;F++){t.push(d[F].first());d[F]=
d[F].rest()}l=plt.Kernel.cons(b(t),l)}return plt.Kernel.reverse(l)};plt.Kernel.for_dash_each=function(b,d){f(b,K,"for-each","function",1);for(E(d,function(F,Y){x(F,"for-each",Y+2)});!d[0].isEmpty();){for(var l=[],t=0;t<d.length;t++){l.push(d[t].first());d[t]=d[t].rest()}b(l)}};plt.Kernel.andmap=function(b,d){f(b,K,"andmap","function",1);for(E(d,function(F,Y){x(F,"andmap",Y+2)});!d[0].isEmpty();){for(var l=[],t=0;t<d.length;t++){l.push(d[t].first());d[t]=d[t].rest()}if(!b(l))return plt.types.Logic.FALSE}return plt.types.Logic.TRUE};
plt.Kernel.ormap=function(b,d){f(b,K,"ormap","function",1);for(E(d,function(F,Y){x(F,"ormap",Y+2)});!d[0].isEmpty();){for(var l=[],t=0;t<d.length;t++){l.push(d[t].first());d[t]=d[t].rest()}if(b(l))return plt.types.Logic.TRUE}return plt.types.Logic.FALSE};plt.Kernel.filter=function(b,d){f(b,K,"filter","function",1);f(d,c,"filter","list",2);for(var l=plt.types.Empty.EMPTY;!d.isEmpty();){if(b([d.first()]))l=plt.types.Cons.makeInstance(d.first(),l);d=d.rest()}return plt.Kernel.reverse(l)};plt.Kernel.foldl=
function(b,d,l){f(b,K,"foldl","function",1);E(l,function(Y,ca){f(Y,c,"foldl","list",ca+3)});for(d=d;!l[0].isEmpty();){for(var t=[],F=0;F<l.length;F++){t.push(l[F].first());l[F]=l[F].rest()}t.push(d);d=b(t)}return d};plt.Kernel.foldr=function(b,d,l){f(b,K,"foldr","function",1);E(l,function(Y,ca){f(Y,c,"foldr","list",ca+3)});d=d;for(var t=0;t<l.length;t++)l[t]=plt.Kernel.reverse(l[t]);for(;!l[0].isEmpty();){var F=[];for(t=0;t<l.length;t++){F.push(l[t].first());l[t]=l[t].rest()}F.push(d);d=b(F)}return d};
plt.Kernel.argmin=function(b,d){f(b,K,"argmin","function",1);f(d,q,"argmin","nonempty list",2);var l=d.first(),t=b([d.first()]).toFloat();for(d=d.rest();!d.isEmpty();){var F=b([d.first()]).toFloat();if(F<t){l=d.first();t=F}d=d.rest()}return l};plt.Kernel.argmax=function(b,d){f(b,K,"argmax","function",1);f(d,q,"argmax","nonempty list",2);var l=d.first(),t=b([d.first()]).toFloat();for(d=d.rest();!d.isEmpty();){var F=b([d.first()]).toFloat();if(F>t){l=d.first();t=F}d=d.rest()}return l};plt.Kernel.sort=
function(b,d){f(b,c,"sort","list",1);f(d,K,"sort","function",2);for(var l=[];!b.isEmpty();){l.push(b.first());b=b.rest()}l.sort(function(t,F){return d([t,F])?-1:1});return plt.Kernel.list(l)};plt.Kernel.quicksort=plt.Kernel.sort;plt.Kernel.build_dash_list=function(b,d){f(b,S,"build-list","natural",1);f(d,K,"build-list","function",2);for(var l=plt.types.Empty.EMPTY,t=0;t<b.toFixnum();t++)l=plt.Kernel.cons(d([plt.types.Rational.makeInstance(t,1)]),l);return plt.Kernel.reverse(l)};plt.Kernel.build_dash_string=
function(b,d){f(b,S,"build-string","natural",1);f(d,K,"build-string","function",2);for(var l=[],t=0;t<b.toFixnum();t++){var F=d([plt.types.Rational.makeInstance(t,1)]);l.push(F.val)}return plt.types.String.makeInstance(l.join(""))};plt.Kernel.format=function(b,d){f(b,H,"format","string",1);var l=new RegExp("~[sSaAn%~]","g"),t=d;function F(Y){if(Y=="~~")return"~";else if(Y=="~n"||Y=="~%")return"\n";else if(Y=="~s"||Y=="~S"){if(t.length==0)throw new D("format: fewer arguments passed than expected");
return plt.types.toWrittenString(t.shift())}else if(Y=="~a"||Y=="~A"){if(t.length==0)throw new D("format: fewer arguments passed than expected");return plt.types.toDisplayedString(t.shift())}else throw new D("Unimplemented format "+Y);}b=plt.types.String.makeInstance(b.replace(l,F));if(t.length>0)throw new D("format: More arguments passed than expected");return b};plt.Kernel.string=function(b){E(b,function(t,F){f(t,O,"string","char",F+1)});for(var d=[],l=0;l<b.length;l++)d.push(b[l].getValue());return plt.types.String.makeInstance(d.join(""))};
plt.Kernel.procedure_question_=function(b){return K(b)};plt.Kernel.procedure_dash_arity=function(b){f(b,K,"procedure-arity","function",1);return b.procedureArity};function na(b,d){return q(b.procedureArity)?d>=b.procedureArity.rest().first().toFixnum():d==b.procedureArity.toFixnum()}function y(b){return q(b.procedureArity)?"at least "+(b.procedureArity.rest().first().toFixnum()==1)?"one argument":b.procedureArity.rest().first().toFixnum()+" arguments":b.procedureArity.toFixnum()==1?"one argument":
b.procedureArity.toFixnum()+" arguments"}plt.Kernel.xml_dash__greaterthan_s_dash_exp=function(b){f(b,H,"xml->s-exp","string",1);if(b.length==0)return plt.types.String.makeInstance("");var d;try{d=new ActiveXObject("Microsoft.XMLDOM");d.async="false";d.loadXML(b)}catch(l){d=new DOMParser;d=d.parseFromString(b,"text/xml")}function t(Y){for(var ca=plt.types.Empty.EMPTY,ja=0;ja<Y.length;ja++){var ma=plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance(Y.item(ja).nodeName),plt.types.Cons.makeInstance(Y.item(ja).nodeValue,
plt.types.Empty.EMPTY));ca=plt.types.Cons.makeInstance(ma,ca)}return plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance("@"),plt.Kernel.reverse(ca))}function F(Y){if(Y.nodeType==Node.ELEMENT_NODE){for(var ca=plt.types.Empty.EMPTY,ja=Y.firstChild;ja!=null;){var ma=F(ja);ca=H(ma)&&!ca.isEmpty()&&H(ca.first())?plt.types.Cons.makeInstance(ca.first()+ma,ca.rest()):plt.types.Cons.makeInstance(ma,ca);ja=ja.nextSibling}ca=plt.Kernel.reverse(ca);ca=plt.types.Cons.makeInstance(t(Y.attributes),ca);return ca=
plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance(Y.nodeName),ca)}else return Y.nodeType==Node.TEXT_NODE?Y.textContent:Y.nodeType==Node.CDATA_SECTION_NODE?Y.data:plt.types.Empty.EMPTY}return b=F(d.firstChild)};plt.Kernel.split_dash_whitespace=function(b){b=b.replace(/^\s+/,"");b=b.replace(/\s+$/,"");return plt.Kernel.list(b.split(/\s+/))};plt.Kernel.box=function(b){return new plt.types.Box(b)};plt.Kernel.unbox=function(b){f(b,plt.Kernel.box_question_,"unbox","box",1);return b.unbox()};plt.Kernel.box_question_=
function(b){return b!=null&&b!=undefined&&b instanceof plt.types.Box};plt.Kernel.set_dash_box_bang_=function(b,d){f(b,plt.Kernel.box_question_,"set-box!","box",1);b.set(d)};function U(b,d){plt.types.Struct.call(this,"make-posn",[b,d]);this._eqHashCode=plt.types.makeEqHashCode()}U.prototype=I(plt.types.Struct.prototype);function aa(b,d){return new U(b,d)}function da(b){f(b,ka,"posn-x","posn",1);return b._fields[0]}function ha(b){f(b,ka,"posn-y","posn",1);return b._fields[1]}function ka(b){return b!=
null&&b!=undefined&&b instanceof U}plt.Kernel.make_dash_posn=aa;plt.Kernel.posn_question_=ka;plt.Kernel.posn_dash_x=da;plt.Kernel.posn_dash_y=ha;plt.Kernel.error=function(b,d){f(b,m,"error","symbol",1);f(d,H,"error","string",2);throw new D(plt.Kernel.format("~a: ~a",[b,d]).toString());};plt.Kernel.syntax_dash_error=function(b,d){f(b,H,"syntax-error","string",1);f(d,V,"syntax-error","stx",2);throw new u(b,d);};plt.Kernel.reportError=function(b){var d;d=typeof console!="undefined"&&typeof console.log!=
"undefined"?function(l){console.log(l)}:function(l){alert(l)};if(typeof b=="string")d(b);else b.msg?d(b.msg):d(b.toString());if(plt.Kernel.lastLoc){b=plt.Kernel.lastLoc;if(typeof b==="string")d("Error was raised around "+b);else typeof b!=="undefined"&&typeof b.line!=="undefined"&&d("Error was raised around: "+plt.Kernel.locToString(b))}};plt.Kernel._void_=function(){};plt.Kernel.build_dash_vector=function(b,d){f(b,S,"build-vector","natural",1);f(d,K,"build-vector","function",2);for(var l=[],t=0;t<
b.toFixnum();t++)l[t]=d([plt.types.Rational.makeInstance(t,1)]);return plt.types.Vector.makeInstance(b.toFixnum(),l)};plt.Kernel.make_dash_vector=function(b,d){f(b,S,"make-vector","natural",1);f(d,function(F){return F.length==0||F.length==1},"make-vector","at most two",2);b=b.toFixnum();var l,t=plt.types.Vector.makeInstance(b);if(d.length==1)for(l=0;l<b;l++)t.set(l,d[0]);return t};plt.Kernel.vector=function(b){return plt.types.Vector.makeInstance(b.length,b)};plt.Kernel.vector_dash_length=function(b){f(b,
v,"vector-length","vector",1);return plt.types.Rational.makeInstance(b.length())};plt.Kernel.vector_dash_ref=function(b,d){f(b,v,"vector-ref","vector",1);f(d,function(l){return S(l)&&l.toFixnum()<b.length()},"vector-ref","natural < vector length",2);return b.ref(d.toFixnum())};plt.Kernel.vector_dash_set_bang_=function(b,d,l){f(b,v,"vector-set!","vector",1);f(d,function(t){return S(t)&&t.toFixnum()<b.length()},"vector-set!","natural < vector length",2);return b.set(d.toFixnum(),l)};plt.Kernel.vector_question_=
function(b){return v(b)?plt.types.Logic.TRUE:plt.types.Logic.FALSE};plt.Kernel.check_dash_expect=function(b,d){b=b([]);d=d([]);if(!plt.Kernel.equal_question_(b,d))throw new P(plt.Kernel.format("~s doesn't match the expected value ~s",[b,d]));};plt.Kernel.EXAMPLE=plt.Kernel.check_dash_expect;plt.Kernel.check_dash_within=function(b,d,l){b=b([]);d=d([]);l=l([]);if(!plt.Kernel._equal__tilde_(b,d,l))throw new P(plt.Kernel.format("~s doesn't match the expected value ~s within ~s",[b,d,l]));};plt.Kernel.check_dash_error=
function(b,d){d=d([]);var l;try{l=b([])}catch(t){if(plt.Kernel.equal_question_(t.msg,d))return;else throw new P(plt.Kernel.format("check-error encountered the error ~s instead of the expected error ~s.",[t.msg,d]));}throw new P(plt.Kernel.format("check-error expected the error ~s, but instead received the value ~s.",[d,l]));};plt.Kernel.lastLoc=undefined;plt.Kernel.setLastLoc=function(b){plt.Kernel.lastLoc=b;return true};plt.Kernel.locToString=function(b){if(typeof b==="string")return b;return"offset="+
Loc_dash_offset(b)+", line="+Loc_dash_line(b)+", column="+Loc_dash_column(b)+", span="+Loc_dash_span(b)+", id="+Loc_dash_id(b)};plt.Kernel.printf=function(b,d){b=plt.Kernel.format(b,d);plt.Kernel.printHook(b)};plt.Kernel.printHook=function(){};plt.Kernel.isSymbol=m;plt.Kernel.isChar=O;plt.Kernel.isString=H;plt.Kernel.isBoolean=L;plt.Kernel.isPair=q;plt.Kernel.isEmpty=w;plt.Kernel.isReal=o;plt.Kernel.isRational=G;plt.Kernel.isComplex=N;plt.Kernel.isInteger=W;plt.Kernel.isNatural=S;plt.Kernel.isNumber=
n;plt.Kernel.isAlphabeticString=T;plt.Kernel.isWhitespaceString=X;plt.Kernel.isList=c;plt.Kernel.isVector=v;plt.Kernel.isFunction=K;plt.Kernel.arrayEach=E;plt.Kernel.check=f;plt.Kernel.checkList=x;plt.Kernel.checkListof=R;plt.Kernel.MobyError=plt.types.MobyError;plt.Kernel.MobyParserError=plt.types.MobyParserError;plt.Kernel.MobySyntaxError=plt.types.MobySyntaxError;plt.Kernel.MobyTypeError=plt.types.MobyTypeError;plt.Kernel.MobyRuntimeError=plt.types.MobyRuntimeError;plt.Kernel.MobyTestingError=
plt.types.MobyTestingError;plt.Kernel.attachEvent=z;plt.Kernel.detachEvent=A;plt.Kernel.ordinalize=e})();plt.reader={};
(function(){function i(n){return n.replace(/\\./g,function(m){switch(m){case "\\b":return"\u0008";case "\\f":return"\u000c";case "\\n":return"\n";case "\\r":return"\r";case "\\t":return"\t";case "\\v":return"\u000b";default:return m.substring(1)}})}function u(n){var m,O=0;for(m=0;m<n.length;m++)n[m]=="\n"&&O++;return O}function Q(n,m){var O;for(O=0;O<n.length;O++)if(n[O]=="\n")m=0;else m++;return m}var D="[^\\s\\(\\)\\[\\]\\{\\}\\\"\\,\\'\\`\\;]",P="(?:(?:\\d+\\/\\d+)|(?:(?:\\d+\\.\\d+|\\d+\\.|\\.\\d+)(?:[eE][+\\-]?\\d+)?)|(?:\\d+(?:[eE][+\\-]?\\d+)?))",
z=[["whitespace",/^(\s+)/],["#;",/^([#][;])/],["comment",/^([#][|](?:(?:\|[^\#])|[^\|])*[|][#])/],["comment",/(^;[^\n]*)/],["(",/^(\(|\[|\{)/],[")",/^(\)|\]|\})/],["'",/^(\')/],["`",/^(`)/],[",@",/^(,@)/],[",",/^(,)/],["char",/^\#\\(newline|backspace)/],["char",/^\#\\(.)/],["string",/^"((?:([^\\"]|(\\.)))*)"/],["symbol-or-number",new RegExp("^("+D+"+)")]],A=[["complex",new RegExp("^((?:(?:\\#[ei])?[+\\-]?"+P+")?(?:[+\\-]"+P+")i$)")],["number",/^((?:\#[ei])?[+-]inf.0)$/],["number",/^((?:\#[ei])?[+-]nan.0)$/],
["number",new RegExp("^((?:\\#[ei])?[+\\-]?"+P+"$)")]];function I(n,m){var O=0,V=1,H=0,L=[];for(m||(m="");1;){for(var q=false,w=0;w<z.length;w++){var o=z[w][0],G=z[w][1];G=n.match(G);if(G!=null){q=G[0];w=G[1];if(o=="string")w=i(w);if(o=="symbol-or-number"){o=false;for(G=0;G<A.length;G++){var N=w.match(A[G][1]);if(N){L.push([A[G][0],w,new Loc(O,V,H,q.length,m)]);o=true;break}}o||L.push(["symbol",w,new Loc(O,V,H,q.length,m)])}else o!="whitespace"&&o!="comment"&&L.push([o,w,new Loc(O,V,H,q.length,m)]);
O+=q.length;H=Q(q,H);V+=u(q);n=n.substring(q.length);q=true;break}}if(!q)break}return[L,n]}function M(n,m){var O=make_dash_stx_colon_list,V=make_dash_stx_colon_atom,H=I(n,m),L=H[0],q=undefined;if(H[1].length>0)throw new plt.types.MobyParserError("Error while tokenizing: the rest of the stream is: "+H[1],new Loc(n.length-H[1].length,u(n.substring(0,n.length-H[1].length)),Q(n.substring(0,n.length-H[1].length),0),H[1].length,m));var w=plt.types.Symbol.makeInstance("quote"),o=plt.types.Symbol.makeInstance("quasiquote"),
G=plt.types.Symbol.makeInstance("unquote"),N=plt.types.Symbol.makeInstance("unquote-splicing"),K=plt.types.Empty.EMPTY;function W(h){return L.length>0&&L[0][0]==h}function S(h){if(L.length==0)if(q)throw new plt.types.MobyParserError("token stream exhausted while trying to eat "+h,q[2]);else throw new plt.types.MobyParserError("token stream exhausted while trying to eat "+h,new Loc(0,0,0,n.length,m));var c=L.shift();q=c;if(c[0]==h)return c;else throw new plt.types.MobyParserError("Unexpected token "+
c,c[2]);}var T,X,v;v=function(h,c){h=S(h);var e=T();return O(plt.types.Cons.makeInstance(V(c,h[2]),plt.types.Cons.makeInstance(e,K)),new Loc(Loc_dash_offset(h[2]),Loc_dash_line(h[2]),Loc_dash_column(h[2]),Loc_dash_offset(stx_dash_loc(e))-Loc_dash_offset(h[2])+Loc_dash_span(stx_dash_loc(e)),m))};function E(h){switch(h){case "(":return")";case "[":return"]";case "{":return"}";default:throw new Error;}}function C(h,c){var e=h.match(/([+\-]?\d+)\/(\d+)/);if(h=="+inf.0")return plt.types.FloatPoint.makeInstance(Number.POSITIVE_INFINITY);
else if(h=="-inf.0")return plt.types.FloatPoint.makeInstance(Number.NEGATIVE_INFINITY);else if(h=="+nan.0"||h=="-nan.0")return plt.types.FloatPoint.makeInstance(Number.NaN);else if(h.match(/[eE]/))return plt.types.FloatPoint.makeInstance(parseFloat(h));else if(h.match(/\./))if(c){h=h.match("^(.*)[.](.*)$");c=plt.types.Rational.makeInstance(parseInt(h[1]||"0")||0);return h[1].match(/-/)?plt.types.NumberTower.subtract(c,plt.types.Rational.makeInstance(parseInt(h[2]),Math.pow(10,h[2].length))):plt.types.NumberTower.add(c,
plt.types.Rational.makeInstance(parseInt(h[2]),Math.pow(10,h[2].length)))}else return plt.types.FloatPoint.makeInstance(parseFloat(h));else return e?c?plt.types.Rational.makeInstance(parseInt(e[1]),parseInt(e[2])):plt.types.FloatPoint.makeInstance(parseInt(e[1])/parseInt(e[2])):c?plt.types.Rational.makeInstance(parseInt(h),1):plt.types.FloatPoint.makeInstance(parseInt(h))}T=function(){if(L.length==0)if(q)throw new plt.types.MobyParserError("Parse broke with empty token stream",q[2]);else throw new plt.types.MobyParserError("Parse broke with empty token stream",
new Loc(0,0,0,n.length,m));switch(L[0][0]){case "(":var h=S("("),c=h[1],e=E(h[1]),g=X();if(L.length==0)throw new plt.types.MobyParserError("Expected a "+e+" to close "+c,h[2]);else if(L[0][1]!=e)throw new plt.types.MobyParserError("Expected a "+e+" to close "+c,L[0][2]);c=S(")");return make_dash_stx_colon_list(g,new Loc(Loc_dash_offset(h[2]),Loc_dash_line(h[2]),Loc_dash_column(h[2]),Loc_dash_offset(c[2])-Loc_dash_offset(h[2])+1,m));case "#;":S("#;");T();return T();case "'":return v("'",w);case "`":return v("`",
o);case ",":return v(",",G);case ",@":return v(",@",N);case "number":h=S("number");return(g=h[1].match(/^(\#[ie])(.+)$/))?g[1]=="#i"?V(C(g[2],false),h[2]):V(C(g[2],true),h[2]):V(C(h[1],true),h[2]);case "complex":h=S("complex");g=h[1].match(/^((?:\#[ei])?)([+\-]?(?:\d+\/\d+|\d+\.\d+|\d+\.|\.\d+|\d+)?)([+\-](?:\d+\/\d+|\d+\.\d+|\d+\.|\.\d+|\d+))i/);c=g[1]=="#i"?false:true;h=g[2]!=""?C(g[2],c):plt.types.Rational.ZERO;g=C(g[3],c);return h=V(plt.types.Complex.makeInstance(h,g));case "string":h=S("string");
return V(plt.types.String.makeInstance(h[1]),h[2]);case "char":h=S("char");return h[1]=="newline"?V(plt.types.Char.makeInstance("\n"),h[2]):h[1]=="backspace"?V(plt.types.Char.makeInstance(String.fromCharCode(8)),h[2]):V(plt.types.Char.makeInstance(h[1]),h[2]);case "symbol":h=S("symbol");if(h[1]==".")throw new plt.types.MobyParserError("Dotted pairs are not currently accepted by Moby",h[2]);return V(plt.types.Symbol.makeInstance(h[1]),h[2]);default:throw new plt.types.MobyParserError("Parse broke with token stream "+
L,L[0][2]);}};X=function(){for(var h=plt.types.Empty.EMPTY;1;)if(L.length==0||W(")"))break;else if(W("#;")){S("#;");T()}else{var c=T();h=plt.types.Cons.makeInstance(c,h)}return plt.types.Cons.reverse(h)};H=X();if(L.length>0)throw new plt.types.MobyParserError("More elements in the program's token stream than expected: the next unconsumed token is: "+L[0][1],L[0][2]);return H}plt.reader.tokenize=I;plt.reader.readSchemeExpressions=M})();
(function(i){var u={};function Q(p,J){plt.types.Struct.call(this,"make-stx:atom",[p,J]);this.datum=p;this.loc=J}Q.prototype=new plt.types.Struct;function D(p,J){return new Q(p,J)}function P(p){if(M(p))return p.datum;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx:atom-datum: not a stx:atom: ~s",[p]));}function z(p){if(M(p))return p.loc;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx:atom-loc: not a stx:atom: ~s",[p]));}function A(p,J){if(M(p)){p.datum=J;p._fields[0]=
J}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_atom_dash_datum_bang_: not a stx:atom: ~s",[p]));}function I(p,J){if(M(p)){p.loc=J;p._fields[1]=J}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_atom_dash_loc_bang_: not a stx:atom: ~s",[p]));}function M(p){return p!=null&&p!=undefined&&p instanceof Q}function n(p,J){plt.types.Struct.call(this,"make-stx:list",[p,J]);this.elts=p;this.loc=J}n.prototype=new plt.types.Struct;function m(p,
J){return new n(p,J)}function O(p){if(q(p))return p.elts;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx:list-elts: not a stx:list: ~s",[p]));}function V(p){if(q(p))return p.loc;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx:list-loc: not a stx:list: ~s",[p]));}function H(p,J){if(q(p)){p.elts=J;p._fields[0]=J}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_list_dash_elts_bang_: not a stx:list: ~s",[p]));}function L(p,J){if(q(p)){p.loc=
J;p._fields[1]=J}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_list_dash_loc_bang_: not a stx:list: ~s",[p]));}function q(p){return p!=null&&p!=undefined&&p instanceof n}function w(p,J,$,ea,ga){plt.types.Struct.call(this,"make-Loc",[p,J,$,ea,ga]);this.offset=p;this.line=J;this.column=$;this.span=ea;this.id=ga}w.prototype=new plt.types.Struct;function o(p,J,$,ea,ga){return new w(p,J,$,ea,ga)}function G(p){if(h(p))return p.offset;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc-offset: not a Loc: ~s",
[p]));}function N(p){if(h(p))return p.line;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc-line: not a Loc: ~s",[p]));}function K(p){if(h(p))return p.column;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc-column: not a Loc: ~s",[p]));}function W(p){if(h(p))return p.span;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc-span: not a Loc: ~s",[p]));}function S(p){if(h(p))return p.id;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc-id: not a Loc: ~s",
[p]));}function T(p,J){if(h(p)){p.offset=J;p._fields[0]=J}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_offset_bang_: not a Loc: ~s",[p]));}function X(p,J){if(h(p)){p.line=J;p._fields[1]=J}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_line_bang_: not a Loc: ~s",[p]));}function v(p,J){if(h(p)){p.column=J;p._fields[2]=J}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_column_bang_: not a Loc: ~s",[p]));
}function E(p,J){if(h(p)){p.span=J;p._fields[3]=J}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_span_bang_: not a Loc: ~s",[p]));}function C(p,J){if(h(p)){p.id=J;p._fields[4]=J}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_id_bang_: not a Loc: ~s",[p]));}function h(p){return p!=null&&p!=undefined&&p instanceof w}function c(p){return M(p)||q(p)}function e(p){return M(p)?P(p):q(p)?O(p):plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),
u[4])}function g(p){return M(p)?z(p):q(p)?V(p):plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),u[4])}function f(p,J){return M(p)?u[5]:q(p)?plt.Kernel.not(plt.Kernel.empty_question_(O(p)))&&plt.Kernel.symbol_question_(e(plt.Kernel.first(O(p))))&&plt.Kernel.symbol_equal__question_(e(plt.Kernel.first(O(p))),J):plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),u[4])}function x(p,J){return c(p)?p:plt.Kernel.pair_question_(p)||plt.Kernel.empty_question_(p)?m(plt.Kernel.map(function(){function $(ea){ea=
ea[0];return x(ea,J)}$._eqHashCode=plt.types.makeEqHashCode();$.toWrittenString=function(){return"<function:lambda>"};$.isEqual=function(ea){return this===ea};$.procedureArity=plt.types.Rational.makeInstance(1,1);$.toDisplayedString=$.toWrittenString;return $}(),[p]),J):plt.types.Logic.TRUE?D(p,J):plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),u[4])}function R(p){return M(p)?P(p):q(p)?plt.Kernel.map(plt.types.liftToplevelToFunctionValue(R,plt.types.String.makeInstance("stx->datum"),1,plt.types.Rational.makeInstance(1,
1)),[O(p)]):plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),u[4])}u[4]=plt.types.String.makeInstance("cond: fell out of cond");u[5]=plt.types.Logic.FALSE;(function(p){(function(){})(p||plt.Kernel.identity);i.stx_dash_e=e;i.stx_colon_list=n;i.make_dash_stx_colon_list=m;i.stx_colon_list_question_=q;i.stx_colon_list_dash_elts=O;i.stx_colon_list_dash_loc=V;i.set_dash_stx_colon_list_dash_elts_bang_=H;i.set_dash_stx_colon_list_dash_loc_bang_=L;i.stx_question_=c;i.stx_colon_atom=Q;i.make_dash_stx_colon_atom=
D;i.stx_colon_atom_question_=M;i.stx_colon_atom_dash_datum=P;i.stx_colon_atom_dash_loc=z;i.set_dash_stx_colon_atom_dash_datum_bang_=A;i.set_dash_stx_colon_atom_dash_loc_bang_=I;i.stx_dash_loc=g;i.datum_dash__greaterthan_stx=x;i.stx_dash_begins_dash_with_question_=f;i.stx_dash__greaterthan_datum=R;i.Loc=w;i.make_dash_Loc=o;i.Loc_question_=h;i.Loc_dash_offset=G;i.Loc_dash_line=N;i.Loc_dash_column=K;i.Loc_dash_span=W;i.Loc_dash_id=S;i.set_dash_Loc_dash_offset_bang_=T;i.set_dash_Loc_dash_line_bang_=X;
i.set_dash_Loc_dash_column_bang_=v;i.set_dash_Loc_dash_span_bang_=E;i.set_dash_Loc_dash_id_bang_=C})()})(this);plt.world={};plt.world.config={};
(function(){function i(z,A){var I={};for(var M in z)if(z.hasOwnProperty(M))I[M]=z[M];for(M in A)if(A.hasOwnProperty(M))I[M]=A[M];return I}function u(){this.vals={changeWorld:false,shutdownWorld:false,initialEffect:false,onRedraw:false,onDraw:false,onDrawCss:false,tickDelay:false,onTick:false,onTickEffect:false,onKey:false,onKeyEffect:false,onTilt:false,onTiltEffect:false,onAcceleration:false,onAccelerationEffect:false,onShake:false,onShakeEffect:false,onLocationChange:false,onLocationChangeEffect:false,
onAnnounce:false,onAnnounceEffect:false,stopWhen:false,stopWhenEffect:false,connectToGame:false,onGameStart:false,onOpponentTurn:false,onMyTurn:false,afterMyTurn:false,onGameFinish:false}}u.prototype.lookup=function(z){plt.Kernel.check(z,plt.Kernel.isString,"WorldConfig.lookup","string",1);if(z in this.vals)return this.vals[z];else throw Error("Can't find "+z+" in the configuration");};u.prototype.updateAll=function(z){var A=new u;A.vals=i(this.vals,z);return A};plt.world.config.WorldConfig=u;plt.world.config.CONFIG=
new u;function Q(){return make_dash_effect_colon_none()}function D(z,A){z.toWrittenString=function(){return"("+A+" ...)"};z.toDisplayedString=z.toWrittenString;return z}plt.world.config.Kernel=plt.world.config.Kernel||{};plt.world.config.Kernel.onRedraw=function(z){plt.Kernel.check(z,plt.Kernel.isFunction,"on-redraw","function",1);return D(function(A){return A.updateAll({onRedraw:z})},"on-redraw")};plt.world.config.Kernel.initialEffect=function(z){return D(function(A){return A.updateAll({initialEffect:z})},
"initial-effect")};plt.world.config.Kernel.onDraw=function(z,A){plt.Kernel.check(z,plt.Kernel.isFunction,"on-draw","function",1);plt.Kernel.check(A,plt.Kernel.isFunction,"on-draw","function",2);return D(function(I){return I.updateAll({onDraw:z,onDrawCss:A})},"on-draw")};plt.world.config.Kernel.onTick=function(z,A){plt.Kernel.check(z,plt.Kernel.isNumber,"on-tick","number",1);plt.Kernel.check(A,plt.Kernel.isFunction,"on-tick","function",2);return plt.world.config.Kernel.onTick_star_(z,A,function(){return Q()})};
plt.world.config.Kernel.onTick_star_=function(z,A,I){plt.Kernel.check(z,plt.Kernel.isNumber,"on-tick!","number",1);plt.Kernel.check(A,plt.Kernel.isFunction,"on-tick!","function",2);plt.Kernel.check(I,plt.Kernel.isFunction,"on-tick!","function",3);return D(function(M){var n={onTick:A,onTickEffect:I,tickDelay:plt.types.NumberTower.toFixnum(plt.types.NumberTower.multiply(plt.types.Rational.makeInstance(1000,1),z))};return M.updateAll(n)},"on-tick")};plt.world.config.Kernel.onTilt=function(z){plt.Kernel.check(z,
plt.Kernel.isFunction,"on-tilt","function",1);return plt.world.config.Kernel.onTilt_star_(z,function(){return Q()})};plt.world.config.Kernel.onTilt_star_=function(z,A){plt.Kernel.check(z,plt.Kernel.isFunction,"on-tilt!","function",1);plt.Kernel.check(A,plt.Kernel.isFunction,"on-tilt!","function",2);return D(function(I){return I.updateAll({onTilt:z,onTiltEffect:A})},"on-tilt")};plt.world.config.Kernel.onAnnounce=function(z){plt.Kernel.check(z,plt.Kernel.isFunction,"on-announce","function",1);return plt.world.config.Kernel.onAnnounce_star_(z,
function(){return Q()})};plt.world.config.Kernel.onAnnounce_star_=function(z,A){plt.Kernel.check(z,plt.Kernel.isFunction,"on-announce!","function",1);plt.Kernel.check(A,plt.Kernel.isFunction,"on-announce!","function",2);return D(function(I){return I.updateAll({onAnnounce:z,onAnnounceEffect:A})},"on-announce")};plt.world.config.Kernel.onAcceleration=function(z){plt.Kernel.check(z,plt.Kernel.isFunction,"on-acceleration","function",1);return plt.world.config.Kernel.onAcceleration_star_(z,function(){return Q()})};
plt.world.config.Kernel.onAcceleration_star_=function(z,A){plt.Kernel.check(z,plt.Kernel.isFunction,"on-acceleration!","function",1);plt.Kernel.check(A,plt.Kernel.isFunction,"on-acceleration!","function",2);return D(function(I){return I.updateAll({onAcceleration:z,onAccelerationEffect:A})},"on-acceleration")};plt.world.config.Kernel.onShake=function(z){plt.Kernel.check(z,plt.Kernel.isFunction,"on-shake","function",1);return plt.world.config.Kernel.onShake_star_(z,function(){return Q()})};plt.world.config.Kernel.onShake_star_=
function(z,A){plt.Kernel.check(z,plt.Kernel.isFunction,"on-shake!","function",1);plt.Kernel.check(A,plt.Kernel.isFunction,"on-shake!","function",2);return D(function(I){return I.updateAll({onShake:z,onShakeEffect:A})},"on-shake")};plt.world.config.Kernel.onKey=function(z){plt.Kernel.check(z,plt.Kernel.isFunction,"on-key","function",1);return plt.world.config.Kernel.onKey_star_(z,function(){return Q()})};plt.world.config.Kernel.onKey_star_=function(z,A){plt.Kernel.check(z,plt.Kernel.isFunction,"on-key!",
"function",1);plt.Kernel.check(A,plt.Kernel.isFunction,"on-key!","function",2);return D(function(I){return I.updateAll({onKey:z,onKeyEffect:A})},"on-key")};plt.world.config.Kernel.onLocationChange=function(z){plt.Kernel.check(z,plt.Kernel.isFunction,"on-location-change","function",1);return plt.world.config.Kernel.onLocationChange_star_(z,function(){return Q()})};plt.world.config.Kernel.onLocationChange_star_=function(z,A){plt.Kernel.check(z,plt.Kernel.isFunction,"on-location-change!","function",
1);plt.Kernel.check(A,plt.Kernel.isFunction,"on-location-change!","function",2);return D(function(I){return I.updateAll({onLocationChange:z,onLocationChangeEffect:A})},"on-location-change")};plt.world.config.Kernel.stopWhen=function(z){plt.Kernel.check(z,plt.Kernel.isFunction,"stop-when","function",1);return plt.world.config.Kernel.stopWhen_star_(z,function(){return Q()})};plt.world.config.Kernel.stopWhen_star_=function(z,A){plt.Kernel.check(z,plt.Kernel.isFunction,"stop-when!","function",1);plt.Kernel.check(A,
plt.Kernel.isFunction,"stop-when!","function",2);return D(function(I){return I.updateAll({stopWhen:z,stopWhenEffect:A})},"stop-when")};function P(z,A,I,M){return function(n){plt.Kernel.check(n,A,M,I,1);return D(function(m){return m.updateAll({propertyName:n})},M)}}plt.world.config.Kernel.connect_dash_to_dash_game=P("connectToGame",plt.Kernel.isString,"string","connect-to-game");plt.world.config.Kernel.on_dash_game_dash_start=P("onGameStart",plt.Kernel.isFunction,"function","on-game-start");plt.world.config.Kernel.on_dash_opponent_dash_turn=
P("onOpponentTurn",plt.Kernel.isFunction,"function","on-opponent-turn");plt.world.config.Kernel.on_dash_my_dash_turn=P("onMyTurn",plt.Kernel.isFunction,"function","on-my-turn");plt.world.config.Kernel.after_dash_my_dash_turn=P("afterMyTurn",plt.Kernel.isFunction,"function","after-my-turn");plt.world.config.Kernel.on_dash_game_dash_finish=P("onGameFinish",plt.Kernel.isFunction,"function","on-game-finish")})();plt.platform={};
(function(){plt.platform.Platform={};var i=false;plt.platform.Platform.getInstance=function(){i||(i=new u);return i};function u(){this.tiltService=o;this.shakeService=W();this.locationService=Q();this.telephonyService=G();this.networkService=X();this.soundService=C();this.powerService=f();this.smsService=p();this.pickPlaylistService=ea()}u.prototype.getTiltService=function(){return this.tiltService};u.prototype.getShakeService=function(){return this.shakeService};u.prototype.getLocationService=function(){return this.locationService};
u.prototype.getTelephonyService=function(){return this.telephonyService};u.prototype.getNetworkService=function(){return this.networkService};u.prototype.getSoundService=function(){return this.soundService};u.prototype.getPowerService=function(){return this.powerService};u.prototype.getSmsService=function(){return this.smsService};u.prototype.getPickPlaylistService=function(){return this.pickPlaylistService};function Q(){return D()?new n:P()?new I:z()?new m:new M}function D(){return typeof Device!=
"undefined"}function P(){return window.google&&window.google.gears&&true}function z(){return typeof navigator!="undefined"&&typeof navigator.geolocation!="undefined"}function A(y,U,aa,da){function ha(b){return b*Math.PI/180}function ka(b,d){return Math.pow(Math.sin((ha(b)-ha(d))/2),2)}return 12756000*Math.asin(Math.min(1,Math.sqrt(ka(y,aa)+Math.cos(ha(y))*Math.cos(ha(aa))*ka(U,da))))}function I(){this.geo=google.gears.factory.create("beta.geolocation");this.listeners=[];this.currentPosition={latitude:0,
longitude:0,altitude:0,bearing:0,speed:0};this.watchId=false}I.prototype.startService=function(){var y=this;function U(aa){y.currentPosition.latitude=aa.latitude;y.currentPosition.longitude=aa.longitude;y.currentPosition.altitude=aa.altitude;for(var da=0;da<y.listeners.length;da++)y.listeners[da](aa.latitude,aa.longitude)}this.watchId=this.geo.watchPosition(U)};I.prototype.shutdownService=function(){this.geo.clearWatch(this.watchId)};I.prototype.addLocationChangeListener=function(y){this.listeners.push(y)};
I.prototype.getLatitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.latitude)};I.prototype.getLongitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.longitude)};I.prototype.getAltitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.altitude)};I.prototype.getBearing=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.bearing)};I.prototype.getSpeed=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.speed)};
I.prototype.getDistanceBetween=function(y,U,aa,da){return plt.types.FloatPoint.makeInstance(A(y.toFloat(),U.toFloat(),aa.toFloat(),da.toFloat()))};function M(){}M.prototype.startService=function(){};M.prototype.shutdownService=function(){};M.prototype.addLocationChangeListener=function(){};M.prototype.getLatitude=function(){return plt.types.Rational.ZERO};M.prototype.getLongitude=function(){return plt.types.Rational.ZERO};M.prototype.getAltitude=function(){return plt.types.Rational.ZERO};M.prototype.getBearing=
function(){return plt.types.Rational.ZERO};M.prototype.getSpeed=function(){return plt.types.Rational.ZERO};M.prototype.getDistanceBetween=function(y,U,aa,da){return plt.types.FloatPoint.makeInstance(A(y.toFloat(),U.toFloat(),aa.toFloat(),da.toFloat()))};function n(){this.locationListeners=[];this.currentPosition={latitude:0,longitude:0,atttitude:0,bearing:0,speed:0};this.watchId=false}n.prototype.startService=function(){var y=this;function U(aa){y.currentPosition.latitude=parseFloat(aa.latitude);
y.currentPosition.longitude=parseFloat(aa.longitude);for(aa=0;aa<y.locationListeners.length;aa++){var da=y.locationListeners[aa];da(y.currentPosition.latitude,y.currentPosition.longitude)}}this.watchId=navigator.geolocation.watchPosition(U,function(){},{})};n.prototype.shutdownService=function(){navigator.geolocation.clearWatch(this.watchId)};n.prototype.addLocationChangeListener=function(y){this.locationListeners.push(y)};n.prototype.getLatitude=function(){return plt.types.FloatPoint.makeInstance(navigator.geolocation.lastPosition.latitude)};
n.prototype.getLongitude=function(){return plt.types.FloatPoint.makeInstance(navigator.geolocation.lastPosition.longitude)};n.prototype.getAltitude=function(){return plt.types.Rational.ZERO};n.prototype.getBearing=function(){return plt.types.Rational.ZERO};n.prototype.getSpeed=function(){return plt.types.Rational.ZERO};n.prototype.getDistanceBetween=function(y,U,aa,da){return plt.types.FloatPoint.makeInstance(navigator.geolocation.getDistanceBetween(y.toFloat(),U.toFloat(),aa.toFloat(),da.toFloat()))};
function m(){this.locationListeners=[];this.currentPosition={latitude:0,longitude:0,atttitude:0,bearing:0,speed:0};this.watchId=false}m.prototype.startService=function(){var y=this;function U(aa){y.currentPosition.latitude=aa.coords.latitude;y.currentPosition.longitude=aa.coords.longitude;for(var da=0;da<y.locationListeners.length;da++){var ha=y.locationListeners[da];ha(aa.coords.latitude,aa.coords.longitude)}}typeof navigator.geolocation!="undefined"&&typeof navigator.geolocation.getCurrentPosition!=
"undefined"&&navigator.geolocation.watchPosition(U);setTimeout(function(){navigator.geolocation.getCurrentPosition(U)},10000)};m.prototype.shutdownService=function(){if(this.watchId){navigator.geolocation.clearWatch(this.watchId);this.watchId=false}};m.prototype.addLocationChangeListener=function(y){this.locationListeners.push(y)};m.prototype.getLatitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.latitude)};m.prototype.getLongitude=function(){return plt.types.FloatPOint.makeInstance(this.currentPosition.longitude)};
m.prototype.getAltitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.altitude)};m.prototype.getBearing=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.bearing)};m.prototype.getSpeed=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.speed)};m.prototype.getDistanceBetween=function(y,U,aa,da){return plt.types.FloatPoint.makeInstance(A(y.toFloat(),U.toFloat(),aa.toFloat(),da.toFloat()))};var O=[],V=[],H,L;function q(y){for(var U=
0;U<O.length;U++)O[U](parseFloat(y.x),parseFloat(y.y),parseFloat(y.z))}function w(y){for(var U=0;U<V.length;U++)V[U](parseFloat(y.azimuth),parseFloat(y.pitch),parseFloat(y.roll))}var o={startService:function(){if(typeof Accelerometer!="undefined"){H=navigator.accelerometer.watchAcceleration(q,function(){});L=navigator.accelerometer.watchOrientation(w,function(){})}},shutdownService:function(){if(typeof Accelerometer!="undefined"){navigator.accelerometer.clearWatch(H);navigator.accelerometer.clearWatch(L);
navigator.accelerometer.stopAllShakeWatches()}},addOrientationChangeListener:function(y){V.push(y)},addAccelerationChangeListener:function(y){O.push(y)}};function G(){return D()?new K:new N}function N(){}N.prototype.getSignalStrengths=function(){return plt.types.Empty.EMPTY};function K(){}K.prototype.getSignalStrengths=function(){for(var y=plt.types.Empty.EMPTY,U=Device.getSignalStrengths(),aa=0;aa<U.length;aa++){var da=U.get(aa);y=plt.types.Cons.makeInstance(plt.Kernel.list([toNum(da.getId()),toNum(da.getStrength())]),
y)}return y};function W(){return D()?new S:new T}function S(){this.listeners=[]}S.prototype.startService=function(){var y=this;function U(){for(var da=0;da<y.listeners.length;da++)y.listeners[da]()}function aa(){}this.shakeId=navigator.accelerometer.watchShake(U,aa)};S.prototype.shutdownService=function(){navigator.accelerometer.stopAllShakeWatches()};S.prototype.addListener=function(y){this.listeners.push(y)};function T(){}T.prototype.startService=function(){};T.prototype.shutdownService=function(){};
T.prototype.addListener=function(){};function X(){return D()?new v:new E}function v(){}v.prototype.getUrl=function(y){y=Device.getUrl(y);return plt.types.String.makeInstance(""+y)};function E(){}E.prototype.getUrl=function(y){var U=new XMLHttpRequest;y="/networkProxy?url="+encodeURIComponent(y);U.open("GET",y,false);U.send(null);return plt.types.String.makeInstance(U.responseText)};function C(){return D()?new c:h()?new e:new g}function h(){return!!document.createElement("audio").canPlayType}function c(){}
c.prototype.beep=function(){navigator.notification.beep(1)};c.prototype.playPlaylist=function(y){Device.playPlaylistRecord(y)};c.prototype.pausePlaylist=function(y){Device.pausePlaylistRecord(y)};c.prototype.stopPlaylist=function(y){Device.stopPlaylistRecord(y)};c.prototype.playSoundUrl=function(y){navigator.audio.playMusic(y)};c.prototype.playDtmfTone=function(y,U){navigator.audio.playDTMF(y);setTimeout(function(){navigator.audio.stopDTMF()},U)};c.prototype.stopSoundUrl=function(y){navigator.audio.stopMusic(y)};
c.prototype.pauseSoundUrl=function(y){navigator.audio.pauseMusic(y)};c.prototype.setVolume=function(y){navigator.audio.setMusicVolume(y)};c.prototype.raiseVolume=function(){navigator.audio.increaseMusicVolume()};c.prototype.lowerVolume=function(){navigator.audio.decreaseMusicVolume()};function e(){this.cachedUrls={};this.baseVolume=100}e.prototype.beep=function(){alert("Beep")};e.prototype.playPlaylistSound=function(){};e.prototype.pausePlaylistSound=function(){};e.prototype.stopPlaylistSound=function(){};
e.prototype.playSoundUrl=function(y){this.cachedUrls[y]||(this.cachedUrls[y]=new Audio(y));var U=this.cachedUrls[y];if(U.ended||U.paused)this.cachedUrls[y].play()};e.prototype.playDtmfTone=function(){alert("dtmf tone")};e.prototype.stopSoundUrl=function(y){if(this.cachedUrls[y]){this.cachedUrls[y].pause();this.cachedUrls[y].currentTime=0}};e.prototype.pauseSoundUrl=function(y){this.cachedUrls[y]&&this.cachedUrls[y].pause()};e.prototype.setVolume=function(y){for(var U in this.cachedUrls)this.cachedUrls[U].volume=
y/100;this.baseVolume=y};e.prototype.raiseVolume=function(){this.setVolume(Math.min(this.baseVolume+5,100))};e.prototype.lowerVolume=function(){this.setVolume(Math.max(this.baseVolume-5,0))};function g(){}g.prototype.beep=function(){alert("Beep")};g.prototype.playPlaylistSound=function(){};g.prototype.pausePlaylistSound=function(){};g.prototype.stopPlaylistSound=function(){};g.prototype.playSoundUrl=function(y){plt.Kernel.reportError("sound url "+y+" should play, but I don't have sound support.")};
g.prototype.playDtmfTone=function(){plt.Kernel.reportError("DTMF tone should play, but I don't have DTMF support")};g.prototype.stopSoundUrl=function(){};g.prototype.pauseSoundUrl=function(){};g.prototype.setVolume=function(){};g.prototype.raiseVolume=function(){};g.prototype.lowerVolume=function(){};function f(){return D()?new x:new R}function x(){this.currentLockFlags=-1}x.prototype.setWakeLock=function(y){if(y!=this.currentLockFlags){navigator.power.setWakeLock(y);this.currentLockFlags=y}};x.prototype.releaseWakeLock=
function(){if(this.currentLockFlags!=-1){navigator.power.releaseWakeLock();this.currentLockFlags=-1}};function R(){}R.prototype.setWakeLock=function(){};R.prototype.releaseWakeLock=function(){};function p(){return D()?new J:new $}function J(){}J.prototype.send=function(y,U){navigator.sms.send(y,U)};function $(){}$.prototype.send=function(y,U){alert("SMS should be sent to "+y+" with the content: "+U)};function ea(){return D()?new ga:new na}function ga(){}ga.prototype.pickPlaylist=function(y){function U(aa){y(aa)}
navigator.dialogPickers.pickPlaylist(U)};function na(){}na.prototype.pickPlaylist=function(){alert("pick playlist currently unavailable")}})();plt.lib={};
(function(){plt.lib.Telephony={};plt.lib.Telephony.getSignalStrengths=function(){return plt.platform.Platform.getInstance().getTelephonyService().getSignalStrengths()};plt.lib.Location={};plt.lib.Location.getLatitude=function(){return plt.platform.Platform.getInstance().getLocationService().getLatitude()};plt.lib.Location.getLongitude=function(){return plt.platform.Platform.getInstance().getLocationService().getLongitude()};plt.lib.Location.getAttitude=function(){return plt.platform.Platform.getInstance().getLocationService().getAttitude()};
plt.lib.Location.getBearing=function(){return plt.platform.Platform.getInstance().getLocationService().getBearing()};plt.lib.Location.getSpeed=function(){return plt.platform.Platform.getInstance().getLocationService().getSpeed()};plt.lib.Location.getDistanceBetween=function(i,u,Q,D){return plt.platform.Platform.getInstance().getLocationService().getDistanceBetween(i,u,Q,D)};plt.lib.Net={};plt.lib.Net.getUrl=function(i){return plt.platform.Platform.getInstance().getNetworkService().getUrl(i)}})();
(function(i){function u(){plt.types.Struct.call(this,"make-effect:none",[])}u.prototype=new plt.types.Struct;function Q(){return new u}function D(k){return k!=null&&k!=undefined&&k instanceof u}function P(){plt.types.Struct.call(this,"make-effect:beep",[])}P.prototype=new plt.types.Struct;function z(){return new P}function A(k){return k!=null&&k!=undefined&&k instanceof P}function I(k,Z){plt.types.Struct.call(this,"make-effect:play-dtmf-tone",[k,Z]);this.tone=k;this.duration=Z}I.prototype=new plt.types.Struct;
function M(k,Z){return new I(k,Z)}function n(k){if(H(k))return k.tone;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:play-dtmf-tone-tone: not a effect:play-dtmf-tone: ~s",[k]));}function m(k){if(H(k))return k.duration;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:play-dtmf-tone-duration: not a effect:play-dtmf-tone: ~s",[k]));}function O(k,Z){if(H(k)){k.tone=Z;k._fields[0]=Z}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_tone_bang_: not a effect:play-dtmf-tone: ~s",
[k]));}function V(k,Z){if(H(k)){k.duration=Z;k._fields[1]=Z}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_duration_bang_: not a effect:play-dtmf-tone: ~s",[k]));}function H(k){return k!=null&&k!=undefined&&k instanceof I}function L(k,Z){plt.types.Struct.call(this,"make-effect:send-sms",[k,Z]);this.address=k;this.msg=Z}L.prototype=new plt.types.Struct;function q(k,Z){return new L(k,Z)}function w(k){if(K(k))return k.address;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:send-sms-address: not a effect:send-sms: ~s",
[k]));}function o(k){if(K(k))return k.msg;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:send-sms-msg: not a effect:send-sms: ~s",[k]));}function G(k,Z){if(K(k)){k.address=Z;k._fields[0]=Z}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_send_dash_sms_dash_address_bang_: not a effect:send-sms: ~s",[k]));}function N(k,Z){if(K(k)){k.msg=Z;k._fields[1]=Z}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_send_dash_sms_dash_msg_bang_: not a effect:send-sms: ~s",
[k]));}function K(k){return k!=null&&k!=undefined&&k instanceof L}function W(k){plt.types.Struct.call(this,"make-playlist-sound",[k]);this.playlist=k}W.prototype=new plt.types.Struct;function S(k){plt.types.Struct.call(this,"make-effect:play-sound",[k]);this.sound=k}S.prototype=new plt.types.Struct;function T(k){return new S(k)}function X(k){if(E(k))return k.sound;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:play-sound-sound: not a effect:play-sound: ~s",[k]));}function v(k,
Z){if(E(k)){k.sound=Z;k._fields[0]=Z}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_play_dash_sound_dash_sound_bang_: not a effect:play-sound: ~s",[k]));}function E(k){return k!=null&&k!=undefined&&k instanceof S}function C(k){plt.types.Struct.call(this,"make-effect:pause-sound",[k]);this.sound=k}C.prototype=new plt.types.Struct;function h(k){return new C(k)}function c(k){if(g(k))return k.sound;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pause-sound-sound: not a effect:pause-sound: ~s",
[k]));}function e(k,Z){if(g(k)){k.sound=Z;k._fields[0]=Z}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pause_dash_sound_dash_sound_bang_: not a effect:pause-sound: ~s",[k]));}function g(k){return k!=null&&k!=undefined&&k instanceof C}function f(k){plt.types.Struct.call(this,"make-effect:stop-sound",[k]);this.sound=k}f.prototype=new plt.types.Struct;function x(k){return new f(k)}function R(k){if(J(k))return k.sound;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:stop-sound-sound: not a effect:stop-sound: ~s",
[k]));}function p(k,Z){if(J(k)){k.sound=Z;k._fields[0]=Z}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_stop_dash_sound_dash_sound_bang_: not a effect:stop-sound: ~s",[k]));}function J(k){return k!=null&&k!=undefined&&k instanceof f}function $(k){plt.types.Struct.call(this,"make-effect:set-sound-volume",[k]);this.volume=k}$.prototype=new plt.types.Struct;function ea(k){return new $(k)}function ga(k){if(y(k))return k.volume;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:set-sound-volume-volume: not a effect:set-sound-volume: ~s",
[k]));}function na(k,Z){if(y(k)){k.volume=Z;k._fields[0]=Z}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_set_dash_sound_dash_volume_dash_volume_bang_: not a effect:set-sound-volume: ~s",[k]));}function y(k){return k!=null&&k!=undefined&&k instanceof $}function U(){plt.types.Struct.call(this,"make-effect:raise-sound-volume",[])}U.prototype=new plt.types.Struct;function aa(){return new U}function da(k){return k!=null&&k!=undefined&&k instanceof U}function ha(){plt.types.Struct.call(this,
"make-effect:lower-sound-volume",[])}ha.prototype=new plt.types.Struct;function ka(){return new ha}function b(k){return k!=null&&k!=undefined&&k instanceof ha}function d(k){plt.types.Struct.call(this,"make-effect:set-wake-lock",[k]);this.locks=k}d.prototype=new plt.types.Struct;function l(k){return new d(k)}function t(k){if(Y(k))return k.locks;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:set-wake-lock-locks: not a effect:set-wake-lock: ~s",[k]));}function F(k,Z){if(Y(k)){k.locks=
Z;k._fields[0]=Z}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_set_dash_wake_dash_lock_dash_locks_bang_: not a effect:set-wake-lock: ~s",[k]));}function Y(k){return k!=null&&k!=undefined&&k instanceof d}function ca(){plt.types.Struct.call(this,"make-effect:release-wake-lock",[])}ca.prototype=new plt.types.Struct;function ja(){return new ca}function ma(k){return k!=null&&k!=undefined&&k instanceof ca}function qa(k){plt.types.Struct.call(this,"make-effect:pick-playlist",
[k]);this.update_dash_f=k}qa.prototype=new plt.types.Struct;function za(k){return new qa(k)}function Ba(k){if(ta(k))return k.update_dash_f;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pick-playlist-update-f: not a effect:pick-playlist: ~s",[k]));}function oa(k,Z){if(ta(k)){k.update_dash_f=Z;k._fields[0]=Z}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pick_dash_playlist_dash_update_dash_f_bang_: not a effect:pick-playlist: ~s",[k]));}function ta(k){return k!=
null&&k!=undefined&&k instanceof qa}function xa(k,Z){plt.types.Struct.call(this,"make-effect:pick-random",[k,Z]);this.n=k;this.update_dash_f=Z}xa.prototype=new plt.types.Struct;function Da(k,Z){return new xa(k,Z)}function Aa(k){if(sa(k))return k.n;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pick-random-n: not a effect:pick-random: ~s",[k]));}function Ea(k){if(sa(k))return k.update_dash_f;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pick-random-update-f: not a effect:pick-random: ~s",
[k]));}function Fa(k,Z){if(sa(k)){k.n=Z;k._fields[0]=Z}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pick_dash_random_dash_n_bang_: not a effect:pick-random: ~s",[k]));}function Ca(k,Z){if(sa(k)){k.update_dash_f=Z;k._fields[1]=Z}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pick_dash_random_dash_update_dash_f_bang_: not a effect:pick-random: ~s",[k]));}function sa(k){return k!=null&&k!=undefined&&k instanceof xa}function ya(k){return D(k)||
A(k)||H(k)||K(k)||E(k)||g(k)||J(k)||y(k)||da(k)||b(k)||Y(k)||ma(k)||ta(k)||sa(k)}(function(k){(function(){})(k||plt.Kernel.identity);i.effect_colon_raise_dash_sound_dash_volume=U;i.make_dash_effect_colon_raise_dash_sound_dash_volume=aa;i.effect_colon_raise_dash_sound_dash_volume_question_=da;i.effect_colon_set_dash_sound_dash_volume=$;i.make_dash_effect_colon_set_dash_sound_dash_volume=ea;i.effect_colon_set_dash_sound_dash_volume_question_=y;i.effect_colon_set_dash_sound_dash_volume_dash_volume=ga;
i.set_dash_effect_colon_set_dash_sound_dash_volume_dash_volume_bang_=na;i.effect_colon_stop_dash_sound=f;i.make_dash_effect_colon_stop_dash_sound=x;i.effect_colon_stop_dash_sound_question_=J;i.effect_colon_stop_dash_sound_dash_sound=R;i.set_dash_effect_colon_stop_dash_sound_dash_sound_bang_=p;i.effect_question_=ya;i.effect_colon_set_dash_wake_dash_lock=d;i.make_dash_effect_colon_set_dash_wake_dash_lock=l;i.effect_colon_set_dash_wake_dash_lock_question_=Y;i.effect_colon_set_dash_wake_dash_lock_dash_locks=
t;i.set_dash_effect_colon_set_dash_wake_dash_lock_dash_locks_bang_=F;i.effect_colon_send_dash_sms=L;i.make_dash_effect_colon_send_dash_sms=q;i.effect_colon_send_dash_sms_question_=K;i.effect_colon_send_dash_sms_dash_address=w;i.effect_colon_send_dash_sms_dash_msg=o;i.set_dash_effect_colon_send_dash_sms_dash_address_bang_=G;i.set_dash_effect_colon_send_dash_sms_dash_msg_bang_=N;i.effect_colon_release_dash_wake_dash_lock=ca;i.make_dash_effect_colon_release_dash_wake_dash_lock=ja;i.effect_colon_release_dash_wake_dash_lock_question_=
ma;i.effect_colon_pause_dash_sound=C;i.make_dash_effect_colon_pause_dash_sound=h;i.effect_colon_pause_dash_sound_question_=g;i.effect_colon_pause_dash_sound_dash_sound=c;i.set_dash_effect_colon_pause_dash_sound_dash_sound_bang_=e;i.effect_colon_play_dash_dtmf_dash_tone=I;i.make_dash_effect_colon_play_dash_dtmf_dash_tone=M;i.effect_colon_play_dash_dtmf_dash_tone_question_=H;i.effect_colon_play_dash_dtmf_dash_tone_dash_tone=n;i.effect_colon_play_dash_dtmf_dash_tone_dash_duration=m;i.set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_tone_bang_=
O;i.set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_duration_bang_=V;i.effect_colon_play_dash_sound=S;i.make_dash_effect_colon_play_dash_sound=T;i.effect_colon_play_dash_sound_question_=E;i.effect_colon_play_dash_sound_dash_sound=X;i.set_dash_effect_colon_play_dash_sound_dash_sound_bang_=v;i.effect_colon_pick_dash_playlist=qa;i.make_dash_effect_colon_pick_dash_playlist=za;i.effect_colon_pick_dash_playlist_question_=ta;i.effect_colon_pick_dash_playlist_dash_update_dash_f=Ba;i.set_dash_effect_colon_pick_dash_playlist_dash_update_dash_f_bang_=
oa;i.effect_colon_pick_dash_random=xa;i.make_dash_effect_colon_pick_dash_random=Da;i.effect_colon_pick_dash_random_question_=sa;i.effect_colon_pick_dash_random_dash_n=Aa;i.effect_colon_pick_dash_random_dash_update_dash_f=Ea;i.set_dash_effect_colon_pick_dash_random_dash_n_bang_=Fa;i.set_dash_effect_colon_pick_dash_random_dash_update_dash_f_bang_=Ca;i.effect_colon_lower_dash_sound_dash_volume=ha;i.make_dash_effect_colon_lower_dash_sound_dash_volume=ka;i.effect_colon_lower_dash_sound_dash_volume_question_=
b;i.effect_colon_none=u;i.make_dash_effect_colon_none=Q;i.effect_colon_none_question_=D;i.effect_colon_beep=P;i.make_dash_effect_colon_beep=z;i.effect_colon_beep_question_=A})()})(this);plt.world.Kernel={};
(function(){var i,u=[],Q,D=false;function P(e){function g(){}g.prototype=e;return new g}function z(e){function g(){}g.prototype=e;var f=new g;for(property in e)if(e.hasOwnProperty(property))f[property]=e[property];return f}var A=[];plt.world.Kernel.addAnnounceListener=function(e){A.push(e)};plt.world.Kernel.removeAnnounceListener=function(e){e=A.indexOf(e);e!=-1&&A.splice(e,1)};plt.world.Kernel.announce=function(e,g){for(var f=0;f<A.length;f++)try{A[f](e,g)}catch(x){}};function I(e){i=e;M()}plt.world.Kernel.updateWorld=
function(e){e=e(i);I(e)};plt.world.Kernel.shutdownWorld=function(){Q=true};function M(){var e;for(e=0;e<u.length;e++)u[e](i)}function n(e){u.push(e)}function m(){if(D){clearInterval(D);D=false}Q=false;u=[]}function O(){if(window.document.getElementById("canvas")!=undefined)return window;var e=window.open("big-bang.html","big-bang");if(e==null)throw new Error("Error: Not allowed to create a new window.");return e}plt.world.Kernel.bigBang=function(e,g,f,x){plt.Kernel.check(e,plt.Kernel.isNumber,"big-bang",
"number",1);plt.Kernel.check(g,plt.Kernel.isNumber,"big-bang","number",2);plt.Kernel.arrayEach(args,function($,ea){plt.Kernel.check($,plt.Kernel.isFunction,"big-bang","handler",ea+4)});var R=O(e,g),p=R.document.getElementById("canvas");p.width=e.toFixnum();p.height=g.toFixnum();m();var J=new plt.world.config.WorldConfig;for(e=0;e<x.length;e++)J=x[e](J);J=J.updateAll({changeWorld:plt.world.Kernel.updateWorld,shutdownWorld:plt.world.Kernel.shutdownWorld});plt.world.config.CONFIG=J;if(J.lookup("onKey"))R.onkeydown=
function($){plt.world.stimuli.onKey($)};J.lookup("onRedraw")&&n(function($){var ea=p.getContext("2d");$=J.lookup("onRedraw")([$]);$.render(ea,0,0)});n(function($){if(J.lookup("stopWhen"))if(J.lookup("stopWhen")([$]))Q=true});J.lookup("onTick")&&V(R,J);I(f);if(J.lookup("initialEffect")){f=plt.world.Kernel.applyEffect(J.lookup("initialEffect"));for(e=0;e<f.length;e++)Q||updateWorld(f)}};function V(e,g){D=e.setInterval(function(){if(Q){e.clearTimeout(D);D=false}else plt.world.stimuli.onTick()},g.lookup("tickDelay"))}
plt.world.Kernel.isKeyEqual=function(e,g){return e=e.toString().toLowerCase()==g.toString().toLowerCase()};plt.world.Kernel.imageWidth=function(e){plt.Kernel.check(e,w,"image-width","image",1);return plt.types.Rational.makeInstance(e.getWidth(),1)};plt.world.Kernel.imageHeight=function(e){plt.Kernel.check(e,w,"image-height","image",1);return plt.types.Rational.makeInstance(e.getHeight(),1)};plt.world.Kernel.placeImage=function(e,g,f,x){plt.Kernel.check(e,w,"place-image","image",1);plt.Kernel.check(g,
plt.Kernel.isNumber,"place-image","number",2);plt.Kernel.check(f,plt.Kernel.isNumber,"place-image","number",3);plt.Kernel.check(x,function(p){return o(p)||w(p)},"place-image","image",4);if(o(x))return x.add(e,plt.types.NumberTower.toFixnum(g),plt.types.NumberTower.toFixnum(f));else{var R=new G(x.getWidth(),x.getHeight(),[]);R=R.add(x,0,0);return R=R.add(e,plt.types.NumberTower.toFixnum(g),plt.types.NumberTower.toFixnum(f))}};plt.world.Kernel.emptyScene=function(e,g){plt.Kernel.check(e,plt.Kernel.isNumber,
"empty-scene","number",1);plt.Kernel.check(g,plt.Kernel.isNumber,"empty-scene","number",2);return new G(plt.types.NumberTower.toFixnum(e),plt.types.NumberTower.toFixnum(g),[])};function H(e){return e!==undefined&&e!==null&&(e instanceof h||typeof c.get(e)!="undefined")}plt.world.Kernel.text=function(e,g,f){plt.Kernel.check(e,plt.Kernel.isString,"text","string",1);plt.Kernel.check(g,plt.Kernel.isNumber,"text","number",2);plt.Kernel.check(f,H,"text","color",3);if(c.get(f))f=c.get(f);return new T(e,
plt.types.NumberTower.toFixnum(g),f)};function L(e){return(plt.Kernel.isString(e)||plt.Kernel.isSymbol(e))&&(e.toString().toLowerCase()=="solid"||e.toString().toLowerCase()=="outline")}plt.world.Kernel.circle=function(e,g,f){plt.Kernel.check(e,plt.Kernel.isNumber,"circle","number",1);plt.Kernel.check(g,L,"circle","style",2);plt.Kernel.check(f,H,"circle","color",3);if(c.get(f))f=c.get(f);return new X(plt.types.NumberTower.toFixnum(e),g,f)};plt.world.Kernel.star=function(e,g,f,x,R){plt.Kernel.check(e,
plt.Kernel.isNumber,"star","number",1);plt.Kernel.check(g,plt.Kernel.isNumber,"star","number",2);plt.Kernel.check(f,plt.Kernel.isNumber,"star","number",3);plt.Kernel.check(x,L,"star","style",4);plt.Kernel.check(R,H,"star","color",5);if(c.get(R))R=c.get(R);return new v(plt.types.NumberTower.toFixnum(e),plt.types.NumberTower.toFixnum(g),plt.types.NumberTower.toFixnum(f),x,R)};plt.world.Kernel.openImageUrl=function(e){plt.Kernel.check(e,plt.Kernel.isString,"open-image-url","string",1);return N.makeInstance(e.toString())};
plt.world.Kernel.nwRectangle=function(e,g,f,x){plt.Kernel.check(e,plt.Kernel.isNumber,"nw:rectangle","number",1);plt.Kernel.check(g,plt.Kernel.isNumber,"nw:rectangle","number",2);plt.Kernel.check(f,L,"nw:rectangle","style",3);plt.Kernel.check(x,H,"nw:rectangle","color",4);if(c.get(x))x=c.get(x);e=new S(plt.types.NumberTower.toFixnum(e),plt.types.NumberTower.toFixnum(g),f,x);return e.updatePinhole(0,0)};plt.world.Kernel.rectangle=function(e,g,f,x){plt.Kernel.check(e,plt.Kernel.isNumber,"rectangle",
"number",1);plt.Kernel.check(g,plt.Kernel.isNumber,"rectangle","number",2);plt.Kernel.check(f,L,"rectangle","style",3);plt.Kernel.check(x,H,"rectangle","color",4);if(c.get(x))x=c.get(x);return new S(plt.types.NumberTower.toFixnum(e),plt.types.NumberTower.toFixnum(g),f,x)};function q(e,g){this.pinholeX=e;this.pinholeY=g}plt.world.Kernel.BaseImage=q;function w(e){return e!=null&&e!=undefined&&e instanceof q}plt.world.Kernel.isImage=w;plt.world.Kernel.put_dash_pinhole=function(e,g,f){plt.Kernel.check(e,
w,"put-pinhole","image",1);plt.Kernel.check(g,plt.Kernel.isNumber,"put-pinhole","number",2);plt.Kernel.check(f,plt.Kernel.isNumber,"put-pinhole","number",3);return e.updatePinhole(g.toFixnum(),f.toFixnum())};q.prototype.updatePinhole=function(e,g){var f=z(this);f.pinholeX=e;f.pinholeY=g;return f};q.prototype.render=function(){throw new MobyRuntimeError("Unimplemented method render");};plt.world.Kernel.makeCanvas=function(e,g){var f=document.createElement("canvas");f.width=e;f.height=g;f.style.width=
f.width+"px";f.style.height=f.height+"px";if(window&&typeof window.G_vmlCanvasManager!="undefined"){f.style.display="none";document.body.appendChild(f);f=window.G_vmlCanvasManager.initElement(f);document.body.removeChild(f);f.style.display=""}return f};q.prototype.toDomNode=function(){var e=this,g=plt.world.Kernel.imageWidth(e).toFixnum(),f=plt.world.Kernel.imageHeight(e).toFixnum();g=plt.world.Kernel.makeCanvas(g,f);g.style.display="none";document.body.appendChild(g);f=g.getContext("2d");e.render(f,
0,0);document.body.removeChild(g);g.style.display="";return g};q.prototype.toWrittenString=function(){return"<image>"};q.prototype.toDisplayedString=function(){return"<image>"};plt.world.Kernel.image_question_=function(e){return w(e)};plt.world.Kernel.image_equal__question_=function(e,g){check(e,w,"image=?","image",1);check(g,w,"image=?","image",2);return e==g?plt.types.Logic.TRUE:plt.types.Logic.FALSE};function o(e){return e!=undefined&&e!=null&&e instanceof G}function G(e,g,f){q.call(this,0,0);
this.width=e;this.height=g;this.children=f}G.prototype=P(q.prototype);G.prototype.add=function(e,g,f){return new G(this.width,this.height,this.children.concat([[e,g-e.pinholeX,f-e.pinholeY]]))};G.prototype.render=function(e,g,f){var x,R,p,J;e.clearRect(g,f,this.width,this.height);for(x=0;x<this.children.length;x++){R=this.children[x][0];p=this.children[x][1];J=this.children[x][2];e.save();R.render(e,p+g,J+f);e.restore()}};G.prototype.getWidth=function(){return this.width};G.prototype.getHeight=function(){return this.height};
function N(e,g){q.call(this,0,0);var f=this;this.isLoaded=false;if(g&&g.complete){this.img=g;this.isLoaded=true;this.pinholeX=f.img.width/2;this.pinholeY=f.img.height/2}else{this.img=new Image;this.img.onload=function(){f.isLoaded=true;f.pinholeX=f.img.width/2;f.pinholeY=f.img.height/2};this.img.onerror=function(){f.img.onerror="";f.img.src="http://www.wescheme.org/images/broken.png"};this.img.src=e}}N.prototype=P(q.prototype);plt.world.Kernel.FileImage=N;var K={};N.makeInstance=function(e){e in K||
(K[e]=new N(e));return K[e]};N.installInstance=function(e,g){K[e]=new N(e,g)};N.installBrokenImage=function(e){K[e]=new T("Unable to load "+e,10,c.get("red"))};N.prototype.render=function(e,g,f){e.drawImage(this.img,g,f)};N.prototype.getWidth=function(){return this.img.width};N.prototype.getHeight=function(){return this.img.height};N.prototype.toDomNode=function(){return this.img.cloneNode(true)};function W(e,g){var f=e.pinholeX-g.pinholeX,x=e.pinholeY-g.pinholeY,R=Math.min(0,f),p=Math.min(0,x),J=
Math.max(f+g.getWidth(),e.getWidth()),$=Math.max(x+g.getHeight(),e.getHeight());q.call(this,e.pinholeX-R,e.pinholeY-p);this.img1=e;this.img2=g;this.width=J-R;this.height=$-p;this.img1Dx=-R;this.img1Dy=-p;this.img2Dx=f-R;this.img2Dy=x-p}W.prototype=P(q.prototype);W.prototype.render=function(e,g,f){this.img1.render(e,g+this.img1Dx,f+this.img1Dy);this.img2.render(e,g+this.img2Dx,f+this.img2Dy)};W.prototype.getWidth=function(){return this.width};W.prototype.getHeight=function(){return this.height};plt.world.Kernel.overlay=
function(e,g,f){plt.Kernel.check(e,w,"overlay","image",1);plt.Kernel.check(g,w,"overlay","image",2);plt.Kernel.arrayEach(f,function(x,R){plt.Kernel.check(x,w,"overlay","image",R+3)});e=new W(e,g);for(g=0;g<f.length;g++)e=new W(e,f[g]);return e};plt.world.Kernel.overlay_slash_xy=function(e,g,f,x){plt.Kernel.check(e,w,"overlay/xy","image",1);plt.Kernel.check(g,plt.Kernel.isNumber,"overlay/xy","number",2);plt.Kernel.check(f,plt.Kernel.isNumber,"overlay/xy","number",3);plt.Kernel.check(x,w,"overlay/xy",
"image",4);return new W(e,x.updatePinhole(g.toFixnum(),f.toFixnum()))};function S(e,g,f,x){q.call(this,e/2,g/2);this.width=e;this.height=g;this.style=f;this.color=x}S.prototype=P(q.prototype);S.prototype.render=function(e,g,f){e.fillStyle=this.color.toString();e.strokeStyle=this.color.toString();this.style.toString().toLowerCase()=="outline"?e.strokeRect(g,f,this.width,this.height):e.fillRect(g,f,this.width,this.height)};S.prototype.getWidth=function(){return this.width};S.prototype.getHeight=function(){return this.height};
function T(e,g,f){q.call(this,0,0);this.msg=e;this.size=g;this.color=f;this.font=this.size+"px Optimer";g=plt.world.Kernel.makeCanvas(0,0);g=g.getContext("2d");g.font=this.font;e=g.measureText(e);this.width=e.width;this.height=g.measureText("m").width+20}T.prototype=P(q.prototype);T.prototype.render=function(e,g,f){e.font=this.font;e.textAlign="left";e.textBaseline="top";e.fillStyle=this.color.toString();e.strokeStyle=this.color.toString();e.fillText(this.msg,g,f)};T.prototype.getWidth=function(){return this.width};
T.prototype.getHeight=function(){return this.height};function X(e,g,f){q.call(this,e,e);this.radius=e;this.style=g;this.color=f}X.prototype=P(q.prototype);X.prototype.render=function(e,g,f){e.beginPath();e.fillStyle=this.color.toString();e.strokeStyle=this.color.toString();e.arc(g+this.radius,f+this.radius,this.radius,0,2*Math.PI,false);this.style.toString().toLowerCase()=="outline"?e.stroke():e.fill();e.closePath()};X.prototype.getWidth=function(){return this.radius*2};X.prototype.getHeight=function(){return this.radius*
2};function v(e,g,f,x,R){q.call(this,Math.max(g,f),Math.max(g,f));this.points=e;this.outer=g;this.inner=f;this.style=x;this.color=R;this.radius=Math.max(this.inner,this.outer)}v.prototype=P(q.prototype);var E=Math.PI/180;v.prototype.render=function(e,g,f){e.save();e.beginPath();e.fillStyle=this.color.toString();e.strokeStyle=this.color.toString();for(var x=0;x<this.points*2+1;x++){var R=360/(2*this.points)*x*E-0.5,p=x%2==1?this.outer:this.inner;e.lineTo(g+this.radius+Math.sin(R)*p,f+this.radius+Math.cos(R)*
p)}this.style.toString().toLowerCase()=="outline"?e.stroke():e.fill();e.closePath();e.restore()};v.prototype.getWidth=function(){return this.radius*2};v.prototype.getHeight=function(){return this.radius*2};plt.world.Kernel.applyEffect=function(e){var g=[];if(!plt.Kernel.empty_question_(e))if(plt.Kernel.pair_question_(e)){g=g.concat(plt.world.Kernel.applyEffect(e.first()));g=g.concat(plt.world.Kernel.applyEffect(e.rest()))}else if(e=e.run())g=g.concat(e);return g};effect_colon_none.prototype.run=function(){};
effect_colon_beep.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService().beep()};effect_colon_play_dash_dtmf_dash_tone.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService().playDtmfTone(this._fields[0].toFixnum(),this._fields[1].toFixnum())};effect_colon_send_dash_sms.prototype.run=function(){plt.platform.Platform.getInstance().getSmsService().send(this._fields[0],this._fields[1])};effect_colon_play_dash_sound.prototype.run=function(){if(plt.Kernel.isString(this._fields[0]))plt.platform.Platform.getInstance().getSoundService().playSoundUrl(this._fields[0]);
else playlist_dash_sound_question_(this._fields[0])&&plt.platform.Platform.getInstance().getSoundService().playPlaylist(this._fields[0]._fields[0])};effect_colon_pause_dash_sound.prototype.run=function(){if(plt.Kernel.isString(this._fields[0]))plt.platform.Platform.getInstance().getSoundService().pauseSoundUrl(this._fields[0]);else playlist_dash_sound_question_(this._fields[0])&&plt.platform.Platform.getInstance().getSoundService().pausePlaylist(this._fields[0]._fields[0])};effect_colon_stop_dash_sound.prototype.run=
function(){if(plt.Kernel.isString(this._fields[0]))plt.platform.Platform.getInstance().getSoundService().stopSoundUrl(this._fields[0]);else playlist_dash_sound_question_(this._fields[0])&&plt.platform.Platform.getInstance().getSoundService().stopPlaylist(this._fields[0]._fields[0])};effect_colon_set_dash_sound_dash_volume.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService().setVolume(this._fields[0].toFixnum())};effect_colon_raise_dash_sound_dash_volume.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService.raiseVolume()};
effect_colon_lower_dash_sound_dash_volume.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService.lowerVolume()};effect_colon_set_dash_wake_dash_lock.prototype.run=function(){plt.platform.Platform.getInstance().getPowerService().setWakeLock(this._fields[0].toFixnum())};effect_colon_release_dash_wake_dash_lock.prototype.run=function(){plt.platform.Platform.getInstance().getPowerService().releaseWakeLock()};effect_colon_pick_dash_playlist.prototype.run=function(){var e=this._fields[0];
function g(f){var x=make_dash_playlist_dash_sound(f);setTimeout(function(){var R=plt.world.config.CONFIG.lookup("changeWorld");R(function(p){return e([p,x])})},0)}plt.platform.Platform.getInstance().getPickPlaylistService().pickPlaylist(g)};effect_colon_pick_dash_random.prototype.run=function(){var e=plt.types.Rational.makeInstance(Math.floor(plt.types.NumberTower.toFixnum(this._fields[0])*Math.random()),1),g=this._fields[1];return function(f){return g([f,e])}};function C(){this.colors={}}C.prototype.put=
function(e,g){this.colors[e]=g};C.prototype.get=function(e){return this.colors[e.toString().toUpperCase()]};plt.world.Kernel.make_dash_color=function(e,g,f){function x(R){return plt.types.NumberTower.lessThanOrEqual(plt.types.Rational.ZERO,R)&&plt.types.NumberTower.lessThanOrEqual(R,plt.types.Rational.makeInstance(255,1))}plt.Kernel.check(e,x,"make-color","number between 0 and 255",1);plt.Kernel.check(g,x,"make-color","number between 0 and 255",2);plt.Kernel.check(f,x,"make-color","number between 0 and 255",
3);return new h(e.toFixnum(),g.toFixnum(),f.toFixnum())};function h(e,g,f){plt.types.Struct.call(this,"make-color",[e,g,f]);this._eqHashCode=plt.types.makeEqHashCode()}h.prototype=P(plt.types.Struct.prototype);h.prototype.toString=function(){return"rgb("+this._fields[0]+","+this._fields[1]+","+this._fields[2]+")"};h.prototype.toRGBAString=function(){return"rgba("+this._fields[0]+","+this._fields[1]+","+this._fields[2]+", 1)"};var c=new C;c.put("ORANGE",new h(255,165,0));c.put("RED",new h(255,0,0));
c.put("ORANGERED",new h(255,69,0));c.put("TOMATO",new h(255,99,71));c.put("DARKRED",new h(139,0,0));c.put("RED",new h(255,0,0));c.put("FIREBRICK",new h(178,34,34));c.put("CRIMSON",new h(220,20,60));c.put("DEEPPINK",new h(255,20,147));c.put("MAROON",new h(176,48,96));c.put("INDIAN RED",new h(205,92,92));c.put("INDIANRED",new h(205,92,92));c.put("MEDIUM VIOLET RED",new h(199,21,133));c.put("MEDIUMVIOLETRED",new h(199,21,133));c.put("VIOLET RED",new h(208,32,144));c.put("VIOLETRED",new h(208,32,144));
c.put("LIGHTCORAL",new h(240,128,128));c.put("HOTPINK",new h(255,105,180));c.put("PALEVIOLETRED",new h(219,112,147));c.put("LIGHTPINK",new h(255,182,193));c.put("ROSYBROWN",new h(188,143,143));c.put("PINK",new h(255,192,203));c.put("ORCHID",new h(218,112,214));c.put("LAVENDERBLUSH",new h(255,240,245));c.put("SNOW",new h(255,250,250));c.put("CHOCOLATE",new h(210,105,30));c.put("SADDLEBROWN",new h(139,69,19));c.put("BROWN",new h(132,60,36));c.put("DARKORANGE",new h(255,140,0));c.put("CORAL",new h(255,
127,80));c.put("SIENNA",new h(160,82,45));c.put("ORANGE",new h(255,165,0));c.put("SALMON",new h(250,128,114));c.put("PERU",new h(205,133,63));c.put("DARKGOLDENROD",new h(184,134,11));c.put("GOLDENROD",new h(218,165,32));c.put("SANDYBROWN",new h(244,164,96));c.put("LIGHTSALMON",new h(255,160,122));c.put("DARKSALMON",new h(233,150,122));c.put("GOLD",new h(255,215,0));c.put("YELLOW",new h(255,255,0));c.put("OLIVE",new h(128,128,0));c.put("BURLYWOOD",new h(222,184,135));c.put("TAN",new h(210,180,140));
c.put("NAVAJOWHITE",new h(255,222,173));c.put("PEACHPUFF",new h(255,218,185));c.put("KHAKI",new h(240,230,140));c.put("DARKKHAKI",new h(189,183,107));c.put("MOCCASIN",new h(255,228,181));c.put("WHEAT",new h(245,222,179));c.put("BISQUE",new h(255,228,196));c.put("PALEGOLDENROD",new h(238,232,170));c.put("BLANCHEDALMOND",new h(255,235,205));c.put("MEDIUM GOLDENROD",new h(234,234,173));c.put("MEDIUMGOLDENROD",new h(234,234,173));c.put("PAPAYAWHIP",new h(255,239,213));c.put("MISTYROSE",new h(255,228,
225));c.put("LEMONCHIFFON",new h(255,250,205));c.put("ANTIQUEWHITE",new h(250,235,215));c.put("CORNSILK",new h(255,248,220));c.put("LIGHTGOLDENRODYELLOW",new h(250,250,210));c.put("OLDLACE",new h(253,245,230));c.put("LINEN",new h(250,240,230));c.put("LIGHTYELLOW",new h(255,255,224));c.put("SEASHELL",new h(255,245,238));c.put("BEIGE",new h(245,245,220));c.put("FLORALWHITE",new h(255,250,240));c.put("IVORY",new h(255,255,240));c.put("GREEN",new h(0,255,0));c.put("LAWNGREEN",new h(124,252,0));c.put("CHARTREUSE",
new h(127,255,0));c.put("GREEN YELLOW",new h(173,255,47));c.put("GREENYELLOW",new h(173,255,47));c.put("YELLOW GREEN",new h(154,205,50));c.put("YELLOWGREEN",new h(154,205,50));c.put("MEDIUM FOREST GREEN",new h(107,142,35));c.put("OLIVEDRAB",new h(107,142,35));c.put("MEDIUMFORESTGREEN",new h(107,142,35));c.put("DARK OLIVE GREEN",new h(85,107,47));c.put("DARKOLIVEGREEN",new h(85,107,47));c.put("DARKSEAGREEN",new h(143,188,139));c.put("LIME",new h(0,255,0));c.put("DARK GREEN",new h(0,100,0));c.put("DARKGREEN",
new h(0,100,0));c.put("LIME GREEN",new h(50,205,50));c.put("LIMEGREEN",new h(50,205,50));c.put("FOREST GREEN",new h(34,139,34));c.put("FORESTGREEN",new h(34,139,34));c.put("SPRING GREEN",new h(0,255,127));c.put("SPRINGGREEN",new h(0,255,127));c.put("MEDIUM SPRING GREEN",new h(0,250,154));c.put("MEDIUMSPRINGGREEN",new h(0,250,154));c.put("SEA GREEN",new h(46,139,87));c.put("SEAGREEN",new h(46,139,87));c.put("MEDIUM SEA GREEN",new h(60,179,113));c.put("MEDIUMSEAGREEN",new h(60,179,113));c.put("AQUAMARINE",
new h(112,216,144));c.put("LIGHTGREEN",new h(144,238,144));c.put("PALE GREEN",new h(152,251,152));c.put("PALEGREEN",new h(152,251,152));c.put("MEDIUM AQUAMARINE",new h(102,205,170));c.put("MEDIUMAQUAMARINE",new h(102,205,170));c.put("TURQUOISE",new h(64,224,208));c.put("LIGHTSEAGREEN",new h(32,178,170));c.put("MEDIUM TURQUOISE",new h(72,209,204));c.put("MEDIUMTURQUOISE",new h(72,209,204));c.put("HONEYDEW",new h(240,255,240));c.put("MINTCREAM",new h(245,255,250));c.put("ROYALBLUE",new h(65,105,225));
c.put("DODGERBLUE",new h(30,144,255));c.put("DEEPSKYBLUE",new h(0,191,255));c.put("CORNFLOWERBLUE",new h(100,149,237));c.put("STEEL BLUE",new h(70,130,180));c.put("STEELBLUE",new h(70,130,180));c.put("LIGHTSKYBLUE",new h(135,206,250));c.put("DARK TURQUOISE",new h(0,206,209));c.put("DARKTURQUOISE",new h(0,206,209));c.put("CYAN",new h(0,255,255));c.put("AQUA",new h(0,255,255));c.put("DARKCYAN",new h(0,139,139));c.put("TEAL",new h(0,128,128));c.put("SKY BLUE",new h(135,206,235));c.put("SKYBLUE",new h(135,
206,235));c.put("CADET BLUE",new h(96,160,160));c.put("CADETBLUE",new h(95,158,160));c.put("DARK SLATE GRAY",new h(47,79,79));c.put("DARKSLATEGRAY",new h(47,79,79));c.put("LIGHTSLATEGRAY",new h(119,136,153));c.put("SLATEGRAY",new h(112,128,144));c.put("LIGHT STEEL BLUE",new h(176,196,222));c.put("LIGHTSTEELBLUE",new h(176,196,222));c.put("LIGHT BLUE",new h(173,216,230));c.put("LIGHTBLUE",new h(173,216,230));c.put("POWDERBLUE",new h(176,224,230));c.put("PALETURQUOISE",new h(175,238,238));c.put("LIGHTCYAN",
new h(224,255,255));c.put("ALICEBLUE",new h(240,248,255));c.put("AZURE",new h(240,255,255));c.put("MEDIUM BLUE",new h(0,0,205));c.put("MEDIUMBLUE",new h(0,0,205));c.put("DARKBLUE",new h(0,0,139));c.put("MIDNIGHT BLUE",new h(25,25,112));c.put("MIDNIGHTBLUE",new h(25,25,112));c.put("NAVY",new h(36,36,140));c.put("BLUE",new h(0,0,255));c.put("INDIGO",new h(75,0,130));c.put("BLUE VIOLET",new h(138,43,226));c.put("BLUEVIOLET",new h(138,43,226));c.put("MEDIUM SLATE BLUE",new h(123,104,238));c.put("MEDIUMSLATEBLUE",
new h(123,104,238));c.put("SLATE BLUE",new h(106,90,205));c.put("SLATEBLUE",new h(106,90,205));c.put("PURPLE",new h(160,32,240));c.put("DARK SLATE BLUE",new h(72,61,139));c.put("DARKSLATEBLUE",new h(72,61,139));c.put("DARKVIOLET",new h(148,0,211));c.put("DARK ORCHID",new h(153,50,204));c.put("DARKORCHID",new h(153,50,204));c.put("MEDIUMPURPLE",new h(147,112,219));c.put("CORNFLOWER BLUE",new h(68,64,108));c.put("MEDIUM ORCHID",new h(186,85,211));c.put("MEDIUMORCHID",new h(186,85,211));c.put("MAGENTA",
new h(255,0,255));c.put("FUCHSIA",new h(255,0,255));c.put("DARKMAGENTA",new h(139,0,139));c.put("VIOLET",new h(238,130,238));c.put("PLUM",new h(221,160,221));c.put("LAVENDER",new h(230,230,250));c.put("THISTLE",new h(216,191,216));c.put("GHOSTWHITE",new h(248,248,255));c.put("WHITE",new h(255,255,255));c.put("WHITESMOKE",new h(245,245,245));c.put("GAINSBORO",new h(220,220,220));c.put("LIGHT GRAY",new h(211,211,211));c.put("LIGHTGRAY",new h(211,211,211));c.put("SILVER",new h(192,192,192));c.put("GRAY",
new h(190,190,190));c.put("DARK GRAY",new h(169,169,169));c.put("DARKGRAY",new h(169,169,169));c.put("DIM GRAY",new h(105,105,105));c.put("DIMGRAY",new h(105,105,105));c.put("BLACK",new h(0,0,0))})();plt.Jsworld={};
(function(){var i=plt.Jsworld,u=false;function Q(){}var D=new Q,P=[],z=[];i.shutdown=function(){for(;z.length>0;){var j=z.pop();j&&j.pause()}M()};function A(j){P.push(j)}function I(j){j=P.indexOf(j);j!=-1&&P.splice(j,1)}function M(){D=new Q;P=[]}function n(j){var s=D;try{D=j(D)}catch(r){D=s;throw r;}for(j=0;j<P.length;j++)try{P[j](D,s)}catch(B){D=s;throw B;}}i.change_world=n;Number.prototype.NaN0=function(){return isNaN(this)?0:this};function m(j){for(var s=0,r=0;j.offsetParent;){s+=j.offsetLeft+
(j.currentStyle?parseInt(j.currentStyle.borderLeftWidth).NaN0():0);r+=j.offsetTop+(j.currentStyle?parseInt(j.currentStyle.borderTopWidth).NaN0():0);j=j.offsetParent}s+=j.offsetLeft+(j.currentStyle?parseInt(j.currentStyle.borderLeftWidth).NaN0():0);r+=j.offsetTop+(j.currentStyle?parseInt(j.currentStyle.borderTopWidth).NaN0():0);return{x:s,y:r}}i.getPosition=m;var O=0;function V(){return O++}i.gensym=V;function H(j,s){for(var r=new Array(j.length),B=0;B<j.length;B++)r[B]=s(j[B]);return r}i.map=H;function L(j,
s){for(var r=[],B=0;B<j.length;B++)r=r.concat(s(j[B]));return r}function q(j,s){for(var r=new Array(j.length),B=0;B<j.length;B++)r[B]=s(j[B],B);return r}i.mapi=q;function w(j,s,r){for(var B=0;B<j.length;B++)s=r(j[B],s);return s}i.fold=w;function o(j,s){var r={};for(var B in j)r[B]=j[B];for(B in s)r[B]=s[B];return r}i.augment=o;function G(j,s,r){var B={};for(var ba in j)B[ba]=j[ba];B[s]=r;return B}i.assoc_cons=G;function N(j,s){return j.concat([s])}i.cons=N;function K(j,s){return j.concat(s)}i.append=
K;function W(j,s){for(var r=[],B=0;B<j.length;B++)r.push([j[B],s[B]]);return r}i.array_join=W;function S(j,s){for(var r=0;r<j.length;r++)if(j[r]===s)return j.slice(0,r).concat(j.slice(r+1));return j}i.removeq=S;function T(j,s){for(var r=0;r<j.length;r++)if(s(j[r]))return j.slice(0,r).concat(j.slice(r+1));return j}i.removef=T;function X(j,s){for(var r=0;r<j.length;r++)if(s(j[r]))return j.slice(0,r).concat(X(j.slice(r+1),s));return j}i.filter=X;function v(j,s){var r={};for(var B in j)if(B!=s)r[B]=j[B];
return r}i.without=v;function E(j,s){for(var r=0;r<j.length;r++)if(j[r]===s)return true;return false}i.memberq=E;function C(j,s){for(var r=0;r<j.length;r++)if(j[r]==s)return true;return false}i.member=C;function h(j){return j[0]}i.head=h;function c(j){return j.slice(1,j.length)}i.tail=c;function e(j){var s=[j];for(j=j.firstChild;j!=null;j=j.nextSibling)s.push(e(j));return s}i.node_to_tree=e;function g(j){var s=[j.node];if(j.node.jsworldOpaque==true)return s;for(var r=0;r<j.children.length;r++)s=s.concat(g(j.children[r]));
return s}function f(j,s){return j&&s&&j===s}function x(j,s){return!f(j,s)}function R(j){var s=[];if(j.node.jsworldOpaque==true)return[];for(var r=0;r<j.children.length;r++)s.push({relation:"parent",parent:j.node,child:j.children[r].node});for(r=0;r<j.children.length-1;r++)s.push({relation:"neighbor",left:j.children[r].node,right:j.children[r+1].node});for(r=0;r<j.children.length;r++)s=s.concat(R(j.children[r]));return s}function p(j,s){j.appendChild(s)}function J(j,s,r){for(var B=0;B<r.length;B++)if(r[B].relation==
"parent"){var ba=r[B].parent,fa=r[B].child;x(fa.parentNode,ba)&&p(ba,fa)}for(;;){ba=false;for(B=0;B<r.length;B++)if(r[B].relation=="neighbor"){fa=r[B].left;var la=r[B].right;if(x(fa.nextSibling,la)){fa.parentNode.insertBefore(fa,la);ba=true}}if(!ba)break}var ia;function va(ua,ra){ra=ua.compareDocumentPosition(ra);if(ra&ua.DOCUMENT_POSITION_CONTAINED_BY)return 1;if(ra&ua.DOCUMENT_POSITION_CONTAINS)return-1;if(ra&ua.DOCUMENT_POSITION_FOLLOWING)return-1;if(ra&ua.DOCUMENT_POSITION_PRECEDING)return 1;
return 0}try{ia=s.concat(j).sort(va)}catch(pa){ia=null}r=j;for(j=j.parentNode;r!=j;){for(;;){if(r.firstChild==null||r.jsworldOpaque==true)break;r=r.firstChild}for(;r!=j;){fa=r.nextSibling;ba=r.parentNode;la=false;var wa=undefined;if(ia!=null)for(;ia.length>0&&va(r,ia[0])>=0;){B=ia.shift();if(f(B,r)){la=true;wa=B;break}}else for(B=0;B<s.length;B++)if(f(s[B],r)){la=true;wa=s[B];break}if(la)$(r,wa);else{if(!r.isJsworldOpaque)for(;r.firstChild!=null;)p(r.parentNode,r.firstChild);fa=r.nextSibling;r.parentNode.removeChild(r)}if(fa==
null)r=ba;else{r=fa;break}}}aa(s)}function $(){}function ea(j){return j.replace(/\-(.)/g,function(s,r){return r.toUpperCase()})}function ga(j,s){for(var r=0;r<s.length;r++)j.style[ea(s[r].attrib)]=s[r].values.join(" ")}function na(j,s){return s.id.match(/^\./)?"class"in j&&C(j["class"].split(/\s+/),s.id.substring(1)):"id"in j&&j.id==s.id}function y(j,s){for(var r=0;r<j.length;r++)U(j[r]);for(r=0;r<s.length;r++)if("id"in s[r])for(var B=0;B<j.length;B++)na(j[B],s[r])&&ga(j[B],s[r].attribs);else ga(s[r].node,
s[r].attribs)}function U(j){if("style"in j)j.style.cssText=""}function aa(j){for(var s=0;s<j.length;s++)j[s].onWorldChange&&j[s].onWorldChange(D)}function da(j,s,r,B,ba){if(s instanceof Q){var fa=ta(B(j)),la=g(fa);y(la,Aa(ba(j)));J(r,la,R(fa))}else ha(function(){var ia=B(s),va=B(j),pa=ba(s),wa=ba(j),ua=ta(va),ra=g(ua);if(ia!==va){y(ra,Aa(wa));J(r,ra,R(ua))}else pa!==wa&&y(ra,Aa(wa))})}function ha(j){var s;if(b()){s=d();j();s.restore()}else j()}function ka(){this.focused=u;this.selectionStart=u.selectionStart;
this.selectionEnd=u.selectionEnd}ka.prototype.restore=function(){if(this.focused.parentNode){this.focused.selectionStart=this.selectionStart;this.focused.selectionEnd=this.selectionEnd;this.focused.focus()}else if(this.focused.id){var j=document.getElementById(this.focused.id);if(j){j.selectionStart=this.selectionStart;j.selectionEnd=this.selectionEnd;j.focus()}}};function b(){return u!=undefined}function d(){return new ka}function l(j,s,r,B,ba){this.top=j;this.world=s;this.handlers=B;this.handlerCreators=
r;this.attribs=ba}l.prototype.restart=function(){t(this.top,this.world,this.handlerCreators,this.attribs)};l.prototype.pause=function(){for(var j=0;j<this.handlers.length;j++)this.handlers[j]instanceof ca||this.handlers[j].onUnregister(top)};function t(j,s,r,B){M();var ba=H(r,function(pa){return pa()});z.length>0&&z[z.length-1].pause();var fa=new l(j,s,r,ba,B);z.push(fa);function la(pa){fa.world=pa}A(la);var ia=new ca(function(){return false},function(){});for(r=0;r<ba.length;r++)if(ba[r]instanceof
ca)ia=ba[r];else ba[r].onRegister(j);function va(pa){if(ia.test(pa)){ia.receiver(D);(pa=z.pop())&&pa.pause();if(z.length>0){pa=z.pop();pa.restart()}}}A(va);k(j,B);n(function(){return s})}i.big_bang=t;function F(j,s){return function(){var r={watchId:-1,onRegister:function(){r.watchId=setInterval(function(){n(s)},j)},onUnregister:function(){clearInterval(r.watchId)}};return r}}i.on_tick=F;function Y(j,s){function r(B){B=j(B);sa(B,B);return B}return function(){var B={_top:null,_listener:function(ba,
fa){da(ba,fa,B._top,r,s)},onRegister:function(ba){B._top=ba;A(B._listener)},onUnregister:function(){I(B._listener)}};return B}}i.on_draw=Y;function ca(j,s){this.test=j;this.receiver=s}function ja(j,s){return function(){if(s==undefined)s=function(){};return new ca(j,s)}}i.stop_when=ja;function ma(j){function s(r){j(r)}return function(){return{onRegister:function(){A(s)},onUnregister:function(){I(s)}}}}i.on_world_change=ma;function qa(j,s,r){j.addEventListener?j.addEventListener(s,r,false):j.attachEvent("on"+
s,r,false)}function za(j,s,r){qa(j,s,function(B){n(function(ba){return r(ba,B)})})}function Ba(j,s,r){qa(j,s,function(B){setTimeout(function(){n(function(ba){return r(ba,B)})},0)})}function oa(j){qa(j,"focus",function(){u=j});qa(j,"blur",function(){u=undefined});return j}function ta(j){return j.length==undefined?{node:j,children:[]}:{node:j[0],children:H(j.slice(1),ta)}}function xa(j){return{attrib:j[0],values:j.slice(1)}}function Da(j){var s=H(j.slice(1),xa);return typeof j[0]=="string"?[{id:j[0],
attribs:s}]:"length"in j[0]?H(j[0],function(r){return{id:r,attribs:s}}):[{node:j[0],attribs:s}]}function Aa(j){return L(j,Da)}function Ea(j){return j.nodeType==Node.TEXT_NODE}function Fa(j){return j.nodeType==Node.ELEMENT_NODE}function Ca(j,s){throw new ya(plt.Kernel.format("Expected a non-empty array, received ~s within ~s",[j,s]),j);}function sa(j,s){!j instanceof Array&&Ca(j,s);j.length==0&&Ca(j,s);if(Ea(j[0])){if(j.length>1)throw new ya(plt.Kernel.format("Text node ~s can not have children",[j]),
j);}else if(Fa(j[0]))for(s=1;s<j.length;s++)sa(j[s],j);else throw new ya(plt.Kernel.format("expected a Text or an Element, received ~s within ~s",[j,s]),j[0]);}function ya(j,s){this.msg=j;this.elt=s}ya.prototype.toString=function(){return"on-draw: "+this.msg};function k(j,s){if(s)for(a in s)if(s.hasOwnProperty(a))if(typeof s[a]=="function")za(j,a,s[a]);else j[a]=s[a];return j}function Z(j){return oa(k(document.createElement("p"),j))}i.p=Z;function Ia(j){return oa(k(document.createElement("div"),j))}
i.div=Ia;function Ja(j,s){var r=document.createElement("button");za(r,"click",j);return oa(k(r,s))}i.button=Ja;function Ga(j){if(j.stopPropagation)j.stopPropagation();else j.cancelBubble=true}function Ka(j){qa(j,"click",function(s){Ga(s)});return j}function La(j,s,r){j=j.toLowerCase();var B={text:Ha,password:Ha,checkbox:Ma};if(B[j])return B[j](j,s,r);else throw new plt.Kernel.MobyRuntimeError("js-input: does not currently support type "+j);}i.input=La;function Ha(j,s,r){var B=document.createElement("input");
B.type=j;function ba(ia){return s(ia,B.value)}Ba(B,"keypress",ba);j=1000;var fa=B.value,la=setInterval(function(){if(B.parentNode){if(fa!=B.value){fa=B.value;n(function(ia){return s(ia,B.value)})}}else clearInterval(la)},j);return Ka(oa(k(B,r)))}function Ma(j,s,r){var B=document.createElement("input");B.type=j;function ba(fa){return s(fa,B.checked?plt.types.Logic.TRUE:plt.types.Logic.FALSE)}Ba(B,"change",ba);qa(B,"click",function(fa){Ga(fa)});return k(B,r)}function Na(j){return j=document.createTextNode(j)}
i.text=Na;function Oa(j,s,r){for(var B=document.createElement("select"),ba=0;ba<s.length;ba++)B.add(Pa({value:s[ba]}),null);B.jsworldOpaque=true;za(B,"change",r);return j=oa(k(B,j))}i.select=Oa;function Pa(j){var s=document.createElement("option");s.text=j.value;s.value=j.value;return s}function Qa(j){return oa(k(document.createElement("textarea"),j))}i.textarea=Qa;function Ra(j){return oa(k(document.createElement("h1"),j))}i.h1=Ra;function Sa(j){return oa(k(document.createElement("canvas"),j))}i.canvas=
Sa;function Ta(j,s){var r=document.createElement("img");r.src=j;return oa(k(r,s))}i.img=Ta;function Ua(j,s){return oa(k(j,s))}i.raw_node=Ua})();plt.world.MobyJsWorld={};plt.world.MobyJsworld={};
(function(){var i=plt.world.MobyJsworld,u=plt.Jsworld,Q=plt.Kernel.MobyTypeError;function D(q){return typeof q=="function"}function P(q){var w=q;if(plt.Kernel.empty_question_(w))return[];else if(plt.Kernel.pair_question_(w)){for(q=[];!w.isEmpty();){q.push(P(w.first()));w=w.rest()}return q}else return q}function z(q){for(var w={};!q.isEmpty();){var o=q.first().first(),G=q.first().rest().first();w[o]=G;q=q.rest()}return w}function A(){if(window.document.getElementById("jsworld-div")!=undefined)return window;
var q=window.open("big-bang.html","big-bang");if(q==null)throw new Error("Error: Not allowed to create a new window.");return q}i.makeToplevelNode=function(){return A().document.getElementById("jsworld-div")};function I(q){return q instanceof plt.types.Cons||q instanceof plt.types.Empty}i.printWorldHook=function(q,w){if(w.lastChild==null){q=plt.types.toDomNode(q);w.appendChild(q)}else{q=plt.types.toDomNode(q);w.replaceChild(q,w.lastChild)}};function M(q){return typeof q.nodeType!="undefined"}function n(q,
w,o){if(plt.Kernel.pair_question_(q)){var G=plt.Kernel.first(q);o=plt.Kernel.rest(q);if(!M(G))throw new Q(plt.Kernel.format("on-draw: expected a dom-element, but received ~s instead, the first element within ~s",[G,w]));if(G.nodeType==Node.TEXT_NODE&&!plt.Kernel.empty_question_(o))throw new Q(plt.Kernel.format("on-draw: the text node ~s must not have children.  It has ~s",[G,o]));for(w=2;!plt.Kernel.empty_question_(o);){n(plt.Kernel.first(o),q,w);o=plt.Kernel.rest(o);w++}}else throw new Q(plt.Kernel.format("on-draw: expected a dom-s-expression, but received ~s instead~a",
[q,o!=undefined?plt.Kernel.format(", the ~a element within ~s.",[plt.Kernel.ordinalize(o),w]):"."]));}function m(q,w,o){plt.Kernel.attachEvent(q,w,o)}function O(q){if(q.preventDefault)q.preventDefault();else q.returnValue=false}function V(q){if(q.stopPropagation)q.stopPropagation();else q.cancelBubble=true}i.bigBang=function(q,w){var o=plt.types.Empty.EMPTY;plt.Kernel.arrayEach(w,function(X,v){plt.Kernel.check(X,function(E){return D(E)||I(E)},"js-big-bang","handler or attribute list",v+2)});var G=
i.makeToplevelNode();G.tabIndex=0;m(G,"click",function(X){O(X);V(X);return false},false);for(var N=new plt.world.config.WorldConfig,K=0;K<w.length;K++)if(I(w[K]))o=w[K];else if(D(w[K]))N=w[K](N);N=N.updateAll({changeWorld:i.updateWorld,shutdownWorld:i.shutdownWorld});plt.world.config.CONFIG=N;w=[];if(N.lookup("onDraw")){wrappedRedraw=function(X){try{var v=N.lookup("onDraw")([X]);plt.Kernel.setLastLoc(undefined);n(v,v,undefined);var E=[G,P(v)];return E}catch(C){H(C);throw C;}};K=function(X){try{var v=
P(N.lookup("onDrawCss")([X]));plt.Kernel.setLastLoc(undefined);return v}catch(E){H(E);throw E;}};w.push(u.on_draw(wrappedRedraw,K))}else if(N.lookup("onRedraw")){var W=undefined,S=undefined;wrappedRedraw=function(X){try{var v=N.lookup("onRedraw")([X]);if(v!=null&&v!=undefined&&v instanceof plt.world.Kernel.BaseImage){var E=plt.world.Kernel.imageWidth(v).toFixnum(),C=plt.world.Kernel.imageHeight(v).toFixnum();if(!W){W=plt.world.Kernel.makeCanvas(E,C);W.jsworldOpaque=true;S=u.node_to_tree(W)}W.width=
E;W.height=C;var h=W.getContext("2d");v.render(h,0,0);return[G,S]}else return[G,u.node_to_tree(plt.types.toDomNode(v))]}catch(c){H(c);throw c;}};K=function(){return[[W,["width",W.width+"px"],["height",W.height+"px"]]]};w.push(u.on_draw(wrappedRedraw,K))}else w.push(u.on_world_change(function(X){i.printWorldHook(X,G)}));if(N.lookup("tickDelay")){K=function(X){setTimeout(function(){plt.world.stimuli.onTick()},0);return X};var T=N.lookup("tickDelay");w.push(u.on_tick(T,K))}N.lookup("stopWhen")&&w.push(u.stop_when(function(X){return N.lookup("stopWhen")([X])}));
if(N.lookup("onKey")){m(G,"keydown",function(X){plt.world.stimuli.onKey(X);O(X);V(X);return false});m(G,"keypress",function(X){O(X);V(X);return false});G.focus()}if(N.lookup("initialEffect")){T=plt.world.Kernel.applyEffect(N.lookup("initialEffect"));for(K=0;K<T.length;K++)if(N.lookup("stopWhen")&&N.lookup("stopWhen")([q]))break;else q=T[K](q)}return u.big_bang(G,q,w,z(o))};function H(q){plt.Kernel.reportError(q);plt.Kernel.reportError("Shutting down jsworld computations");plt.world.stimuli.onShutdown()}
i.updateWorld=function(q){function w(o){try{return q(o)}catch(G){H(G);return o}}u.change_world(w)};i.shutdownWorld=function(){u.shutdown()};function L(q){if(q.length==0)return[];if(q.length==1)return z(q[0]);else throw new Error;}i.p=function(q){q=L(q);var w=u.p(q);w.toWrittenString=function(){return plt.Kernel.format("(js-p)",[])};w.toDisplayedString=w.toWrittenString;w.toDomNode=function(){return w};return w};i.div=function(q){q=L(q);var w=u.div(q);w.toWrittenString=function(){return plt.Kernel.format("(js-div)",
[])};w.toDisplayedString=w.toWrittenString;w.toDomNode=function(){return w};return w};i.button=function(q,w){function o(){return make_dash_effect_colon_none()}var G=i.buttonStar(q,o,w);G.toWrittenString=function(){return"(js-button ...)"};G.toDisplayedString=G.toWrittenString;G.toDomNode=function(){return G};return G};i.buttonStar=function(q,w,o){o=L(o);function G(K){try{var W=w([K]),S=q([K]);plt.world.Kernel.applyEffect(W);return S}catch(T){H(T);return K}}var N=u.button(G,o);N.toWrittenString=function(){return"(js-button ...)"};
N.toDisplayedString=N.toWrittenString;N.toDomNode=function(){return N};return N};i.input=function(q,w,o){plt.Kernel.check(q,plt.Kernel.isString,"js-input","string",1);plt.Kernel.check(w,plt.Kernel.isFunction,"js-input","(world string -> world)",1);o=L(o);var G=u.input(q,function(N,K){return w([N,K])},o);G.toWrittenString=function(){return"(js-input ...)"};G.toDisplayedString=G.toWrittenString;G.toDomNode=function(){return G};return G};i.get_dash_input_dash_value=function(q){plt.Kernel.check(q,function(){return plt.Kernel.isString(q)||
q.nodeType==Node.ELEMENT_NODE},"get-input-value","dom-node",1);return plt.Kernel.isString(q)?plt.types.String.makeInstance(document.getElementById(q).value||""):plt.types.String.makeInstance(q.value||"")};i.img=function(q,w){plt.Kernel.check(q,plt.Kernel.isString,"js-img","string",1);w=L(w);var o=u.img(q,w);o.toWrittenString=function(){return"(js-img ...)"};o.toDisplayedString=o.toWrittenString;o.toDomNode=function(){return o};return o};i.text=function(q){plt.Kernel.check(q,plt.Kernel.isString,"js-text",
"string",1);var w=u.text(q,[]);w.toWrittenString=function(){return"(js-text ...)"};w.toDisplayedString=w.toWrittenString;w.toDomNode=function(){return w};return w};i.select=function(q,w,o){plt.Kernel.checkListof(q,plt.Kernel.isString,"js-select","string",1);plt.Kernel.check(w,plt.Kernel.isFunction,"js-select","function",2);o=L(o);q=P(q);var G=u.select(o,q,function(N){return w([N,G.value])});G.toWrittenString=function(){return"(js-select ...)"};G.toDisplayedString=G.toWrittenString;G.toDomNode=function(){return G};
return G};i.rawNode=function(q,w){w=L(w);var o=u.raw_node(plt.types.toDomNode(q),w);o.toWrittenString=function(){return"(js-raw-node ...)"};o.toDisplayedString=o.toWrittenString;o.toDomNode=function(){return o};return o}})();plt.world.stimuli={};
(function(){var i={};plt.world.stimuli=i;function u(A,I,M){var n=[];try{P(function(V){var H=[V].concat(M);if(A){var L=A(H);n=z(L)}return I?I(H):V});for(var m=0;m<n.length;m++)P(n[m])}catch(O){i.onShutdown()}}i.onTilt=function(A,I,M){var n=D("onTilt"),m=D("onTiltEffect");u(m,n,[Q(A),Q(I),Q(M)])};i.onAcceleration=function(A,I,M){var n=D("onAcceleration"),m=D("onAccelerationEffect");u(m,n,[Q(A),Q(I),Q(M)])};i.onShake=function(){var A=D("onShake"),I=D("onShakeEffect");u(I,A,[])};i.onLocation=function(A,
I){var M=D("onLocationChange"),n=D("onLocationChangeEffect");u(n,M,[Q(A),Q(I)])};i.onKey=function(A){function I(m){m=m.charCode||m.keyCode;return m=m==37?"left":m==38?"up":m==39?"right":m==40?"down":m==32?"space":m==13?"enter":String.fromCharCode(m)}A=I(A);var M=D("onKey"),n=D("onKeyEffect");u(n,M,[A])};i.onTick=function(){var A=D("onTick"),I=D("onTickEffect");u(I,A,[])};i.onAnnounce=function(A,I){for(var M=plt.types.Empty.EMPTY,n=0;n<I.length;n++)M=plt.types.Cons.makeInstance(I[I.length-n-1],M);
I=D("onAnnounce");n=D("onAnnounceEffect");u(I,n,[A,M])};i.onShutdown=function(){var A=D("shutdownWorld");A&&A()};var Q=plt.types.FloatPoint.makeInstance;function D(A){return plt.world.config.CONFIG.lookup(A)}function P(A){D("changeWorld")&&D("changeWorld")(A)}function z(A){return plt.world.Kernel.applyEffect(A)}})();
(function(i){var u={};function Q(){plt.types.Struct.call(this,"make-permission:location",[])}Q.prototype=new plt.types.Struct;function D(){return new Q}function P(d){return d!=null&&d!=undefined&&d instanceof Q}function z(){plt.types.Struct.call(this,"make-permission:send-sms",[])}z.prototype=new plt.types.Struct;function A(){return new z}function I(d){return d!=null&&d!=undefined&&d instanceof z}function M(){plt.types.Struct.call(this,"make-permission:receive-sms",[])}M.prototype=new plt.types.Struct;
function n(){return new M}function m(d){return d!=null&&d!=undefined&&d instanceof M}function O(){plt.types.Struct.call(this,"make-permission:tilt",[])}O.prototype=new plt.types.Struct;function V(){return new O}function H(d){return d!=null&&d!=undefined&&d instanceof O}function L(){plt.types.Struct.call(this,"make-permission:shake",[])}L.prototype=new plt.types.Struct;function q(){return new L}function w(d){return d!=null&&d!=undefined&&d instanceof L}function o(){plt.types.Struct.call(this,"make-permission:internet",
[])}o.prototype=new plt.types.Struct;function G(){return new o}function N(d){return d!=null&&d!=undefined&&d instanceof o}function K(){plt.types.Struct.call(this,"make-permission:telephony",[])}K.prototype=new plt.types.Struct;function W(){return new K}function S(d){return d!=null&&d!=undefined&&d instanceof K}function T(){plt.types.Struct.call(this,"make-permission:wake-lock",[])}T.prototype=new plt.types.Struct;function X(){return new T}function v(d){return d!=null&&d!=undefined&&d instanceof T}
function E(d){plt.types.Struct.call(this,"make-permission:open-image-url",[d]);this.url=d}E.prototype=new plt.types.Struct;function C(d){return new E(d)}function h(d){if(e(d))return d.url;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("permission:open-image-url-url: not a permission:open-image-url: ~s",[d]));}function c(d,l){if(e(d)){d.url=l;d._fields[0]=l}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_permission_colon_open_dash_image_dash_url_dash_url_bang_: not a permission:open-image-url: ~s",
[d]));}function e(d){return d!=null&&d!=undefined&&d instanceof E}function g(d){plt.types.Struct.call(this,"make-permission:universe",[d]);this.url=d}g.prototype=new plt.types.Struct;function f(d){return new g(d)}function x(d){if(p(d))return d.url;else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("permission:universe-url: not a permission:universe: ~s",[d]));}function R(d,l){if(p(d)){d.url=l;d._fields[0]=l}else throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_permission_colon_universe_dash_url_bang_: not a permission:universe: ~s",
[d]));}function p(d){return d!=null&&d!=undefined&&d instanceof g}function J(d){return P(d)||I(d)||m(d)||H(d)||w(d)||N(d)||S(d)||v(d)||e(d)||p(d)}var $,ea,ga,na,y,U,aa,da;function ha(d){return P(d)?u[11]:I(d)?u[12]:m(d)?u[13]:H(d)?u[14]:w(d)?u[15]:N(d)?u[16]:S(d)?u[17]:v(d)?u[18]:e(d)?plt.Kernel.format(u[19],[h(d)]):p(d)?plt.Kernel.format(u[20],[x(d)]):plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),u[21])}function ka(d){return function(){function l(F,Y){return plt.Kernel._greaterthan_(plt.Kernel.string_dash_length(Y),
plt.Kernel.string_dash_length(F),[])&&plt.Kernel.string_equal__question_(plt.Kernel.substring(Y,u[23],plt.Kernel.string_dash_length(F)),F,[])}function t(F,Y,ca){return plt.Kernel.apply(ca,plt.Kernel.list([plt.Kernel.substring(Y,plt.Kernel.add1(plt.Kernel.string_dash_length(F)),plt.Kernel.string_dash_length(Y))]),[])}(function(){})(plt.Kernel.identity);return plt.Kernel.string_equal__question_(d,u[11],[])?$:plt.Kernel.string_equal__question_(d,u[12],[])?ea:plt.Kernel.string_equal__question_(d,u[13],
[])?ga:plt.Kernel.string_equal__question_(d,u[14],[])?na:plt.Kernel.string_equal__question_(d,u[15],[])?y:plt.Kernel.string_equal__question_(d,u[16],[])?U:plt.Kernel.string_equal__question_(d,u[17],[])?aa:plt.Kernel.string_equal__question_(d,u[18],[])?da:l(u[24],d)?t(u[24],d,plt.types.liftToplevelToFunctionValue(C,plt.types.String.makeInstance("make-permission:open-image-url"),1,plt.types.Rational.makeInstance(1,1))):l(u[25],d)?t(u[25],d,plt.types.liftToplevelToFunctionValue(f,plt.types.String.makeInstance("make-permission:universe"),
1,plt.types.Rational.makeInstance(1,1))):plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),u[21])}()}function b(d){return P(d)?plt.Kernel.list([u[26],u[27]]):I(d)?plt.Kernel.list([u[28]]):m(d)?plt.Kernel.list([u[29]]):H(d)?plt.Kernel.list([]):w(d)?plt.Kernel.list([]):N(d)?plt.Kernel.list([u[30]]):S(d)?plt.Kernel.list([u[31]]):v(d)?plt.Kernel.list([u[32]]):e(d)?plt.Kernel.list([]):p(d)?plt.Kernel.list([u[30]]):plt.Kernel.error(plt.types.Symbol.makeInstance("cond"),u[21])}u[15]=plt.types.String.makeInstance("PERMISSION:SHAKE");
u[26]=plt.types.String.makeInstance("android.permission.ACCESS_COARSE_LOCATION");u[28]=plt.types.String.makeInstance("android.permission.SEND_SMS");u[21]=plt.types.String.makeInstance("cond: fell out of cond");u[32]=plt.types.String.makeInstance("android.permission.WAKE_LOCK");u[30]=plt.types.String.makeInstance("android.permission.INTERNET");u[29]=plt.types.String.makeInstance("android.permission.RECEIVE_SMS");u[27]=plt.types.String.makeInstance("android.permission.ACCESS_FINE_LOCATION");u[31]=plt.types.String.makeInstance("android.permission.ACCESS_COARSE_UPDATES");
u[20]=plt.types.String.makeInstance("PERMISSION:UNIVERSE ~a");u[18]=plt.types.String.makeInstance("PERMISSION:WAKE-LOCK");u[14]=plt.types.String.makeInstance("PERMISSION:TILT");u[25]=plt.types.String.makeInstance("PERMISSION:UNIVERSE");u[17]=plt.types.String.makeInstance("PERMISSION:TELEPHONY");u[24]=plt.types.String.makeInstance("PERMISSION:OPEN-IMAGE-URL");u[13]=plt.types.String.makeInstance("PERMISSION:RECEIVE-SMS");u[12]=plt.types.String.makeInstance("PERMISSION:SEND-SMS");u[19]=plt.types.String.makeInstance("PERMISSION:OPEN-IMAGE-URL ~a");
u[16]=plt.types.String.makeInstance("PERMISSION:INTERNET");u[11]=plt.types.String.makeInstance("PERMISSION:LOCATION");u[23]=plt.types.Rational.makeInstance(0,1);(function(d){(function(){$=D();ea=A();ga=A();na=V();y=q();U=G();aa=W();da=X()})(d||plt.Kernel.identity);i.permission_colon_open_dash_image_dash_url=E;i.make_dash_permission_colon_open_dash_image_dash_url=C;i.permission_colon_open_dash_image_dash_url_question_=e;i.permission_colon_open_dash_image_dash_url_dash_url=h;i.set_dash_permission_colon_open_dash_image_dash_url_dash_url_bang_=
c;i.permission_colon_tilt=O;i.make_dash_permission_colon_tilt=V;i.permission_colon_tilt_question_=H;i.permission_colon_wake_dash_lock=T;i.make_dash_permission_colon_wake_dash_lock=X;i.permission_colon_wake_dash_lock_question_=v;i.permission_question_=J;i.string_dash__greaterthan_permission=ka;i.permission_colon_universe=g;i.make_dash_permission_colon_universe=f;i.permission_colon_universe_question_=p;i.permission_colon_universe_dash_url=x;i.set_dash_permission_colon_universe_dash_url_bang_=R;i.permission_colon_send_dash_sms=
z;i.make_dash_permission_colon_send_dash_sms=A;i.permission_colon_send_dash_sms_question_=I;i.permission_colon_shake=L;i.make_dash_permission_colon_shake=q;i.permission_colon_shake_question_=w;i.permission_colon_telephony=K;i.make_dash_permission_colon_telephony=W;i.permission_colon_telephony_question_=S;i.permission_colon_receive_dash_sms=M;i.make_dash_permission_colon_receive_dash_sms=n;i.permission_colon_receive_dash_sms_question_=m;i.PERMISSION_colon_SHAKE=y;i.permission_colon_internet=o;i.make_dash_permission_colon_internet=
G;i.permission_colon_internet_question_=N;i.permission_colon_location=Q;i.make_dash_permission_colon_location=D;i.permission_colon_location_question_=P;i.PERMISSION_colon_WAKE_dash_LOCK=da;i.permission_dash__greaterthan_string=ha;i.permission_dash__greaterthan_android_dash_permissions=b;i.PERMISSION_colon_TILT=na;i.PERMISSION_colon_TELEPHONY=aa;i.PERMISSION_colon_RECEIVE_dash_SMS=ga;i.PERMISSION_colon_SEND_dash_SMS=ea;i.PERMISSION_colon_LOCATION=$;i.PERMISSION_colon_INTERNET=U})()})(this);
plt.permission={};
(function(){plt.permission={};function i(n){return permission_colon_location_question_(n)}function u(n){return permission_colon_send_dash_sms_question_(n)}function Q(n){return permission_colon_receive_dash_sms_question_(n)}function D(n){return permission_colon_tilt_question_(n)}function P(n){return permission_colon_shake_question_(n)}function z(n){return permission_colon_internet_question_(n)}function A(n){return permission_colon_telephony_question_(n)}function I(n){return permission_colon_wake_dash_lock_question_(n)}function M(n){return permission_colon_open_dash_image_dash_url_question_(n)}
plt.permission.startupAllPermissions=function(n,m){if(n.length>0){var O=n.pop();plt.permission._runStartupCode(O,n,m)}else m()};plt.permission._runStartupCode=function(n,m,O){var V=plt.platform.Platform.getInstance(),H=plt.world.stimuli;function L(){setTimeout(function(){plt.permission.startupAllPermissions(m,O)},0)}if(i(n)){V.getLocationService().startService();V.getLocationService().addLocationChangeListener(function(G,N){H.onLocation(G,N)});L()}else if(u(n))L();else if(Q(n))L();else if(D(n)){V.getTiltService().startService();
V.getTiltService().addOrientationChangeListener(function(G,N,K){H.onTilt(G,N,K)});V.getTiltService().addAccelerationChangeListener(function(G,N,K){H.onAcceleration(G,N,K)});L()}else if(P(n)){V.getShakeService().startService();V.getShakeService().addListener(function(){H.onShake()});L()}else if(z(n))L();else if(A(n))L();else if(I(n))L();else if(M(n)){var q=permission_colon_open_dash_image_dash_url_dash_url(n),w=new Image,o=function(){plt.Kernel.detachEvent(w,"load",o);plt.world.Kernel.FileImage.installInstance(q,
w);L()};plt.Kernel.attachEvent(w,"load",o);plt.Kernel.attachEvent(w,"error",function(){plt.world.Kernel.FileImage.installBrokenImage(q);L()});w.src=q}else L()};plt.permission.runShutdownCode=function(n){var m=plt.platform.Platform.getInstance();i(n)&&m.getLocationService().shutdownService();u(n);Q(n);D(n)&&m.getTiltService().shutdownService();P(n);z(n);A(n);I(n);M(n)}})();
