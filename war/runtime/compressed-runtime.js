(function(){if(window.google&&google.gears){return}var b=null;if(typeof GearsFactory!="undefined"){b=new GearsFactory()}else{try{b=new ActiveXObject("Gears.Factory");if(b.getBuildInfo().indexOf("ie_mobile")!=-1){b.privateSetGlobalObject(this)}}catch(c){if((typeof navigator.mimeTypes!="undefined")&&navigator.mimeTypes["application/x-googlegears"]){b=document.createElement("object");b.style.display="none";b.width=0;b.height=0;b.type="application/x-googlegears";document.documentElement.appendChild(b)}}}if(!b){return}if(!window.google){google={}}if(!google.gears){google.gears={factory:b}}})();if(typeof(plt)=="undefined"){plt={}}(function(){plt.types=plt.types||{};plt.types.Logic={TRUE:true,FALSE:false};Boolean.prototype.toWrittenString=function(l){if(this.valueOf()){return"true"}return"false"};Boolean.prototype.toDisplayedString=Boolean.prototype.toWrittenString;Boolean.prototype.isEqual=function(l){return this==l};plt.types.Char=function(l){this.val=l};plt.types.Char.makeInstance=function(l){return new plt.types.Char(l)};plt.types.Char.prototype.toWrittenString=function(l){return"#\\"+this.val};plt.types.Char.prototype.toDisplayedString=function(l){return this.val};plt.types.Char.prototype.getValue=function(){return this.val};plt.types.Char.prototype.isEqual=function(l){return l instanceof plt.types.Char&&this.val==l.val};plt.types.Symbol=function(l){this.val=l};var e={};plt.types.Symbol.makeInstance=function(l){if(!(l in e)){e[l]=new plt.types.Symbol(l)}else{}return e[l]};plt.types.Symbol.prototype.isEqual=function(l){return l instanceof plt.types.Symbol&&this.val==l.val};plt.types.Symbol.prototype.toString=function(){return this.val};plt.types.Symbol.prototype.toWrittenString=function(l){return this.val};plt.types.Symbol.prototype.toDisplayedString=function(l){return this.val};plt.types.Empty=function(){};plt.types.Empty.EMPTY=new plt.types.Empty();plt.types.Empty.prototype.isEqual=function(l){return l instanceof plt.types.Empty};plt.types.Empty.prototype.first=function(){throw new plt.Kernel.MobyRuntimeError("first can't be applied on empty.")};plt.types.Empty.prototype.rest=function(){throw new plt.Kernel.MobyRuntimeError("rest can't be applied on empty.")};plt.types.Empty.prototype.isEmpty=function(){return true};plt.types.Empty.prototype.toWrittenString=function(l){return"empty"};plt.types.Empty.prototype.toDisplayedString=function(l){return"empty"};plt.types.Empty.prototype.append=function(l){return l};plt.types.Cons=function(m,l){this.f=m;this.r=l};plt.types.Cons.makeInstance=function(m,l){return new plt.types.Cons(m,l)};plt.types.Cons.prototype.isEqual=function(l){if(!(l instanceof plt.types.Cons)){return plt.types.Logic.FALSE}return(plt.Kernel.equal_question_(this.first(),l.first())&&plt.Kernel.equal_question_(this.rest(),l.rest()))};plt.types.Cons.prototype.first=function(){return this.f};plt.types.Cons.prototype.rest=function(){return this.r};plt.types.Cons.prototype.isEmpty=function(){return false};plt.types.Cons.prototype.append=function(m){if(m.isEmpty()){return this}var n=m;var l=plt.Kernel.reverse(this);while(!l.isEmpty()){n=plt.types.Cons.makeInstance(l.first(),n);l=l.rest()}return n};plt.types.Cons.prototype.toWrittenString=function(l){l.put(this,true);var m=[];var n=this;while(!n.isEmpty()){m.push(plt.Kernel.toWrittenString(n.first(),l));n=n.rest()}return"("+m.join(" ")+")"};plt.types.Cons.prototype.toDisplayedString=function(l){l.put(this,true);var m=[];var n=this;while(!n.isEmpty()){m.push(plt.Kernel.toDisplayedString(n.first(),l));n=n.rest()}return"("+m.join(" ")+")"};var g=function(l,m){l.appendChild(m)};plt.types.Cons.prototype.toDomNode=function(l){l.put(this,true);var m=document.createElement("div");m.appendChild(document.createTextNode("("));var n=this;while(!n.isEmpty()){g(m,plt.Kernel.toDomNode(n.first(),l));n=n.rest();if(!n.isEmpty()){g(m,document.createTextNode(" "))}}m.appendChild(document.createTextNode(")"));return m};plt.types.Vector=function(o,m){this.elts=new Array(o);if(m){for(var l=0;l<o;l++){this.elts[l]=m[l]}}else{for(var l=0;l<o;l++){this.elts[l]=undefined}}};plt.types.Vector.makeInstance=function(m,l){return new plt.types.Vector(m,l)};plt.types.Vector.prototype.length=function(){return this.elts.length};plt.types.Vector.prototype.ref=function(l){return this.elts[l]};plt.types.Vector.prototype.set=function(m,l){this.elts[m]=l};plt.types.Vector.prototype.toWrittenString=function(l){l.put(this,true);var n=[];for(var m=0;m<this.length();m++){n.push(plt.Kernel.toWrittenString(this.ref(m),l))}return"#("+n.join(" ")+")"};plt.types.Vector.prototype.toDisplayedString=function(l){l.put(this,true);var n=[];for(var m=0;m<this.length();m++){n.push(plt.Kernel.toDisplayedStringString(this.ref(m),l))}return"#("+n.join(" ")+")"};plt.types.Vector.prototype.toDomNode=function(l){l.put(this,true);var n=document.createElement("div");n.appendChild(document.createTextNode("#("));for(var m=0;m<this.length();m++){g(n,plt.Kernel.toDomNode(this.ref(m),l))}n.appendChild(document.createTextNode(")"));return n};var i=function(m,l){var n;if(isNaN(m)||!isFinite(m)){throw new plt.Kernel.MobyRuntimeError("not a number: "+m)}if(isNaN(l)||!isFinite(l)){throw new plt.Kernel.MobyRuntimeError("not a number: "+l)}while(l!=0){n=m;m=l;l=n%l}return m};plt.types.Rational=function(o,l){if(l==undefined){l=1}if(l==0){throw new plt.Kernel.MobyRuntimeError("cannot have zero denominator.")}var m=i(Math.abs(o),Math.abs(l));this.n=o/m;this.d=l/m};plt.types.Rational.prototype.toWrittenString=function(l){if(this.d==1){return this.n+""}else{return this.n+"/"+this.d}};plt.types.Rational.prototype.toDisplayedString=plt.types.Rational.prototype.toWrittenString;plt.types.Rational.prototype.level=function(){return 0};plt.types.Rational.prototype.lift=function(l){if(l.level()==1){return plt.types.FloatPoint.makeInstance(this.n/this.d)}if(l.level()==2){return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO)}throw new plt.Kernel.MobyRuntimeError("invalid level of Number")};plt.types.Rational.prototype.isFinite=function(){return true};plt.types.Rational.prototype.isEqual=function(l){return l instanceof plt.types.Rational&&this.n==l.n&&this.d==l.d};plt.types.Rational.prototype.isInteger=function(){return this.d==1};plt.types.Rational.prototype.isRational=function(){return true};plt.types.Rational.prototype.isReal=function(){return true};plt.types.Rational.prototype.add=function(l){return plt.types.Rational.makeInstance(this.n*l.d+this.d*l.n,this.d*l.d)};plt.types.Rational.prototype.subtract=function(l){return plt.types.Rational.makeInstance((this.n*l.d)-(this.d*l.n),(this.d*l.d))};plt.types.Rational.prototype.multiply=function(l){return plt.types.Rational.makeInstance(this.n*l.n,this.d*l.d)};plt.types.Rational.prototype.divide=function(l){if(this.d*l.n==0){throw new plt.Kernel.MobyRuntimeError("division by zero")}return plt.types.Rational.makeInstance(this.n*l.d,this.d*l.n)};plt.types.Rational.prototype.toExact=function(){return this};plt.types.Rational.prototype.isExact=function(){return true};plt.types.Rational.prototype.toInteger=function(){return Math.floor(this.n/this.d)};plt.types.Rational.prototype.numerator=function(){return plt.types.Rational.makeInstance(this.n)};plt.types.Rational.prototype.denominator=function(){return plt.types.Rational.makeInstance(this.d)};plt.types.Rational.prototype.toFloat=function(){return this.n/this.d};plt.types.Rational.prototype.toComplex=function(){return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO)};plt.types.Rational.prototype.greaterThan=function(l){return this.n*l.d>this.d*l.n};plt.types.Rational.prototype.greaterThanOrEqual=function(l){return this.n*l.d>=this.d*l.n};plt.types.Rational.prototype.lessThan=function(l){return this.n*l.d<this.d*l.n};plt.types.Rational.prototype.lessThanOrEqual=function(l){return this.n*l.d<=this.d*l.n};plt.types.Rational.prototype.sqrt=function(){if(this.n>=0){var m=Math.sqrt(this.n);var l=Math.sqrt(this.d);if(Math.floor(m)==m&&Math.floor(l)==l){return plt.types.Rational.makeInstance(m,l)}else{return plt.types.FloatPoint.makeInstance(m/l)}}else{var m=Math.sqrt(-this.n);var l=Math.sqrt(this.d);if(Math.floor(m)==m&&Math.floor(l)==l){return plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.makeInstance(m,l))}else{return plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.FloatPoint.makeInstance(m/l))}}};plt.types.Rational.prototype.abs=function(){return plt.types.Rational.makeInstance(Math.abs(this.n),this.d)};plt.types.Rational.prototype.floor=function(){return plt.types.Rational.makeInstance(Math.floor(this.n/this.d),1)};plt.types.Rational.prototype.ceiling=function(){return plt.types.Rational.makeInstance(Math.ceil(this.n/this.d),1)};plt.types.Rational.prototype.conjugate=plt.types.Rational.prototype.abs;plt.types.Rational.prototype.magnitude=plt.types.Rational.prototype.abs;plt.types.Rational.prototype.log=function(){return plt.types.FloatPoint.makeInstance(Math.log(this.n/this.d))};plt.types.Rational.prototype.angle=function(){if(0==this.n){return plt.types.Rational.ZERO}if(this.n>0){return plt.types.Rational.ZERO}else{return plt.Kernel.pi}};plt.types.Rational.prototype.atan=function(){return plt.types.FloatPoint.makeInstance(Math.atan(this.n/this.d))};plt.types.Rational.prototype.cos=function(){return plt.types.FloatPoint.makeInstance(Math.cos(this.n/this.d))};plt.types.Rational.prototype.sin=function(){return plt.types.FloatPoint.makeInstance(Math.sin(this.n/this.d))};plt.types.Rational.prototype.expt=function(l){return plt.types.FloatPoint.makeInstance(Math.pow(this.n/this.d,l.n/l.d))};plt.types.Rational.prototype.exp=function(){return plt.types.FloatPoint.makeInstance(Math.exp(this.n/this.d))};plt.types.Rational.prototype.acos=function(){return plt.types.FloatPoint.makeInstance(Math.acos(this.n/this.d))};plt.types.Rational.prototype.asin=function(){return plt.types.FloatPoint.makeInstance(Math.asin(this.n/this.d))};plt.types.Rational.prototype.imag_dash_part=function(){return plt.types.Rational.ZERO};plt.types.Rational.prototype.real_dash_part=function(){return this};plt.types.Rational.prototype.timesI=function(){return plt.types.Complex.makeInstance(plt.types.Rational.ZERO,this)};plt.types.Rational.prototype.round=function(){if(this.d==2){var l=this.n/this.d;var m=Math.floor(l);var n=Math.ceil(l);if(m%2==0){return plt.types.Rational.makeInstance(m)}else{return plt.types.Rational.makeInstance(n)}}else{return plt.types.Rational.makeInstance(Math.round(this.n/this.d))}};plt.types.Rational.prototype.half=function(){return plt.types.Rational.makeInstance(this.n,this.d*2)};plt.types.Rational.prototype.minus=function(){return plt.types.Rational.makeInstance(0-this.n,this.d)};var h={};plt.types.Rational.makeInstance=function(m,l){if(m==undefined){throw new plt.Kernel.MobyRuntimeError("n undefined")}if(l==undefined){l=1}if(l<0){m=-m;l=-l}if(l==1&&m in h){return h[m]}else{return new plt.types.Rational(m,l)}};h={};(function(){var l;for(l=-500;l<500;l++){h[l]=new plt.types.Rational(l,1)}})();plt.types.Rational.NEGATIVE_ONE=h[-1];plt.types.Rational.ZERO=h[0];plt.types.Rational.ONE=h[1];plt.types.Rational.TWO=h[2];plt.types.FloatPoint=function(l){this.n=l};plt.types.FloatPoint.makeInstance=function(l){return new plt.types.FloatPoint(l)};var j=plt.types.FloatPoint.makeInstance(Number.NaN);var b=plt.types.FloatPoint.makeInstance(Number.POSITIVE_INFINITY);var c=plt.types.FloatPoint.makeInstance(Number.NEGATIVE_INFINITY);plt.types.FloatPoint.prototype.isFinite=function(){return isFinite(this.n)};plt.types.FloatPoint.prototype.toExact=function(){return plt.types.Rational.makeInstance(Math.floor(this.n),1)};plt.types.FloatPoint.prototype.isExact=function(){return false};plt.types.FloatPoint.prototype.level=function(){return 1};plt.types.FloatPoint.prototype.lift=function(l){return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO)};plt.types.FloatPoint.prototype.toWrittenString=function(l){if(this.n==Number.POSITIVE_INFINITY){return"+inf.0"}else{if(this.n==Number.NEGATIVE_INFINITY){return"-inf.0"}else{if(this.n==Number.NaN){return"+nan.0"}else{return this.n.toString()}}}};plt.types.FloatPoint.prototype.toDisplayedString=plt.types.FloatPoint.prototype.toWrittenString;plt.types.FloatPoint.prototype.isEqual=function(l){return((l instanceof plt.types.FloatPoint)&&((this.n==l.n)||(isNaN(this.n)&&isNaN(l.n))))};plt.types.FloatPoint.prototype.isRational=function(){return this.isFinite()&&this.n==Math.floor(this.n)};plt.types.FloatPoint.prototype.isInteger=function(){return this.isFinite()&&this.n==Math.floor(this.n)};plt.types.FloatPoint.prototype.isReal=function(){return true};var d=function(l){if(plt.types.NumberTower.lessThan(l,plt.types.Rational.ZERO)){return -1}else{if(plt.types.NumberTower.greaterThan(l,plt.types.Rational.ZERO)){return 1}else{return 0}}};plt.types.FloatPoint.prototype.add=function(l){if(this.isFinite()&&l.isFinite()){return plt.types.FloatPoint.makeInstance(this.n+l.n)}else{if(isNaN(this.n)||isNaN(l.n)){return j}else{if(this.isFinite()&&!l.isFinite()){return l}else{if(!this.isFinite()&&l.isFinite()){return this}else{return((d(this)*d(l)==1)?this:j)}}}}};plt.types.FloatPoint.prototype.subtract=function(l){if(this.isFinite()&&l.isFinite()){return plt.types.FloatPoint.makeInstance(this.n-l.n)}else{if(isNaN(this.n)||isNaN(l.n)){return j}else{if(!this.isFinite()&&!l.isFinite()){if(d(this)==d(l)){return j}else{return this}}else{if(this.isFinite()){return plt.types.NumberTower.multiply(l,plt.types.Rational.NEGATIVE_ONE)}else{return this}}}}};plt.types.FloatPoint.prototype.multiply=function(l){if(this.n==0||l.n==0){return plt.types.Rational.ZERO}if(this.isFinite()&&l.isFinite()){return plt.types.FloatPoint.makeInstance(this.n*l.n)}else{if(isNaN(this.n)||isNaN(l.n)){return j}else{return((d(this)*d(l)==1)?b:c)}}};plt.types.FloatPoint.prototype.divide=function(l){if(this.isFinite()&&l.isFinite()){if(l.n==0){throw new plt.Kernel.MobyRuntimeError("division by zero")}return plt.types.FloatPoint.makeInstance(this.n/l.n)}else{if(isNaN(this.n)||isNaN(l.n)){return j}else{if(!this.isFinite()&&!l.isFinite()){return j}else{if(this.isFinite()&&!l.isFinite()){return plt.types.FloatPoint.makeInstance(0)}else{if(!this.isFinite()&&l.isFinite()){return((d(this)*d(l)==1)?b:c)}}}}}};plt.types.FloatPoint.prototype.toInteger=function(){return Math.floor(this.n)};plt.types.FloatPoint.prototype.numerator=function(){var m=this.n.toString();var l=m.match(/^(.*)\.(.*)$/);if(l){return plt.types.FloatPoint.makeInstance(parseFloat(l[1]+l[2]))}else{return this}};plt.types.FloatPoint.prototype.denominator=function(){var m=this.n.toString();var l=m.match(/^(.*)\.(.*)$/);if(l){return plt.types.FloatPoint.makeInstance(Math.pow(10,l[2].length))}else{return plt.types.FloatPoint.makeInstance(1)}};plt.types.FloatPoint.prototype.toFloat=function(){return this.n};plt.types.FloatPoint.prototype.toComplex=function(){return plt.types.Complex.makeInstance(this,plt.types.Rational.ZERO)};plt.types.FloatPoint.prototype.floor=function(){if(!isFinite(this.n)){return this}return plt.types.Rational.makeInstance(Math.floor(this.n),1)};plt.types.FloatPoint.prototype.ceiling=function(){if(!isFinite(this.n)){return this}return plt.types.Rational.makeInstance(Math.ceil(this.n),1)};plt.types.FloatPoint.prototype.greaterThan=function(l){return this.n>l.n};plt.types.FloatPoint.prototype.greaterThanOrEqual=function(l){return this.n>=l.n};plt.types.FloatPoint.prototype.lessThan=function(l){return this.n<l.n};plt.types.FloatPoint.prototype.lessThanOrEqual=function(l){return this.n<=l.n};plt.types.FloatPoint.prototype.sqrt=function(){if(this.n<0){var l=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.FloatPoint.makeInstance(Math.sqrt(-this.n)));return l}else{return plt.types.FloatPoint.makeInstance(Math.sqrt(this.n))}};plt.types.FloatPoint.prototype.abs=function(){return plt.types.FloatPoint.makeInstance(Math.abs(this.n))};plt.types.FloatPoint.prototype.log=function(){if(this.n<0){return this.toComplex().log()}else{return plt.types.FloatPoint.makeInstance(Math.log(this.n))}};plt.types.FloatPoint.prototype.angle=function(){if(0==this.n){return plt.types.Rational.ZERO}if(this.n>0){return plt.types.Rational.ZERO}else{return plt.Kernel.pi}};plt.types.FloatPoint.prototype.atan=function(){return plt.types.FloatPoint.makeInstance(Math.atan(this.n))};plt.types.FloatPoint.prototype.cos=function(){return plt.types.FloatPoint.makeInstance(Math.cos(this.n))};plt.types.FloatPoint.prototype.sin=function(){return plt.types.FloatPoint.makeInstance(Math.sin(this.n))};plt.types.FloatPoint.prototype.expt=function(l){if(this.n==1){if(l.isFinite()){return this}else{if(isNaN(l.n)){return this}else{return this}}}else{return plt.types.FloatPoint.makeInstance(Math.pow(this.n,l.n))}};plt.types.FloatPoint.prototype.exp=function(){return plt.types.FloatPoint.makeInstance(Math.exp(this.n))};plt.types.FloatPoint.prototype.acos=function(){return plt.types.FloatPoint.makeInstance(Math.acos(this.n))};plt.types.FloatPoint.prototype.asin=function(){return plt.types.FloatPoint.makeInstance(Math.asin(this.n))};plt.types.FloatPoint.prototype.imag_dash_part=function(){return plt.types.Rational.ZERO};plt.types.FloatPoint.prototype.real_dash_part=function(){return this};plt.types.FloatPoint.prototype.round=function(){if(isFinite(this.n)){if(Math.abs(Math.floor(this.n)-this.n)==0.5){if(Math.floor(this.n)%2==0){return plt.types.Rational.makeInstance(Math.floor(this.n))}return plt.types.Rational.makeInstance(Math.ceil(this.n))}else{return plt.types.Rational.makeInstance(Math.round(this.n))}}else{return this}};plt.types.FloatPoint.prototype.conjugate=plt.types.FloatPoint.prototype.abs;plt.types.FloatPoint.prototype.magnitude=plt.types.FloatPoint.prototype.abs;plt.types.FloatPoint.prototype.minus=function(){return plt.types.FloatPoint.makeInstance(0-this.n)};plt.types.FloatPoint.prototype.half=function(){return plt.types.FloatPoint.makeInstance(this.n/2)};plt.types.FloatPoint.prototype.timesI=function(){return plt.types.Complex.makeInstance(plt.types.Rational.ZERO,this)};plt.types.Complex=function(m,l){this.r=m;this.i=l};plt.types.Complex.makeInstance=function(n,m){if(typeof(n)=="number"){n=(n==Math.floor(n)?plt.types.Rational.makeInstance(n):plt.types.FloatPoint.makeInstance(n))}if(typeof(m)=="number"){m=(m==Math.floor(m)?plt.types.Rational.makeInstance(m):plt.types.FloatPoint.makeInstance(m))}var l=new plt.types.Complex(n,m);return l};plt.types.Complex.prototype.toWrittenString=function(l){if(plt.types.NumberTower.greaterThanOrEqual(this.i,plt.types.Rational.ZERO)){return plt.Kernel.toWrittenString(this.r)+"+"+plt.Kernel.toWrittenString(this.i)+"i"}else{return plt.Kernel.toWrittenString(this.r)+plt.Kernel.toWrittenString(this.i)+"i"}};plt.types.Complex.prototype.toDisplayedString=plt.types.Complex.prototype.toWrittenString;plt.types.Complex.prototype.isFinite=function(){return this.r.isFinite()&&this.i.isFinite()};plt.types.Complex.prototype.isRational=function(){return this.r.isRational()&&plt.types.NumberTower.equal(this.i,plt.types.Rational.ZERO)};plt.types.Complex.prototype.isInteger=function(){return this.r.isInteger()&&plt.types.NumberTower.equal(this.i,plt.types.Rational.ZERO)};plt.types.Complex.prototype.toExact=function(){if(!this.isReal()){throw new plt.Kernel.MobyRuntimeError("inexact->exact: expects argument of type real number")}return this.r.toExact()};plt.types.Complex.prototype.isExact=function(){return this.r.isExact()&&this.i.isExact()};plt.types.Complex.prototype.level=function(){return 2};plt.types.Complex.prototype.lift=function(l){throw new plt.Kernel.MobyRuntimeError("Don't know how to lift Complex number")};plt.types.Complex.prototype.isEqual=function(m){var l=((m instanceof plt.types.Complex)&&(plt.types.NumberTower.equal(this.r,m.r))&&(plt.types.NumberTower.equal(this.i,m.i)));return l};plt.types.Complex.prototype.greaterThan=function(l){if(!this.isReal()||!l.isReal()){throw new plt.Kernel.MobyRuntimeError(">: expects argument of type real number")}return plt.types.NumberTower.greaterThan(this.r,l.r)};plt.types.Complex.prototype.greaterThanOrEqual=function(l){if(!this.isReal()||!l.isReal()){throw new plt.Kernel.MobyRuntimeError(">: expects argument of type real number")}return plt.types.NumberTower.greaterThanOrEqual(this.r,l.r)};plt.types.Complex.prototype.lessThan=function(l){if(!this.isReal()||!l.isReal()){throw new plt.Kernel.MobyRuntimeError(">: expects argument of type real number")}return plt.types.NumberTower.lessThan(this.r,l.r)};plt.types.Complex.prototype.lessThanOrEqual=function(l){if(!this.isReal()||!l.isReal()){throw new plt.Kernel.MobyRuntimeError(">: expects argument of type real number")}return plt.types.NumberTower.lessThanOrEqual(this.r,l.r)};plt.types.Complex.prototype.abs=function(){if(!plt.types.NumberTower.equal(this.i,plt.types.Rational.ZERO).valueOf()){throw new plt.Kernel.MobyRuntimeError("abs: expects argument of type real number")}return this.r.abs()};plt.types.Complex.prototype.toInteger=function(){if(!plt.types.NumberTower.equal(this.i,plt.types.Rational.ZERO).valueOf()){throw new plt.Kernel.MobyRuntimeError("toInteger: expects argument of type real number")}return this.r.toInteger()};plt.types.Complex.prototype.numerator=function(){if(!this.isReal()){throw new plt.Kernel.MobyRuntimeError("numerator: can only be applied to real number")}return this.n.numerator()};plt.types.Complex.prototype.denominator=function(){if(!this.isReal()){throw new plt.Kernel.MobyRuntimeError("floor: can only be applied to real number")}return this.n.denominator()};plt.types.Complex.prototype.toFloat=function(){if(!plt.types.NumberTower.equal(this.i,plt.types.Rational.ZERO).valueOf()){throw new plt.Kernel.MobyRuntimeError("toFloat: expects argument of type real number")}return this.r.toFloat()};plt.types.Complex.prototype.toComplex=function(){return this};plt.types.Complex.prototype.add=function(l){return plt.types.Complex.makeInstance(plt.types.NumberTower.add(this.r,l.r),plt.types.NumberTower.add(this.i,l.i))};plt.types.Complex.prototype.subtract=function(l){return plt.types.Complex.makeInstance(plt.types.NumberTower.subtract(this.r,l.r),plt.types.NumberTower.subtract(this.i,l.i))};plt.types.Complex.prototype.multiply=function(l){if(l.isReal()){return plt.types.Complex.makeInstance(plt.types.NumberTower.multiply(this.r,l.r),plt.types.NumberTower.multiply(this.i,l.r))}var n=plt.types.NumberTower.subtract(plt.types.NumberTower.multiply(this.r,l.r),plt.types.NumberTower.multiply(this.i,l.i));var m=plt.types.NumberTower.add(plt.types.NumberTower.multiply(this.r,l.i),plt.types.NumberTower.multiply(this.i,l.r));if(plt.types.NumberTower.equal(m,plt.types.Rational.ZERO)){return n}return plt.types.Complex.makeInstance(n,m)};plt.types.Complex.prototype.divide=function(n){if(n.isReal()){return plt.types.Complex.makeInstance(plt.types.NumberTower.divide(this.r,n.r),plt.types.NumberTower.divide(this.i,n.r))}var o=n.conjugate();var m=plt.types.NumberTower.multiply(this,o).toComplex();var p=plt.types.NumberTower.multiply(n,o);var l=plt.types.Complex.makeInstance(plt.types.NumberTower.divide(m.r,p),plt.types.NumberTower.divide(m.i,p));return l};plt.types.Complex.prototype.conjugate=function(){var l=plt.types.Complex.makeInstance(this.r,plt.types.NumberTower.subtract(plt.types.Rational.ZERO,this.i));return l};plt.types.Complex.prototype.magnitude=function(){var l=plt.types.NumberTower.add(plt.types.NumberTower.multiply(this.r,this.r),plt.types.NumberTower.multiply(this.i,this.i));return l.sqrt()};plt.types.Complex.prototype.isReal=function(){return plt.types.NumberTower.equal(this.i,plt.types.Rational.ZERO)};plt.types.Complex.prototype.sqrt=function(){if(this.isReal()){return this.r.sqrt()}var l=plt.types.NumberTower.add(this.magnitude(),this.r);var n=l.half().sqrt();var m=plt.types.NumberTower.divide(this.i,plt.types.NumberTower.multiply(l,plt.types.FloatPoint.makeInstance(2)).sqrt());return plt.types.Complex.makeInstance(n,m)};plt.types.Complex.prototype.log=function(){var n=this.magnitude();var o=this.angle();var l=plt.types.NumberTower.add(n.log(),o.timesI());return l};plt.types.Complex.prototype.angle=function(){if(this.isReal()){return this.r.angle()}if(plt.types.NumberTower.equal(plt.types.Rational.ZERO,this.r)){var l=plt.Kernel.pi.half();return plt.types.NumberTower.greaterThan(this.i,plt.types.Rational.ZERO)?l:l.minus()}else{var l=plt.types.NumberTower.divide(this.i.abs(),this.r.abs()).atan();if(plt.types.NumberTower.greaterThan(this.r,plt.types.Rational.ZERO)){return plt.types.NumberTower.greaterThan(this.i,plt.types.Rational.ZERO)?l:l.minus()}else{return plt.types.NumberTower.greaterThan(this.i,plt.types.Rational.ZERO)?plt.Kernel.pi.subtract(l):l.subtract(plt.Kernel.pi)}}};var f=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.ONE);var k=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.NEGATIVE_ONE);plt.types.Complex.prototype.atan=function(){if(plt.types.NumberTower.equal(this,f)||plt.types.NumberTower.equal(this,k)){return plt.types.FloatPoint.makeInstance(Number.NEGATIVE_INFINITY)}return plt.types.NumberTower.multiply(f,plt.types.NumberTower.multiply(plt.types.FloatPoint.makeInstance(0.5),(plt.types.NumberTower.divide(plt.types.NumberTower.add(f,this),plt.types.NumberTower.add(f,plt.types.NumberTower.subtract(plt.types.Rational.ZERO,this)))).log()))};plt.types.Complex.prototype.cos=function(){if(this.isReal()){return this.r.cos()}var m=this.timesI();var l=m.minus();return plt.types.NumberTower.add(m.exp(),l.exp()).half()};plt.types.Complex.prototype.sin=function(){if(this.isReal()){return this.r.sin()}var p=this.timesI();var o=p.minus();var n=plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.TWO);var m=plt.types.NumberTower.subtract(p.exp(),o.exp());var l=plt.types.NumberTower.divide(m,n);return l};plt.types.Complex.prototype.expt=function(m){var l=plt.types.NumberTower.multiply(m,this.log());return l.exp()};plt.types.Complex.prototype.exp=function(){var n=this.r.exp();var l=this.i.cos();var m=this.i.sin();return plt.types.NumberTower.multiply(n,plt.types.NumberTower.add(l,m.timesI()))};plt.types.Complex.prototype.acos=function(){if(this.isReal()){return this.r.acos()}var o=plt.Kernel.pi.half();var p=this.timesI();var n=plt.types.NumberTower.subtract(plt.types.Rational.ONE,this.multiply(this)).sqrt();var m=plt.types.NumberTower.add(p,n).log().timesI();return plt.types.NumberTower.add(o,m)};plt.types.Complex.prototype.asin=function(){if(this.isReal()){return this.r.asin()}var m=plt.types.NumberTower.subtract(plt.types.Rational.ONE,this.multiply(this));var l=m.sqrt();return plt.types.NumberTower.multiply(plt.types.Rational.TWO,(plt.types.NumberTower.divide(this,plt.types.NumberTower.add(plt.types.Rational.ONE,l))).atan())};plt.types.Complex.prototype.ceiling=function(){if(!this.isReal()){throw new plt.Kernel.MobyRuntimeError("ceiling: can only be applied to real number")}return this.r.ceiling()};plt.types.Complex.prototype.floor=function(){if(!this.isReal()){throw new plt.Kernel.MobyRuntimeError("floor: can only be applied to real number")}return this.r.floor()};plt.types.Complex.prototype.imag_dash_part=function(){return this.i};plt.types.Complex.prototype.real_dash_part=function(){return this.r};plt.types.Complex.prototype.round=function(){return this.r.round()};plt.types.Complex.prototype.timesI=function(){return this.multiply(plt.types.Complex.makeInstance(plt.types.Rational.ZERO,plt.types.Rational.ONE))};plt.types.Complex.prototype.minus=function(){return plt.types.Complex.makeInstance(plt.types.NumberTower.subtract(plt.types.Rational.ZERO,this.r),plt.types.NumberTower.subtract(plt.types.Rational.ZERO,this.i))};plt.types.Complex.prototype.half=function(){return plt.types.Complex.makeInstance(this.r.half(),this.i.half())};plt.types.NumberTower={};plt.types.NumberTower.toInteger=function(l){return l.toInteger()};plt.types.NumberTower.toFloat=function(l){return l.toFloat()};plt.types.NumberTower.abs=function(l){return l.abs()};plt.types.NumberTower.isFinite=function(l){return l.isFinite()};plt.types.NumberTower.toExact=function(l){return l.toExact()};plt.types.NumberTower.add=function(l,m){if(l.level()<m.level()){l=l.lift(m)}if(m.level()<l.level()){m=m.lift(l)}return l.add(m)};plt.types.NumberTower.subtract=function(l,m){if(l.level()<m.level()){l=l.lift(m)}if(m.level()<l.level()){m=m.lift(l)}return l.subtract(m)};plt.types.NumberTower.multiply=function(l,m){if(l.level()<m.level()){l=l.lift(m)}if(m.level()<l.level()){m=m.lift(l)}return l.multiply(m)};plt.types.NumberTower.divide=function(l,m){if(l.level()<m.level()){l=l.lift(m)}if(m.level()<l.level()){m=m.lift(l)}return l.divide(m)};plt.types.NumberTower.equal=function(l,m){if(l.level()<m.level()){l=l.lift(m)}if(m.level()<l.level()){m=m.lift(l)}return l.isEqual(m)};plt.types.NumberTower.approxEqual=function(l,n,m){return plt.types.NumberTower.lessThan(plt.types.NumberTower.abs(plt.types.NumberTower.subtract(l,n)),m)};plt.types.NumberTower.greaterThanOrEqual=function(l,m){if(l.level()<m.level()){l=l.lift(m)}if(m.level()<l.level()){m=m.lift(l)}if(!(l.isReal()&&m.isReal())){throw new plt.Kernel.MobyRuntimeError("greaterThanOrEqual: couldn't be applied to complex number")}return l.greaterThanOrEqual(m)};plt.types.NumberTower.lessThanOrEqual=function(l,m){if(l.level()<m.level()){l=l.lift(m)}if(m.level()<l.level()){m=m.lift(l)}if(!(l.isReal()&&m.isReal())){throw new plt.Kernel.MobyRuntimeError("lessThanOrEqual: couldn't be applied to complex number")}return l.lessThanOrEqual(m)};plt.types.NumberTower.greaterThan=function(l,m){if(l.level()<m.level()){l=l.lift(m)}if(m.level()<l.level()){m=m.lift(l)}if(!(l.isReal()&&m.isReal())){throw new plt.Kernel.MobyRuntimeError("greaterThan: couldn't be applied to complex number")}return l.greaterThan(m)};plt.types.NumberTower.lessThan=function(l,m){if(l.level()<m.level()){l=l.lift(m)}if(m.level()<l.level()){m=m.lift(l)}if(!(l.isReal()&&m.isReal())){throw new plt.Kernel.MobyRuntimeError("lessThan: couldn't be applied to complex number")}return l.lessThan(m)};plt.types.NumberTower.modulo=function(o,p){var l=plt.types.Rational.makeInstance(o.toInteger()%p.toInteger(),1);if(plt.types.NumberTower.lessThan(p,plt.types.Rational.ZERO)){if(plt.types.NumberTower.lessThanOrEqual(l,plt.types.Rational.ZERO)){return l}return plt.types.NumberTower.add(l,p)}else{if(plt.types.NumberTower.lessThan(l,plt.types.Rational.ZERO)){return plt.types.NumberTower.add(l,p)}return l}};plt.types.NumberTower.sqr=function(l){return plt.types.NumberTower.multiply(l,l)};plt.types.NumberTower.expt=function(l,m){if(l.level()<m.level()){l=l.lift(m)}if(m.level()<l.level()){m=m.lift(l)}return l.expt(m)};plt.types.String=String;plt.types.String.makeInstance=function(l){return l.valueOf()};plt.types.String.prototype.isEqual=function(l){return this==l};plt.types.String.prototype.toWrittenString=function(l){return'"'+this.replace(/["\\]/g,function(n,o,m){return"\\"+n})+'"'};plt.types.String.prototype.toDisplayedString=function(l){return this}})();if(typeof(plt)=="undefined"){plt={}}plt._Hashtable=(function(){function o(A){return(typeof A==="undefined")}function m(A){return(typeof A==="function")}function k(A){return(typeof A==="string")}function g(B,A){return m(B[A])}function n(A){return g(A,"equals")}function l(A){return g(A,"hashCode")}function i(B){if(k(B)){return B}else{if(l(B)){var A=B.hashCode();if(!k(A)){return i(A)}return A}else{if(g(B,"toString")){return B.toString()}else{return String(B)}}}}function j(B,A){return B.equals(A)}function e(B,A){if(n(A)){return A.equals(B)}else{return B===A}}function b(B,A){return B===A}function h(C,G,F,E,B){var D;for(var H=0,A=C.length;H<A;H++){D=C[H];if(B(G,F(D))){return E?[H,D]:true}}return false}function u(C,B){if(g(C,"splice")){C.splice(B,1)}else{if(B===C.length-1){C.length=B}else{var E=C.slice(B+1);C.length=B;for(var D=0,A=E.length;D<A;D++){C[B+D]=E[D]}}}}function p(B,A){if(B===null){throw new Error("null is not a valid "+A)}else{if(o(B)){throw new Error(A+" must not be undefined")}}}var t="key",s="value";function r(A){p(A,t)}function z(A){p(A,s)}function y(A,C,B){this.entries=[];this.addEntry(A,C);if(B!==null){this.getEqualityFunction=function(){return B}}}function x(A){return A[0]}function w(A){return A[1]}y.prototype={getEqualityFunction:function(A){if(n(A)){return j}else{return e}},searchForEntry:function(A){return h(this.entries,A,x,true,this.getEqualityFunction(A))},getEntryForKey:function(A){return this.searchForEntry(A)[1]},getEntryIndexForKey:function(A){return this.searchForEntry(A)[0]},removeEntryForKey:function(B){var A=this.searchForEntry(B);if(A){u(this.entries,A[0]);return true}return false},addEntry:function(B,A){this.entries[this.entries.length]=[B,A]},size:function(){return this.entries.length},keys:function(C){var B=C.length;for(var D=0,A=this.entries.length;D<A;D++){C[B+D]=this.entries[D][0]}},values:function(D){var C=D.length;for(var B=0,A=this.entries.length;B<A;B++){D[C+B]=this.entries[B][1]}},containsKey:function(A){return h(this.entries,A,x,false,this.getEqualityFunction(A))},containsValue:function(A){return h(this.entries,A,w,false,b)}};function f(){}f.prototype=[];function d(A){return A[0]}function c(C,B,A){return h(C,B,d,true,A)}function v(C,B){var A=C[B];if(A&&(A instanceof f)){return A[1]}return null}function q(D,C){var B=[];var A={};D=m(D)?D:i;C=m(C)?C:null;this.put=function(E,J){r(E);z(J);var I=D(E);var G=v(A,I);if(G){var H=G.getEntryForKey(E);if(H){H[1]=J}else{G.addEntry(E,J)}}else{var F=new f();F[0]=I;F[1]=new y(E,J,C);B[B.length]=F;A[I]=F}};this.get=function(F){r(F);var H=D(F);var G=v(A,H);if(G){var E=G.getEntryForKey(F);if(E){return E[1]}}return null};this.containsKey=function(G){r(G);var F=D(G);var E=v(A,F);if(E){return E.containsKey(G)}return false};this.containsValue=function(F){z(F);for(var G=0,E=B.length;G<E;G++){if(B[G][1].containsValue(F)){return true}}return false};this.clear=function(){B.length=0;A={}};this.isEmpty=function(){return B.length===0};this.keys=function(){var F=[];for(var G=0,E=B.length;G<E;G++){B[G][1].keys(F)}return F};this.values=function(){var G=[];for(var F=0,E=B.length;F<E;F++){B[F][1].values(G)}return G};this.remove=function(E){r(E);var H=D(E);var G=v(A,H);if(G){if(G.removeEntryForKey(E)){if(G.size()===0){var F=c(B,H,G.getEqualityFunction(E));u(B,F[0]);delete A[H]}}}};this.size=function(){var G=0;for(var F=0,E=B.length;F<E;F++){G+=B[F][1].size()}return G}}return q})();if(typeof(plt)=="undefined"){plt={}}(function(){if(!Array.indexOf){Array.prototype.indexOf=function(ad){for(var ac=0;ac<this.length;ac++){if(this[ac]==ad){return ac}}return -1}}var g=function(ae,ac,ad){if(ae.addEventListener){ae.addEventListener(ac,ad,false)}else{ae.attachEvent("on"+ac,ad,false)}};var r=function(ae,ac,ad){if(ae.addEventListener){ae.removeEventListener(ac,ad,false)}else{ae.detachEvent("on"+ac,ad,false)}};var A=function(ad){var ac=function(){};ac.prototype=ad;return new ac()};var y=function(ac){this.msg=ac};y.prototype.name="MobyError";y.prototype.toString=function(){return this.name+": "+this.msg};var Z=function(ad,ac){y.call(this,ad);this.loc=ac};Z.prototype=A(y.prototype);Z.prototype.name="MobyParserError";var N=function(ad,ac){y.call(this,ad);this.stx=ac};N.prototype=A(y.prototype);N.prototype.name="MobySyntaxError";var H=function(ac){y.call(this,ac)};H.prototype=A(y.prototype);H.prototype.name="MobyTypeError";var D=function(ac){y.call(this,ac)};D.prototype=A(y.prototype);D.prototype.name="MobyRuntimeError";var S=function(ac){y.call(this,ac)};S.prototype=A(D.prototype);S.prototype.name="MobyTestingError";var K=function(ad,ac){while(ac!=0){var ae=ad;ad=ac;ac=ae%ac}return Math.abs(ad)};var e=function(ad,ac){return Math.abs(ad*ac/K(ad,ac))};var Y=function(ac){return(ac!=null&&ac!=undefined&&(ac instanceof plt.types.Rational||ac instanceof plt.types.FloatPoint||ac instanceof plt.types.Complex))};var k=function(ac){return(ac!=null&&ac!=undefined&&ac instanceof plt.types.Symbol)};var q=function(ac){return ac!=null&&ac!=undefined&&ac instanceof plt.types.Char};var O=function(ac){return stx_question_(ac)};var j=function(ac){return typeof(ac)=="string"};var G=function(ac){return(ac==plt.types.Logic.TRUE||ac==plt.types.Logic.FALSE)};var U=function(ac){return ac!=null&&ac!=undefined&&ac instanceof plt.types.Cons};var t=function(ac){return ac!=null&&ac!=undefined&&ac instanceof plt.types.Empty};var W=function(ac){return(Y(ac)&&ac.isReal())};var E=function(ac){return Y(ac)&&ac.isRational()};var F=function(ac){return Y(ac)};var s=function(ac){return typeof(ac)=="function"};var o=function(ac){return(Y(ac)&&ac.isInteger())};var m=function(ac){return Y(ac)&&ac.isInteger()&&ac.toInteger()>=0};var u=function(ad){for(var ac=0;ac<ad.length;ac++){if(!((ad[ac]>="a"&&ad[ac]<="z")||(ad[ac]>="A"&&ad[ac]<="Z"))){return false}}return true};var L=(function(){var ac=new RegExp("^\\s*$");return function(ad){return(ad.match(ac)?true:false)}}());var c=function(ac){return ac!=null&&ac!=undefined&&(ac instanceof plt.types.Vector)};var h=function(ac,ae){for(var ad=0;ad<ac.length;ad++){ae.apply(ac[ad],[ac[ad],ad])}};var J=function(ag,af,ac,ae){if(!ag(af,ac).valueOf()){return false}if(ae.length==0){return true}if(!ag(ac,ae[0]).valueOf()){return false}for(var ad=0;ad<ae.length-1;ad++){if(!ag(ae[ad],ae[ad+1]).valueOf()){return false}}return true};var l=function(ac,ag,ae){var ad;var af=ag;for(ad=0;ad<ae.length;ad++){if(!(ac(af,ae[ad])).valueOf()){af=ae[ad]}}return af};var b=function(ac){return ac!=null&&ac!=undefined&&((ac instanceof plt.types.Cons)||(ac instanceof plt.types.Empty))};var i=function(ad){var ac=["th","st","nd","rd","th","th","th","th","th","th"];if((Math.floor(ad/10)%10)==1){return ad+"th"}else{return ad+ac[ad%10]}};var B=function(af,ad,ac,ae){return plt.Kernel.format("~a: expects type <~a> as ~a argument, given: ~s",[af,ad,i(ac),ae])};var x=function(ad,ag,af,ae,ac){if(!ag(ad)){throw new H(B(af,ae,ac,ad))}};var I=function(ad,ae,ac){if(!b(ad)){throw new H(B(ae,"list",ac,ad))}};var T=function(ad,ag,af,ae,ac){if(!b(ad)){throw new H(B(af,"listof "+ae,ac,ad))}while(!ad.isEmpty()){if(!ag(ad.first())){throw new H(B(af,"listof "+ae,ac,ad))}ad=ad.rest()}};var z=function(af,ad,ae,ac){return function(ai,ag,ah){x(ai,af,ac,ad,1);x(ag,af,ac,ad,2);h(ah,function(aj,ak){x(aj,af,ac,ad,ak+3)});return ae(ai,ag,ah)}};var n=function(ad,ac){return z(Y,"number",function(ag,ae,af){return J(ad,ag,ae,af)},ac)};var aa=function(ad,ac){return z(q,"char",function(ag,ae,af){return J(ad,ag,ae,af)},ac)};var p=function(ad,ac){return z(j,"string",function(ag,ae,af){return J(ad,ag,ae,af)},ac)};plt.Kernel={_heir:A,pi:plt.types.FloatPoint.makeInstance(Math.PI),e:plt.types.FloatPoint.makeInstance(Math.E),Struct:function(ad,ac){this._constructorName=ad;this._fields=ac},struct_question_:function(ac){return(ac!=null&&ac!=undefined&&ac instanceof plt.Kernel.Struct)},number_question_:function(ac){return Y(ac)},equal_question_:function(ac,ad){if(plt.Kernel.number_question_(ac)&&plt.Kernel.number_question_(ad)){if("isEqual" in ac){return plt.types.NumberTower.equal(ac,ad)}else{if("isEqual" in ad){return plt.types.NumberTower.equal(ad,ac)}else{return(ac==ad)}}}else{return ac.isEqual(ad)}},equal_tilde__question_:function(ac,ae,ad){x(ad,Y,"equal~?","number",3);if(plt.Kernel.number_question_(ac).valueOf()&&plt.Kernel.number_question_(ae).valueOf()){if("isEqual" in ac){return plt.types.NumberTower.approxEqual(ac,ae,ad)}else{if("isEqual" in ae){return plt.types.NumberTower.approxEqual(ae,ac,ad)}else{return(ac==ae)}}}else{return ac.isEqual(ae)}},eq_question_:function(ac,ad){return(ac==ad)},eqv_question_:function(ac,ad){if(Y(ac)&&Y(ad)&&ac.level()==ad.level()){return plt.types.NumberTower.equal(ac,ad)}else{if(q(ac)&&q(ad)){return ac.getValue()==ad.getValue()}}return ac===ad},identity:function(ac){return ac},cons:function(ac,ad){I(ad,"cons",2);return plt.types.Cons.makeInstance(ac,ad)},first:function(ac){I(ac,"first",1);return ac.first()},rest:function(ac){I(ac,"rest",1);return ac.rest()},second:function(ac){I(ac,"second",1);return ac.rest().first()},third:function(ac){I(ac,"third",1);return ac.rest().rest().first()},fourth:function(ac){I(ac,"fourth",1);return ac.rest().rest().rest().first()},fifth:function(ac){I(ac,"fifth",1);return ac.rest().rest().rest().rest().first()},random:function(ac){x(ac,o,"random","integer",1);return plt.types.Rational.makeInstance(Math.floor(plt.types.NumberTower.toInteger(ac)*Math.random()),1)},current_dash_seconds:function(){return plt.types.Rational.makeInstance(new Date().getMilliseconds()/1000)},floor:function(ac){x(ac,Y,"floor","number",1);return ac.floor()},ceiling:function(ac){x(ac,Y,"ceiling","number",1);return ac.ceiling()},sqrt:function(ac){x(ac,Y,"sqrt","number",1);return ac.sqrt()},integer_dash_sqrt:function(ad){x(ad,o,"integer-sqrt","integer",1);var ac=ad.sqrt();if(E(ac)){return plt.types.Rational.makeInstance(ac.toInteger())}else{if(W(ac)){return plt.types.Rational.makeInstance(ac.toInteger())}else{return plt.types.Complex.makeInstance(plt.types.Rational.makeInstance(plt.Kernel.real_dash_part(ac).toInteger()),plt.types.Rational.makeInstance(plt.Kernel.imag_dash_part(ac).toInteger()))}}},sqr:function(ac){x(ac,Y,"sqr","number",1);return plt.types.NumberTower.sqr(ac)},sin:function(ac){x(ac,Y,"sin","number",1);return ac.sin()},cos:function(ac){x(ac,Y,"cos","number",1);return ac.cos()},modulo:function(ac,ad){x(ac,Y,"modulo","number",1);x(ad,Y,"modulo","number",2);return plt.types.NumberTower.modulo(ac,ad)},zero_question_:function(ac){x(ac,Y,"zero?","number",1);return plt.types.NumberTower.equal(ac,plt.types.Rational.ZERO)},_equal__tilde_:function(ac,ae,ad){x(ac,Y,"=~","number",1);x(ae,Y,"=~","number",2);x(ad,Y,"=~","number",3);return plt.types.NumberTower.approxEqual(ac,ae,ad)},abs:function(ac){x(ac,Y,"abs","number",1);return plt.types.NumberTower.abs(ac)},add1:function(ac){x(ac,Y,"add1","number",1);return plt.types.NumberTower.add(ac,plt.types.Rational.ONE)},sub1:function(ac){x(ac,Y,"sub1","number",1);return plt.types.NumberTower.subtract(ac,plt.types.Rational.ONE)},_plus_:function(ac){h(ac,function(af,ag){x(af,Y,"+","number",ag+1)});var ad,ae=plt.types.Rational.ZERO;for(ad=0;ad<ac.length;ad++){ae=plt.types.NumberTower.add(ae,ac[ad])}return ae},_dash_:function(af,ac){x(af,Y,"-","number",1);h(ac,function(ag,ah){x(ag,Y,"-","number",ah+2)});if(ac.length==0){return plt.types.NumberTower.subtract(plt.types.Rational.ZERO,af)}var ad,ae=af;for(ad=0;ad<ac.length;ad++){ae=plt.types.NumberTower.subtract(ae,ac[ad])}return ae},_star_:function(ad){h(ad,function(af,ag){x(af,Y,"*","number",ag+1)});var ae,ac=plt.types.Rational.ONE;for(ae=0;ae<ad.length;ae++){ac=plt.types.NumberTower.multiply(ac,ad[ae])}return ac},_slash_:function(ae,ac){x(ae,Y,"/","number",1);h(ac,function(ag,ah){x(ag,Y,"/","number",ah+2)});var ad,af=ae;if(ac.length==0){return plt.types.NumberTower.divide(plt.types.Rational.ONE,af)}else{for(ad=0;ad<ac.length;ad++){af=plt.types.NumberTower.divide(af,ac[ad])}return af}},_equal_:n(plt.types.NumberTower.equal,"="),_greaterthan__equal_:n(plt.types.NumberTower.greaterThanOrEqual,">="),_lessthan__equal_:n(plt.types.NumberTower.lessThanOrEqual,"<="),_greaterthan_:n(plt.types.NumberTower.greaterThan,">"),_lessthan_:n(plt.types.NumberTower.lessThan,"<"),min:function(ad,ac){x(ad,Y,"min","number",1);h(ac,function(ae,af){x(this,Y,"min","number",af+2)});return l(plt.types.NumberTower.lessThanOrEqual,ad,ac)},max:function(ad,ac){x(ad,Y,"max","number",1);h(ac,function(ae,af){x(this,Y,"max","number",af+2)});return l(plt.types.NumberTower.greaterThanOrEqual,ad,ac)},lcm:function(af,ae){x(af,o,"lcm","number",1);h(ae,function(ag,ah){x(this,o,"lcm","number",ah+2)});var ac=Math.abs(af.toInteger());if(ac==0){return plt.types.Rational.ZERO}for(var ad=0;ad<ae.length;ad++){if(ae[ad].toInteger()==0){return plt.types.Rational.ZERO}ac=e(ac,ae[ad].toInteger())}return plt.types.Rational.makeInstance(ac)},gcd:function(af,ae){x(af,o,"gcd","number",1);h(ae,function(ag,ah){x(this,o,"gcd","number",ah+2)});var ac=Math.abs(af.toInteger());for(var ad=0;ad<ae.length;ad++){ac=K(ac,ae[ad].toInteger())}return plt.types.Rational.makeInstance(ac)},exact_dash__greaterthan_inexact:function(ac){x(ac,Y,"exact->inexact","number",1);return plt.types.FloatPoint.makeInstance(ac.toFloat())},inexact_dash__greaterthan_exact:function(ac){x(ac,Y,"inexact->exact","number",1);return plt.types.NumberTower.toExact(ac)},exact_question_:function(ac){x(ac,Y,"exact?","number",1);return ac.isExact()},inexact_question_:function(ac){x(ac,Y,"inexact?","number",1);return !ac.isExact()},rational_question_:function(ac){return(plt.Kernel.number_question_(ac)&&ac.isRational())},number_dash__greaterthan_string:function(ac){x(ac,Y,"number->string","number",1);return plt.types.String.makeInstance(plt.Kernel.toWrittenString(ac))},conjugate:function(ac){x(ac,Y,"conjugate","number",1);return ac.conjugate()},magnitude:function(ac){x(ac,Y,"magnitude","number",1);return ac.magnitude()},log:function(ac){x(ac,Y,"log","number",1);return ac.log()},angle:function(ac){x(ac,Y,"angle","number",1);return ac.angle()},atan:function(ac,ad){if(ad.length==0){x(ac,Y,"atan","number",1);return ac.atan()}else{if(ad.length==1){x(ac,W,"atan","number",1);x(ad[0],W,"atan","number",2);return plt.types.FloatPoint.makeInstance(Math.atan2(plt.types.NumberTower.toFloat(ac),plt.types.NumberTower.toFloat(ad[0])))}else{throw new D(plt.Kernel.format("atan: expects 1 to 2 arguments, given ~a.",[plt.types.Rational.makeInstance(ad.length)]))}}},expt:function(ac,ad){x(ac,Y,"expt","number",1);x(ad,Y,"expt","number",2);return plt.types.NumberTower.expt(ac,ad)},exp:function(ac){x(ac,Y,"exp","number",1);return ac.exp()},acos:function(ac){x(ac,Y,"acos","number",1);return ac.acos()},asin:function(ac){x(ac,Y,"asin","number",1);return ac.asin()},tan:function(ac){x(ac,Y,"tan","number",1);return plt.types.NumberTower.divide(ac.sin(),ac.cos())},complex_question_:function(ac){return F(ac)},cosh:function(ac){x(ac,Y,"cosh","number",1);return this._plus_([this.exp(ac),this.exp(ac.minus())]).half()},sinh:function(ac){x(ac,Y,"sinh","number",1);return plt.types.NumberTower.subtract(this.exp(ac),this.exp(ac.minus())).half()},denominator:function(ac){x(ac,E,"denominator","rational",1);return ac.denominator()},numerator:function(ac){x(ac,E,"numerator","rational",1);return ac.numerator()},odd_question_:function(ac){x(ac,Y,"odd?","number",1);return(Math.abs((ac.toInteger()%2))==1)},even_question_:function(ac){x(ac,Y,"even?","number",1);return(Math.abs((ac.toInteger()%2))==0)},positive_question_:function(ac){x(ac,Y,"positive?","number",1);return this._greaterthan_(ac,plt.types.Rational.ZERO,[])},negative_question_:function(ac){x(ac,Y,"negative?","number",1);return this._lessthan_(ac,plt.types.Rational.ZERO,[])},imag_dash_part:function(ac){x(ac,Y,"imag-part","number",1);return ac.imag_dash_part()},real_dash_part:function(ac){x(ac,Y,"real-part","number",1);return ac.real_dash_part()},make_dash_polar:function(ae,ad){if(plt.types.NumberTower.equal(ad,plt.types.Rational.ZERO)){return ae}var ac=plt.types.NumberTower.multiply(ae,ad.cos());var af=plt.types.NumberTower.multiply(ae,ad.sin());return plt.types.Complex.makeInstance(ac,af)},integer_question_:function(ac){return(o(ac))},make_dash_rectangular:function(ac,ad){return plt.types.Complex.makeInstance(ac,ad)},quotient:function(ac,ae){x(ac,o,"quotient","integer",1);x(ae,o,"quotient","integer",2);var ad=plt.types.NumberTower.divide(ac,ae);if(plt.Kernel.positive_question_(ad)){return plt.types.Rational.makeInstance(ad.floor().toInteger(),1)}else{return plt.types.Rational.makeInstance(ad.ceiling().toInteger(),1)}},remainder:function(ac,ad){x(ac,Y,"remainder","number",1);x(ad,Y,"remainder","number",2);return plt.types.Rational.makeInstance(ac.toInteger()%ad.toInteger(),1)},real_question_:function(ac){return W(ac)},round:function(ac){x(ac,Y,"round","number",1);return ac.round()},sgn:function(ac){x(ac,Y,"sgn","number",1);if(this.positive_question_(ac).valueOf()){return plt.types.Rational.ONE}if(this.negative_question_(ac).valueOf()){return plt.types.Rational.NEGATIVE_ONE}else{return plt.types.Rational.ZERO}},boolean_equal__question_:function(ac,ad){x(ac,G,"boolean=?","boolean",1);x(ad,G,"boolean=?","boolean",2);return ac==ad},boolean_question_:function(ac){return G(ac)},false_question_:function(ac){return(ac==plt.types.Logic.FALSE)},not:function(ac){if(!ac||ac===plt.types.Logic.FALSE){return plt.types.Logic.TRUE}return plt.types.Logic.FALSE},symbol_dash__greaterthan_string:function(ac){x(ac,k,"symbol->string","symbol",1);return plt.types.String.makeInstance(ac.val)},symbol_equal__question_:function(ac,ad){x(ac,k,"symbol=?","symbol",1);x(ad,k,"symbol=?","symbol",2);return(ac.val==ad.val)},symbol_question_:function(ac){return k(ac)},append:function(af,ae){I(af,"append",1);var ac=af;var ad;for(ad=0;ad<ae.length;ad++){I(ae[ad],"append",ad+2);ac=ac.append(ae[ad])}return ac},reverse:function(ac){I(ac,"reverse",1);var ad=plt.types.Empty.EMPTY;while(!ac.isEmpty()){ad=plt.types.Cons.makeInstance(ac.first(),ad);ac=ac.rest()}return ad},assq:function(ad,ac){I(ac,"assq",2);while(!ac.isEmpty()&&!plt.Kernel.eq_question_(ad,ac.first().first())){ac=ac.rest()}if(ac.isEmpty()){return plt.types.Logic.FALSE}else{return ac.first()}},caaar:function(ac){I(ac,"caaar",1);return ac.first().first().first()},caadr:function(ac){I(ac,"caadr",1);return ac.first().first().rest()},caar:function(ac){I(ac,"caar",1);return ac.first().first()},cadar:function(ac){I(ac,"cadar",1);return ac.first().rest().first()},cadddr:function(ac){I(ac,"cadddr",1);return ac.rest().rest().rest().first()},caddr:function(ac){I(ac,"caddr",1);return ac.rest().rest().first()},cadr:function(ac){I(ac,"cadr",1);return ac.rest().first()},car:function(ac){I(ac,"car",1);return ac.first()},cdaar:function(ac){I(ac,"cdaar",1);return ac.first().first().rest()},cdadr:function(ac){I(ac,"cdadr",1);return ac.rest().first().rest()},cdar:function(ac){I(ac,"cdar",1);return ac.first().rest()},cddar:function(ac){I(ac,"cddar",1);return ac.first().rest().rest()},cdddr:function(ac){I(ac,"cdddr",1);return ac.rest().rest().rest()},cddr:function(ac){I(ac,"cddr",1);return ac.rest().rest()},cdr:function(ac){I(ac,"cdr",1);return ac.rest()},null_question_:function(ac){return t(ac)},empty_question_:function(ac){return t(ac)},pair_question_:function(ac){return U(ac)},cons_question_:function(ac){return U(ac)},list_question_:function(ac){return b(ac)},sixth:function(ac){I(ac,"sixth",1);return ac.rest().rest().rest().rest().rest().first()},seventh:function(ac){I(ac,"seventh",1);return ac.rest().rest().rest().rest().rest().rest().first()},eighth:function(ac){I(ac,"eighth",1);return ac.rest().rest().rest().rest().rest().rest().rest().first()},set_dash_car_bang_:function(ac,ad){I(ac,"set-car!",1);ac.f=ad;return undefined},set_dash_cdr_bang_:function(ac,ad){I(ac,"set-cdr!",1);I(ad,"set-cdr!",2);ac.r=ad;return undefined},length:function(ac){I(ac,"length",1);var ad=plt.types.Rational.ZERO;for(;!ac.isEmpty();ac=ac.rest()){ad=plt.Kernel.add1(ad)}return ad},list:function(ac){var ad=plt.types.Empty.EMPTY;for(var ae=ac.length-1;ae>=0;ae--){ad=plt.types.Cons.makeInstance(ac[ae],ad)}return ad},list_star_:function(ac,ae){var ad=ae.pop();if(ad==undefined||!ad instanceof plt.types.Cons){throw new H("list*: "+ad+" not a list")}ae.unshift(ac);return plt.Kernel.append(plt.Kernel.list(ae),[ad])},list_dash_ref:function(ad,ac){I(ad,"list-ref",1);x(ac,m,"list-ref","natural",2);var ae=plt.types.Rational.ZERO;for(;plt.Kernel._lessthan_(ae,ac,[]);ae=plt.Kernel.add1(ae)){if(ad.isEmpty()){throw new D("list-ref: index too small")}else{ad=ad.rest()}}return ad.first()},remove:function(af,ad){I(ad,"member",2);var ae=ad;var ac=plt.types.Empty.EMPTY;while(!ad.isEmpty()){if(plt.Kernel.equal_question_(af,ad.first()).valueOf()){return plt.Kernel.append(plt.Kernel.reverse(ac),[ad.rest()])}else{ac=plt.types.Cons.makeInstance(ad.first(),ac);ad=ad.rest()}}return ae},member:function(ad,ac){I(ac,"member",2);while(!ac.isEmpty()){if(plt.Kernel.equal_question_(ad,ac.first()).valueOf()){return plt.types.Logic.TRUE}ac=ac.rest()}return plt.types.Logic.FALSE},memq:function(ad,ac){I(ac,"memq",2);while(!ac.isEmpty()){if(plt.Kernel.eq_question_(ad,ac.first()).valueOf()){return ac}ac=ac.rest()}return plt.types.Logic.FALSE},memv:function(ad,ac){I(ac,"memv",2);while(!ac.isEmpty()){if(plt.Kernel.eqv_question_(ad,ac.first()).valueOf()){return ac}ac=ac.rest()}return plt.types.Logic.FALSE},memf:function(ad,ac){x(ad,s,"memf","function",1);I(ac,"memf",2);while(!ac.isEmpty()){if(ad([ac.first()])){return ac}ac=ac.rest()}return plt.types.Logic.FALSE},compose:function(ac){return function(ad){var af=ad;for(var ae=ac.length-1;ae>=0;ae--){af=[ac[ae](af)]}return af[0]}},string_dash__greaterthan_number:function(af){x(af,j,"string->number","string",1);try{var ad=plt.reader.readSchemeExpressions(af,"");if(plt.types.NumberTower.equal(plt.Kernel.length(ad),plt.types.Rational.ONE)){var ac=stx_dash_e(ad.first());if(Y(ac)){return ac}else{return plt.types.Logic.FALSE}}else{return plt.types.Logic.FALSE}}catch(ae){return plt.types.Logic.FALSE}},string_dash__greaterthan_symbol:function(ac){x(ac,j,"string->symbol","string",1);return plt.types.Symbol.makeInstance(ac)},string_dash__greaterthan_int:function(ac){x(ac,j,"string->int","string",1);return plt.types.Rational.makeInstance(ac.toString().charCodeAt(0),1)},string_dash_append:function(ac){h(ac,function(ad,ae){x(ad,j,"string-append","string",ae+1)});return plt.types.String.makeInstance(ac.join(""))},replicate:function(af,ae){x(af,m,"replicate","natural",1);x(ae,j,"replicate","string",2);var ac=[];for(var ad=0;ad<af.toInteger();ad++){ac.push(ae)}return plt.types.String.makeInstance(ac.join(""))},string_equal__question_:p(function(ac,ad){return ac==ad},"string=?"),string_lessthan__equal__question_:p(function(ac,ad){return ac<=ad},"string<=?"),string_lessthan__question_:p(function(ac,ad){return ac<ad},"string<?"),string_greaterthan__equal__question_:p(function(ac,ad){return ac>=ad},"string>=?"),string_greaterthan__question_:p(function(ac,ad){return ac>ad},"string>?"),string_dash_ci_equal__question_:p(function(ac,ad){return ac.toUpperCase()==ad.toUpperCase()},"string-ci=?"),string_dash_ci_lessthan__equal__question_:p(function(ac,ad){return ac.toUpperCase()<=ad.toUpperCase()},"string-ci<=?"),string_dash_ci_lessthan__question_:p(function(ac,ad){return ac.toUpperCase()<ad.toUpperCase()},"string-ci<?"),string_dash_ci_greaterthan__question_:p(function(ac,ad){return ac.toUpperCase()>ad.toUpperCase()},"string-ci>?"),string_dash_ci_greaterthan__equal__question_:p(function(ac,ad){return ac.toUpperCase()>=ad.toUpperCase()},"string-ci>=?"),string_dash_copy:function(ac){x(ac,j,"string-copy","string",1);return ac.substring(0,ac.length)},string_dash_length:function(ac){x(ac,j,"string-length","string",1);return plt.types.Rational.makeInstance(ac.length,1)},string_dash_ref:function(ad,ac){x(ad,j,"string-ref","string",1);x(ac,m,"string-ref","natural",2);if(ac.toInteger()>=ad.length){throw new D("string-ref: index >= length")}return plt.types.String.makeInstance(ad.charAt(ac.toInteger()))},string_dash_ith:function(ad,ac){x(ad,j,"string-ith","string",1);x(ac,m,"string-ith","natural",2);if(ac.toInteger()>=ad.length){throw new D("string-ith: index >= string length")}return plt.types.String.makeInstance(ad.substring(ac.toInteger(),ac.toInteger()+1))},int_dash__greaterthan_string:function(ac){x(ac,o,"int->string","integer",1);return plt.types.String.makeInstance(String.fromCharCode(ac.toInteger()))},string_question_:function(ac){return j(ac)},substring:function(ae,ad,ac){x(ae,j,"substring","string",1);x(ad,m,"substring","natural",2);x(ac,m,"substring","natural",3);if(ad.toInteger()>ac.toInteger()){throw new D("substring: begin > end")}if(ac.toInteger()>ae.length){throw new D("substring: end > length")}return String.makeInstance(ae.substring(ad.toInteger(),ac.toInteger()))},char_question_:function(ac){return q(ac)},char_dash__greaterthan_integer:function(ac){x(ac,q,"char->integer","char",1);var ad=new String(ac.val);return plt.types.Rational.makeInstance(ad.charCodeAt(0),1)},integer_dash__greaterthan_char:function(ad){x(ad,o,"integer->char","integer",1);var ac=String.fromCharCode(ad.toInteger());return plt.types.Char.makeInstance(ac)},char_equal__question_:aa(function(ac,ad){return ac.val==ad.val},"char=?"),char_lessthan__question_:aa(function(ac,ad){return ac.val<ad.val},"char<?"),char_lessthan__equal__question_:aa(function(ac,ad){return ac.val<=ad.val},"char<=?"),char_greaterthan__question_:aa(function(ac,ad){return ac.val>ad.val},"char>?"),char_greaterthan__equal__question_:aa(function(ac,ad){return ac.val>=ad.val},"char>=?"),char_dash_ci_equal__question_:aa(function(ac,ad){return ac.val.toUpperCase()==ad.val.toUpperCase()},"char-ci=?"),char_dash_ci_lessthan__question_:aa(function(ac,ad){return ac.val.toUpperCase()<ad.val.toUpperCase()},"char-ci<?"),char_dash_ci_lessthan__equal__question_:aa(function(ac,ad){return ac.val.toUpperCase()<=ad.val.toUpperCase()},"char-ci<=?"),char_dash_ci_greaterthan__question_:aa(function(ac,ad){return ac.val.toUpperCase()>ad.val.toUpperCase()},"char-ci>?"),char_dash_ci_greaterthan__equal__question_:aa(function(ac,ad){return ac.val.toUpperCase()>=ad.val.toUpperCase()},"char-ci>=?"),char_dash_numeric_question_:function(ac){x(ac,q,"char-numeric?","char",1);var ad=ac.val;return(ad>="0"&&ad<="9")},char_dash_alphabetic_question_:function(ac){x(ac,q,"char-alphabetic?","char",1);var ad=ac.val;return u(ad)},char_dash_whitespace_question_:function(ac){x(ac,q,"char-whitespace?","char",1);var ad=ac.val;return L(ad)},char_dash_upper_dash_case_question_:function(ac){x(ac,q,"char-upper-case?","char",1);return u(ac.val)&&ac.val.toUpperCase()==ac.val},char_dash_lower_dash_case_question_:function(ac){x(ac,q,"char-lower-case?","char",1);return u(ac.val)&&ac.val.toLowerCase()==ac.val},char_dash_upcase:function(ac){x(ac,q,"char-upcase","char",1);return plt.types.Char.makeInstance(ac.val.toUpperCase())},char_dash_downcase:function(ac){x(ac,q,"char-downcase","char",1);return plt.types.Char.makeInstance(ac.val.toLowerCase())},list_dash__greaterthan_string:function(ac){T(ac,q,"list->string","char",1);var ad="";while(!ac.isEmpty()){ad+=ac.first().val;ac=ac.rest()}return plt.types.String.makeInstance(ad)},implode:function(ac){T(ac,j,"implode","string",1);var ad=[];while(!ac.isEmpty()){ad.push(ac.first().toString());ac=ac.rest()}return plt.types.String.makeInstance(ad.join(""))},string_dash_numeric_question_:function(ad){x(ad,j,"string-numeric?","string",1);for(var ac=0;ac<ad.length;ac++){if(ad[ac]<"0"||ad[ac]>"9"){return plt.types.Logic.FALSE}}return plt.types.Logic.TRUE},string_dash_alphabetic_question_:function(ac){x(ac,j,"string-alphabetic?","string",1);return u(ac)?plt.types.Logic.TRUE:plt.types.Logic.FALSE},string_dash_whitespace_question_:function(ac){x(ac,j,"string-whitespace?","string",1);return L(ac)?plt.types.Logic.TRUE:plt.types.Logic.FALSE},string_dash_upper_dash_case_question_:function(ac){x(ac,j,"string-upper-case?","string",1);return u(ac)&&ac.toUpperCase()==ac},string_dash_lower_dash_case_question_:function(ac){x(ac,j,"string-lower-case?","string",1);return u(ac)&&ac.toLowerCase()==ac},string:function(ae){h(ae,function(af,ag){x(this,q,"string","char",ag+1)});var ac=[];for(var ad=0;ad<ae.length;ad++){ac.push(ae[ad].val)}return String.makeInstance(ac.join(""))},make_dash_string:function(ag,ae){x(ag,m,"make-string","natural",1);x(ae,q,"make-string","char",2);var ac="";var af=ae.val;var ad=plt.types.Rational.ZERO;for(;plt.Kernel._lessthan_(ad,ag,[]);ad=plt.Kernel.add1(ad)){ac+=af}return plt.types.String.makeInstance(ac)},string_dash__greaterthan_list:function(af){x(af,j,"string->list","string",1);var ae=af;var ac=plt.types.Empty.EMPTY;for(var ad=ae.length-1;ad>=0;ad--){ac=plt.types.Cons.makeInstance(plt.types.Char.makeInstance(ae.charAt(ad)),ac)}return ac},explode:function(af){x(af,j,"explode","string",1);var ae=af;var ac=plt.types.Empty.EMPTY;for(var ad=ae.length-1;ad>=0;ad--){ac=plt.types.Cons.makeInstance(plt.types.String.makeInstance(ae.charAt(ad)),ac)}return ac}};plt.Kernel._dumpKernelSymbols=function(){var ac=plt.types.Empty.EMPTY;for(var ad in plt.Kernel){ac=plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance(ad),ac)}return ac};plt.Kernel.openInputStx=function(ac){throw new D("open-input-stx currently unsupported")};var ab=function(ac){this.hash=new plt._Hashtable(function(ad){return plt.Kernel.toWrittenString(ad)},function(ad,ae){return ad===ae})};ab.prototype.toWrittenString=function(ac){return"<hash>"};ab.prototype.toDisplayedString=function(ac){return"<hash>"};ab.prototype.isEqual=function(ac){return this===ac};var Q=function(ac){this.hash=new plt._Hashtable(function(ad){return plt.Kernel.toWrittenString(ad)},function(ad,ae){return plt.Kernel.equal_question_(ad,ae)})};Q.prototype.toWrittenString=function(ac){return"<hash>"};Q.prototype.toDisplayedString=function(ac){return"<hash>"};Q.prototype.isEqual=function(ac){return this===ac};plt.Kernel.makeHashEq=function(){var ac=new ab();return ac};plt.Kernel.makeHash=function(){return new Q()};plt.Kernel.hashSetBang=function(ad,ac,ae){x(ad,v,"hash-set!","hash",1);ad.hash.put(ac,ae);return undefined};plt.Kernel.hashRef=function(ad,ac,ae){x(ad,v,"hash-ref","hash",1);if(ad.hash.containsKey(ac)){return ad.hash.get(ac)}else{if(s(ae)){return ae([])}return ae}};plt.Kernel.hashRemoveBang=function(ad,ac){x(ad,v,"hash-remove!","hash",1);ad.hash.remove(ac);return undefined};plt.Kernel.hashMap=function(ad,ag){x(ad,v,"hash-map","hash",1);var ac=plt.types.Empty.EMPTY;var af=ad.hash.keys();for(var ae=0;ae<af.length;ae++){var ah=ad.hash.get(af[ae]);ac=plt.Kernel.cons(ag([af[ae],ah]),ac)}return ac};plt.Kernel.hashForEach=function(ad,ag){x(ad,v,"hash-map","hash",1);var ac=plt.types.Empty.EMPTY;var af=ad.hash.keys();for(var ae=0;ae<af.length;ae++){var ah=ad.hash.get(af[ae]);ag([af[ae],ah])}return undefined};var v=function(ac){return((ac!=null)&&(ac!=undefined)&&((ac instanceof ab)||(ac instanceof Q)))};plt.Kernel.isHash=v;plt.Kernel.apply=function(ah,ag,ac){var af;var ae=[];x(ah,s,"apply","function",1);if(ac.length==0){af=ag;I(af,"apply",2);while(!af.isEmpty()){var ad=af.first();ae.push(ad);af=af.rest()}}else{af=ac.pop();I(af,"apply",3);while(!af.isEmpty()){var ad=af.first();ae.push(ad);af=af.rest()}while(ac.length>0){ae.unshift(ac.pop())}ae.unshift(ag)}if(X(ah,ae.length)){return ah(ae)}else{throw new D(plt.Kernel.format("~a: expects ~a, given ~a: ~s",[ah,f(ah),ae.length,plt.Kernel.list(ae)]))}};plt.Kernel.map=function(af,ag){x(af,s,"map","function",1);h(ag,function(ah,ai){I(ah,"map",ai+2)});var ae=plt.types.Empty.EMPTY;while(!ag[0].isEmpty()){var ac=[];for(var ad=0;ad<ag.length;ad++){ac.push(ag[ad].first());ag[ad]=ag[ad].rest()}ae=plt.Kernel.cons(af(ac),ae)}return plt.Kernel.reverse(ae)};plt.Kernel.for_dash_each=function(ae,af){x(ae,s,"for-each","function",1);h(af,function(ag,ah){I(ag,"for-each",ah+2)});while(!af[0].isEmpty()){var ac=[];for(var ad=0;ad<af.length;ad++){ac.push(af[ad].first());af[ad]=af[ad].rest()}ae(ac)}return undefined};plt.Kernel.andmap=function(ae,af){x(ae,s,"andmap","function",1);h(af,function(ag,ah){I(ag,"andmap",ah+2)});while(!af[0].isEmpty()){var ac=[];for(var ad=0;ad<af.length;ad++){ac.push(af[ad].first());af[ad]=af[ad].rest()}if(!ae(ac)){return plt.types.Logic.FALSE}}return plt.types.Logic.TRUE};plt.Kernel.ormap=function(ae,af){x(ae,s,"ormap","function",1);h(af,function(ag,ah){I(ag,"ormap",ah+2)});while(!af[0].isEmpty()){var ac=[];for(var ad=0;ad<af.length;ad++){ac.push(af[ad].first());af[ad]=af[ad].rest()}if(ae(ac)){return plt.types.Logic.TRUE}}return plt.types.Logic.FALSE};plt.Kernel.filter=function(ad,ae){x(ad,s,"filter","function",1);x(ae,b,"filter","list",2);var ac=plt.types.Empty.EMPTY;while(!ae.isEmpty()){if(ad([ae.first()])){ac=plt.types.Cons.makeInstance(ae.first(),ac)}ae=ae.rest()}return plt.Kernel.reverse(ac)};plt.Kernel.foldl=function(ag,af,ah){x(ag,s,"foldl","function",1);h(ah,function(ai,aj){x(ai,b,"foldl","list",aj+3)});var ac=af;while(!ah[0].isEmpty()){var ad=[];for(var ae=0;ae<ah.length;ae++){ad.push(ah[ae].first());ah[ae]=ah[ae].rest()}ad.push(ac);ac=ag(ad)}return ac};plt.Kernel.foldr=function(ag,af,ah){x(ag,s,"foldr","function",1);h(ah,function(ai,aj){x(ai,b,"foldr","list",aj+3)});var ac=af;for(var ae=0;ae<ah.length;ae++){ah[ae]=plt.Kernel.reverse(ah[ae])}while(!ah[0].isEmpty()){var ad=[];for(var ae=0;ae<ah.length;ae++){ad.push(ah[ae].first());ah[ae]=ah[ae].rest()}ad.push(ac);ac=ag(ad)}return ac};plt.Kernel.argmin=function(ae,ag){x(ae,s,"argmin","function",1);x(ag,U,"argmin","nonempty list",2);var ad=ag.first();var ac=ae([ag.first()]).toFloat();ag=ag.rest();while(!ag.isEmpty()){var af=ae([ag.first()]).toFloat();if(af<ac){ad=ag.first();ac=af}ag=ag.rest()}return ad};plt.Kernel.argmax=function(ae,ag){x(ae,s,"argmax","function",1);x(ag,U,"argmax","nonempty list",2);var ad=ag.first();var ac=ae([ag.first()]).toFloat();ag=ag.rest();while(!ag.isEmpty()){var af=ae([ag.first()]).toFloat();if(af>ac){ad=ag.first();ac=af}ag=ag.rest()}return ad};plt.Kernel.sort=function(ad,ae){x(ad,b,"sort","list",1);x(ae,s,"sort","function",2);var ac=[];while(!ad.isEmpty()){ac.push(ad.first());ad=ad.rest()}ac.sort(function(af,ag){return ae([af,ag])?-1:1});return plt.Kernel.list(ac)};plt.Kernel.quicksort=plt.Kernel.sort;plt.Kernel.build_dash_list=function(af,ae){x(af,m,"build-list","natural",1);x(ae,s,"build-list","function",2);var ac=plt.types.Empty.EMPTY;for(var ad=0;ad<af.toInteger();ad++){ac=plt.Kernel.cons(ae([plt.types.Rational.makeInstance(ad,1)]),ac)}return plt.Kernel.reverse(ac)};plt.Kernel.build_dash_string=function(ag,af){x(ag,m,"build-string","natural",1);x(af,s,"build-string","function",2);var ae=[];for(var ac=0;ac<ag.toInteger();ac++){var ad=af([plt.types.Rational.makeInstance(ac,1)]);ae.push(ad.val)}return plt.types.String.makeInstance(ae.join(""))};plt.Kernel.format=function(ae,af){x(ae,j,"format","string",1);var ah=new RegExp("~[sSaAn%~]","g");var ad=af;function ag(ai){if(ai=="~~"){return"~"}else{if(ai=="~n"||ai=="~%"){return"\n"}else{if(ai=="~s"||ai=="~S"){if(ad.length==0){throw new D("format: fewer arguments passed than expected")}return plt.Kernel.toWrittenString(ad.shift())}else{if(ai=="~a"||ai=="~A"){if(ad.length==0){throw new D("format: fewer arguments passed than expected")}return plt.Kernel.toDisplayedString(ad.shift())}else{throw new D("Unimplemented format "+ai)}}}}}var ac=plt.types.String.makeInstance(ae.replace(ah,ag));if(ad.length>0){throw new D("format: More arguments passed than expected")}return ac};plt.Kernel.string=function(ac){var ae=[];for(var ad=0;ad<ac.length;ad++){ae.push(ac[ad].getValue())}return plt.types.String.makeInstance(ae.join(""))};plt.Kernel.procedure_question_=function(ac){return s(ac)};plt.Kernel.procedure_dash_arity=function(ac){x(ac,s,"procedure-arity","function",1);return ac.procedureArity};var X=function(ac,ad){if(U(ac.procedureArity)){return ad>=ac.procedureArity.rest().first().toInteger()}else{return ad==ac.procedureArity.toInteger()}};var f=function(ac){if(U(ac.procedureArity)){return("at least "+(ac.procedureArity.rest().first().toInteger()==1)?"one argument":ac.procedureArity.rest().first().toInteger()+" arguments")}else{return((ac.procedureArity.toInteger()==1)?"one argument":ac.procedureArity.toInteger()+" arguments")}};plt.Kernel.xml_dash__greaterthan_s_dash_exp=function(ae){x(ae,j,"xml->s-exp","string",1);if(ae.length==0){return plt.types.String.makeInstance("")}var af;try{af=new ActiveXObject("Microsoft.XMLDOM");af.async="false";af.loadXML(ae)}catch(ag){var ai=new DOMParser();af=ai.parseFromString(ae,"text/xml")}var ad=function(ak){var aj=plt.types.Empty.EMPTY;for(var al=0;al<ak.length;al++){var am=plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance(ak.item(al).nodeName),plt.types.Cons.makeInstance(ak.item(al).nodeValue,plt.types.Empty.EMPTY));aj=plt.types.Cons.makeInstance(am,aj)}return plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance("@"),plt.Kernel.reverse(aj))};var ah=function(al){if(al.nodeType==Node.ELEMENT_NODE){var aj=plt.types.Empty.EMPTY;var am=al.firstChild;while(am!=null){var ak=ah(am);if(j(ak)&&!aj.isEmpty()&&j(aj.first())){aj=plt.types.Cons.makeInstance(aj.first()+ak,aj.rest())}else{aj=plt.types.Cons.makeInstance(ak,aj)}am=am.nextSibling}aj=plt.Kernel.reverse(aj);aj=plt.types.Cons.makeInstance(ad(al.attributes),aj);aj=plt.types.Cons.makeInstance(plt.types.Symbol.makeInstance(al.nodeName),aj);return aj}else{if(al.nodeType==Node.TEXT_NODE){return al.textContent}else{if(al.nodeType==Node.CDATA_SECTION_NODE){return al.data}else{return plt.types.Empty.EMPTY}}}};var ac=ah(af.firstChild);return ac};plt.Kernel.split_dash_whitespace=function(ac){ac=ac.replace(/^\s+/,"");ac=ac.replace(/\s+$/,"");return plt.Kernel.list(ac.split(/\s+/))};var V=function(ac){plt.Kernel.Struct.call(this,"box",[ac])};V.prototype=A(plt.Kernel.Struct.prototype);plt.Kernel.box=function(ac){return new V(ac)};plt.Kernel.unbox=function(ac){x(ac,plt.Kernel.box_question_,"unbox","box",1);return ac._fields[0]};plt.Kernel.box_question_=function(ac){return ac!=null&&ac!=undefined&&ac instanceof V};plt.Kernel.set_dash_box_bang_=function(ad,ac){x(ad,plt.Kernel.box_question_,"set-box!","box",1);ad._fields[0]=ac;return undefined};var w=function(ac,ad){plt.Kernel.Struct.call(this,"make-posn",[ac,ad])};w.prototype=A(plt.Kernel.Struct.prototype);var C=function(ad,ac){return new w(ad,ac)};var R=function(ac){x(ac,M,"posn-x","posn",1);return ac._fields[0]};var P=function(ac){x(ac,M,"posn-y","posn",1);return ac._fields[1]};var M=function(ac){return ac!=null&&ac!=undefined&&ac instanceof w};plt.Kernel.make_dash_posn=C;plt.Kernel.posn_question_=M;plt.Kernel.posn_dash_x=R;plt.Kernel.posn_dash_y=P;plt.Kernel.error=function(ac,ad){x(ac,k,"error","symbol",1);x(ad,j,"error","string",2);throw new D(plt.Kernel.format("~a: ~a",[ac,ad]).toString())};plt.Kernel.syntax_dash_error=function(ad,ac){x(ad,j,"syntax-error","string",1);x(ac,O,"syntax-error","stx",2);throw new N(ad,ac)};plt.Kernel.toWrittenString=function(ac,ad){if(!ad){ad=new plt._Hashtable()}if(ad.containsKey(ac)){return"..."}if(ac==undefined||ac==null){return"<undefined>"}if(typeof(ac)=="string"){return ac.toWrittenString()}if(typeof(ac)!="object"&&typeof(ac)!="function"){return ac.toString()}if("toWrittenString" in ac){return ac.toWrittenString(ad)}if("toDisplayedString" in ac){return ac.toDisplayedString(ad)}else{return ac.toString()}};plt.Kernel.toDisplayedString=function(ac,ad){if(!ad){ad=new plt._Hashtable()}if(ad.containsKey(ac)){return"..."}if(ac==undefined||ac==null){return"<undefined>"}if(typeof(ac)=="string"){return ac.toDisplayedString()}if(typeof(ac)!="object"&&typeof(ac)!="function"){return ac.toString()}if("toWrittenString" in ac){return ac.toWrittenString(ad)}if("toDisplayedString" in ac){return ac.toDisplayedString(ad)}else{return ac.toString()}};plt.Kernel.toDomNode=function(ac,ad){if(!ad){ad=new plt._Hashtable()}if(ad.containsKey(ac)){return document.createTextNode("...")}if(ac==undefined||ac==null){var ae=document.createTextNode("<undefined>");return ae}if(typeof(ac)=="string"){var ae=document.createTextNode(ac.toWrittenString());return ae}if(typeof(ac)!="object"&&typeof(ac)!="function"){var ae=document.createTextNode(ac.toString());return ae}if(ac.nodeType){return ac}if("toDomNode" in ac){return ac.toDomNode(ad)}if("toWrittenString" in ac){var ae=document.createTextNode(plt.Kernel.toWrittenString(ac,ad));return ae}if("toDisplayedString" in ac){var ae=document.createTextNode(plt.Kernel.toDisplayedString(ac,ad));return ae}else{var ae=document.createTextNode(ac.toString());return ae}};plt.Kernel.Struct.prototype.toWrittenString=function(ad){ad.put(this,true);var ac=[];ac.push("(");ac.push(this._constructorName);for(var ae=0;ae<this._fields.length;ae++){ac.push(" ");ac.push(plt.Kernel.toWrittenString(this._fields[ae],ad))}ac.push(")");return plt.types.String.makeInstance(ac.join(""))};plt.Kernel.Struct.prototype.toDisplayedString=plt.Kernel.Struct.prototype.toWrittenString;var d=function(ac,ad){ac.appendChild(ad)};plt.Kernel.Struct.prototype.toDomNode=function(ac){ac.put(this,true);var ae=document.createElement("div");ae.appendChild(document.createTextNode("("));ae.appendChild(document.createTextNode(this._constructorName));for(var ad=0;ad<this._fields.length;ad++){ae.appendChild(document.createTextNode(" "));d(ae,plt.Kernel.toDomNode(this._fields[ad],ac))}ae.appendChild(document.createTextNode(")"));return ae};plt.Kernel.Struct.prototype.isEqual=function(ac){if(typeof(ac)!="object"){return false}if(!ac._constructorName){return false}if(ac._constructorName!=this._constructorName){return false}if(!"_fields" in ac){return false}if(this._fields.length!=ac._fields.length){return false}for(var ad=0;ad<this._fields.length;ad++){if(!plt.Kernel.equal_question_(this._fields[ad],ac._fields[ad])){return false}}return true};plt.Kernel.reportError=function(ad){var ac;if(typeof(console)!="undefined"&&typeof(console.log)!="undefined"){ac=(function(ae){console.log(ae)})}else{ac=(function(ae){alert(ae)})}if(typeof ad=="string"){ac(ad)}else{if(ad.msg){ac(ad.msg)}else{ac(ad.toString())}}if(plt.Kernel.lastLoc){ac("Error was raised around "+plt.Kernel.lastLoc)}};plt.Kernel._void_=function(ac){return undefined};plt.Kernel.build_dash_vector=function(af,ad){x(af,m,"build-vector","natural",1);x(ad,s,"build-vector","function",2);var ae=[];for(var ac=0;ac<af.toInteger();ac++){ae[ac]=ad([plt.types.Rational.makeInstance(ac,1)])}return plt.types.Vector.makeInstance(af.toInteger(),ae)};plt.Kernel.make_dash_vector=function(ac){x(ac,m,"make-vector","natural",1);return plt.types.Vector.makeInstance(ac.toInteger())};plt.Kernel.vector=function(ac){return plt.types.Vector.makeInstance(ac.length,ac)};plt.Kernel.vector_dash_length=function(ac){x(ac,c,"vector-length","vector",1);return plt.types.Rational.makeInstance(ac.length())};plt.Kernel.vector_dash_ref=function(ad,ac){x(ad,c,"vector-ref","vector",1);x(ac,function(ae){return m(ae)&&ae.toInteger()<ad.length()},"vector-ref","natural < vector length",2);return ad.ref(ac.toInteger())};plt.Kernel.vector_dash_set_bang_=function(ae,ad,ac){x(ae,c,"vector-set!","vector",1);x(ad,function(af){return m(af)&&af.toInteger()<ae.length()},"vector-set!","natural < vector length",2);return ae.set(ad.toInteger(),ac)};plt.Kernel.vector_question_=function(ac){return c(ac)?plt.types.Logic.TRUE:plt.types.Logic.FALSE};plt.Kernel.check_dash_expect=function(ae,ac){var af=ae([]);var ad=ac([]);if(!plt.Kernel.equal_question_(af,ad)){throw new S(plt.Kernel.format("~s doesn't match the expected value ~s",[af,ad]))}};plt.Kernel.check_dash_within=function(ag,ad,af){var ah=ag([]);var ae=ad([]);var ac=af([]);if(!plt.Kernel._equal__tilde_(ah,ae,ac)){throw new S(plt.Kernel.format("~s doesn't match the expected value ~s within ~s",[ah,ae,ac]))}};plt.Kernel.check_dash_error=function(ac,ae){var ag=ae([]);var af;try{af=ac([])}catch(ad){if(!plt.Kernel.equal_question_(ad.msg,ag)){throw new S(plt.Kernel.format("check-error encountered the error ~s instead of the expected error ~s.",[ad.msg,ag]))}else{return}}throw new S(plt.Kernel.format("check-error expected the error ~s, but instead received the value ~s.",[ag,af]))};plt.Kernel.lastLoc=undefined;plt.Kernel.setLastLoc=function(ac){plt.Kernel.lastLoc=ac;return true};plt.Kernel.printf=function(ac,ad){var ae=plt.Kernel.format(ac,ad);plt.Kernel.printHook(ae);return undefined};plt.Kernel.printHook=function(ac){};plt.Kernel.isSymbol=k;plt.Kernel.isChar=q;plt.Kernel.isString=j;plt.Kernel.isBoolean=G;plt.Kernel.isPair=U;plt.Kernel.isEmpty=t;plt.Kernel.isReal=W;plt.Kernel.isRational=E;plt.Kernel.isComplex=F;plt.Kernel.isInteger=o;plt.Kernel.isNatural=m;plt.Kernel.isNumber=Y;plt.Kernel.isAlphabeticString=u;plt.Kernel.isWhitespaceString=L;plt.Kernel.isList=b;plt.Kernel.isVector=c;plt.Kernel.isFunction=s;plt.Kernel.arrayEach=h;plt.Kernel.check=x;plt.Kernel.checkList=I;plt.Kernel.checkListof=T;plt.Kernel.MobyError=y;plt.Kernel.MobyParserError=Z;plt.Kernel.MobySyntaxError=N;plt.Kernel.MobyTypeError=H;plt.Kernel.MobyRuntimeError=D;plt.Kernel.attachEvent=g;plt.Kernel.detachEvent=r;plt.Kernel.ordinalize=i})();if(typeof(plt)=="undefined"){plt={}}plt.reader={};(function(){var e=function(h){return h.replace(/\\./g,function(j,k,i){switch(j){case"\\b":return"\b";case"\\f":return"\f";case"\\n":return"\n";case"\\r":return"\r";case"\\t":return"\t";case"\\v":return"\v";default:return j.substring(1)}})};var b=function(j){var h;var k=0;for(h=0;h<j.length;h++){if(j[h]=="\n"){k++}}return k};var d=("(?:(?:\\d+\\/\\d+)|"+("(?:(?:\\d+\\.\\d+|\\d+\\.|\\.\\d+)(?:[eE][+\\-]?\\d+)?)|")+("(?:\\d+(?:[eE][+\\-]?\\d+)?))"));var c=[["whitespace",/^(\s+)/],["#;",/^([#][;])/],["comment",new RegExp("^([#][|](?:(?:\\|[^\\#])|[^\\|])*[|][#])")],["comment",/(^;[^\n]*)/],["(",/^(\(|\[|\{)/],[")",/^(\)|\]|\})/],["'",/^(\')/],["`",/^(`)/],[",@",/^(,@)/],[",",/^(,)/],["char",/^\#\\(newline|backspace)/],["char",/^\#\\(.)/],["complex",new RegExp("^((?:(?:\\#[ei])?[+\\-]?"+d+")?(?:[+\\-]"+d+")i)")],["number",/^((?:\#[ei])?[+-]inf.0)/],["number",/^((?:\#[ei])?[+-]nan.0)/],["number",new RegExp("^((?:\\#[ei])?[+\\-]?"+d+")")],["string",new RegExp('^"((?:([^\\\\"]|(\\\\.)))*)"')],["symbol",/^([a-zA-Z\:\+\=\~\_\?\!\@\#\$\%\^\&\*\-\/\.\>\<][\w\:\+\=\~\_\?\!\@\#\$\%\^\&\*\-\/\.\>\<]*)/]];var g=function(q,h){var j=0;var r=1;var o=[];if(!h){h=""}while(true){var m=false;for(var k=0;k<c.length;k++){var l=c[k][0];var n=c[k][1];var p=q.match(n);if(p!=null){if(l=="string"){p[1]=e(p[1])}if(l!="whitespace"&&l!="comment"){o.push([l,p[1],new Loc(j,r,p[0].length,h)])}j=j+p[0].length;r=r+b(p[0]);q=q.substring(p[0].length);m=true;break}}if(!m){break}}return[o,q]};var f=function(v,z){var y=make_dash_stx_colon_list;var B=make_dash_stx_colon_atom;var i=g(v,z);var w=i[0];var A=undefined;if(i[1].length>0){throw new plt.Kernel.MobyParserError("Error while tokenizing: the rest of the stream is: "+i[1],new Loc(v.length-i[1].length,b(v.substring(0,v.length-i[1].length)),i[1].length,z))}var r=plt.types.Symbol.makeInstance("quote");var h=plt.types.Symbol.makeInstance("quasiquote");var x=plt.types.Symbol.makeInstance("unquote");var j=plt.types.Symbol.makeInstance("unquote-splicing");var o=plt.types.Empty.EMPTY;var l=function(s){return(w.length>0&&w[0][0]==s)};var p=function(C){if(w.length==0){if(A){throw new plt.Kernel.MobyParserError("token stream exhausted while trying to eat "+C,A[2])}else{throw new plt.Kernel.MobyParserError("token stream exhausted while trying to eat "+C,new Loc(0,0,v.length,z))}}var s=w.shift();A=s;if(s[0]==C){return s}else{throw new plt.Kernel.MobyParserError("Unexpected token "+s,s[2])}};var n;var t;var k;k=function(C,E){var s=p(C);var D=n();return y(plt.Kernel.cons(B(E,s[2]),plt.Kernel.cons(D,o)),new Loc(s[2].offset,s[2].line,(D.loc.offset-s[2].offset+D.loc.span),""))};var m=function(s){switch(s){case"(":return")";case"[":return"]";case"{":return"}";default:throw new Error()}};var u=function(E,D){var C=E.match(/([+\-]?\d+)\/(\d+)/);if(E=="+inf.0"){return plt.types.FloatPoint.makeInstance(Number.POSITIVE_INFINITY)}else{if(E=="-inf.0"){return plt.types.FloatPoint.makeInstance(Number.NEGATIVE_INFINITY)}else{if(E=="+nan.0"||E=="-nan.0"){return plt.types.FloatPoint.makeInstance(Number.NaN)}else{if(E.match(/[eE]/)){return plt.types.FloatPoint.makeInstance(parseFloat(E))}else{if(E.match(/\./)){if(D){var s=E.match("^(.*)[.](.*)$");return plt.types.NumberTower.add(plt.types.Rational.makeInstance(parseInt(s[1]||"0")),plt.types.Rational.makeInstance(parseInt(s[2]),Math.pow(10,s[2].length)))}else{return plt.types.FloatPoint.makeInstance(parseFloat(E))}}else{if(C){if(D){return plt.types.Rational.makeInstance(parseInt(C[1]),parseInt(C[2]))}else{return plt.types.FloatPoint.makeInstance(parseInt(C[1])/parseInt(C[2]))}}else{if(D){return plt.types.Rational.makeInstance(parseInt(E),1)}else{return plt.types.FloatPoint.makeInstance(parseInt(E))}}}}}}}};n=function(){if(w.length==0){if(A){throw new plt.Kernel.MobyParserError("Parse broke with empty token stream",A[2])}else{throw new plt.Kernel.MobyParserError("Parse broke with empty token stream",new Loc(0,0,v.length,z))}}switch(w[0][0]){case"(":var M=p("(");var I=M[1];var G=m(M[1]);var O=t();if(w.length==0){throw new plt.Kernel.MobyParserError("Expected a "+G+" to close "+I,M[2])}else{if(w[0][1]!=G){throw new plt.Kernel.MobyParserError("Expected a "+G+" to close "+I,w[0][2])}}var K=p(")");return make_dash_stx_colon_list(O,new Loc(M[2].offset,M[2].line,K[2].offset-M[2].offset+1,""));case"#;":var F=p("#;");var E=n();return n();case"'":return k("'",r);case"`":return k("`",h);case",":return k(",",x);case",@":return k(",@",j);case"number":var N=p("number");var L=N[1].match(/^(\#[ie])(.+)$/);if(L){if(L[1]=="#i"){return B(u(L[2],false),N[2])}else{return B(u(L[2],true),N[2])}}else{return B(u(N[1],true),N[2])}case"complex":var N=p("complex");var D=N[1].match(/^((?:\#[ei])?)([+\-]?(?:\d+\/\d+|\d+\.\d+|\d+\.|\.\d+|\d+)?)([+\-](?:\d+\/\d+|\d+\.\d+|\d+\.|\.\d+|\d+))i/);var C=(D[1]=="#i"?false:true);var J=(D[2]!=""?u(D[2],C):plt.types.Rational.ZERO);var H=u(D[3],C);var s=B(plt.types.Complex.makeInstance(J,H));return s;case"string":var N=p("string");return B(plt.types.String.makeInstance(N[1]),N[2]);case"char":var N=p("char");if(N[1]=="newline"){return B(plt.types.Char.makeInstance("\n"),N[2])}else{if(N[1]=="backspace"){return B(plt.types.Char.makeInstance(String.fromCharCode(8)),N[2])}else{return B(plt.types.Char.makeInstance(N[1]),N[2])}}case"symbol":var N=p("symbol");if(N[1]=="."){throw new plt.Kernel.MobyParserError("Dotted pairs are not currently accepted by Moby",N[2])}return B(plt.types.Symbol.makeInstance(N[1]),N[2]);default:throw new plt.Kernel.MobyParserError("Parse broke with token stream "+w,w[0][2])}};t=function(){var s=plt.types.Empty.EMPTY;while(true){if(w.length==0||l(")")){break}else{if(l("#;")){p("#;");var C=n()}else{var D=n();s=plt.types.Cons.makeInstance(D,s)}}}return plt.Kernel.reverse(s)};var q=t();if(w.length>0){throw new plt.Kernel.MobyParserError("More elements in the program's token stream than expected: the next unconsumed token is: "+w[0][1],w[0][2])}return q};plt.reader.tokenize=g;plt.reader.readSchemeExpressions=f}());var stx_colon_atom=function(b,c){plt.Kernel.Struct.call(this,"make-stx:atom",[b,c]);this.datum=b;this.loc=c};stx_colon_atom.prototype=new plt.Kernel.Struct();var make_dash_stx_colon_atom=function(d,b){var c=new stx_colon_atom(d,b);return c};var stx_colon_atom_dash_datum=function(b){if(stx_colon_atom_question_(b)){return b.datum}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx_colon_atom_dash_datum: not a stx:atom: ~s",[b]))}};var stx_colon_atom_dash_loc=function(b){if(stx_colon_atom_question_(b)){return b.loc}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx_colon_atom_dash_loc: not a stx:atom: ~s",[b]))}};var set_dash_stx_colon_atom_dash_datum_bang_=function(c,b){if(stx_colon_atom_question_(c)){c.datum=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_atom_dash_datum_bang_: not a stx:atom: ~s",[c]))}};var set_dash_stx_colon_atom_dash_loc_bang_=function(c,b){if(stx_colon_atom_question_(c)){c.loc=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_atom_dash_loc_bang_: not a stx:atom: ~s",[c]))}};var stx_colon_atom_question_=function(b){return(b!=null&&b!=undefined&&b instanceof stx_colon_atom)};var stx_colon_list=function(b,c){plt.Kernel.Struct.call(this,"make-stx:list",[b,c]);this.elts=b;this.loc=c};stx_colon_list.prototype=new plt.Kernel.Struct();var make_dash_stx_colon_list=function(c,b){return new stx_colon_list(c,b)};var stx_colon_list_dash_elts=function(b){if(stx_colon_list_question_(b)){return b.elts}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx_colon_list_dash_elts: not a stx:list: ~s",[b]))}};var stx_colon_list_dash_loc=function(b){if(stx_colon_list_question_(b)){return b.loc}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("stx_colon_list_dash_loc: not a stx:list: ~s",[b]))}};var set_dash_stx_colon_list_dash_elts_bang_=function(c,b){if(stx_colon_list_question_(c)){c.elts=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_list_dash_elts_bang_: not a stx:list: ~s",[c]))}};var set_dash_stx_colon_list_dash_loc_bang_=function(c,b){if(stx_colon_list_question_(c)){c.loc=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_stx_colon_list_dash_loc_bang_: not a stx:list: ~s",[c]))}};var stx_colon_list_question_=function(b){return b!=null&&b!=undefined&&b instanceof stx_colon_list};var Loc=function(d,b,c,e){plt.Kernel.Struct.call(this,"make-Loc",[d,b,c,e]);this.offset=d;this.line=b;this.span=c;this.id=e};Loc.prototype=new plt.Kernel.Struct();var make_dash_Loc=function(e,d,c,b){return new Loc(e,d,c,b)};var Loc_dash_offset=function(b){if(Loc_question_(b)){return b.offset}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc_dash_offset: not a Loc: ~s",[b]))}};var Loc_dash_line=function(b){if(Loc_question_(b)){return b.line}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc_dash_line: not a Loc: ~s",[b]))}};var Loc_dash_span=function(b){if(Loc_question_(b)){return b.span}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc_dash_span: not a Loc: ~s",[b]))}};var Loc_dash_id=function(b){if(Loc_question_(b)){return b.id}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("Loc_dash_id: not a Loc: ~s",[b]))}};var set_dash_Loc_dash_offset_bang_=function(c,b){if(Loc_question_(c)){c.offset=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_offset_bang_: not a Loc: ~s",[c]))}};var set_dash_Loc_dash_line_bang_=function(c,b){if(Loc_question_(c)){c.line=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_line_bang_: not a Loc: ~s",[c]))}};var set_dash_Loc_dash_span_bang_=function(c,b){if(Loc_question_(c)){c.span=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_span_bang_: not a Loc: ~s",[c]))}};var set_dash_Loc_dash_id_bang_=function(c,b){if(Loc_question_(c)){c.id=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_Loc_dash_id_bang_: not a Loc: ~s",[c]))}};var Loc_question_=function(b){return b!=null&&b!=undefined&&b instanceof Loc};var Loc_dash__greaterthan_string=function(b){return(plt.Kernel.setLastLoc('offset=284 line=14 span=154 id="stx.ss"')&&plt.Kernel.format((plt.types.String.makeInstance("offset=~a line=~a span=~a id=~s")),[(plt.Kernel.setLastLoc('offset=337 line=15 span=18 id="stx.ss"')&&Loc_dash_offset(b)),(plt.Kernel.setLastLoc('offset=367 line=16 span=16 id="stx.ss"')&&Loc_dash_line(b)),(plt.Kernel.setLastLoc('offset=395 line=17 span=16 id="stx.ss"')&&Loc_dash_span(b)),(plt.Kernel.setLastLoc('offset=423 line=18 span=14 id="stx.ss"')&&Loc_dash_id(b))]))};var stx_question_=function(b){return((plt.Kernel.setLastLoc('offset=489 line=23 span=13 id="stx.ss"')&&stx_colon_atom_question_(b))||(plt.Kernel.setLastLoc('offset=509 line=24 span=13 id="stx.ss"')&&stx_colon_list_question_(b)))};var stx_dash_e=function(b){return((plt.Kernel.setLastLoc('offset=635 line=31 span=17 id="stx.ss"')&&stx_colon_atom_question_(b))?(plt.Kernel.setLastLoc('offset=658 line=32 span=22 id="stx.ss"')&&stx_colon_atom_dash_datum(b)):((plt.Kernel.setLastLoc('offset=687 line=33 span=17 id="stx.ss"')&&stx_colon_list_question_(b))?(plt.Kernel.setLastLoc('offset=710 line=34 span=21 id="stx.ss"')&&stx_colon_list_dash_elts(b)):(plt.Kernel.setLastLoc('offset=624 line=30 span=109 id="stx.ss"')&&plt.Kernel.error((plt.types.Symbol.makeInstance("cond")),(plt.types.String.makeInstance('cond: fell out of cond around "offset=624 line=30 span=109 id=\\"stx.ss\\""'))))))};var stx_dash_loc=function(b){return((plt.Kernel.setLastLoc('offset=797 line=40 span=17 id="stx.ss"')&&stx_colon_atom_question_(b))?(plt.Kernel.setLastLoc('offset=820 line=41 span=20 id="stx.ss"')&&stx_colon_atom_dash_loc(b)):((plt.Kernel.setLastLoc('offset=847 line=42 span=17 id="stx.ss"')&&stx_colon_list_question_(b))?(plt.Kernel.setLastLoc('offset=870 line=43 span=20 id="stx.ss"')&&stx_colon_list_dash_loc(b)):(plt.Kernel.setLastLoc('offset=786 line=39 span=106 id="stx.ss"')&&plt.Kernel.error((plt.types.Symbol.makeInstance("cond")),(plt.types.String.makeInstance('cond: fell out of cond around "offset=786 line=39 span=106 id=\\"stx.ss\\""'))))))};var stx_dash_begins_dash_with_question_=function(c,b){return((plt.Kernel.setLastLoc('offset=991 line=49 span=17 id="stx.ss"')&&stx_colon_atom_question_(c))?plt.types.Logic.FALSE:((plt.Kernel.setLastLoc('offset=1023 line=51 span=17 id="stx.ss"')&&stx_colon_list_question_(c))?((plt.Kernel.setLastLoc('offset=1051 line=52 span=36 id="stx.ss"')&&plt.Kernel.not((plt.Kernel.setLastLoc('offset=1056 line=52 span=30 id="stx.ss"')&&plt.Kernel.empty_question_((plt.Kernel.setLastLoc('offset=1064 line=52 span=21 id="stx.ss"')&&stx_colon_list_dash_elts(c))))))&&(plt.Kernel.setLastLoc('offset=1098 line=53 span=47 id="stx.ss"')&&plt.Kernel.symbol_question_((plt.Kernel.setLastLoc('offset=1107 line=53 span=37 id="stx.ss"')&&stx_dash_e((plt.Kernel.setLastLoc('offset=1114 line=53 span=29 id="stx.ss"')&&plt.Kernel.first((plt.Kernel.setLastLoc('offset=1121 line=53 span=21 id="stx.ss"')&&stx_colon_list_dash_elts(c))))))))&&(plt.Kernel.setLastLoc('offset=1156 line=54 span=74 id="stx.ss"')&&plt.Kernel.symbol_equal__question_((plt.Kernel.setLastLoc('offset=1166 line=54 span=37 id="stx.ss"')&&stx_dash_e((plt.Kernel.setLastLoc('offset=1173 line=54 span=29 id="stx.ss"')&&plt.Kernel.first((plt.Kernel.setLastLoc('offset=1180 line=54 span=21 id="stx.ss"')&&stx_colon_list_dash_elts(c)))))),b))):(plt.Kernel.setLastLoc('offset=980 line=48 span=253 id="stx.ss"')&&plt.Kernel.error((plt.types.Symbol.makeInstance("cond")),(plt.types.String.makeInstance('cond: fell out of cond around "offset=980 line=48 span=253 id=\\"stx.ss\\""'))))))};var datum_dash__greaterthan_stx=function(b,c){return((plt.Kernel.setLastLoc('offset=1461 line=65 span=14 id="stx.ss"')&&stx_question_(b))?b:(((plt.Kernel.setLastLoc('offset=1499 line=67 span=15 id="stx.ss"')&&plt.Kernel.pair_question_(b))||(plt.Kernel.setLastLoc('offset=1515 line=67 span=16 id="stx.ss"')&&plt.Kernel.empty_question_(b)))?(plt.Kernel.setLastLoc('offset=1538 line=68 span=89 id="stx.ss"')&&make_dash_stx_colon_list((plt.Kernel.setLastLoc('offset=1553 line=68 span=47 id="stx.ss"')&&plt.Kernel.map(((function(){plt.Kernel.setLastLoc('offset=1558 line=68 span=33 id="stx.ss"');var d=(function(f){var e=f[0];return(plt.Kernel.setLastLoc('offset=1570 line=68 span=20 id="stx.ss"')&&datum_dash__greaterthan_stx(e,c))});d.toWrittenString=function(e){return"<function:lambda>"};d.toDisplayedString=d.toWrittenString;return d})()),[b])),c)):(plt.types.Logic.TRUE?(plt.Kernel.setLastLoc('offset=1644 line=71 span=29 id="stx.ss"')&&make_dash_stx_colon_atom(b,c)):(plt.Kernel.setLastLoc('offset=1450 line=64 span=225 id="stx.ss"')&&plt.Kernel.error((plt.types.Symbol.makeInstance("cond")),(plt.types.String.makeInstance('cond: fell out of cond around "offset=1450 line=64 span=225 id=\\"stx.ss\\""')))))))};var stx_dash__greaterthan_datum=function(b){return((plt.Kernel.setLastLoc('offset=1787 line=84 span=17 id="stx.ss"')&&stx_colon_atom_question_(b))?(plt.Kernel.setLastLoc('offset=1810 line=85 span=22 id="stx.ss"')&&stx_colon_atom_dash_datum(b)):((plt.Kernel.setLastLoc('offset=1839 line=86 span=17 id="stx.ss"')&&stx_colon_list_question_(b))?(plt.Kernel.setLastLoc('offset=1862 line=87 span=38 id="stx.ss"')&&plt.Kernel.map((function(){var c=(function(d){return stx_dash__greaterthan_datum(d[0])});c.toWrittenString=function(d){return"<function:stx->datum>"};c.toDisplayedString=function(d){return"<function:stx->datum>"};return c})(),[(plt.Kernel.setLastLoc('offset=1878 line=87 span=21 id="stx.ss"')&&stx_colon_list_dash_elts(b))])):(plt.Kernel.setLastLoc('offset=1776 line=83 span=126 id="stx.ss"')&&plt.Kernel.error((plt.types.Symbol.makeInstance("cond")),(plt.types.String.makeInstance('cond: fell out of cond around "offset=1776 line=83 span=126 id=\\"stx.ss\\""'))))))};(function(){((function(b){}))(arguments[0]||plt.Kernel.identity)})();if(typeof(plt)=="undefined"){plt={}}plt.world=plt.world||{};plt.world.config=plt.world.config||{};(function(){var e=function(j,h){var g={};for(var i in j){g[i]=j[i]}for(var i in h){g[i]=h[i]}return g};var f=function(){this.vals={changeWorld:false,shutdownWorld:false,initialEffect:false,onRedraw:false,onDraw:false,onDrawCss:false,tickDelay:false,onTick:false,onTickEffect:false,onKey:false,onKeyEffect:false,onTilt:false,onTiltEffect:false,onAcceleration:false,onAccelerationEffect:false,onShake:false,onShakeEffect:false,onLocationChange:false,onLocationChangeEffect:false,onAnnounce:false,onAnnounceEffect:false,stopWhen:false,stopWhenEffect:false,connectToGame:false,onGameStart:false,onOpponentTurn:false,onMyTurn:false,afterMyTurn:false,onGameFinish:false}};f.prototype.lookup=function(g){plt.Kernel.check(g,plt.Kernel.isString,"WorldConfig.lookup","string",1);if(g in this.vals){return this.vals[g]}else{throw Error("Can't find "+g+" in the configuration")}};f.prototype.updateAll=function(h){var g=new f();g.vals=e(this.vals,h);return g};plt.world.config.WorldConfig=f;plt.world.config.CONFIG=new f();var d=function(){return make_dash_effect_colon_none()};var b=function(h,g){h.toWrittenString=function(i){return"("+g+" ...)"};h.toDisplayedString=h.toWrittenString;return h};plt.world.config.Kernel=plt.world.config.Kernel||{};plt.world.config.Kernel.onRedraw=function(g){plt.Kernel.check(g,plt.Kernel.isFunction,"on-redraw","function",1);return b(function(h){return h.updateAll({onRedraw:g})},"on-redraw")};plt.world.config.Kernel.initialEffect=function(g){return b(function(h){return h.updateAll({initialEffect:g})},"initial-effect")};plt.world.config.Kernel.onDraw=function(h,g){plt.Kernel.check(h,plt.Kernel.isFunction,"on-draw","function",1);plt.Kernel.check(g,plt.Kernel.isFunction,"on-draw","function",2);return b(function(i){return i.updateAll({onDraw:h,onDrawCss:g})},"on-draw")};plt.world.config.Kernel.onTick=function(g,h){plt.Kernel.check(g,plt.Kernel.isNumber,"on-tick","number",1);plt.Kernel.check(h,plt.Kernel.isFunction,"on-tick","function",2);return plt.world.config.Kernel.onTick_star_(g,h,function(i){return d()})};plt.world.config.Kernel.onTick_star_=function(g,i,h){plt.Kernel.check(g,plt.Kernel.isNumber,"on-tick!","number",1);plt.Kernel.check(i,plt.Kernel.isFunction,"on-tick!","function",2);plt.Kernel.check(h,plt.Kernel.isFunction,"on-tick!","function",3);return b(function(j){var k={onTick:i,onTickEffect:h,tickDelay:(plt.types.NumberTower.toInteger(plt.types.NumberTower.multiply(plt.types.Rational.makeInstance(1000,1),g)))};return j.updateAll(k)},"on-tick")};plt.world.config.Kernel.onTilt=function(g){plt.Kernel.check(g,plt.Kernel.isFunction,"on-tilt","function",1);return plt.world.config.Kernel.onTilt_star_(g,function(i,h,k,j){return d()})};plt.world.config.Kernel.onTilt_star_=function(h,g){plt.Kernel.check(h,plt.Kernel.isFunction,"on-tilt!","function",1);plt.Kernel.check(g,plt.Kernel.isFunction,"on-tilt!","function",2);return b(function(i){return i.updateAll({onTilt:h,onTiltEffect:g})},"on-tilt")};plt.world.config.Kernel.onAnnounce=function(g){plt.Kernel.check(g,plt.Kernel.isFunction,"on-announce","function",1);return plt.world.config.Kernel.onAnnounce_star_(g,function(h,i,j){return d()})};plt.world.config.Kernel.onAnnounce_star_=function(h,g){plt.Kernel.check(h,plt.Kernel.isFunction,"on-announce!","function",1);plt.Kernel.check(g,plt.Kernel.isFunction,"on-announce!","function",2);return b(function(i){return i.updateAll({onAnnounce:h,onAnnounceEffect:g})},"on-announce")};plt.world.config.Kernel.onAcceleration=function(g){plt.Kernel.check(g,plt.Kernel.isFunction,"on-acceleration","function",1);return plt.world.config.Kernel.onAcceleration_star_(g,function(i,h,k,j){return d()})};plt.world.config.Kernel.onAcceleration_star_=function(h,g){plt.Kernel.check(h,plt.Kernel.isFunction,"on-acceleration!","function",1);plt.Kernel.check(g,plt.Kernel.isFunction,"on-acceleration!","function",2);return b(function(i){return i.updateAll({onAcceleration:h,onAccelerationEffect:g})},"on-acceleration")};plt.world.config.Kernel.onShake=function(g){plt.Kernel.check(g,plt.Kernel.isFunction,"on-shake","function",1);return plt.world.config.Kernel.onShake_star_(g,function(i,h,k,j){return d()})};plt.world.config.Kernel.onShake_star_=function(h,g){plt.Kernel.check(h,plt.Kernel.isFunction,"on-shake!","function",1);plt.Kernel.check(g,plt.Kernel.isFunction,"on-shake!","function",2);return b(function(i){return i.updateAll({onShake:h,onShakeEffect:g})},"on-shake")};plt.world.config.Kernel.onKey=function(g){plt.Kernel.check(g,plt.Kernel.isFunction,"on-key","function",1);return plt.world.config.Kernel.onKey_star_(g,function(h,i){return d()})};plt.world.config.Kernel.onKey_star_=function(h,g){plt.Kernel.check(h,plt.Kernel.isFunction,"on-key!","function",1);plt.Kernel.check(g,plt.Kernel.isFunction,"on-key!","function",2);return b(function(i){return i.updateAll({onKey:h,onKeyEffect:g})},"on-key")};plt.world.config.Kernel.onLocationChange=function(g){plt.Kernel.check(g,plt.Kernel.isFunction,"on-location-change","function",1);return plt.world.config.Kernel.onLocationChange_star_(g,function(h,j,i){return d()})};plt.world.config.Kernel.onLocationChange_star_=function(h,g){plt.Kernel.check(h,plt.Kernel.isFunction,"on-location-change!","function",1);plt.Kernel.check(g,plt.Kernel.isFunction,"on-location-change!","function",2);return b(function(i){return i.updateAll({onLocationChange:h,onLocationChangeEffect:g})},"on-location-change")};plt.world.config.Kernel.stopWhen=function(g){plt.Kernel.check(g,plt.Kernel.isFunction,"stop-when","function",1);return plt.world.config.Kernel.stopWhen_star_(g,function(h){return d()})};plt.world.config.Kernel.stopWhen_star_=function(h,g){plt.Kernel.check(h,plt.Kernel.isFunction,"stop-when!","function",1);plt.Kernel.check(g,plt.Kernel.isFunction,"stop-when!","function",2);return b(function(i){return i.updateAll({stopWhen:h,stopWhenEffect:g})},"stop-when")};var c=function(i,j,h,g){return function(k){plt.Kernel.check(k,j,g,h,1);return b(function(l){return l.updateAll({propertyName:k})},g)}};plt.world.config.Kernel.connect_dash_to_dash_game=c("connectToGame",plt.Kernel.isString,"string","connect-to-game");plt.world.config.Kernel.on_dash_game_dash_start=c("onGameStart",plt.Kernel.isFunction,"function","on-game-start");plt.world.config.Kernel.on_dash_opponent_dash_turn=c("onOpponentTurn",plt.Kernel.isFunction,"function","on-opponent-turn");plt.world.config.Kernel.on_dash_my_dash_turn=c("onMyTurn",plt.Kernel.isFunction,"function","on-my-turn");plt.world.config.Kernel.after_dash_my_dash_turn=c("afterMyTurn",plt.Kernel.isFunction,"function","after-my-turn");plt.world.config.Kernel.on_dash_game_dash_finish=c("onGameFinish",plt.Kernel.isFunction,"function","on-game-finish")})();if(typeof(plt)=="undefined"){plt={}}plt.platform={};(function(){plt.platform.Platform={};var y=false;plt.platform.Platform.getInstance=function(){if(!y){y=new r()}return y};var r=function(){this.tiltService=m;this.shakeService=u();this.locationService=I();this.telephonyService=D();this.networkService=C();this.soundService=G();this.powerService=J();this.smsService=p();this.pickPlaylistService=i()};r.prototype.getTiltService=function(){return this.tiltService};r.prototype.getShakeService=function(){return this.shakeService};r.prototype.getLocationService=function(){return this.locationService};r.prototype.getTelephonyService=function(){return this.telephonyService};r.prototype.getNetworkService=function(){return this.networkService};r.prototype.getSoundService=function(){return this.soundService};r.prototype.getPowerService=function(){return this.powerService};r.prototype.getSmsService=function(){return this.smsService};r.prototype.getPickPlaylistService=function(){return this.pickPlaylistService};var I=function(){if(N()){return new l()}else{if(f()){return new x()}else{if(n()){return new k()}else{return new b()}}}};var N=function(){return(typeof Device!="undefined")};var f=function(){return(window.google&&window.google.gears&&true)};var n=function(){return(typeof(navigator)!="undefined"&&typeof(navigator.geolocation)!="undefined")};var K=function(W,V,U,T){var S=function(X){return X*Math.PI/180};var R=function(X,Y){return Math.pow(Math.sin((S(X)-S(Y))/2),2)};return 6378000*2*Math.asin(Math.min(1,Math.sqrt(R(W,U)+(Math.cos(S(W))*Math.cos(S(U))*R(V,T)))))};var x=function(){this.geo=google.gears.factory.create("beta.geolocation");this.listeners=[];this.currentPosition={latitude:0,longitude:0,altitude:0,bearing:0,speed:0};this.watchId=false};x.prototype.startService=function(){var R=this;function S(T){R.currentPosition.latitude=T.latitude;R.currentPosition.longitude=T.longitude;R.currentPosition.altitude=T.altitude;for(var U=0;U<R.listeners.length;U++){R.listeners[U](T.latitude,T.longitude)}}this.watchId=this.geo.watchPosition(S)};x.prototype.shutdownService=function(){this.geo.clearWatch(this.watchId)};x.prototype.addLocationChangeListener=function(R){this.listeners.push(R)};x.prototype.getLatitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.latitude)};x.prototype.getLongitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.longitude)};x.prototype.getAltitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.altitude)};x.prototype.getBearing=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.bearing)};x.prototype.getSpeed=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.speed)};x.prototype.getDistanceBetween=function(U,T,S,R){return plt.types.FloatPoint.makeInstance(K(U.toFloat(),T.toFloat(),S.toFloat(),R.toFloat()))};var b=function(){};b.prototype.startService=function(){};b.prototype.shutdownService=function(){};b.prototype.addLocationChangeListener=function(R){};b.prototype.getLatitude=function(){return plt.types.Rational.ZERO};b.prototype.getLongitude=function(){return plt.types.Rational.ZERO};b.prototype.getAltitude=function(){return plt.types.Rational.ZERO};b.prototype.getBearing=function(){return plt.types.Rational.ZERO};b.prototype.getSpeed=function(){return plt.types.Rational.ZERO};b.prototype.getDistanceBetween=function(U,T,S,R){return plt.types.FloatPoint.makeInstance(K(U.toFloat(),T.toFloat(),S.toFloat(),R.toFloat()))};var l=function(){this.locationListeners=[];this.currentPosition={latitude:0,longitude:0,atttitude:0,bearing:0,speed:0};this.watchId=false};l.prototype.startService=function(){var S=this;var R=function(V){S.currentPosition.latitude=parseFloat(V.latitude);S.currentPosition.longitude=parseFloat(V.longitude);for(var T=0;T<S.locationListeners.length;T++){var U=S.locationListeners[T];U(S.currentPosition.latitude,S.currentPosition.longitude)}};this.watchId=navigator.geolocation.watchPosition(R,function(){},{})};l.prototype.shutdownService=function(){navigator.geolocation.clearWatch(this.watchId)};l.prototype.addLocationChangeListener=function(R){this.locationListeners.push(R)};l.prototype.getLatitude=function(){return plt.types.FloatPoint.makeInstance(navigator.geolocation.lastPosition.latitude)};l.prototype.getLongitude=function(){return plt.types.FloatPoint.makeInstance(navigator.geolocation.lastPosition.longitude)};l.prototype.getAltitude=function(){return plt.types.Rational.ZERO};l.prototype.getBearing=function(){return plt.types.Rational.ZERO};l.prototype.getSpeed=function(){return plt.types.Rational.ZERO};l.prototype.getDistanceBetween=function(U,T,S,R){return plt.types.FloatPoint.makeInstance(navigator.geolocation.getDistanceBetween(U.toFloat(),T.toFloat(),S.toFloat(),R.toFloat()))};var k=function(){this.locationListeners=[];this.currentPosition={latitude:0,longitude:0,atttitude:0,bearing:0,speed:0};this.watchId=false};k.prototype.startService=function(){var T=this;var R=function(W){T.currentPosition.latitude=W.coords.latitude;T.currentPosition.longitude=W.coords.longitude;for(var U=0;U<T.locationListeners.length;U++){var V=T.locationListeners[U];V(W.coords.latitude,W.coords.longitude)}};var S=function(){};if(typeof navigator.geolocation!="undefined"&&typeof navigator.geolocation.getCurrentPosition!="undefined"){navigator.geolocation.watchPosition(R)}setTimeout(function(){navigator.geolocation.getCurrentPosition(R)},10000)};k.prototype.shutdownService=function(){if(this.watchId){navigator.geolocation.clearWatch(this.watchId);this.watchId=false}};k.prototype.addLocationChangeListener=function(R){this.locationListeners.push(R)};k.prototype.getLatitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.latitude)};k.prototype.getLongitude=function(){return plt.types.FloatPOint.makeInstance(this.currentPosition.longitude)};k.prototype.getAltitude=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.altitude)};k.prototype.getBearing=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.bearing)};k.prototype.getSpeed=function(){return plt.types.FloatPoint.makeInstance(this.currentPosition.speed)};k.prototype.getDistanceBetween=function(U,T,S,R){return plt.types.FloatPoint.makeInstance(K(U.toFloat(),T.toFloat(),S.toFloat(),R.toFloat()))};var j=[];var s=[];var q;var t;var F;var g=function(S){for(var R=0;R<j.length;R++){j[R](parseFloat(S.x),parseFloat(S.y),parseFloat(S.z))}};var z=function(R){for(var S=0;S<s.length;S++){s[S](parseFloat(R.azimuth),parseFloat(R.pitch),parseFloat(R.roll))}};var m={startService:function(){if(typeof Accelerometer!="undefined"){q=navigator.accelerometer.watchAcceleration(g,function(){});t=navigator.accelerometer.watchOrientation(z,function(){})}},shutdownService:function(){if(typeof Accelerometer!="undefined"){navigator.accelerometer.clearWatch(q);navigator.accelerometer.clearWatch(t);navigator.accelerometer.stopAllShakeWatches()}},addOrientationChangeListener:function(R){s.push(R)},addAccelerationChangeListener:function(R){j.push(R)}};var D=function(){if(N()){return new e()}else{return new A()}};var A=function(){};A.prototype.getSignalStrengths=function(){return plt.types.Empty.EMPTY};var e=function(){};e.prototype.getSignalStrengths=function(){var R=plt.types.Empty.EMPTY;var U=Device.getSignalStrengths();for(var S=0;S<U.length;S++){var T=U.get(S);R=plt.types.Cons.makeInstance(plt.Kernel.list([toNum(T.getId()),toNum(T.getStrength())]),R)}return R};var u=function(){if(N()){return new B()}else{return new H()}};var B=function(){this.listeners=[]};B.prototype.startService=function(){var S=this;var T=function(){for(var U=0;U<S.listeners.length;U++){S.listeners[U]()}};var R=function(){};this.shakeId=navigator.accelerometer.watchShake(T,R)};B.prototype.shutdownService=function(){navigator.accelerometer.stopAllShakeWatches()};B.prototype.addListener=function(R){this.listeners.push(R)};var H=function(){};H.prototype.startService=function(){};H.prototype.shutdownService=function(){};H.prototype.addListener=function(R){};var C=function(){if(N()){return new M()}else{return new Q()}};var M=function(){};M.prototype.getUrl=function(S){var R=Device.getUrl(S);return plt.types.String.makeInstance(""+R)};var Q=function(){};Q.prototype.getUrl=function(S){var T=new XMLHttpRequest();var R="/networkProxy?url="+encodeURIComponent(S);T.open("GET",R,false);T.send(null);return plt.types.String.makeInstance(T.responseText)};var G=function(){if(N()){return new P()}else{if(h()){return new d()}else{return new L()}}};var h=function(){return !!(document.createElement("audio").canPlayType)};var P=function(){};P.prototype.beep=function(){navigator.notification.beep(1)};P.prototype.playPlaylist=function(R){Device.playPlaylistRecord(R)};P.prototype.pausePlaylist=function(R){Device.pausePlaylistRecord(R)};P.prototype.stopPlaylist=function(R){Device.stopPlaylistRecord(R)};P.prototype.playSoundUrl=function(R){navigator.audio.playMusic(R)};P.prototype.playDtmfTone=function(S,R){navigator.audio.playDTMF(S);setTimeout(function(){navigator.audio.stopDTMF()},R)};P.prototype.stopSoundUrl=function(R){navigator.audio.stopMusic(R)};P.prototype.pauseSoundUrl=function(R){navigator.audio.pauseMusic(R)};P.prototype.setVolume=function(R){navigator.audio.setMusicVolume(R)};P.prototype.raiseVolume=function(){navigator.audio.increaseMusicVolume()};P.prototype.lowerVolume=function(){navigator.audio.decreaseMusicVolume()};var d=function(){this.cachedUrls={};this.baseVolume=100};d.prototype.beep=function(){alert("Beep")};d.prototype.playPlaylistSound=function(R){};d.prototype.pausePlaylistSound=function(R){};d.prototype.stopPlaylistSound=function(R){};d.prototype.playSoundUrl=function(R){if(!this.cachedUrls[R]){this.cachedUrls[R]=new Audio(R)}var S=this.cachedUrls[R];if(S.ended||S.paused){this.cachedUrls[R].play()}};d.prototype.playDtmfTone=function(S,R){alert("dtmf tone")};d.prototype.stopSoundUrl=function(R){if(this.cachedUrls[R]){this.cachedUrls[R].pause();this.cachedUrls[R].currentTime=0}};d.prototype.pauseSoundUrl=function(R){if(this.cachedUrls[R]){this.cachedUrls[R].pause()}};d.prototype.setVolume=function(S){for(var R in this.cachedUrls){this.cachedUrls[R].volume=S/100}this.baseVolume=S};d.prototype.raiseVolume=function(){this.setVolume(Math.min(this.baseVolume+5,100))};d.prototype.lowerVolume=function(){this.setVolume(Math.max(this.baseVolume-5,0))};var L=function(){};L.prototype.beep=function(){alert("Beep")};L.prototype.playPlaylistSound=function(R){};L.prototype.pausePlaylistSound=function(R){};L.prototype.stopPlaylistSound=function(R){};L.prototype.playSoundUrl=function(R){alert("sound url "+R)};L.prototype.playDtmfTone=function(S,R){alert("dtmf tone")};L.prototype.stopSoundUrl=function(R){};L.prototype.pauseSoundUrl=function(R){};L.prototype.setVolume=function(R){};L.prototype.raiseVolume=function(){};L.prototype.lowerVolume=function(){};var J=function(){if(N()){return new c()}else{return new O()}};var c=function(){this.currentLockFlags=-1};c.prototype.setWakeLock=function(R){if(R!=this.currentLockFlags){navigator.power.setWakeLock(R);this.currentLockFlags=R}};c.prototype.releaseWakeLock=function(){if(this.currentLockFlags!=-1){navigator.power.releaseWakeLock();this.currentLockFlags=-1}};var O=function(){};O.prototype.setWakeLock=function(R){};O.prototype.releaseWakeLock=function(){};var p=function(){if(N()){return new E()}else{return new w()}};var E=function(){};E.prototype.send=function(R,S){navigator.sms.send(R,S)};var w=function(){};w.prototype.send=function(R,S){alert("SMS should be sent to "+R+" with the content: "+S)};var i=function(){if(N()){return new v()}else{return new o()}};var v=function(){};v.prototype.pickPlaylist=function(S){var R=function(T){S(T)};navigator.dialogPickers.pickPlaylist(R)};var o=function(){};o.prototype.pickPlaylist=function(R){alert("pick playlist currently unavailable")}})();if(typeof(plt)=="undefined"){plt={}}plt.lib={};(function(){plt.lib.Telephony={};plt.lib.Telephony.getSignalStrengths=function(){return plt.platform.Platform.getInstance().getTelephonyService().getSignalStrengths()};plt.lib.Location={};plt.lib.Location.getLatitude=function(){return plt.platform.Platform.getInstance().getLocationService().getLatitude()};plt.lib.Location.getLongitude=function(){return plt.platform.Platform.getInstance().getLocationService().getLongitude()};plt.lib.Location.getAttitude=function(){return plt.platform.Platform.getInstance().getLocationService().getAttitude()};plt.lib.Location.getBearing=function(){return plt.platform.Platform.getInstance().getLocationService().getBearing()};plt.lib.Location.getSpeed=function(){return plt.platform.Platform.getInstance().getLocationService().getSpeed()};plt.lib.Location.getDistanceBetween=function(e,d,c,b){return plt.platform.Platform.getInstance().getLocationService().getDistanceBetween(e,d,c,b)};plt.lib.Net={};plt.lib.Net.getUrl=function(b){return plt.platform.Platform.getInstance().getNetworkService().getUrl(b)}}());var effect_colon_none=function(){plt.Kernel.Struct.call(this,"make-effect:none",[])};effect_colon_none.prototype=new plt.Kernel.Struct();var make_dash_effect_colon_none=function(){return new effect_colon_none()};var effect_colon_none_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_none};var effect_colon_beep=function(){plt.Kernel.Struct.call(this,"make-effect:beep",[])};effect_colon_beep.prototype=new plt.Kernel.Struct();var make_dash_effect_colon_beep=function(){return new effect_colon_beep()};var effect_colon_beep_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_beep};var effect_colon_play_dash_dtmf_dash_tone=function(c,b){plt.Kernel.Struct.call(this,"make-effect:play-dtmf-tone",[c,b]);this.tone=c;this.duration=b};effect_colon_play_dash_dtmf_dash_tone.prototype=new plt.Kernel.Struct();var make_dash_effect_colon_play_dash_dtmf_dash_tone=function(c,b){return new effect_colon_play_dash_dtmf_dash_tone(c,b)};var effect_colon_play_dash_dtmf_dash_tone_dash_tone=function(b){if(effect_colon_play_dash_dtmf_dash_tone_question_(b)){return b.tone}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:play-dtmf-tone-tone: not a effect:play-dtmf-tone: ~s",[b]))}};var effect_colon_play_dash_dtmf_dash_tone_dash_duration=function(b){if(effect_colon_play_dash_dtmf_dash_tone_question_(b)){return b.duration}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:play-dtmf-tone-duration: not a effect:play-dtmf-tone: ~s",[b]))}};var set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_tone_bang_=function(c,b){if(effect_colon_play_dash_dtmf_dash_tone_question_(c)){c.tone=b;c._fields[0]=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_tone_bang_: not a effect:play-dtmf-tone: ~s",[c]))}};var set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_duration_bang_=function(c,b){if(effect_colon_play_dash_dtmf_dash_tone_question_(c)){c.duration=b;c._fields[1]=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_play_dash_dtmf_dash_tone_dash_duration_bang_: not a effect:play-dtmf-tone: ~s",[c]))}};var effect_colon_play_dash_dtmf_dash_tone_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_play_dash_dtmf_dash_tone};var effect_colon_send_dash_sms=function(b,c){plt.Kernel.Struct.call(this,"make-effect:send-sms",[b,c]);this.address=b;this.msg=c};effect_colon_send_dash_sms.prototype=new plt.Kernel.Struct();var make_dash_effect_colon_send_dash_sms=function(c,b){return new effect_colon_send_dash_sms(c,b)};var effect_colon_send_dash_sms_dash_address=function(b){if(effect_colon_send_dash_sms_question_(b)){return b.address}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:send-sms-address: not a effect:send-sms: ~s",[b]))}};var effect_colon_send_dash_sms_dash_msg=function(b){if(effect_colon_send_dash_sms_question_(b)){return b.msg}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:send-sms-msg: not a effect:send-sms: ~s",[b]))}};var set_dash_effect_colon_send_dash_sms_dash_address_bang_=function(c,b){if(effect_colon_send_dash_sms_question_(c)){c.address=b;c._fields[0]=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_send_dash_sms_dash_address_bang_: not a effect:send-sms: ~s",[c]))}};var set_dash_effect_colon_send_dash_sms_dash_msg_bang_=function(c,b){if(effect_colon_send_dash_sms_question_(c)){c.msg=b;c._fields[1]=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_send_dash_sms_dash_msg_bang_: not a effect:send-sms: ~s",[c]))}};var effect_colon_send_dash_sms_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_send_dash_sms};var playlist_dash_sound=function(b){plt.Kernel.Struct.call(this,"make-playlist-sound",[b]);this.playlist=b};playlist_dash_sound.prototype=new plt.Kernel.Struct();var make_dash_playlist_dash_sound=function(b){return new playlist_dash_sound(b)};var playlist_dash_sound_dash_playlist=function(b){if(playlist_dash_sound_question_(b)){return b.playlist}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("playlist-sound-playlist: not a playlist-sound: ~s",[b]))}};var set_dash_playlist_dash_sound_dash_playlist_bang_=function(c,b){if(playlist_dash_sound_question_(c)){c.playlist=b;c._fields[0]=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_playlist_dash_sound_dash_playlist_bang_: not a playlist-sound: ~s",[c]))}};var playlist_dash_sound_question_=function(b){return b!=null&&b!=undefined&&b instanceof playlist_dash_sound};var sound_question_=function(b){return((plt.Kernel.setLastLoc('offset=417 line=19 span=11 id="effect-struct.ss"')&&plt.Kernel.string_question_(b))||(plt.Kernel.setLastLoc('offset=435 line=20 span=19 id="effect-struct.ss"')&&playlist_dash_sound_question_(b)))};var effect_colon_play_dash_sound=function(b){plt.Kernel.Struct.call(this,"make-effect:play-sound",[b]);this.sound=b};effect_colon_play_dash_sound.prototype=new plt.Kernel.Struct();var make_dash_effect_colon_play_dash_sound=function(b){return new effect_colon_play_dash_sound(b)};var effect_colon_play_dash_sound_dash_sound=function(b){if(effect_colon_play_dash_sound_question_(b)){return b.sound}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:play-sound-sound: not a effect:play-sound: ~s",[b]))}};var set_dash_effect_colon_play_dash_sound_dash_sound_bang_=function(c,b){if(effect_colon_play_dash_sound_question_(c)){c.sound=b;c._fields[0]=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_play_dash_sound_dash_sound_bang_: not a effect:play-sound: ~s",[c]))}};var effect_colon_play_dash_sound_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_play_dash_sound};var effect_colon_pause_dash_sound=function(b){plt.Kernel.Struct.call(this,"make-effect:pause-sound",[b]);this.sound=b};effect_colon_pause_dash_sound.prototype=new plt.Kernel.Struct();var make_dash_effect_colon_pause_dash_sound=function(b){return new effect_colon_pause_dash_sound(b)};var effect_colon_pause_dash_sound_dash_sound=function(b){if(effect_colon_pause_dash_sound_question_(b)){return b.sound}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pause-sound-sound: not a effect:pause-sound: ~s",[b]))}};var set_dash_effect_colon_pause_dash_sound_dash_sound_bang_=function(c,b){if(effect_colon_pause_dash_sound_question_(c)){c.sound=b;c._fields[0]=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pause_dash_sound_dash_sound_bang_: not a effect:pause-sound: ~s",[c]))}};var effect_colon_pause_dash_sound_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_pause_dash_sound};var effect_colon_stop_dash_sound=function(b){plt.Kernel.Struct.call(this,"make-effect:stop-sound",[b]);this.sound=b};effect_colon_stop_dash_sound.prototype=new plt.Kernel.Struct();var make_dash_effect_colon_stop_dash_sound=function(b){return new effect_colon_stop_dash_sound(b)};var effect_colon_stop_dash_sound_dash_sound=function(b){if(effect_colon_stop_dash_sound_question_(b)){return b.sound}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:stop-sound-sound: not a effect:stop-sound: ~s",[b]))}};var set_dash_effect_colon_stop_dash_sound_dash_sound_bang_=function(c,b){if(effect_colon_stop_dash_sound_question_(c)){c.sound=b;c._fields[0]=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_stop_dash_sound_dash_sound_bang_: not a effect:stop-sound: ~s",[c]))}};var effect_colon_stop_dash_sound_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_stop_dash_sound};var effect_colon_set_dash_sound_dash_volume=function(b){plt.Kernel.Struct.call(this,"make-effect:set-sound-volume",[b]);this.volume=b};effect_colon_set_dash_sound_dash_volume.prototype=new plt.Kernel.Struct();var make_dash_effect_colon_set_dash_sound_dash_volume=function(b){return new effect_colon_set_dash_sound_dash_volume(b)};var effect_colon_set_dash_sound_dash_volume_dash_volume=function(b){if(effect_colon_set_dash_sound_dash_volume_question_(b)){return b.volume}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:set-sound-volume-volume: not a effect:set-sound-volume: ~s",[b]))}};var set_dash_effect_colon_set_dash_sound_dash_volume_dash_volume_bang_=function(c,b){if(effect_colon_set_dash_sound_dash_volume_question_(c)){c.volume=b;c._fields[0]=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_set_dash_sound_dash_volume_dash_volume_bang_: not a effect:set-sound-volume: ~s",[c]))}};var effect_colon_set_dash_sound_dash_volume_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_set_dash_sound_dash_volume};var effect_colon_raise_dash_sound_dash_volume=function(){plt.Kernel.Struct.call(this,"make-effect:raise-sound-volume",[])};effect_colon_raise_dash_sound_dash_volume.prototype=new plt.Kernel.Struct();var make_dash_effect_colon_raise_dash_sound_dash_volume=function(){return new effect_colon_raise_dash_sound_dash_volume()};var effect_colon_raise_dash_sound_dash_volume_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_raise_dash_sound_dash_volume};var effect_colon_lower_dash_sound_dash_volume=function(){plt.Kernel.Struct.call(this,"make-effect:lower-sound-volume",[])};effect_colon_lower_dash_sound_dash_volume.prototype=new plt.Kernel.Struct();var make_dash_effect_colon_lower_dash_sound_dash_volume=function(){return new effect_colon_lower_dash_sound_dash_volume()};var effect_colon_lower_dash_sound_dash_volume_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_lower_dash_sound_dash_volume};var effect_colon_set_dash_wake_dash_lock=function(b){plt.Kernel.Struct.call(this,"make-effect:set-wake-lock",[b]);this.locks=b};effect_colon_set_dash_wake_dash_lock.prototype=new plt.Kernel.Struct();var make_dash_effect_colon_set_dash_wake_dash_lock=function(b){return new effect_colon_set_dash_wake_dash_lock(b)};var effect_colon_set_dash_wake_dash_lock_dash_locks=function(b){if(effect_colon_set_dash_wake_dash_lock_question_(b)){return b.locks}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:set-wake-lock-locks: not a effect:set-wake-lock: ~s",[b]))}};var set_dash_effect_colon_set_dash_wake_dash_lock_dash_locks_bang_=function(c,b){if(effect_colon_set_dash_wake_dash_lock_question_(c)){c.locks=b;c._fields[0]=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_set_dash_wake_dash_lock_dash_locks_bang_: not a effect:set-wake-lock: ~s",[c]))}};var effect_colon_set_dash_wake_dash_lock_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_set_dash_wake_dash_lock};var effect_colon_release_dash_wake_dash_lock=function(){plt.Kernel.Struct.call(this,"make-effect:release-wake-lock",[])};effect_colon_release_dash_wake_dash_lock.prototype=new plt.Kernel.Struct();var make_dash_effect_colon_release_dash_wake_dash_lock=function(){return new effect_colon_release_dash_wake_dash_lock()};var effect_colon_release_dash_wake_dash_lock_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_release_dash_wake_dash_lock};var effect_colon_pick_dash_playlist=function(b){plt.Kernel.Struct.call(this,"make-effect:pick-playlist",[b]);this.update_dash_f=b};effect_colon_pick_dash_playlist.prototype=new plt.Kernel.Struct();var make_dash_effect_colon_pick_dash_playlist=function(b){return new effect_colon_pick_dash_playlist(b)};var effect_colon_pick_dash_playlist_dash_update_dash_f=function(b){if(effect_colon_pick_dash_playlist_question_(b)){return b.update_dash_f}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pick-playlist-update-f: not a effect:pick-playlist: ~s",[b]))}};var set_dash_effect_colon_pick_dash_playlist_dash_update_dash_f_bang_=function(c,b){if(effect_colon_pick_dash_playlist_question_(c)){c.update_dash_f=b;c._fields[0]=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pick_dash_playlist_dash_update_dash_f_bang_: not a effect:pick-playlist: ~s",[c]))}};var effect_colon_pick_dash_playlist_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_pick_dash_playlist};var effect_colon_pick_dash_random=function(c,b){plt.Kernel.Struct.call(this,"make-effect:pick-random",[c,b]);this.n=c;this.update_dash_f=b};effect_colon_pick_dash_random.prototype=new plt.Kernel.Struct();var make_dash_effect_colon_pick_dash_random=function(c,b){return new effect_colon_pick_dash_random(c,b)};var effect_colon_pick_dash_random_dash_n=function(b){if(effect_colon_pick_dash_random_question_(b)){return b.n}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pick-random-n: not a effect:pick-random: ~s",[b]))}};var effect_colon_pick_dash_random_dash_update_dash_f=function(b){if(effect_colon_pick_dash_random_question_(b)){return b.update_dash_f}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("effect:pick-random-update-f: not a effect:pick-random: ~s",[b]))}};var set_dash_effect_colon_pick_dash_random_dash_n_bang_=function(c,b){if(effect_colon_pick_dash_random_question_(c)){c.n=b;c._fields[0]=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pick_dash_random_dash_n_bang_: not a effect:pick-random: ~s",[c]))}};var set_dash_effect_colon_pick_dash_random_dash_update_dash_f_bang_=function(c,b){if(effect_colon_pick_dash_random_question_(c)){c.update_dash_f=b;c._fields[1]=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_effect_colon_pick_dash_random_dash_update_dash_f_bang_: not a effect:pick-random: ~s",[c]))}};var effect_colon_pick_dash_random_question_=function(b){return b!=null&&b!=undefined&&b instanceof effect_colon_pick_dash_random};var effect_question_=function(b){return((plt.Kernel.setLastLoc('offset=1069 line=43 span=20 id="effect-struct.ss"')&&effect_colon_none_question_(b))||(plt.Kernel.setLastLoc('offset=1096 line=44 span=20 id="effect-struct.ss"')&&effect_colon_beep_question_(b))||(plt.Kernel.setLastLoc('offset=1123 line=45 span=30 id="effect-struct.ss"')&&effect_colon_play_dash_dtmf_dash_tone_question_(b))||(plt.Kernel.setLastLoc('offset=1160 line=46 span=24 id="effect-struct.ss"')&&effect_colon_send_dash_sms_question_(b))||(plt.Kernel.setLastLoc('offset=1191 line=47 span=26 id="effect-struct.ss"')&&effect_colon_play_dash_sound_question_(b))||(plt.Kernel.setLastLoc('offset=1224 line=48 span=27 id="effect-struct.ss"')&&effect_colon_pause_dash_sound_question_(b))||(plt.Kernel.setLastLoc('offset=1258 line=49 span=26 id="effect-struct.ss"')&&effect_colon_stop_dash_sound_question_(b))||(plt.Kernel.setLastLoc('offset=1291 line=50 span=32 id="effect-struct.ss"')&&effect_colon_set_dash_sound_dash_volume_question_(b))||(plt.Kernel.setLastLoc('offset=1330 line=51 span=34 id="effect-struct.ss"')&&effect_colon_raise_dash_sound_dash_volume_question_(b))||(plt.Kernel.setLastLoc('offset=1371 line=52 span=34 id="effect-struct.ss"')&&effect_colon_lower_dash_sound_dash_volume_question_(b))||(plt.Kernel.setLastLoc('offset=1412 line=53 span=29 id="effect-struct.ss"')&&effect_colon_set_dash_wake_dash_lock_question_(b))||(plt.Kernel.setLastLoc('offset=1448 line=54 span=33 id="effect-struct.ss"')&&effect_colon_release_dash_wake_dash_lock_question_(b))||(plt.Kernel.setLastLoc('offset=1488 line=55 span=29 id="effect-struct.ss"')&&effect_colon_pick_dash_playlist_question_(b))||(plt.Kernel.setLastLoc('offset=1524 line=56 span=27 id="effect-struct.ss"')&&effect_colon_pick_dash_random_question_(b)))};(function(){((function(b){}))(arguments[0]||plt.Kernel.identity)})();if(typeof(plt)=="undefined"){plt={}}plt.world=plt.world||{};plt.world.Kernel=plt.world.Kernel||{};(function(){var p;var x=[];var e;var o=false;var q=function(D){var C=function(){};C.prototype=D;return new C()};var w=function(D){var E=function(){};E.prototype=D;var F=new E();for(property in D){if(D.hasOwnProperty(property)){F[property]=D[property]}}return F};var v=[];plt.world.Kernel.addAnnounceListener=function(C){v.push(C)};plt.world.Kernel.removeAnnounceListener=function(D){var C=v.indexOf(D);if(C!=-1){v.splice(C,1)}};plt.world.Kernel.announce=function(C,E){for(var D=0;D<v.length;D++){try{v[D](C,E)}catch(F){}}};var t=function(C){p=C;g()};plt.world.Kernel.updateWorld=function(D){var C=D(p);t(C)};plt.world.Kernel.shutdownWorld=function(){e=true};var g=function(){var C;for(C=0;C<x.length;C++){x[C](p)}};var A=function(C){x.push(C)};var i=function(E){var C=E.charCode||E.keyCode;var D;if(C==37){D="left"}else{if(C==38){D="up"}else{if(C==39){D="right"}else{if(C==40){D="down"}else{D=String.fromCharCode(C)}}}}return D};var h=function(){if(o){clearInterval(o);o=false}e=false;x=[]};var y=function(D,C){if(window.document.getElementById("canvas")!=undefined){return window}var E=window.open("big-bang.html","big-bang");if(E==null){throw new Error("Error: Not allowed to create a new window.")}return E};plt.world.Kernel.bigBang=function(D,J,C,G){plt.Kernel.check(D,plt.Kernel.isNumber,"big-bang","number",1);plt.Kernel.check(J,plt.Kernel.isNumber,"big-bang","number",2);plt.Kernel.arrayEach(args,function(L,M){plt.Kernel.check(L,plt.Kernel.isFunction,"big-bang","handler",M+4)});var H;var I=y(D,J);var E=I.document.getElementById("canvas");E.width=D.toInteger();E.height=J.toInteger();h();var F=new plt.world.config.WorldConfig();for(H=0;H<G.length;H++){F=G[H](F)}F=F.updateAll({changeWorld:plt.world.Kernel.updateWorld,shutdownWorld:plt.world.Kernel.shutdownWorld});plt.world.config.CONFIG=F;if(F.lookup("onKey")){I.onkeydown=function(L){plt.world.stimuli.onKey(L)}}if(F.lookup("onRedraw")){A(function(L){var M=E.getContext("2d");var N=F.lookup("onRedraw")([L]);N.render(M,0,0)})}A(function(L){if(F.lookup("stopWhen")){if(F.lookup("stopWhen")([L])){e=true}}});if(F.lookup("onTick")){l(I,F)}t(C);if(F.lookup("initialEffect")){var K=plt.world.Kernel.applyEffect(F.lookup("initialEffect"));for(var H=0;H<K.length;H++){if(!e){updateWorld(K)}}}};var l=function(D,C){o=D.setInterval(function(){if(e){D.clearTimeout(o);o=false}else{plt.world.stimuli.onTick()}},C.lookup("tickDelay"))};plt.world.Kernel.isKeyEqual=function(E,D){var C=(E.toString().toLowerCase()==D.toString().toLowerCase());return C};plt.world.Kernel.imageWidth=function(C){plt.Kernel.check(C,r,"image-width","image",1);return plt.types.Rational.makeInstance(C.getWidth(),1)};plt.world.Kernel.imageHeight=function(C){plt.Kernel.check(C,r,"image-height","image",1);return plt.types.Rational.makeInstance(C.getHeight(),1)};plt.world.Kernel.placeImage=function(E,C,G,D){plt.Kernel.check(E,r,"place-image","image",1);plt.Kernel.check(C,plt.Kernel.isNumber,"place-image","number",2);plt.Kernel.check(G,plt.Kernel.isNumber,"place-image","number",3);plt.Kernel.check(D,function(H){return B(H)||r(H)},"place-image","image",4);if(B(D)){return D.add(E,plt.types.NumberTower.toInteger(C),plt.types.NumberTower.toInteger(G))}else{var F=new c(D.getWidth(),D.getHeight(),[]);F=F.add(D,0,0);F=F.add(E,plt.types.NumberTower.toInteger(C),plt.types.NumberTower.toInteger(G));return F}};plt.world.Kernel.emptyScene=function(D,C){plt.Kernel.check(D,plt.Kernel.isNumber,"empty-scene","number",1);plt.Kernel.check(C,plt.Kernel.isNumber,"empty-scene","number",2);return new c(plt.types.NumberTower.toInteger(D),plt.types.NumberTower.toInteger(C),[])};var u=function(C){return typeof(b.get(C))!="undefined"};plt.world.Kernel.text=function(E,C,D){plt.Kernel.check(E,plt.Kernel.isString,"text","string",1);plt.Kernel.check(C,plt.Kernel.isNumber,"text","number",2);plt.Kernel.check(D,u,"text","color",3);if(b.get(D)){D=b.get(D)}return new d(E,plt.types.NumberTower.toInteger(C),D)};plt.world.Kernel.circle=function(E,D,C){plt.Kernel.check(E,plt.Kernel.isNumber,"circle","number",1);plt.Kernel.check(D,plt.Kernel.isString,"circle","string",2);plt.Kernel.check(C,u,"circle","color",3);if(b.get(C)){C=b.get(C)}return new f(plt.types.NumberTower.toInteger(E),D,C)};plt.world.Kernel.openImageUrl=function(C){plt.Kernel.check(C,plt.Kernel.isString,"open-image-url","string",1);return k.makeInstance(C.toString())};plt.world.Kernel.nwRectangle=function(C,F,E,G){plt.Kernel.check(C,plt.Kernel.isNumber,"nw:rectangle","number",1);plt.Kernel.check(F,plt.Kernel.isNumber,"nw:rectangle","number",2);plt.Kernel.check(E,plt.Kernel.isString,"nw:rectangle","string",3);plt.Kernel.check(G,u,"nw:rectangle","color",4);if(b.get(G)){G=b.get(G)}var D=new n(plt.types.NumberTower.toInteger(C),plt.types.NumberTower.toInteger(F),E,G);return D.updatePinhole(0,0)};plt.world.Kernel.rectangle=function(C,E,D,F){plt.Kernel.check(C,plt.Kernel.isNumber,"rectangle","number",1);plt.Kernel.check(E,plt.Kernel.isNumber,"rectangle","number",2);plt.Kernel.check(D,plt.Kernel.isString,"rectangle","string",3);plt.Kernel.check(F,u,"rectangle","color",4);if(b.get(F)){F=b.get(F)}return new n(plt.types.NumberTower.toInteger(C),plt.types.NumberTower.toInteger(E),D,F)};var z=function(D,C){this.pinholeX=D;this.pinholeY=C};plt.world.Kernel.BaseImage=z;var r=function(C){return((C!=null)&&(C!=undefined)&&(C instanceof z))};plt.world.Kernel.isImage=r;plt.world.Kernel.put_dash_pinhole=function(D,C,E){plt.Kernel.check(D,r,"put-pinhole","image",1);plt.Kernel.check(C,plt.Kernel.isNumber,"put-pinhole","number",2);plt.Kernel.check(E,plt.Kernel.isNumber,"put-pinhole","number",3);return D.updatePinhole(C.toInteger(),E.toInteger())};z.prototype.updatePinhole=function(C,E){var D=w(this);D.pinholeX=C;D.pinholeY=E;return D};z.prototype.render=function(D,C,E){throw new MobyRuntimeError("Unimplemented method render")};plt.world.Kernel.makeCanvas=function(E,C){var D=document.createElement("canvas");D.width=E;D.height=C;D.style.width=D.width+"px";D.style.height=D.height+"px";if(window&&typeof window.G_vmlCanvasManager!="undefined"){D.style.display="none";document.body.appendChild(D);D=window.G_vmlCanvasManager.initElement(D);document.body.removeChild(D);D.style.display=""}return D};z.prototype.toDomNode=function(E){var H=this;var G=plt.world.Kernel.imageWidth(H).toInteger();var C=plt.world.Kernel.imageHeight(H).toInteger();var F=plt.world.Kernel.makeCanvas(G,C);var I=F.style.display;F.style.display="none";document.body.appendChild(F);var D=F.getContext("2d");H.render(D,0,0);document.body.removeChild(F);F.style.display="";return F};z.prototype.toWrittenString=function(C){return"<image>"};z.prototype.toDisplayedString=function(C){return"<image>"};plt.world.Kernel.image_question_=function(C){return r(C)};plt.world.Kernel.image_equal__question_=function(D,C){check(D,r,"image=?","image",1);check(C,r,"image=?","image",2);return D==C?plt.types.Logic.TRUE:plt.types.Logic.FALSE};var B=function(C){return((C!=undefined)&&(C!=null)&&(C instanceof c))};var c=function(E,C,D){z.call(this,0,0);this.width=E;this.height=C;this.children=D};c.prototype=q(z.prototype);c.prototype.add=function(D,C,E){return new c(this.width,this.height,this.children.concat([[D,C,E]]))};c.prototype.render=function(F,D,I){var H;var G,E,C;F.clearRect(D-this.pinholeX,I-this.pinholeY,this.width,this.height);for(H=0;H<this.children.length;H++){G=this.children[H][0];E=this.children[H][1];C=this.children[H][2];F.save();G.render(F,E+D-G.pinholeX,C+I-G.pinholeY);F.restore()}};c.prototype.getWidth=function(){return this.width};c.prototype.getHeight=function(){return this.height};var k=function(E,D){z.call(this,0,0);var C=this;this.isLoaded=false;if(D&&D.complete){this.img=D;this.isLoaded=true;this.pinholeX=C.img.width/2;this.pinholeY=C.img.height/2}else{this.img=new Image();this.img.onload=function(){C.isLoaded=true;C.pinholeX=C.img.width/2;C.pinholeY=C.img.height/2};this.img.onerror=function(F){C.img.onerror="";C.img.src="http://www.wescheme.org/images/broken.png"};this.img.src=E}};k.prototype=q(z.prototype);plt.world.Kernel.FileImage=k;var j={};k.makeInstance=function(C){if(!(C in j)){j[C]=new k(C)}return j[C]};k.installInstance=function(D,C){j[D]=new k(D,C)};k.installBrokenImage=function(C){j[C]=new d("Unable to load "+C,10,b.get("red"))};k.prototype.render=function(D,C,E){D.drawImage(this.img,C,E)};k.prototype.getWidth=function(){return this.img.width};k.prototype.getHeight=function(){return this.img.height};k.prototype.toDomNode=function(C){return this.img.cloneNode(true)};var n=function(F,C,E,D){z.call(this,F/2,C/2);this.width=F;this.height=C;this.style=E;this.color=D};n.prototype=q(z.prototype);n.prototype.render=function(D,C,E){D.fillStyle=this.color.toString();if(this.style.toString().toLowerCase()=="outline"){D.strokeRect(C,E,this.width,this.height)}else{D.fillRect(C,E,this.width,this.height)}};n.prototype.getWidth=function(){return this.width};n.prototype.getHeight=function(){return this.height};var d=function(E,D,C){z.call(this,0,0);this.msg=E;this.size=D;this.color=C;this.font="Optimer"};d.prototype=q(z.prototype);d.prototype.render=function(D,C,E){if(D.fillText){D.font=this.size+"px Optimer";D.fillStyle=this.color.toRGBAString();D.fillText(this.msg,C,E)}else{if("mozDrawText" in D){D.mozTextStyle=this.size+"px "+this.font;D.translate(C,E+this.size);D.fillStyle=this.color;D.mozDrawText(this.msg)}}};d.prototype.getWidth=function(){return this.size*this.msg.length};d.prototype.getHeight=function(){return 10};var f=function(C,E,D){z.call(this,C,C);this.radius=C;this.style=E;this.color=D};f.prototype=q(z.prototype);f.prototype.render=function(D,C,E){D.translate(0,0);D.beginPath();D.fillStyle=this.color.toString();D.arc(C+this.radius,E+this.radius,this.radius,0,2*Math.PI,false);if(this.style.toString().toLowerCase()=="outline"){D.stroke()}else{D.fill()}D.closePath()};f.prototype.getWidth=function(){return this.radius*2};f.prototype.getHeight=function(){return this.radius*2};plt.world.Kernel.applyEffect=function(E){var D=[];if(plt.Kernel.empty_question_(E)){}else{if(plt.Kernel.pair_question_(E)){D=D.concat(plt.world.Kernel.applyEffect(E.first()));D=D.concat(plt.world.Kernel.applyEffect(E.rest()))}else{var C=E.run();if(C){D=D.concat(C)}}}return D};effect_colon_none.prototype.run=function(){};effect_colon_beep.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService().beep()};effect_colon_play_dash_dtmf_dash_tone.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService().playDtmfTone(this._fields[0].toInteger(),this._fields[1].toInteger())};effect_colon_send_dash_sms.prototype.run=function(){plt.platform.Platform.getInstance().getSmsService().send(this._fields[0],this._fields[1])};effect_colon_play_dash_sound.prototype.run=function(){if(plt.Kernel.isString(this._fields[0])){plt.platform.Platform.getInstance().getSoundService().playSoundUrl(this._fields[0])}else{if(playlist_dash_sound_question_(this._fields[0])){plt.platform.Platform.getInstance().getSoundService().playPlaylist(this._fields[0]._fields[0])}}};effect_colon_pause_dash_sound.prototype.run=function(){if(plt.Kernel.isString(this._fields[0])){plt.platform.Platform.getInstance().getSoundService().pauseSoundUrl(this._fields[0])}else{if(playlist_dash_sound_question_(this._fields[0])){plt.platform.Platform.getInstance().getSoundService().pausePlaylist(this._fields[0]._fields[0])}}};effect_colon_stop_dash_sound.prototype.run=function(){if(plt.Kernel.isString(this._fields[0])){plt.platform.Platform.getInstance().getSoundService().stopSoundUrl(this._fields[0])}else{if(playlist_dash_sound_question_(this._fields[0])){plt.platform.Platform.getInstance().getSoundService().stopPlaylist(this._fields[0]._fields[0])}}};effect_colon_set_dash_sound_dash_volume.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService().setVolume(this._fields[0].toInteger())};effect_colon_raise_dash_sound_dash_volume.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService.raiseVolume()};effect_colon_lower_dash_sound_dash_volume.prototype.run=function(){plt.platform.Platform.getInstance().getSoundService.lowerVolume()};effect_colon_set_dash_wake_dash_lock.prototype.run=function(){plt.platform.Platform.getInstance().getPowerService().setWakeLock(this._fields[0].toInteger())};effect_colon_release_dash_wake_dash_lock.prototype.run=function(){plt.platform.Platform.getInstance().getPowerService().releaseWakeLock()};effect_colon_pick_dash_playlist.prototype.run=function(){var C=this._fields[0];var D=function(F){var E=make_dash_playlist_dash_sound(F);setTimeout(function(){var G=plt.world.config.CONFIG.lookup("changeWorld");G(function(H){return C([H,E])})},0)};plt.platform.Platform.getInstance().getPickPlaylistService().pickPlaylist(D)};effect_colon_pick_dash_random.prototype.run=function(){var D=plt.types.Rational.makeInstance(Math.floor(plt.types.NumberTower.toInteger(this._fields[0])*Math.random()),1);var C=this._fields[1];return function(E){return C([E,D])}};var m=function(){this.colors={}};m.prototype.put=function(D,C){this.colors[D]=C};m.prototype.get=function(C){return this.colors[C.toString().toUpperCase()]};var s=function(E,D,C){this.r=E;this.g=D;this.b=C};s.prototype.toString=function(){return"rgb("+this.r+","+this.g+","+this.b+")"};s.prototype.toRGBAString=function(){return"rgba("+this.r+","+this.g+","+this.b+", 1)"};var b=new m();b.put("ORANGE",new s(255,165,0));b.put("RED",new s(255,0,0));b.put("ORANGERED",new s(255,69,0));b.put("TOMATO",new s(255,99,71));b.put("DARKRED",new s(139,0,0));b.put("RED",new s(255,0,0));b.put("FIREBRICK",new s(178,34,34));b.put("CRIMSON",new s(220,20,60));b.put("DEEPPINK",new s(255,20,147));b.put("MAROON",new s(176,48,96));b.put("INDIAN RED",new s(205,92,92));b.put("INDIANRED",new s(205,92,92));b.put("MEDIUM VIOLET RED",new s(199,21,133));b.put("MEDIUMVIOLETRED",new s(199,21,133));b.put("VIOLET RED",new s(208,32,144));b.put("VIOLETRED",new s(208,32,144));b.put("LIGHTCORAL",new s(240,128,128));b.put("HOTPINK",new s(255,105,180));b.put("PALEVIOLETRED",new s(219,112,147));b.put("LIGHTPINK",new s(255,182,193));b.put("ROSYBROWN",new s(188,143,143));b.put("PINK",new s(255,192,203));b.put("ORCHID",new s(218,112,214));b.put("LAVENDERBLUSH",new s(255,240,245));b.put("SNOW",new s(255,250,250));b.put("CHOCOLATE",new s(210,105,30));b.put("SADDLEBROWN",new s(139,69,19));b.put("BROWN",new s(132,60,36));b.put("DARKORANGE",new s(255,140,0));b.put("CORAL",new s(255,127,80));b.put("SIENNA",new s(160,82,45));b.put("ORANGE",new s(255,165,0));b.put("SALMON",new s(250,128,114));b.put("PERU",new s(205,133,63));b.put("DARKGOLDENROD",new s(184,134,11));b.put("GOLDENROD",new s(218,165,32));b.put("SANDYBROWN",new s(244,164,96));b.put("LIGHTSALMON",new s(255,160,122));b.put("DARKSALMON",new s(233,150,122));b.put("GOLD",new s(255,215,0));b.put("YELLOW",new s(255,255,0));b.put("OLIVE",new s(128,128,0));b.put("BURLYWOOD",new s(222,184,135));b.put("TAN",new s(210,180,140));b.put("NAVAJOWHITE",new s(255,222,173));b.put("PEACHPUFF",new s(255,218,185));b.put("KHAKI",new s(240,230,140));b.put("DARKKHAKI",new s(189,183,107));b.put("MOCCASIN",new s(255,228,181));b.put("WHEAT",new s(245,222,179));b.put("BISQUE",new s(255,228,196));b.put("PALEGOLDENROD",new s(238,232,170));b.put("BLANCHEDALMOND",new s(255,235,205));b.put("MEDIUM GOLDENROD",new s(234,234,173));b.put("MEDIUMGOLDENROD",new s(234,234,173));b.put("PAPAYAWHIP",new s(255,239,213));b.put("MISTYROSE",new s(255,228,225));b.put("LEMONCHIFFON",new s(255,250,205));b.put("ANTIQUEWHITE",new s(250,235,215));b.put("CORNSILK",new s(255,248,220));b.put("LIGHTGOLDENRODYELLOW",new s(250,250,210));b.put("OLDLACE",new s(253,245,230));b.put("LINEN",new s(250,240,230));b.put("LIGHTYELLOW",new s(255,255,224));b.put("SEASHELL",new s(255,245,238));b.put("BEIGE",new s(245,245,220));b.put("FLORALWHITE",new s(255,250,240));b.put("IVORY",new s(255,255,240));b.put("GREEN",new s(0,255,0));b.put("LAWNGREEN",new s(124,252,0));b.put("CHARTREUSE",new s(127,255,0));b.put("GREEN YELLOW",new s(173,255,47));b.put("GREENYELLOW",new s(173,255,47));b.put("YELLOW GREEN",new s(154,205,50));b.put("YELLOWGREEN",new s(154,205,50));b.put("MEDIUM FOREST GREEN",new s(107,142,35));b.put("OLIVEDRAB",new s(107,142,35));b.put("MEDIUMFORESTGREEN",new s(107,142,35));b.put("DARK OLIVE GREEN",new s(85,107,47));b.put("DARKOLIVEGREEN",new s(85,107,47));b.put("DARKSEAGREEN",new s(143,188,139));b.put("LIME",new s(0,255,0));b.put("DARK GREEN",new s(0,100,0));b.put("DARKGREEN",new s(0,100,0));b.put("LIME GREEN",new s(50,205,50));b.put("LIMEGREEN",new s(50,205,50));b.put("FOREST GREEN",new s(34,139,34));b.put("FORESTGREEN",new s(34,139,34));b.put("SPRING GREEN",new s(0,255,127));b.put("SPRINGGREEN",new s(0,255,127));b.put("MEDIUM SPRING GREEN",new s(0,250,154));b.put("MEDIUMSPRINGGREEN",new s(0,250,154));b.put("SEA GREEN",new s(46,139,87));b.put("SEAGREEN",new s(46,139,87));b.put("MEDIUM SEA GREEN",new s(60,179,113));b.put("MEDIUMSEAGREEN",new s(60,179,113));b.put("AQUAMARINE",new s(112,216,144));b.put("LIGHTGREEN",new s(144,238,144));b.put("PALE GREEN",new s(152,251,152));b.put("PALEGREEN",new s(152,251,152));b.put("MEDIUM AQUAMARINE",new s(102,205,170));b.put("MEDIUMAQUAMARINE",new s(102,205,170));b.put("TURQUOISE",new s(64,224,208));b.put("LIGHTSEAGREEN",new s(32,178,170));b.put("MEDIUM TURQUOISE",new s(72,209,204));b.put("MEDIUMTURQUOISE",new s(72,209,204));b.put("HONEYDEW",new s(240,255,240));b.put("MINTCREAM",new s(245,255,250));b.put("ROYALBLUE",new s(65,105,225));b.put("DODGERBLUE",new s(30,144,255));b.put("DEEPSKYBLUE",new s(0,191,255));b.put("CORNFLOWERBLUE",new s(100,149,237));b.put("STEEL BLUE",new s(70,130,180));b.put("STEELBLUE",new s(70,130,180));b.put("LIGHTSKYBLUE",new s(135,206,250));b.put("DARK TURQUOISE",new s(0,206,209));b.put("DARKTURQUOISE",new s(0,206,209));b.put("CYAN",new s(0,255,255));b.put("AQUA",new s(0,255,255));b.put("DARKCYAN",new s(0,139,139));b.put("TEAL",new s(0,128,128));b.put("SKY BLUE",new s(135,206,235));b.put("SKYBLUE",new s(135,206,235));b.put("CADET BLUE",new s(96,160,160));b.put("CADETBLUE",new s(95,158,160));b.put("DARK SLATE GRAY",new s(47,79,79));b.put("DARKSLATEGRAY",new s(47,79,79));b.put("LIGHTSLATEGRAY",new s(119,136,153));b.put("SLATEGRAY",new s(112,128,144));b.put("LIGHT STEEL BLUE",new s(176,196,222));b.put("LIGHTSTEELBLUE",new s(176,196,222));b.put("LIGHT BLUE",new s(173,216,230));b.put("LIGHTBLUE",new s(173,216,230));b.put("POWDERBLUE",new s(176,224,230));b.put("PALETURQUOISE",new s(175,238,238));b.put("LIGHTCYAN",new s(224,255,255));b.put("ALICEBLUE",new s(240,248,255));b.put("AZURE",new s(240,255,255));b.put("MEDIUM BLUE",new s(0,0,205));b.put("MEDIUMBLUE",new s(0,0,205));b.put("DARKBLUE",new s(0,0,139));b.put("MIDNIGHT BLUE",new s(25,25,112));b.put("MIDNIGHTBLUE",new s(25,25,112));b.put("NAVY",new s(36,36,140));b.put("BLUE",new s(0,0,255));b.put("INDIGO",new s(75,0,130));b.put("BLUE VIOLET",new s(138,43,226));b.put("BLUEVIOLET",new s(138,43,226));b.put("MEDIUM SLATE BLUE",new s(123,104,238));b.put("MEDIUMSLATEBLUE",new s(123,104,238));b.put("SLATE BLUE",new s(106,90,205));b.put("SLATEBLUE",new s(106,90,205));b.put("PURPLE",new s(160,32,240));b.put("DARK SLATE BLUE",new s(72,61,139));b.put("DARKSLATEBLUE",new s(72,61,139));b.put("DARKVIOLET",new s(148,0,211));b.put("DARK ORCHID",new s(153,50,204));b.put("DARKORCHID",new s(153,50,204));b.put("MEDIUMPURPLE",new s(147,112,219));b.put("CORNFLOWER BLUE",new s(68,64,108));b.put("MEDIUM ORCHID",new s(186,85,211));b.put("MEDIUMORCHID",new s(186,85,211));b.put("MAGENTA",new s(255,0,255));b.put("FUCHSIA",new s(255,0,255));b.put("DARKMAGENTA",new s(139,0,139));b.put("VIOLET",new s(238,130,238));b.put("PLUM",new s(221,160,221));b.put("LAVENDER",new s(230,230,250));b.put("THISTLE",new s(216,191,216));b.put("GHOSTWHITE",new s(248,248,255));b.put("WHITE",new s(255,255,255));b.put("WHITESMOKE",new s(245,245,245));b.put("GAINSBORO",new s(220,220,220));b.put("LIGHT GRAY",new s(211,211,211));b.put("LIGHTGRAY",new s(211,211,211));b.put("SILVER",new s(192,192,192));b.put("GRAY",new s(190,190,190));b.put("DARK GRAY",new s(169,169,169));b.put("DARKGRAY",new s(169,169,169));b.put("DIM GRAY",new s(105,105,105));b.put("DIMGRAY",new s(105,105,105));b.put("BLACK",new s(0,0,0))})();if(typeof(plt)=="undefined"){var plt={}}plt.Jsworld={};(function(){var ae=plt.Jsworld;var f=false;function L(){}var ax=new L();var Y=[];var ap=[];ae.shutdown=function(){while(ap.length>0){var p=ap.pop();if(p){p.pause()}}r()};function G(p){Y.push(p)}function al(aL){var p=Y.indexOf(aL);if(p!=-1){Y.splice(p,1)}}function r(){ax=new L();Y=[]}function N(aN){var p=ax;try{ax=aN(ax)}catch(aM){return}if(p!=ax){for(var aL=0;aL<Y.length;aL++){try{Y[aL](ax,p)}catch(aM){ax=p;throw aM}}}}ae.change_world=N;Number.prototype.NaN0=function(){return isNaN(this)?0:this};function J(aM){var aL=0;var p=0;while(aM.offsetParent){aL+=aM.offsetLeft+(aM.currentStyle?(parseInt(aM.currentStyle.borderLeftWidth)).NaN0():0);p+=aM.offsetTop+(aM.currentStyle?(parseInt(aM.currentStyle.borderTopWidth)).NaN0():0);aM=aM.offsetParent}aL+=aM.offsetLeft+(aM.currentStyle?(parseInt(aM.currentStyle.borderLeftWidth)).NaN0():0);p+=aM.offsetTop+(aM.currentStyle?(parseInt(aM.currentStyle.borderTopWidth)).NaN0():0);return{x:aL,y:p}}ae.getPosition=J;var ab=0;function o(){return ab++}ae.gensym=o;function K(aL,aN){var p=new Array(aL.length);for(var aM=0;aM<aL.length;aM++){p[aM]=aN(aL[aM])}return p}ae.map=K;function c(aL,aN){var p=[];for(var aM=0;aM<aL.length;aM++){p=p.concat(aN(aL[aM]))}return p}function n(aL,aN){var p=new Array(aL.length);for(var aM=0;aM<aL.length;aM++){p[aM]=aN(aL[aM],aM)}return p}ae.mapi=n;function w(aL,p,aN){for(var aM=0;aM<aL.length;aM++){p=aN(aL[aM],p)}return p}ae.fold=w;function ar(aN,aL){var p={};for(var aM in aN){p[aM]=aN[aM]}for(var aM in aL){p[aM]=aL[aM]}return p}ae.augment=ar;function R(aO,aM,aL){var p={};for(var aN in aO){p[aN]=aO[aN]}p[aM]=aL;return p}ae.assoc_cons=R;function aj(aL,p){return aL.concat([p])}ae.cons=aj;function X(aL,p){return aL.concat(p)}ae.append=X;function M(aN,aL){var aM=[];for(var p=0;p<aN.length;p++){aM.push([aN[p],aL[p]])}return aM}ae.array_join=M;function q(aM,aL){for(var p=0;p<aM.length;p++){if(aM[p]===aL){return aM.slice(0,p).concat(aM.slice(p+1))}}return aM}ae.removeq=q;function y(aM,aL){for(var p=0;p<aM.length;p++){if(aL(aM[p])){return aM.slice(0,p).concat(aM.slice(p+1))}}return aM}ae.removef=y;function S(aM,aL){for(var p=0;p<aM.length;p++){if(aL(aM[p])){return aM.slice(0,p).concat(S(aM.slice(p+1),aL))}}return aM}ae.filter=S;function aG(aM,aL){var aN={};for(var p in aM){if(p!=aL){aN[p]=aM[p]}}return aN}ae.without=aG;function l(aL,p){for(var aM=0;aM<aL.length;aM++){if(aL[aM]===p){return true}}return false}ae.memberq=l;function aq(aL,p){for(var aM=0;aM<aL.length;aM++){if(aL[aM]==p){return true}}return false}ae.member=aq;function Q(p){return p[0]}ae.head=Q;function W(p){return p.slice(1,p.length)}ae.tail=W;function aA(aL){var p=[aL];for(var aM=aL.firstChild;aM!=null;aM=aM.nextSibling){p.push(aA(aM))}return p}ae.node_to_tree=aA;function j(p){var aL=[p.node];if(p.node.jsworldOpaque==true){return aL}for(var aM=0;aM<p.children.length;aM++){aL=aL.concat(j(p.children[aM]))}return aL}function aC(aL,p){return(aL&&p&&aL===p)}function e(aL,p){return !aC(aL,p)}function aa(p){var aL=[];if(p.node.jsworldOpaque==true){return[]}for(var aM=0;aM<p.children.length;aM++){aL.push({relation:"parent",parent:p.node,child:p.children[aM].node})}for(var aM=0;aM<p.children.length-1;aM++){aL.push({relation:"neighbor",left:p.children[aM].node,right:p.children[aM+1].node})}for(var aM=0;aM<p.children.length;aM++){aL=aL.concat(aa(p.children[aM]))}return aL}function aw(p,aL){p.appendChild(aL)}function ai(aL,aU,aO){for(var aX=0;aX<aO.length;aX++){if(aO[aX].relation=="parent"){var aR=aO[aX].parent,aP=aO[aX].child;if(e(aP.parentNode,aR)){aw(aR,aP)}else{}}}for(;;){var aZ=false;for(var aX=0;aX<aO.length;aX++){if(aO[aX].relation=="neighbor"){var aN=aO[aX].left,a0=aO[aX].right;if(e(aN.nextSibling,a0)){aN.parentNode.insertBefore(aN,a0);aZ=true}}}if(!aZ){break}}var aQ;function aM(a4,a3){var a2=a4.compareDocumentPosition(a3);if(a2&a4.DOCUMENT_POSITION_CONTAINED_BY){return 1}if(a2&a4.DOCUMENT_POSITION_CONTAINS){return -1}if(a2&a4.DOCUMENT_POSITION_FOLLOWING){return -1}if(a2&a4.DOCUMENT_POSITION_PRECEDING){return 1}return 0}try{aQ=aU.concat(aL).sort(aM)}catch(aY){aQ=null}var aV=aL,aW=aL.parentNode;while(aV!=aW){for(;;){if(aV.firstChild==null||aV.jsworldOpaque==true){break}aV=aV.firstChild}while(aV!=aW){var aT=aV.nextSibling,aR=aV.parentNode;if(aV.jsworldOpaque==true){}else{var aS=false;var p=undefined;if(aQ!=null){while(aQ.length>0&&aM(aV,aQ[0])>=0){var a1=aQ.shift();if(aC(a1,aV)){aS=true;p=a1;break}}}else{for(var aX=0;aX<aU.length;aX++){if(aC(aU[aX],aV)){aS=true;p=aU[aX];break}}}if(!aS){while(aV.firstChild!=null){aw(aV.parentNode,aV.firstChild)}aT=aV.nextSibling;aV.parentNode.removeChild(aV)}else{ak(aV,p)}}if(aT==null){aV=aR}else{aV=aT;break}}}ad(aU)}function ak(aL,p){}function B(p){return p.replace(/\-(.)/g,function(aL,aM){return aM.toUpperCase()})}function au(aL,aM){for(var p=0;p<aM.length;p++){aL.style[B(aM[p].attrib)]=aM[p].values.join(" ")}}function k(aL,p){if(p.id.match(/^\./)){return("class" in aL&&aq(aL["class"].split(/\s+/),p.id.substring(1)))}else{return("id" in aL&&aL.id==p.id)}}function aI(p,aN){for(var aM=0;aM<p.length;aM++){b(p[aM])}for(var aM=0;aM<aN.length;aM++){if("id" in aN[aM]){for(var aL=0;aL<p.length;aL++){if(k(p[aL],aN[aM])){au(p[aL],aN[aM].attribs)}}}else{au(aN[aM].node,aN[aM].attribs)}}}var b=function(p){if("style" in p){p.style.cssText=""}};function ad(p){for(var aL=0;aL<p.length;aL++){if(p[aL].onWorldChange){p[aL].onWorldChange(ax)}}}function A(aO,p,aQ,aN,aP){if(p instanceof L){var aL=D(aN(aO));var aM=j(aL);aI(aM,F(aP(aO)));ai(aQ,aM,aa(aL));return}else{aH(function(){var aW=aN(p);var aS=aN(aO);var aR=aP(p);var aT=aP(aO);var aU=D(aS);var aV=j(aU);if(aW!==aS){aI(aV,F(aT));ai(aQ,aV,aa(aU))}else{if(aR!==aT){aI(aV,F(aT))}}})}}function aH(aL){var p;if(aF()){p=av();aL();p.restore()}else{aL()}}function C(){this.focused=f;this.selectionStart=f.selectionStart;this.selectionEnd=f.selectionEnd}C.prototype.restore=function(){if(this.focused.parentNode){this.focused.selectionStart=this.selectionStart;this.focused.selectionEnd=this.selectionEnd;this.focused.focus()}else{if(this.focused.id){var p=document.getElementById(this.focused.id);if(p){p.selectionStart=this.selectionStart;p.selectionEnd=this.selectionEnd;p.focus()}}}};function aF(){return f!=undefined}function av(){return new C()}function I(aN,aL,aM,p,aO){this.top=aN;this.world=aL;this.handlers=p;this.handlerCreators=aM;this.attribs=aO}I.prototype.restart=function(){P(this.top,this.world,this.handlerCreators,this.attribs)};I.prototype.pause=function(){for(var p=0;p<this.handlers.length;p++){if(this.handlers[p] instanceof V){}else{this.handlers[p].onUnregister(top)}}};function P(aS,aP,aN,p){r();var aL=K(aN,function(aU){return aU()});if(ap.length>0){ap[ap.length-1].pause()}var aR=new I(aS,aP,aN,aL,p);ap.push(aR);function aT(aU,aV){aR.world=aU}G(aT);var aO=new V(function(aU){return false},function(aU){});for(var aM=0;aM<aL.length;aM++){if(aL[aM] instanceof V){aO=aL[aM]}else{aL[aM].onRegister(aS)}}function aQ(aV,aX){if(aO.test(aV)){aO.receiver(ax);var aU=ap.pop();if(aU){aU.pause()}if(ap.length>0){var aW=ap.pop();aW.restart()}}}G(aQ);aE(aS,p);N(function(aU){return aP})}ae.big_bang=P;function af(p,aL){return function(){var aM={watchId:-1,onRegister:function(aN){aM.watchId=setInterval(function(){N(aL)},p)},onUnregister:function(aN){clearInterval(aM.watchId)}};return aM}}ae.on_tick=af;function s(aM,aL){function p(aN){var aO=aM(aN);t(aO,aO);return aO}return function(){var aN={_top:null,_listener:function(aO,aP){A(aO,aP,aN._top,p,aL)},onRegister:function(aO){aN._top=aO;G(aN._listener)},onUnregister:function(aO){al(aN._listener)}};return aN}}ae.on_draw=s;function V(aL,p){this.test=aL;this.receiver=p}function an(aL,p){return function(){if(p==undefined){p=function(aM){}}return new V(aL,p)}}ae.stop_when=an;function x(aL){var p=function(aN,aM){aL(aN)};return function(){return{onRegister:function(aM){G(p)},onUnregister:function(aM){al(p)}}}}ae.on_world_change=x;function T(aM,p,aL){if(aM.addEventListener){aM.addEventListener(p,aL,false)}else{aM.attachEvent("on"+p,aL,false)}}function aB(aL,p,aM){T(aL,p,function(aN){N(function(aO){return aM(aO,aN)})})}function ao(aL,p,aM){T(aL,p,function(aN){setTimeout(function(){N(function(aO){return aM(aO,aN)})},0)})}function u(p){T(p,"focus",function(aL){f=p});T(p,"blur",function(aL){f=undefined});return p}function D(p){if(p.length==undefined){return{node:p,children:[]}}else{return{node:p[0],children:K(p.slice(1),D)}}}function ag(p){return{attrib:p[0],values:p.slice(1)}}function m(p){var aL=K(p.slice(1),ag);if(typeof p[0]=="string"){return[{id:p[0],attribs:aL}]}else{if("length" in p[0]){return K(p[0],function(aM){return{id:aM,attribs:aL}})}else{return[{node:p[0],attribs:aL}]}}}function F(p){return c(p,m)}function H(p){return(p.nodeType==Node.TEXT_NODE)}function ah(p){return(p.nodeType==Node.ELEMENT_NODE)}var i=function(p,aL){throw new aD(plt.Kernel.format("Expected a non-empty array, received ~s within ~s",[p,aL]),p)};function t(p,aM){if(!p instanceof Array){i(p,aM)}if(p.length==0){i(p,aM)}if(H(p[0])){if(p.length>1){throw new aD(plt.Kernel.format("Text node ~s can not have children",[p]),p)}}else{if(ah(p[0])){for(var aL=1;aL<p.length;aL++){t(p[aL],p)}}else{throw new aD(plt.Kernel.format("expected a Text or an Element, received ~s within ~s",[p,aM]),p[0])}}}function aD(aL,p){this.msg=aL;this.elt=p}aD.prototype.toString=function(){return"on-draw: "+this.msg};function aE(p,aL){if(aL){for(a in aL){if(typeof aL[a]=="function"){aB(p,a,aL[a])}else{p[a]=aL[a]}}}return p}function Z(p){return u(aE(document.createElement("p"),p))}ae.p=Z;function E(p){return u(aE(document.createElement("div"),p))}ae.div=E;function h(p,aL){var aM=document.createElement("button");aB(aM,"click",p);return u(aE(aM,aL))}ae.button=h;var O=function(p){if(p.preventDefault){p.preventDefault()}else{p.returnValue=false}};var am=function(p){if(p.stopPropagation){p.stopPropagation()}else{p.cancelBubble=true}};var v=function(p){T(p,"click",function(aL){am(aL)});return p};function aJ(aL,aQ,aP){var aR=document.createElement("input");aR.type=aL;function aO(aS,aT){return aQ(aS,aR.value)}ao(aR,"keypress",aO);var p=1000;var aN=aR.value;var aM=setInterval(function(){if(!aR.parentNode){clearInterval(aM);return}if(aN!=aR.value){aN=aR.value;N(function(aS){return aQ(aS,aR.value)})}},p);return v(u(aE(aR,aP)))}ae.input=aJ;function d(aM,aO,aN){var aP=document.createElement("input");aP.type="text";var aL=undefined;function p(aQ,aR){return aO(aQ,aP.value)}aB(aP,"keypress",p);return v(u(aE(aP,aN)))}function at(p,aL){return u(aE(document.createTextNode(p),aL))}ae.text=at;function az(aN,aL,aM){var aO=document.createElement("select");for(var p=0;p<aL.length;p++){aO.add(U({value:aL[p]}),null)}aB(aO,"change",aM);return u(aE(aO,aN))}ae.select=az;function U(aL){var p=document.createElement("option");p.jsworldOpaque=true;p.text=aL.value;p.value=aL.value;return aE(p,aL)}function g(p){return u(aE(document.createElement("textarea"),p))}ae.textarea=g;function ay(p){return u(aE(document.createElement("h1"),p))}ae.h1=ay;function aK(p){return u(aE(document.createElement("canvas"),p))}ae.canvas=aK;function ac(aL,p){var aM=document.createElement("img");aM.src=aL;return u(aE(aM,p))}ae.img=ac;function z(p,aL){return u(aE(p,aL))}ae.raw_node=z})();if(typeof(plt)=="undefined"){plt={}}plt.world=plt.world||{};plt.world.MobyJsworld={};(function(){var e=plt.world.MobyJsworld;var o=plt.Jsworld;var g=plt.Kernel.MobyTypeError;var j=function(r){return typeof(r)=="function"};var l=function(s){var t=s;if(plt.Kernel.empty_question_(t)){return[]}else{if(plt.Kernel.pair_question_(t)){var r=[];while(!t.isEmpty()){r.push(l(t.first()));t=t.rest()}return r}else{return s}}};var h=function(s){var r={};while(!s.isEmpty()){var t=s.first().first();var u=s.first().rest().first();r[t]=u;s=s.rest()}return r};var q=function(){if(window.document.getElementById("jsworld-div")!=undefined){return window}var r=window.open("big-bang.html","big-bang");if(r==null){throw new Error("Error: Not allowed to create a new window.")}return r};e.makeToplevelNode=function(){return q().document.getElementById("jsworld-div")};var f=function(r){return(r instanceof plt.types.Cons)||(r instanceof plt.types.Empty)};e.printWorldHook=function(t,s){var r;if(s.lastChild==null){r=plt.Kernel.toDomNode(t);s.appendChild(r)}else{r=plt.Kernel.toDomNode(t);s.replaceChild(r,s.lastChild)}};var i=function(s){var r;if(s.target){r=s.target}else{if(s.srcElement){r=s.srcElement}}if(r.nodeType==3){r=r.parentNode}return r};var p=function(r){return typeof(r.nodeType)!="undefined"};var d=function(r,w,t){if(plt.Kernel.pair_question_(r)){var s=plt.Kernel.first(r);var v=plt.Kernel.rest(r);if(!p(s)){throw new g(plt.Kernel.format("on-draw: expected a dom-element, but received ~s instead, the first element within ~s",[s,w]))}if(s.nodeType==Node.TEXT_NODE&&!plt.Kernel.empty_question_(v)){throw new g(plt.Kernel.format("on-draw: the text node ~s must not have children.  It has ~s",[s,v]))}var u=2;while(!plt.Kernel.empty_question_(v)){d(plt.Kernel.first(v),r,u);v=plt.Kernel.rest(v);u++}}else{throw new g(plt.Kernel.format("on-draw: expected a dom-s-expression, but received ~s instead~a",[r,(t!=undefined?plt.Kernel.format(", the ~a element within ~s.",[plt.Kernel.ordinalize(t),w]):".")]))}};var k=function(t,r,s){plt.Kernel.attachEvent(t,r,s)};var m=function(r){if(r.preventDefault){r.preventDefault()}else{r.returnValue=false}};var n=function(r){if(r.stopPropagation){r.stopPropagation()}else{r.cancelBubble=true}};e.bigBang=function(A,v){var s=plt.types.Empty.EMPTY;plt.Kernel.arrayEach(v,function(E,F){plt.Kernel.check(E,function(G){return j(G)||f(G)},"js-big-bang","handler or attribute list",F+2)});var B=e.makeToplevelNode();B.tabIndex=0;k(B,"click",function(E){m(E);n(E);return false},false);var u=new plt.world.config.WorldConfig();for(var z=0;z<v.length;z++){if(f(v[z])){s=v[z]}else{if(j(v[z])){u=v[z](u)}}}u=u.updateAll({changeWorld:e.updateWorld,shutdownWorld:e.shutdownWorld});plt.world.config.CONFIG=u;var t=[];var C;if(u.lookup("onDraw")){wrappedRedraw=function(F){var G=u.lookup("onDraw")([F]);plt.Kernel.setLastLoc(undefined);d(G,G,undefined);var E=[B,l(G)];return E};C=function(F){var E=l(u.lookup("onDrawCss")([F]));plt.Kernel.setLastLoc(undefined);return E};t.push(o.on_draw(wrappedRedraw,C))}else{if(u.lookup("onRedraw")){var y=undefined;var r=undefined;wrappedRedraw=function(G){var I=u.lookup("onRedraw")([G]);if(I!=null&&I!=undefined&&I instanceof plt.world.Kernel.BaseImage){var H=plt.world.Kernel.imageWidth(I).toInteger();var E=plt.world.Kernel.imageHeight(I).toInteger();if(!y){y=plt.world.Kernel.makeCanvas(H,E);y.jsworldOpaque=true;r=o.node_to_tree(y)}y.width=H;y.height=E;var F=y.getContext("2d");I.render(F,0,0);return[B,r]}else{return[B,o.node_to_tree(plt.Kernel.toDomNode(I))]}};C=function(E){return[[y,["width",y.width+"px"],["height",y.height+"px"]]]};t.push(o.on_draw(wrappedRedraw,C))}else{t.push(o.on_world_change(function(E){e.printWorldHook(E,B)}))}}if(u.lookup("tickDelay")){var w=function(E){setTimeout(function(){plt.world.stimuli.onTick()},0);return E};var x=u.lookup("tickDelay");t.push(o.on_tick(x,w))}if(u.lookup("stopWhen")){t.push(o.stop_when(function(E){return u.lookup("stopWhen")([E])}))}if(u.lookup("onKey")){k(B,"keydown",function(E){plt.world.stimuli.onKey(E);m(E);n(E);return false});k(B,"keypress",function(E){m(E);n(E);return false});B.focus()}if(u.lookup("initialEffect")){var D=plt.world.Kernel.applyEffect(u.lookup("initialEffect"));for(var z=0;z<D.length;z++){if(u.lookup("stopWhen")&&u.lookup("stopWhen")([A])){break}else{A=D[z](A)}}}return o.big_bang(B,A,t,h(s))};var c=function(t){var r=plt.types.Empty.EMPTY;for(var s=0;s<t.length;s++){r=plt.types.Cons.makeInstance(t[length-s-1],r)}return r};e.updateWorld=function(s){var r=function(t){try{return s(t)}catch(u){plt.Kernel.reportError(u);plt.Kernel.reportError("Shutting down jsworld computations");plt.world.stimuli.onShutdown();return t}};o.change_world(r)};e.shutdownWorld=function(){o.shutdown()};var b=function(r){if(r.length==0){return[]}if(r.length==1){return h(r[0])}else{throw new Error()}};e.p=function(r){var t=b(r);var s=o.p(t);s.toWrittenString=function(u){return plt.Kernel.format("(js-p)",[])};s.toDisplayedString=s.toWrittenString;s.toDomNode=function(u){return s};return s};e.div=function(r){var t=b(r);var s=o.div(t);s.toWrittenString=function(u){return plt.Kernel.format("(js-div)",[])};s.toDisplayedString=s.toWrittenString;s.toDomNode=function(u){return s};return s};e.button=function(u,r){var t=function(v){return make_dash_effect_colon_none()};var s=e.buttonStar(u,t,r);s.toWrittenString=function(v){return"(js-button ...)"};s.toDisplayedString=s.toWrittenString;s.toDomNode=function(v){return s};return s};e.buttonStar=function(r,v,t){var w=b(t);var s=function(z,x){try{var y=v([z]);var B=r([z]);plt.world.Kernel.applyEffect(y);return B}catch(A){plt.Kernel.reportError(A);return z}};var u=o.button(s,w);u.toWrittenString=function(x){return"(js-button ...)"};u.toDisplayedString=u.toWrittenString;u.toDomNode=function(x){return u};return u};e.input=function(s,v,r){plt.Kernel.check(s,plt.Kernel.isString,"js-input","string",1);plt.Kernel.check(v,plt.Kernel.isFunction,"js-input","(world string -> world)",1);var u=b(r);var t=o.input(s,function(x,y){return v([x,y])},u);t.toWrittenString=function(w){return"(js-input ...)"};t.toDisplayedString=t.toWrittenString;t.toDomNode=function(w){return t};return t};e.get_dash_input_dash_value=function(r){plt.Kernel.check(r,function(s){return(plt.Kernel.isString(r)||r.nodeType==Node.ELEMENT_NODE)},"get-input-value","dom-node",1);if(plt.Kernel.isString(r)){return plt.types.String.makeInstance(document.getElementById(r).value||"")}else{return plt.types.String.makeInstance(r.value||"")}};e.img=function(u,r){plt.Kernel.check(u,plt.Kernel.isString,"js-img","string",1);var t=b(r);var s=o.img(u,t);s.toWrittenString=function(v){return"(js-img ...)"};s.toDisplayedString=s.toWrittenString;s.toDomNode=function(v){return s};return s};e.text=function(r){plt.Kernel.check(r,plt.Kernel.isString,"js-text","string",1);var t=o.text(r,[]);t.toWrittenString=function(s){return"(js-text ...)"};t.toDisplayedString=t.toWrittenString;t.toDomNode=function(s){return t};return t};e.select=function(t,w,s){plt.Kernel.checkListof(t,plt.Kernel.isString,"js-select","string",1);plt.Kernel.check(w,plt.Kernel.isFunction,"js-select","function",2);var v=b(s);var r=l(t);var u=o.select(v,r,function(x,y){return w([x,u.value])});u.toWrittenString=function(x){return"(js-select ...)"};u.toDisplayedString=u.toWrittenString;u.toDomNode=function(x){return u};return u};e.rawNode=function(r,s){var u=b(s);var t=o.raw_node(plt.Kernel.toDomNode(r),u);t.toWrittenString=function(v){return"(js-raw-node ...)"};t.toDisplayedString=t.toWrittenString;t.toDomNode=function(v){return t};return t}})();if(typeof(plt)=="undefined"){plt={}}plt.world=plt.world||{};(function(){var c={};plt.world.stimuli=c;var g=function(m,j,h){var l=[];e(function(i){var n=[i].concat(h);if(m){var o=m(n);l=b(o)}if(j){return j(n)}else{return i}});for(var k=0;k<l.length;k++){e(l[k])}};c.onTilt=function(k,l,j){var i=d("onTilt");var h=d("onTiltEffect");g(h,i,[f(k),f(l),f(j)])};c.onAcceleration=function(h,l,k){var i=d("onAcceleration");var j=d("onAccelerationEffect");g(j,i,[f(h),f(l),f(k)])};c.onShake=function(){var i=d("onShake");var h=d("onShakeEffect");g(h,i,[])};c.onLocation=function(k,h){var i=d("onLocationChange");var j=d("onLocationChangeEffect");g(j,i,[f(k),f(h)])};c.onKey=function(j){var k=function(o){var m=o.charCode||o.keyCode;var n;if(m==37){n="left"}else{if(m==38){n="up"}else{if(m==39){n="right"}else{if(m==40){n="down"}else{if(m==32){n="space"}else{if(m==13){n="enter"}else{n=String.fromCharCode(m)}}}}}}return n};var i=k(j);var h=d("onKey");var l=d("onKeyEffect");g(l,h,[i])};c.onTick=function(){var i=d("onTick");var h=d("onTickEffect");g(h,i,[])};c.onAnnounce=function(j,m){var l=plt.types.Empty.EMPTY;for(var k=0;k<m.length;k++){l=plt.types.Cons.makeInstance(m[m.length-k-1],l)}var n=d("onAnnounce");var h=d("onAnnounceEffect");g(n,h,[j,l])};c.onShutdown=function(){var h=d("shutdownWorld");if(h){h()}};var f=plt.types.FloatPoint.makeInstance;var d=function(h){return plt.world.config.CONFIG.lookup(h)};var e=function(h){d("changeWorld")(h)};var b=function(h){return plt.world.Kernel.applyEffect(h)}})();var permission_colon_location=function(){plt.Kernel.Struct.call(this,"make-permission:location",[])};permission_colon_location.prototype=new plt.Kernel.Struct();var make_dash_permission_colon_location=function(){return new permission_colon_location()};var permission_colon_location_question_=function(b){return b!=null&&b!=undefined&&b instanceof permission_colon_location};var permission_colon_send_dash_sms=function(){plt.Kernel.Struct.call(this,"make-permission:send-sms",[])};permission_colon_send_dash_sms.prototype=new plt.Kernel.Struct();var make_dash_permission_colon_send_dash_sms=function(){return new permission_colon_send_dash_sms()};var permission_colon_send_dash_sms_question_=function(b){return b!=null&&b!=undefined&&b instanceof permission_colon_send_dash_sms};var permission_colon_receive_dash_sms=function(){plt.Kernel.Struct.call(this,"make-permission:receive-sms",[])};permission_colon_receive_dash_sms.prototype=new plt.Kernel.Struct();var make_dash_permission_colon_receive_dash_sms=function(){return new permission_colon_receive_dash_sms()};var permission_colon_receive_dash_sms_question_=function(b){return b!=null&&b!=undefined&&b instanceof permission_colon_receive_dash_sms};var permission_colon_tilt=function(){plt.Kernel.Struct.call(this,"make-permission:tilt",[])};permission_colon_tilt.prototype=new plt.Kernel.Struct();var make_dash_permission_colon_tilt=function(){return new permission_colon_tilt()};var permission_colon_tilt_question_=function(b){return b!=null&&b!=undefined&&b instanceof permission_colon_tilt};var permission_colon_shake=function(){plt.Kernel.Struct.call(this,"make-permission:shake",[])};permission_colon_shake.prototype=new plt.Kernel.Struct();var make_dash_permission_colon_shake=function(){return new permission_colon_shake()};var permission_colon_shake_question_=function(b){return b!=null&&b!=undefined&&b instanceof permission_colon_shake};var permission_colon_internet=function(){plt.Kernel.Struct.call(this,"make-permission:internet",[])};permission_colon_internet.prototype=new plt.Kernel.Struct();var make_dash_permission_colon_internet=function(){return new permission_colon_internet()};var permission_colon_internet_question_=function(b){return b!=null&&b!=undefined&&b instanceof permission_colon_internet};var permission_colon_telephony=function(){plt.Kernel.Struct.call(this,"make-permission:telephony",[])};permission_colon_telephony.prototype=new plt.Kernel.Struct();var make_dash_permission_colon_telephony=function(){return new permission_colon_telephony()};var permission_colon_telephony_question_=function(b){return b!=null&&b!=undefined&&b instanceof permission_colon_telephony};var permission_colon_wake_dash_lock=function(){plt.Kernel.Struct.call(this,"make-permission:wake-lock",[])};permission_colon_wake_dash_lock.prototype=new plt.Kernel.Struct();var make_dash_permission_colon_wake_dash_lock=function(){return new permission_colon_wake_dash_lock()};var permission_colon_wake_dash_lock_question_=function(b){return b!=null&&b!=undefined&&b instanceof permission_colon_wake_dash_lock};var permission_colon_open_dash_image_dash_url=function(b){plt.Kernel.Struct.call(this,"make-permission:open-image-url",[b]);this.url=b};permission_colon_open_dash_image_dash_url.prototype=new plt.Kernel.Struct();var make_dash_permission_colon_open_dash_image_dash_url=function(b){return new permission_colon_open_dash_image_dash_url(b)};var permission_colon_open_dash_image_dash_url_dash_url=function(b){if(permission_colon_open_dash_image_dash_url_question_(b)){return b.url}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("permission:open-image-url-url: not a permission:open-image-url: ~s",[b]))}};var set_dash_permission_colon_open_dash_image_dash_url_dash_url_bang_=function(c,b){if(permission_colon_open_dash_image_dash_url_question_(c)){c.url=b;c._fields[0]=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_permission_colon_open_dash_image_dash_url_dash_url_bang_: not a permission:open-image-url: ~s",[c]))}};var permission_colon_open_dash_image_dash_url_question_=function(b){return b!=null&&b!=undefined&&b instanceof permission_colon_open_dash_image_dash_url};var permission_colon_universe=function(b){plt.Kernel.Struct.call(this,"make-permission:universe",[b]);this.url=b};permission_colon_universe.prototype=new plt.Kernel.Struct();var make_dash_permission_colon_universe=function(b){return new permission_colon_universe(b)};var permission_colon_universe_dash_url=function(b){if(permission_colon_universe_question_(b)){return b.url}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("permission:universe-url: not a permission:universe: ~s",[b]))}};var set_dash_permission_colon_universe_dash_url_bang_=function(c,b){if(permission_colon_universe_question_(c)){c.url=b;c._fields[0]=b}else{throw new plt.Kernel.MobyRuntimeError(plt.Kernel.format("set_dash_permission_colon_universe_dash_url_bang_: not a permission:universe: ~s",[c]))}};var permission_colon_universe_question_=function(b){return b!=null&&b!=undefined&&b instanceof permission_colon_universe};var permission_question_=function(b){return((plt.Kernel.setLastLoc('offset=554 line=18 span=28 id="permission.ss"')&&permission_colon_location_question_(b))||(plt.Kernel.setLastLoc('offset=589 line=19 span=28 id="permission.ss"')&&permission_colon_send_dash_sms_question_(b))||(plt.Kernel.setLastLoc('offset=624 line=20 span=31 id="permission.ss"')&&permission_colon_receive_dash_sms_question_(b))||(plt.Kernel.setLastLoc('offset=662 line=21 span=24 id="permission.ss"')&&permission_colon_tilt_question_(b))||(plt.Kernel.setLastLoc('offset=693 line=22 span=25 id="permission.ss"')&&permission_colon_shake_question_(b))||(plt.Kernel.setLastLoc('offset=725 line=23 span=28 id="permission.ss"')&&permission_colon_internet_question_(b))||(plt.Kernel.setLastLoc('offset=760 line=24 span=29 id="permission.ss"')&&permission_colon_telephony_question_(b))||(plt.Kernel.setLastLoc('offset=796 line=25 span=29 id="permission.ss"')&&permission_colon_wake_dash_lock_question_(b))||(plt.Kernel.setLastLoc('offset=832 line=26 span=34 id="permission.ss"')&&permission_colon_open_dash_image_dash_url_question_(b))||(plt.Kernel.setLastLoc('offset=873 line=27 span=28 id="permission.ss"')&&permission_colon_universe_question_(b)))};var PERMISSION_colon_LOCATION;var PERMISSION_colon_SEND_dash_SMS;var PERMISSION_colon_RECEIVE_dash_SMS;var PERMISSION_colon_TILT;var PERMISSION_colon_SHAKE;var PERMISSION_colon_INTERNET;var PERMISSION_colon_TELEPHONY;var PERMISSION_colon_WAKE_dash_LOCK;var permission_dash__greaterthan_string=function(b){return((plt.Kernel.setLastLoc('offset=1594 line=45 span=35 id="permission.ss"')&&permission_colon_location_question_(b))?(plt.types.String.makeInstance("PERMISSION:LOCATION")):((plt.Kernel.setLastLoc('offset=1663 line=47 span=35 id="permission.ss"')&&permission_colon_send_dash_sms_question_(b))?(plt.types.String.makeInstance("PERMISSION:SEND-SMS")):((plt.Kernel.setLastLoc('offset=1732 line=49 span=38 id="permission.ss"')&&permission_colon_receive_dash_sms_question_(b))?(plt.types.String.makeInstance("PERMISSION:RECEIVE-SMS")):((plt.Kernel.setLastLoc('offset=1807 line=51 span=31 id="permission.ss"')&&permission_colon_tilt_question_(b))?(plt.types.String.makeInstance("PERMISSION:TILT")):((plt.Kernel.setLastLoc('offset=1868 line=53 span=32 id="permission.ss"')&&permission_colon_shake_question_(b))?(plt.types.String.makeInstance("PERMISSION:SHAKE")):((plt.Kernel.setLastLoc('offset=1931 line=55 span=35 id="permission.ss"')&&permission_colon_internet_question_(b))?(plt.types.String.makeInstance("PERMISSION:INTERNET")):((plt.Kernel.setLastLoc('offset=2000 line=57 span=36 id="permission.ss"')&&permission_colon_telephony_question_(b))?(plt.types.String.makeInstance("PERMISSION:TELEPHONY")):((plt.Kernel.setLastLoc('offset=2071 line=59 span=36 id="permission.ss"')&&permission_colon_wake_dash_lock_question_(b))?(plt.types.String.makeInstance("PERMISSION:WAKE-LOCK")):((plt.Kernel.setLastLoc('offset=2142 line=61 span=41 id="permission.ss"')&&permission_colon_open_dash_image_dash_url_question_(b))?(plt.Kernel.setLastLoc('offset=2189 line=62 span=84 id="permission.ss"')&&plt.Kernel.format((plt.types.String.makeInstance("PERMISSION:OPEN-IMAGE-URL ~a")),[(plt.Kernel.setLastLoc('offset=2228 line=62 span=44 id="permission.ss"')&&permission_colon_open_dash_image_dash_url_dash_url(b))])):((plt.Kernel.setLastLoc('offset=2280 line=63 span=35 id="permission.ss"')&&permission_colon_universe_question_(b))?(plt.Kernel.setLastLoc('offset=2321 line=64 span=72 id="permission.ss"')&&plt.Kernel.format((plt.types.String.makeInstance("PERMISSION:UNIVERSE ~a")),[(plt.Kernel.setLastLoc('offset=2354 line=64 span=38 id="permission.ss"')&&permission_colon_universe_dash_url(b))])):(plt.Kernel.setLastLoc('offset=1583 line=44 span=812 id="permission.ss"')&&plt.Kernel.error((plt.types.Symbol.makeInstance("cond")),(plt.types.String.makeInstance('cond: fell out of cond around "offset=1583 line=44 span=812 id=\\"permission.ss\\""'))))))))))))))};var string_dash__greaterthan_permission=function(b){return((function(){var c=function(e,f){return((plt.Kernel.setLastLoc('offset=2795 line=75 span=78 id="permission.ss"')&&plt.Kernel._greaterthan_((plt.Kernel.setLastLoc('offset=2798 line=75 span=21 id="permission.ss"')&&plt.Kernel.string_dash_length(f)),(plt.Kernel.setLastLoc('offset=2841 line=76 span=31 id="permission.ss"')&&plt.Kernel.string_dash_length(e)),[]))&&(plt.Kernel.setLastLoc('offset=2892 line=77 span=106 id="permission.ss"')&&plt.Kernel.string_equal__question_((plt.Kernel.setLastLoc('offset=2902 line=77 span=51 id="permission.ss"')&&plt.Kernel.substring(f,(plt.types.Rational.makeInstance(0,1)),(plt.Kernel.setLastLoc('offset=2921 line=77 span=31 id="permission.ss"')&&plt.Kernel.string_dash_length(e)))),e,[])))};var d=function(e,g,f){return(plt.Kernel.setLastLoc('offset=3258 line=83 span=183 id="permission.ss"')&&plt.Kernel.apply(f,plt.Kernel.list([(plt.Kernel.setLastLoc('offset=3277 line=83 span=163 id="permission.ss"')&&plt.Kernel.substring(g,(plt.Kernel.setLastLoc('offset=3337 line=84 span=38 id="permission.ss"')&&plt.Kernel.add1((plt.Kernel.setLastLoc('offset=3343 line=84 span=31 id="permission.ss"')&&plt.Kernel.string_dash_length(e)))),(plt.Kernel.setLastLoc('offset=3418 line=85 span=21 id="permission.ss"')&&plt.Kernel.string_dash_length(g))))]),[]))};(function(e){})(plt.Kernel.identity);return((plt.Kernel.setLastLoc('offset=3461 line=87 span=38 id="permission.ss"')&&plt.Kernel.string_equal__question_(b,(plt.types.String.makeInstance("PERMISSION:LOCATION")),[]))?PERMISSION_colon_LOCATION:((plt.Kernel.setLastLoc('offset=3535 line=89 span=38 id="permission.ss"')&&plt.Kernel.string_equal__question_(b,(plt.types.String.makeInstance("PERMISSION:SEND-SMS")),[]))?PERMISSION_colon_SEND_dash_SMS:((plt.Kernel.setLastLoc('offset=3614 line=91 span=41 id="permission.ss"')&&plt.Kernel.string_equal__question_(b,(plt.types.String.makeInstance("PERMISSION:RECEIVE-SMS")),[]))?PERMISSION_colon_RECEIVE_dash_SMS:((plt.Kernel.setLastLoc('offset=3694 line=93 span=34 id="permission.ss"')&&plt.Kernel.string_equal__question_(b,(plt.types.String.makeInstance("PERMISSION:TILT")),[]))?PERMISSION_colon_TILT:((plt.Kernel.setLastLoc('offset=3760 line=95 span=35 id="permission.ss"')&&plt.Kernel.string_equal__question_(b,(plt.types.String.makeInstance("PERMISSION:SHAKE")),[]))?PERMISSION_colon_SHAKE:((plt.Kernel.setLastLoc('offset=3828 line=97 span=38 id="permission.ss"')&&plt.Kernel.string_equal__question_(b,(plt.types.String.makeInstance("PERMISSION:INTERNET")),[]))?PERMISSION_colon_INTERNET:((plt.Kernel.setLastLoc('offset=3902 line=99 span=39 id="permission.ss"')&&plt.Kernel.string_equal__question_(b,(plt.types.String.makeInstance("PERMISSION:TELEPHONY")),[]))?PERMISSION_colon_TELEPHONY:((plt.Kernel.setLastLoc('offset=3978 line=101 span=39 id="permission.ss"')&&plt.Kernel.string_equal__question_(b,(plt.types.String.makeInstance("PERMISSION:WAKE-LOCK")),[]))?PERMISSION_colon_WAKE_dash_LOCK:((plt.Kernel.setLastLoc('offset=4054 line=103 span=52 id="permission.ss"')&&c((plt.types.String.makeInstance("PERMISSION:OPEN-IMAGE-URL")),b))?(plt.Kernel.setLastLoc('offset=4114 line=104 span=89 id="permission.ss"')&&d((plt.types.String.makeInstance("PERMISSION:OPEN-IMAGE-URL")),b,(function(){var e=(function(f){return make_dash_permission_colon_open_dash_image_dash_url(f[0])});e.toWrittenString=function(f){return"<function:make-permission:open-image-url>"};e.toDisplayedString=e.toWrittenString;e.procedureArity=(plt.types.Rational.makeInstance(1,1));return e})())):((plt.Kernel.setLastLoc('offset=4212 line=105 span=46 id="permission.ss"')&&c((plt.types.String.makeInstance("PERMISSION:UNIVERSE")),b))?(plt.Kernel.setLastLoc('offset=4266 line=106 span=77 id="permission.ss"')&&d((plt.types.String.makeInstance("PERMISSION:UNIVERSE")),b,(function(){var e=(function(f){return make_dash_permission_colon_universe(f[0])});e.toWrittenString=function(f){return"<function:make-permission:universe>"};e.toDisplayedString=e.toWrittenString;e.procedureArity=(plt.types.Rational.makeInstance(1,1));return e})())):(plt.Kernel.setLastLoc('offset=3448 line=86 span=897 id="permission.ss"')&&plt.Kernel.error((plt.types.Symbol.makeInstance("cond")),(plt.types.String.makeInstance('cond: fell out of cond around "offset=3448 line=86 span=897 id=\\"permission.ss\\""'))))))))))))))})())};var permission_dash__greaterthan_android_dash_permissions=function(b){return((plt.Kernel.setLastLoc('offset=4584 line=115 span=35 id="permission.ss"')&&permission_colon_location_question_(b))?(plt.Kernel.setLastLoc('offset=4625 line=116 span=103 id="permission.ss"')&&plt.Kernel.list([(plt.types.String.makeInstance("android.permission.ACCESS_COARSE_LOCATION")),(plt.types.String.makeInstance("android.permission.ACCESS_FINE_LOCATION"))])):((plt.Kernel.setLastLoc('offset=4735 line=118 span=35 id="permission.ss"')&&permission_colon_send_dash_sms_question_(b))?(plt.Kernel.setLastLoc('offset=4776 line=119 span=36 id="permission.ss"')&&plt.Kernel.list([(plt.types.String.makeInstance("android.permission.SEND_SMS"))])):((plt.Kernel.setLastLoc('offset=4819 line=120 span=38 id="permission.ss"')&&permission_colon_receive_dash_sms_question_(b))?(plt.Kernel.setLastLoc('offset=4863 line=121 span=39 id="permission.ss"')&&plt.Kernel.list([(plt.types.String.makeInstance("android.permission.RECEIVE_SMS"))])):((plt.Kernel.setLastLoc('offset=4909 line=122 span=31 id="permission.ss"')&&permission_colon_tilt_question_(b))?(plt.Kernel.setLastLoc('offset=4946 line=123 span=6 id="permission.ss"')&&plt.Kernel.list([])):((plt.Kernel.setLastLoc('offset=4959 line=124 span=32 id="permission.ss"')&&permission_colon_shake_question_(b))?(plt.Kernel.setLastLoc('offset=4997 line=125 span=6 id="permission.ss"')&&plt.Kernel.list([])):((plt.Kernel.setLastLoc('offset=5010 line=126 span=35 id="permission.ss"')&&permission_colon_internet_question_(b))?(plt.Kernel.setLastLoc('offset=5051 line=127 span=36 id="permission.ss"')&&plt.Kernel.list([(plt.types.String.makeInstance("android.permission.INTERNET"))])):((plt.Kernel.setLastLoc('offset=5094 line=128 span=36 id="permission.ss"')&&permission_colon_telephony_question_(b))?(plt.Kernel.setLastLoc('offset=5136 line=129 span=49 id="permission.ss"')&&plt.Kernel.list([(plt.types.String.makeInstance("android.permission.ACCESS_COARSE_UPDATES"))])):((plt.Kernel.setLastLoc('offset=5192 line=130 span=36 id="permission.ss"')&&permission_colon_wake_dash_lock_question_(b))?(plt.Kernel.setLastLoc('offset=5234 line=131 span=37 id="permission.ss"')&&plt.Kernel.list([(plt.types.String.makeInstance("android.permission.WAKE_LOCK"))])):((plt.Kernel.setLastLoc('offset=5278 line=132 span=41 id="permission.ss"')&&permission_colon_open_dash_image_dash_url_question_(b))?(plt.Kernel.setLastLoc('offset=5325 line=133 span=6 id="permission.ss"')&&plt.Kernel.list([])):((plt.Kernel.setLastLoc('offset=5338 line=134 span=35 id="permission.ss"')&&permission_colon_universe_question_(b))?(plt.Kernel.setLastLoc('offset=5379 line=135 span=36 id="permission.ss"')&&plt.Kernel.list([(plt.types.String.makeInstance("android.permission.INTERNET"))])):(plt.Kernel.setLastLoc('offset=4573 line=114 span=844 id="permission.ss"')&&plt.Kernel.error((plt.types.Symbol.makeInstance("cond")),(plt.types.String.makeInstance('cond: fell out of cond around "offset=4573 line=114 span=844 id=\\"permission.ss\\""'))))))))))))))};(function(){((function(b){PERMISSION_colon_LOCATION=(plt.Kernel.setLastLoc('offset=934 line=30 span=26 id="permission.ss"')&&make_dash_permission_colon_location());PERMISSION_colon_SEND_dash_SMS=(plt.Kernel.setLastLoc('offset=990 line=31 span=26 id="permission.ss"')&&make_dash_permission_colon_send_dash_sms());PERMISSION_colon_RECEIVE_dash_SMS=(plt.Kernel.setLastLoc('offset=1049 line=32 span=26 id="permission.ss"')&&make_dash_permission_colon_send_dash_sms());PERMISSION_colon_TILT=(plt.Kernel.setLastLoc('offset=1101 line=33 span=22 id="permission.ss"')&&make_dash_permission_colon_tilt());PERMISSION_colon_SHAKE=(plt.Kernel.setLastLoc('offset=1150 line=34 span=23 id="permission.ss"')&&make_dash_permission_colon_shake());PERMISSION_colon_INTERNET=(plt.Kernel.setLastLoc('offset=1203 line=35 span=26 id="permission.ss"')&&make_dash_permission_colon_internet());PERMISSION_colon_TELEPHONY=(plt.Kernel.setLastLoc('offset=1260 line=36 span=27 id="permission.ss"')&&make_dash_permission_colon_telephony());PERMISSION_colon_WAKE_dash_LOCK=(plt.Kernel.setLastLoc('offset=1318 line=37 span=27 id="permission.ss"')&&make_dash_permission_colon_wake_dash_lock())}))(arguments[0]||plt.Kernel.identity)})();if(typeof(plt)=="undefined"){plt={}}(function(){plt.permission={};var j=function(l){return permission_colon_location_question_(l)};var g=function(l){return permission_colon_send_dash_sms_question_(l)};var k=function(l){return permission_colon_receive_dash_sms_question_(l)};var b=function(l){return permission_colon_tilt_question_(l)};var c=function(l){return permission_colon_shake_question_(l)};var i=function(l){return permission_colon_internet_question_(l)};var d=function(l){return permission_colon_telephony_question_(l)};var e=function(l){return permission_colon_wake_dash_lock_question_(l)};var f=function(l){return permission_colon_open_dash_image_dash_url_question_(l)};var h=function(l){return permission_colon_universe_question_(l)};plt.permission.startupAllPermissions=function(l,m){if(l.length>0){var n=l.pop();plt.permission._runStartupCode(n,l,m)}else{m()}};plt.permission._runStartupCode=function(l,q,n){var m=plt.platform.Platform.getInstance();var s=plt.world.stimuli;var o=function(){setTimeout(function(){plt.permission.startupAllPermissions(q,n)},0)};if(j(l)){m.getLocationService().startService();m.getLocationService().addLocationChangeListener(function(v,p){s.onLocation(v,p)});o()}else{if(g(l)){o()}else{if(k(l)){o()}else{if(b(l)){m.getTiltService().startService();m.getTiltService().addOrientationChangeListener(function(v,w,p){s.onTilt(v,w,p)});m.getTiltService().addAccelerationChangeListener(function(p,w,v){s.onAcceleration(p,w,v)});o()}else{if(c(l)){m.getShakeService().startService();m.getShakeService().addListener(function(){s.onShake()});o()}else{if(i(l)){o()}else{if(d(l)){o()}else{if(e(l)){o()}else{if(f(l)){var u=permission_colon_open_dash_image_dash_url_dash_url(l);var r=new Image();var t=function(){plt.Kernel.detachEvent(r,"load",t);plt.world.Kernel.FileImage.installInstance(u,r);o()};plt.Kernel.attachEvent(r,"load",t);plt.Kernel.attachEvent(r,"error",function(){plt.world.Kernel.FileImage.installBrokenImage(u);o()});r.src=u}else{o()}}}}}}}}}};plt.permission.runShutdownCode=function(m){var l=plt.platform.Platform.getInstance();if(j(m)){l.getLocationService().shutdownService()}if(g(m)){}if(k(m)){}if(b(m)){l.getTiltService().shutdownService()}if(c(m)){}if(i(m)){}if(d(m)){}if(e(m)){}if(f(m)){}}})();